id,title,state,created_at,updated_at,closed_at,body,user,url
MDU6SXNzdWUxMjMxNzcxNjQ=,overlap_peak_detection,OPEN,2015-12-20T18:47:15Z,2015-12-20T18:47:15Z,,"## Idea for overlapped peak detection
# key question I am going to ask from R-Studio
1. I gave the peak regions information to let know R that this my input; I also give target reference gene' regions to IntervalTree;

Question 1: ask R to bring me back overlapped peak regions based on my input peak regions from target gene' regions
Question 2: once R report overlapped regions of the peak; I further ask to R which peak overlapped, which chromosome they are come from,
            what's these overlapped peak' pvalue; 

Question 3: I am going to ask R-studio to collect all peak regions and place them in IntervalTree; How can I tell to R that iteratively             select the ranges of peak one by one in target_gene, compare the region with source peak resions, and further evaluate where             is the overlapped regions occured, which peak are they ? what's their p-value significant; Do we have sufficient overlapped              regions that asked by user.

Question 4: how R dynamically look up the set of regions and , to find matched overlapped region with source peak region. 
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/1
MDU6SXNzdWUxMjMxNzcyOTE=,MSPC Algorithmic approach Final version,OPEN,2015-12-20T18:50:15Z,2015-12-20T18:50:15Z,,"## MSPC project

@ author: Julaiti Shayiding

@ Description : Project IDEA    <Revised version>

step 1: read the peak from the source replicate genes; and save it in data.frame tabular data objects.
step 2: convert from score to p-value; so make access to each peak with p-value.
step 3: Initial peak classification; make to access to source replicate genes; and grab the peak with its p-value; 
        then use function call ""initial peak classification "" to classify the peak element to stringent (or weak ) peak;

step 4: Before to find out overlapped peak from the reference genes, make sure all peak regions from the source and reference gene
        are placed on the IntervalTree; To do this, I can import ""IRanges"" library;

```
    IntervalTree function only accept peak regions, so I need to design algorithm how to get detailed overlapped peak information
    for instance, when function report the overlapped regions, I need to make access that peak element with its p-value;
```

step 5: stick on this: function only grab one peak and pass it to peak classification, overlapped peak detection function; 
        so if peak is classified as stringent peak, then pass it to the next functin to find out overlapped regions; 
        if there is no overlapped peak found in reference gene; 
        then peak is discarded and generate output bed files for stringent or weak peak bed file if the peak were classified as stringent or weak peak;
        additinally generate output bed files for discarded peak (discarded peak could be stringent peak, or weak peak)

step 6: based on the result of step 5, function can also report how many overlapped region are found; then further check Is the number of 
        total overlapped regions are enough to proceed Fisher' exact test; If function report sufficient number of overlapped peak for doing 
        Fisher' test, make sure I can access the information of the overlapped peak with its p-value; (look up fisher' test formula)

step 7: based on the result of step 6, If fisher' exact test can pass, make sure the function can generate outuput bed files for this peak;
        so output bed files are generated for stringent_confirmed, weak_discarded peak, and so on;

step 8: when process of step 7 is done; readPeak function could grab next peak from source gene replicate,
        and repeat the process in step 3, step 4, step 5, step 6, step 7; Do the same things

step 9: for each individual function, I must give test code for how to run that specific function and make sure that result is correct

step 10: Test all function I have implemented and fix the bug if there is any
step 11: write initial documentation for each function and parameters that make sure user can understand the document and easy to use the MSPC package

step 12: attempt to deliever the MSPC package to the Bioconductor reposotory; keep contact with them and refine the code

Step 13: close up the project of MSPC package development;
#### Expected time to refine all MSPC projects: 1 month
### Expected delievry date : 2016-1-10
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/2
MDU6SXNzdWUxMjMxNzc0MjE=,MSPC-  how to imporve the R code,OPEN,2015-12-20T18:52:42Z,2015-12-20T18:52:42Z,,"## MSPC project

summary of MSPC project:

step 1: load gene replicate in R is done; read all peak fron source gene replicate is done; peak classification for each peak is done;
## How to improve and refine the R function
1. for each gene replicate, split the whole sequence to each chromosome; make R code can access the peak by chromosome
## possible project delivery attempt

1st attempt: Dec-21,2015
2nd attemp:  Dec-23, 2015

possible close date for MSPC package: Dec-30, 2015
possible delievry to Bioconductor repository: Dec-31, 2015
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/3
MDU6SXNzdWUxMjMxNzg3NDk=,loadReplicate_to_improve.R,OPEN,2015-12-20T19:28:10Z,2015-12-25T16:07:55Z,,"library(rtracklayer)

loadReplicate <- function(bedFile, ...) {
  if (!file.exists(bedFile)) {
    stop(""Can't find BED file: "",bedFile);
  }
  Replicate<-import.bed(bedFile)
  Replicate<-as(Replicate, ""data.frame"")
  Replicate<-Replicate[,1:7]
  names(Replicate) <- c(""chrom"",""chromStart"",""chromEnd"",""witdth"", ""strand"", ""name"", ""score"");
  # Check Replicate columns.
  for (col in c(""chrom"",""chromStart"",""chromEnd"", ""witdth"", ""strand"",""name"", ""score"")) {
    if (!col %in% names(Replicate)) {
      stop(sprintf(""error in peaks data frame: no column named '%s'"",col));
    }
  }
  return(Replicate)
}
###### ########### manipulate data.frame tabular object

manipulate_df<-function(Replicate, ...){
  if(missing(Replicate$witdth && Replicate$strand)){
    message(""gene replicate format is not desirable"", Replicate)
  }
  else{
    Replicate$witdth <- NULL
    Replicate$strand <- NULL
  }
  name(Replicate)<-c(""chrom"",""chromStart"",""chromEnd"",""name"", ""score"");
  Replicate<-Replicate[,1:5]

  ## improve the code
  if(is.null(Replicate$chrom)) ##If chr was unspecified...
    {

```
chrom <- unique(Replicate$chrom) ##get a list of chromosomes
# chromosomes found
message(""Chromosomes found:\n"")
print(chrom)
}
```

  else {
    sel <- Replicate$chr %in% chrom ##filter by chr
    if(sum(sel) == 0) ##specified non-existant chr!
    {
      chrom <- unique(Replicate$chrom)
      stop(""Specified chromosome(s) not in .bed file."")
    }
    Replicate <- lapply(Replicate, function(x){x <- x[sel]})
  }
  gc()
  IR <- IRanges::IRanges(chromStart = Replicate$chromStartstart, chromEndnd = Replicate$chromEnd)
  gc()
  IRanges::RangedData(IR, ranges = Replicate$chrom)
}

  if(missing(Replicate$pvalue)){
    message(""replicate gene missing pvalue conversion"", Replicate)
    .Replicate <- cbind(Replicate, pvalue = 10^-10/Replicate$score)
  }
  return(.Replicate)
}
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/4
MDU6SXNzdWUxMjM1NDE5Mjk=,Do I need parallel package,OPEN,2015-12-22T19:29:25Z,2015-12-25T16:07:45Z,,"asking overlapped peak region from multiple gene replicates, seems I may use parallel package in order to reach parallel computation. Not sure yet use this package or not. keep it my mind
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/5
MDU6SXNzdWUxMjM1NDI2NzA=,Got idea for finding overlapped peak,OPEN,2015-12-22T19:33:40Z,2015-12-25T16:07:36Z,,"I have implemented get_peak_region() function, so it gives region information of the peak. so I can call this function inside secondary_peak_classification function to ask overlapped regions from R. keep it mind !
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/6
MDU6SXNzdWUxMjM1NTE0MDM=,initial_peak_classification function works fine; need to improve the code,OPEN,2015-12-22T20:32:17Z,2015-12-22T20:32:17Z,,"initial_peak_classification() function works fine; there is no bug; desire output is not correct format;

my goal is temporarily generate data.frame for peak if they were classified as stringent or weak peak respectively. 

Think harder for that function. 
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/7
MDU6SXNzdWUxMjM4OTk1MDU=,I got IDEA how to manipulate peak region,OPEN,2015-12-25T22:24:09Z,2015-12-26T14:06:56Z,,"1. I need to extract all peak regions from genes.
# example:

pk<-peak[1:10,]       # extracting subpeaks
pk_region<- IRanges(pk$chromStart, pk$chromEnd)
## then extract all peak region from reference gene

target_gene_region<- IRanges(target_gene$chromStart, target_gene$chromEnd)
tr_gene_intval <-  IntervalTree(target_gene_regions)

overlap <- findOverlap(pk_region, tr_gene_intval)
### then iterate all peak, all reference gene and apply our algorithms
#### this is how access the object

if object is S4 vector, then accessing its sub-element or column by using @ ;
for instance, object@column

if object is not S4 vector, then using $ signs to access sub-column instead;
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/8
MDU6SXNzdWUxMjM5MzAxNDE=,detecting_overlapped_peak_colocalization (got idea),OPEN,2015-12-26T13:39:13Z,2015-12-26T13:39:13Z,,"to perform co-localization for peak the from multiple genes; following must be done:
1. first, implement function which load reference gene in R and assign all its peak regions to interval-tree; 
   Question: if interval-tree report intersected peak regions from these gene, how can I retrieve back its p-value and peak name, and located which chromosome; THINK HARDER
2. second, use apply family function to process already classified peak from initial peak classification (where peak may classified as stringent or weak peak); SO I want to carefully design the main body of this apply function that peak up every peak, ask findOverlap fucntion to report is there any overlapped region from selected reference gene. 

TO SUM UP:
apply(peak, 2, function() )             ## take each peak and ask its overlapped region from intervaltree

function for loading reference gene and assign all its peak regions to intervaltree

function for report which overlapped peak is, what is p-value ....
",jerryShad,https://github.com/jerryShad/mspc_oldVersion/issues/9
