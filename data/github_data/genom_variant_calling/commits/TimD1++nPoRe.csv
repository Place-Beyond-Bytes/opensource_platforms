commit_sha,commit_author_name,commit_author_email,commit_message,commit_date,login
6da1d5a5babadda80124f78657194532a3a13128,Tim Dunn,me.timd1@gmail.com,Updated Dockerfile.,2022-07-11T03:17:06Z,TimD1
9fd90314a10e021af36e836290732624f44c1e28,Tim Dunn,me.timd1@gmail.com,Added BAM preparation instructions to README.,2022-07-11T02:18:44Z,TimD1
2802506588edcfcb09424d56b0809d5ab6010b01,Tim Dunn,me.timd1@gmail.com,Added pip upgrade to README,2022-07-11T01:56:14Z,TimD1
19c767b04e55452dee60d9d3edbb1f98dfe55266,Tim Dunn,me.timd1@gmail.com,"Updated README and default build process

 - auto-build stuff in Makefile was failing; put steps into README",2022-07-11T01:47:46Z,TimD1
c27c3346ed62e14fc28259b6cbc0b6272c7866ed,Tim Dunn,me.timd1@gmail.com,"Fix ""empty Sam File after realign"" issue

 - empty Q-score string caused generator for extracting reads from original BAM
   to fail silently, leading to empty output SAM
 - added pysam's `read.query_alignment_quality == None` -> ""*"" in output BAM",2022-07-11T01:33:04Z,TimD1
534a3dcbb763dd239b035c42a2d43030792e4b79,Tim Dunn,me.timd1@gmail.com,Separated Sankey plots.,2022-04-14T15:11:33Z,TimD1
7800f2c8dc6e33ddb0856e0f89824cc1e85968f9,Tim Dunn,me.timd1@gmail.com,Added Zenodo DOI.,2022-02-24T17:58:03Z,TimD1
19fd2daeb33e68a3667c066540c6048dc49dc35e,Tim Dunn,me.timd1@gmail.com,"Created Dockerfile, uploaded image to Docker Hub

 - v0.1.0, updated README",2022-02-22T05:05:56Z,TimD1
5d4a8c5ac7628ea37f7d5b62c3425c3707febd47,Tim Dunn,me.timd1@gmail.com,Removed 'deactivate' from Makefile.,2022-02-22T00:51:21Z,TimD1
7b30f5d0e0a34c3d848a2aa4733dab7166ab2582,Tim Dunn,me.timd1@gmail.com,Removed pandas requirement.,2022-02-22T00:48:45Z,TimD1
8a09d8e6e332e222ce61b086b13ced8c7abb0e9a,Tim Dunn,me.timd1@gmail.com,Updated Makefile.,2022-02-22T00:34:16Z,TimD1
2e0f28a71c60ed0b4ac00118231a5412e8f3bdfd,Tim Dunn,me.timd1@gmail.com,Fixed bioRxiv citation formattting.,2022-02-21T20:16:09Z,TimD1
d2b3fa1628d8baa89cd27a8f6f2e025d181874f1,Tim Dunn,me.timd1@gmail.com,Added argument checking.,2022-02-21T20:14:50Z,TimD1
f5acf025ae890695ab6844bee3212a0bfa2a034e,Tim Dunn,me.timd1@gmail.com,Added pre-print link.,2022-02-21T20:14:15Z,TimD1
8565dd5e59cd2e080ac8f2f538e2310629f3e68c,Tim Dunn,me.timd1@gmail.com,Minor README update.,2022-02-15T16:55:31Z,TimD1
2c039b75a2e185420f5b48860b2d6cac2b8844c3,Tim Dunn,me.timd1@gmail.com,"Added links, fixed formatting.",2022-02-15T14:56:47Z,TimD1
4b5b5ace1f162f5c74b0254e178b3d942a643ff9,Tim Dunn,me.timd1@gmail.com,Full README update.,2022-02-14T23:40:21Z,TimD1
6930568f90dc0ea74993cbe0bc00ddb553eb9756,Tim Dunn,me.timd1@gmail.com,"Fixed fresh install bugs

 - added `psutil` dependency
 - added environment activation prior to package installation",2022-02-14T22:57:57Z,TimD1
f2035a878707ec84dec99b6b5b18161b9450890f,Tim Dunn,me.timd1@gmail.com,Added `--help` info for all modules.,2022-02-14T20:04:41Z,TimD1
1d4cf02f2b9d462e3f9a74e15181f22c7f101e91,Tim Dunn,me.timd1@gmail.com,"Added script for tagging unphased reads

 - instead of no info, untagged reads labelled ""HP:i:0""",2022-02-14T20:03:49Z,TimD1
56ce17a2449098ba0829ba3750c3d0cd66ab162c,Tim Dunn,me.timd1@gmail.com,Updated alignment profiling JNB,2022-02-14T19:31:52Z,TimD1
821c1ba1abaf25708d219b0b9714c884f51d7275,Tim Dunn,me.timd1@gmail.com,Added final `guppy5_stats/` dir,2022-02-14T18:32:01Z,TimD1
1b2a920ad3742a984346eead22e9ab1fc3734190,Tim Dunn,me.timd1@gmail.com,Added scripts from `~/NanoporeScripts`,2022-02-14T18:30:00Z,TimD1
195d688401acec7ec474f2f7dd1efcd7ef47753a,Tim Dunn,me.timd1@gmail.com,Updated `test/` directory,2022-02-14T18:14:28Z,TimD1
988c8f00196260bbd44c961e697bbb753dcb428c,Tim Dunn,me.timd1@gmail.com,"Removed `scipy`, `pickle`, `seaborn`, `pySankey` req",2022-02-14T15:18:16Z,TimD1
5503206f7a8bf9d7a98576600703a206023b974d,Tim Dunn,me.timd1@gmail.com,Moved all code to `src/` directory.,2022-02-14T15:11:09Z,TimD1
d4d6e4a738194d508cb9a1423ebfc48b67c9adb9,Tim Dunn,me.timd1@gmail.com,Removed pre-appended GNU License,2022-02-14T14:47:49Z,TimD1
7d00998ed3d98daec33c52122bcbdf28db24a8c1,Tim Dunn,me.timd1@gmail.com,"Full PySankey plot, added requirements.",2022-02-14T14:35:47Z,TimD1
c153e58a71a5bc5ddafcc99a4a079f8041b79877,Tim Dunn,me.timd1@gmail.com,Removed status printing.,2022-02-14T14:33:01Z,TimD1
99251c751bcb98e88463f8e5d61120e544faf17c,Tim Dunn,me.timd1@gmail.com,Depth 2 Sankey plot is functional.,2022-02-04T18:45:59Z,TimD1
7fa7e626aa378a8efd93e058c8857a41bdf2068e,Tim Dunn,me.timd1@gmail.com,Added local copy of PySankey,2022-02-04T16:53:39Z,TimD1
ac5875f84255291d1bd33f2a3a27506d20f3f016,Tim Dunn,me.timd1@gmail.com,"Updated result Sankey plots

 - now calculate CNVs, use all N-polymer BEDS
 - would like to try merging figures next",2022-02-04T15:08:41Z,TimD1
09ea5d5d1ea59601cbc44c78c73ff185a87f299c,Tim Dunn,me.timd1@gmail.com,"Added script for calculating n-polymer BEDs

 - actually pretty efficient, post-processing takes longer",2022-02-04T15:07:23Z,TimD1
04dadcbe3d25671f0dd81b5b9a327f4a87a16ca7,Tim Dunn,me.timd1@gmail.com,Added BED option to get_regions(),2022-02-04T15:06:52Z,TimD1
cafdf57274b79a8af6677f5f310f01651b8997ba,Tim Dunn,me.timd1@gmail.com,Skip 'N' bases in `get_np_info()`,2022-02-04T15:06:03Z,TimD1
ad113630ca8a1cfd5fd00ef5e01cbd665444e456,Tim Dunn,me.timd1@gmail.com,Added script for plotting results.,2022-02-02T23:33:30Z,TimD1
b35cdbfece2655bfd03ef2034394db1db589f618,Tim Dunn,me.timd1@gmail.com,Removed `--indel_cigar` flag option,2022-01-31T23:02:46Z,TimD1
93c2f7e41951b0d51669cb4e07b5b8b3bfec4080,Tim Dunn,me.timd1@gmail.com,"Now chunking `ref` and `seq` during alignment

 - necessary to reduce RAM usage",2022-01-31T17:10:03Z,TimD1
dddd275a9a0bc21725b87eef38b549207675fb3c,Tim Dunn,me.timd1@gmail.com,`calc_cms` now uses Cython,2022-01-29T17:22:58Z,TimD1
3b6ed7bc2392ff493ef76787ad97cfc9c819a074,Tim Dunn,me.timd1@gmail.com,Minor Cython improvements to,2022-01-29T17:21:52Z,TimD1
34f1ef7911a136726fe4d6df979647016ae87073,Tim Dunn,me.timd1@gmail.com,"Fast `samtools`-based `calc_conf_mats`

 - added `samtools` pileup generator
 - fixed `get_ranges()` bug
 - new confusion matrix calculation",2022-01-28T16:51:35Z,TimD1
184b587fc5fc598351a9c2eca2450476bf842861,Tim Dunn,me.timd1@gmail.com,"Ignore , util  slice, threshold",2022-01-28T16:51:07Z,TimD1
972a8c9edd8d1b7e95d119988f654f4d26413eda,Tim Dunn,me.timd1@gmail.com,"Renamed max_np->max_n, max_np_len->max_l",2022-01-27T19:16:04Z,TimD1
44bd74f300e857307f9cdc2d8169a5eca5509fd0,Tim Dunn,me.timd1@gmail.com,Fixed CIGAR string bug in test case.,2022-01-27T19:11:27Z,TimD1
20e3124284dafb497632e8cf1dcaab638e84d0c9,Tim Dunn,me.timd1@gmail.com,"Overlapping n-polymers now considered during align

 - changed `np_info`, now stores information separately for each `n`,
   allowing overlaps. Iterate over each `n` during alignment.
 - removed `full_ref` to `ref` split during chunked alignment, index full
 - improved `verbose=True` printing",2022-01-27T19:06:44Z,TimD1
e51762a78d066ce1f5cafa8dc0f71ce057439adc,Tim Dunn,me.timd1@gmail.com,"Updated alignment algorithm, major changes

 - fixed matrix heuristics for length l -> 1 or 2, removed gaussian
 - rename NPI/NPD -> LEN/SHR, continued renaming RPTS/RPT -> L/L_IDX
 - added n-polymer info to sequence, it's necessary
 - n-polymer info only at repeat starts (n_idx==0), since only allowed then
    - removed n_idx from np_info
    - allows overlapping n-polymers in some (but not all) cases (AAAG vs GAAA)
 - totally new rules for entering and continuing n-polymers
 - added helper `print_np_info()`",2022-01-27T00:18:47Z,TimD1
7feb1cf6278ce2a34ee8a612a044b9ac1c3dc8fa,Tim Dunn,me.timd1@gmail.com,"Added tricky repeat tests, removed cigar std testing.",2022-01-27T00:18:22Z,TimD1
73e1b3c98b9fbf36654c3a1e721cbb742cc96355,Tim Dunn,me.timd1@gmail.com,Updated confusion matrix plotting epsilon,2022-01-27T00:17:37Z,TimD1
239217a356d50ba276b0cd82ac39eeeec90fe77d,Tim Dunn,me.timd1@gmail.com,"Removed n-polymer -> general INDEL move

 - shouldn't be allowed to change INDEL type with not G_open penalty",2022-01-26T00:24:48Z,TimD1
8599a3e2d1a8c30f53dfb922679a8c0537fdbb8f,Tim Dunn,me.timd1@gmail.com,"Changed terminology: rpts/rpt -> l, l_idx,

 - also added some best-fit n-polymer penalty plotting",2022-01-26T00:22:24Z,TimD1
75a85288a30d169b890fa852438e582b82117822,Tim Dunn,me.timd1@gmail.com,"Removed BAM indexing

 - faster to PIPE between different SAMTOOLS functions in BASH",2022-01-24T20:20:08Z,TimD1
0abb385ed1ec6cd13615fea11b317ae498ee5486,Tim Dunn,me.timd1@gmail.com,"Fixed edge-case VCF application bugs

 - keeping complex vars separate, not merging into single variant
 - new overlap heuristics, allows deletions overlap on edge
 - small seq/ref base bugfix on overlaps",2022-01-24T19:43:34Z,TimD1
18bd516f911090218f6047e6ec786b8bd10668c3,Tim Dunn,me.timd1@gmail.com,"Reverted to earlier enforced score mat heuristics

 - added Gaussian smoothing, prior to this tep
 - added contour plot
 - WIP best-surface plot",2022-01-24T19:42:17Z,TimD1
d058da3a21f37be28140ba123428ffcd070d7758,Tim Dunn,me.timd1@gmail.com,removed obsolete command-line arg,2022-01-20T18:58:09Z,TimD1
77f24e4082517533a188b907c5e74b84cf711958,Tim Dunn,me.timd1@gmail.com,Computing Gini purity for columns and insertions,2022-01-20T15:24:02Z,TimD1
f1bf3d56bd42a3e6bf7bd8bad204b82bc4a8a518,Tim Dunn,me.timd1@gmail.com,Added script for testing standardization.,2022-01-10T19:33:22Z,TimD1
3f439278edd8bfb90f343c5e56d59d33fafedd7e,Tim Dunn,me.timd1@gmail.com,"Added basic overlap filtering, skip spanning DELs

 - output candidates may overlap, naive overlap removal of later
 - input VCF files may have ""*"" alleles from SV spanning DELs, skipping",2022-01-10T19:31:37Z,TimD1
22ad4e31c006247c017ba79447b97dd39ac5da3d,Tim Dunn,me.timd1@gmail.com,"Small bug fixes, added debug output.",2021-12-29T05:06:37Z,TimD1
2bfddd93656a017a6d3f5846ac841148fc2cdcc2,Tim Dunn,me.timd1@gmail.com,Simplified score calculation.,2021-12-15T16:26:37Z,TimD1
87a9e4240b6384b541a8dc5c22a66eb71479ce16,Tim Dunn,me.timd1@gmail.com,Removed bias from NP score calculation.,2021-12-14T15:52:30Z,TimD1
af94edd10406f9fac2359fd975df6a5980cd6b69,Tim Dunn,me.timd1@gmail.com,"ReAligner now works with all/multiple contigs

 - condensed pool() pipeline into single function
 - fixed RAM usage errors when > 250,000 reads
 - write to SAM file with lock, merge into BAM
 - updated standardize_vcf() as well
 - alignment segfault when standardizing chr? at pos 150M",2021-12-13T23:03:33Z,TimD1
3c38ba312a6cda46753f3b002cd6ad4a20f3ec60,Tim Dunn,me.timd1@gmail.com,Added code for selecting BAM regions.,2021-11-17T16:59:28Z,TimD1
a56c163322c230d440a386bd084408f3d961a4fe,Tim Dunn,me.timd1@gmail.com,"Added (unnecessary) conditionals to alignment, changed contig defaults.",2021-11-10T04:27:58Z,TimD1
ec443583f48b4b6024e3b4b0b7d39214b350a2fb,Tim Dunn,me.timd1@gmail.com,Removed consensus code.,2021-11-08T19:22:03Z,TimD1
e76f114ab44186006eeb703b42fe906cb6325e98,Tim Dunn,me.timd1@gmail.com,Fixed some bugs.,2021-11-08T18:58:35Z,TimD1
e9baf64fe0fcc877add3f9b61503945780bb50ec,Tim Dunn,me.timd1@gmail.com,Single counter.,2021-11-08T18:49:43Z,TimD1
53d42ba7f248c7007bed21986fcfb0baac410516,Tim Dunn,me.timd1@gmail.com,"Added iterations to consensus-based aligner

 - changed `args.out` to `args.out_prefix`
 - BUGFIX: runtime printing and leftover from removing VCF
 - reference is now added into pileup scores, in case there's zero coverage",2021-11-04T20:00:33Z,TimD1
997860bce8820032b01c11502c193a2399c46a39,Tim Dunn,me.timd1@gmail.com,Removed obsolete VCF application code.,2021-11-03T18:28:35Z,TimD1
4a8dd675a5ede6e501edddf113839973578b3105,Tim Dunn,me.timd1@gmail.com,Added high-level timings to output.,2021-11-03T17:34:51Z,TimD1
e7ce8883617d31ee6447d2fc25f095927c9dacb6,Tim Dunn,me.timd1@gmail.com,"Several re-alignment bug fixes.

 - allow INDELs at matrix chunk start (fixed unnecessary INDELS)
 - force 0 in first cell (uninitialized after prev change)
 - fixed off-by-one in verbose printing (last base ignored, though)
 - `get_pileup_info()` now happens for the realigned BAM
 - intermediate results written to {out}tmp.bam (kinda sloppy)
 - switched `test/realign` to use new cropped testing BAM",2021-11-03T16:22:22Z,TimD1
42afd7eaab768ff7b467adeaf2260734888a58c2,Tim Dunn,me.timd1@gmail.com,"Added new consensus-based realignment function

 - lots of fun indexing/off-by-one errors in both window edge and
 alignment breaks, but I finally fixed them all (I think)
 - fixed indexing error in `align()` verbose printing
 - added per-haplotype pileup info",2021-11-01T16:28:53Z,TimD1
ed0a4d030e196f552c820c9842dfd0c5e2e5cf4a,Tim Dunn,me.timd1@gmail.com,"Now calculating global pileup info

 - solved off-by-one error with insertion at window start
 - tested on larger auto-generated BAM dataset
 - fixed BAM input error (extra `samtools` call in `generate_bam.py`)",2021-10-27T20:40:54Z,TimD1
aba7d9e66b5da6c358246b6e24440644435f1f92,Tim Dunn,me.timd1@gmail.com,"Added script for generating small BAM files

 - useful for debugging new padding/pileup calculations",2021-10-27T19:05:57Z,TimD1
0d8b8c37d955184646f322db8a01e67e68116a6a,Tim Dunn,me.timd1@gmail.com,"Added padded CIGAR

 - realized padded CIGAR for just `contig_beg` to `contig_end` won't
   work very well, since lots of reads continue outside this window
 - simplest thing is to calculate pileup/padding info for entire
   reference, then cache it so it's not recalculated
 - will want some smaller test cases to debug this
 - split `recalc` into `recalc_cms` and `recalc_pileups`",2021-10-27T19:03:49Z,TimD1
294a7743f4ee0998ebe48a1667ebed070221117a,Tim Dunn,me.timd1@gmail.com,"Added padded reference calculation

 - worked on off-by-one errors with windowing, all data same size now",2021-10-27T14:22:21Z,TimD1
d4ec63f48eb72eb10ad113df457c951ba73b8227,Tim Dunn,me.timd1@gmail.com,"Working on realigning based on other reads

 - added calculation for max indel at each pileup location
 - added calculation of new padded position for each reference base
 - added calculation for pileup scores based on other reads
 - still need to write updated alignment function",2021-10-26T21:27:25Z,TimD1
40b8bac52cdc970a280f9e186df0877bb72426ea,Tim Dunn,me.timd1@gmail.com,"Added profiling scripts/data for faster `align()`

 - not very helpful, timings spread out evenly",2021-10-21T20:44:49Z,TimD1
4c5e0f5e4a6e607e28bf640db3bf128c2e517fc0,Tim Dunn,me.timd1@gmail.com,"Tried testing right-aligned pileup calling

 - will need to modify alignment alg to start with most INDELs on right
 - re-added `push_indels_right()` function, not used on commit
 - fixed CIGAR global counter for printing on `std_vcf()`
 - updated `realign` script
 - re-applied Cython speed opts",2021-10-21T20:42:59Z,TimD1
700289cf8bd7935535afedf8b441128d1807dc03,Tim Dunn,me.timd1@gmail.com,"`--std_cigar` and `--indels_only` -> `--indel_cigar`, left shift default

 - also changed min n-polymer run length from 2 -> 3",2021-10-13T22:54:34Z,TimD1
f0f4bc284a71ad774bbeb0ee5e584c3d4feac5c6,Tim Dunn,me.timd1@gmail.com,"Fully functional align() n-polymer alg

 - changed penalties for B matrix border
 - Cython arrays now contiguous",2021-10-11T16:00:58Z,TimD1
83dede8a2613edf3457212b6f1fb1de392255f39,Tim Dunn,me.timd1@gmail.com,"WIP: shifting to n-polymer CNV align()

 - generally works, but backtracking errors every few hundred reads
 - fixed off-by-one in `matrix` buffer allocation resulting from
   breakpoint shifting
 - fixed `realign.py`: generate debug haploid output only if `apply_vcf` set",2021-10-08T02:57:53Z,TimD1
bd59ac216a54ad8645551cd86965bc5cacc3e0a2,Tim Dunn,me.timd1@gmail.com,"Improved `get_np_info()`

 - information is more directly useful for `align()` now",2021-10-05T20:38:27Z,TimD1
8fe58c4ac31375501788992ce09ae9c55b4ed068,Tim Dunn,me.timd1@gmail.com,"Shifting from homopolymer alignment to n-polymer

 - updated confusion/score matrices calculation
 - updated plotting confusion/score matrices
 - started alignment, but will need diff approach",2021-10-05T19:48:08Z,TimD1
21c8d0024a2e541295ea5680f8d95cb7eb26026f,Tim Dunn,me.timd1@gmail.com,"Several minor improvements

 - fixed sub score mat recalc, first time not using cached version in months
 - added hap alignment debug printing (for apply_vcf)
 - reordered standardization and ref basis change
 - don't apply unphased heterozygous variants (unfortunately filtered in
   split_vcf, not apply_vcf)",2021-09-24T15:49:08Z,TimD1
096dd66d6e2f8a46046cca572caee52e8f90db70,Tim Dunn,me.timd1@gmail.com,Added quality-based VCF filtering during,2021-09-13T16:23:04Z,TimD1
b1b6c9fe8eb07e89220601966f0736d85ddded8d,Tim Dunn,me.timd1@gmail.com,"Workaround for PySam bug in `split_vcf()`

 - PySam (very rarely) reports some SUBs as genotype (0,0) when the VCF
   file clearly labels them otherwise like (0,1), and they're different
   from the reference.
 - for now, considering them all to be (1,1)",2021-09-08T20:55:20Z,TimD1
3cb782bb3a99c3df89cd96f5b84e0d0e23e9f234,Tim Dunn,me.timd1@gmail.com,Removed CIGAR chunking.,2021-09-08T20:50:13Z,TimD1
069bf237137fc3e5645880876045f62100547774,Tim Dunn,me.timd1@gmail.com,"MUCH faster CIGAR standardization

 - skipping useless iterations in shifting alg
 - pulled buffer out of function for shifting INDELs
 - fixed several chunking/stitching bugs",2021-09-08T19:32:08Z,TimD1
c2c59db3385b6a0584f7a8c8a2e2e34f313bf092,Tim Dunn,me.timd1@gmail.com,Added chunking to VCF standardization.,2021-09-08T16:44:21Z,TimD1
099d6a2f7811f1c2026f4e1b65e19a8592f6aa47,Tim Dunn,me.timd1@gmail.com,"Numerous bugfixes, switched to group CIGAR std

 - pushing INDELs left and right, groups merged and not broken up
 - BUGFIX: chunked realignment caused unnecessary SNPs, M -> ID broken
   up by border
 - BUGFIX: off-by-one in CIGAR substring selection
 - BUGFIX: added cigar collapsing to BAM output and test scripts
 - BUGFIX: changed reference base ""consume"" logic in `change_ref`
 - BUGFIX: allow INDEL overlap in `merge_vcf` complex hetero variants
 - BUGFIX: fixed `apply_vcf`s header, although kinda hacky",2021-09-08T14:15:14Z,TimD1
e27a5c4f2ea5988de506a165f6647aba16372b41,Tim Dunn,me.timd1@gmail.com,"Smaller realign window, minor pipeline reorganization.",2021-08-27T20:27:26Z,TimD1
fca8bd35306f9d3e8b1ac11f79b3aa35a4b9df6c,Tim Dunn,me.timd1@gmail.com,Added progress printing for ref basis change.,2021-08-25T18:34:24Z,TimD1
1bb23b7c6de5bc174b4ba3330e01a4097634e246,Tim Dunn,me.timd1@gmail.com,Faster code for changing reference basis.,2021-08-25T18:29:23Z,TimD1
3028681a0dabc5a5a833126d7f74cc81efef6947,Tim Dunn,me.timd1@gmail.com,"BUGFIX: skip apply_vcf() correctly, change 'E'->'=' in CIGAR config.",2021-08-25T18:24:46Z,TimD1
4c074ae8e6a6aff74d19a453ab571a80e9dbacf0,Tim Dunn,me.timd1@gmail.com,"New apply_vcf() with INDELs is functional

 - still needs more extensive testing",2021-08-25T15:58:57Z,TimD1
dbe5ea005a1a600db583b887adb9e12abf068734,Tim Dunn,me.timd1@gmail.com,"Removed unnecessary CIGAR expansions/compressions

 - also moved realign_bam() function into main realign()",2021-08-24T15:59:58Z,TimD1
01d56bcfdf81553eda07c82c6843456e9e3e38b6,Tim Dunn,me.timd1@gmail.com,"Added full code for ""apply_vcf()"" with INDELs

 - will test and debug now
 - dropping unphased reads for now, will later align to both haps and
   choose best",2021-08-06T13:25:42Z,TimD1
53d0e641ffd913dd433c9d9bbd4c01d87b511133,Tim Dunn,me.timd1@gmail.com,"Converted EXID CIGAR recalculation to MID

 - simpler switch statements, but same EXID output
 - added * for detecting CIGAR ends",2021-08-05T16:54:40Z,TimD1
333ec3357e958d7ea5197056f3242fa2b0f77eb7,Tim Dunn,me.timd1@gmail.com,Added 'EXID' cigar recalculation.,2021-08-05T16:32:03Z,TimD1
5b7e49b1a2acb7961f4d327b37a94be6cd1dcceb,Tim Dunn,me.timd1@gmail.com,"Fixed VCF naming bug

 - now correctly ignores '.' in filename",2021-08-05T16:31:20Z,TimD1
b971188a52e6cdda7cbe286e291883c8fe61aed2,Tim Dunn,me.timd1@gmail.com,"Finished debugging 'apply_vcf()'

 - 'pileups.vcf.gz' had overlapping INDELs, now ignoring second
 - complex variants with diff INDELs lengths weren't handled correctly.
 I was assuming one of the two alleles would be one base, but since I
 never trimmed during VCF separation, that wasn't the case",2021-08-05T14:42:58Z,TimD1
3b5e8224662a0059bcedda797e86814010d760b5,Tim Dunn,me.timd1@gmail.com,Added 'hap_to_bam()' for showing realigned hap.,2021-08-05T14:41:33Z,TimD1
2cd42e63b0e731d2bdc82546de9a7d0924eef800,Tim Dunn,me.timd1@gmail.com,"Added VCF generation script, working on fixing 'apply_vcf()'",2021-08-05T02:05:21Z,TimD1
f45d00b8e0ee979484c1d89639bbf9c91d75c680,Tim Dunn,me.timd1@gmail.com,"Added option to return collapsed cigar in tuple, not string.",2021-08-04T19:18:36Z,TimD1
874a8b132447fd235467e993e44782a6943d32de,Tim Dunn,me.timd1@gmail.com,"Added script for applying VCF to FASTA

 - untested so far
 - added CIGAR standardization to testing script",2021-08-03T22:21:14Z,TimD1
76fc047314af2ef2cbe77b781e3081d2c93df851,Tim Dunn,me.timd1@gmail.com,Added Biopython FASTA ref loading.,2021-08-03T21:30:19Z,TimD1
74ee197175237f9878a1d3b8d6a4bc57499c71bd,Tim Dunn,me.timd1@gmail.com,"Added function for merging VCFs

 - now handling complex variants correctly during split
 - could additionally shorten those while separate",2021-08-03T21:15:09Z,TimD1
1f4257db07475b3e692146d48203750545bbe9be,Tim Dunn,me.timd1@gmail.com,Added function for splitting diploid VCF file.,2021-08-03T19:38:41Z,TimD1
bd89cffe8e6db32f4a7c00bf9ae83ca2eb9f697c,Tim Dunn,me.timd1@gmail.com,"Improved CIGAR standardization

 - CIGAR is always standardized, but --indels-only is an option
 - alignment now just gives MID result, instead of =XID
 - after standardization, ID is replaced with M, since clair3 can't call
   adjacent insertions and deletions
 - renamed 'args.vcf' and 'args.splice_subs' to 'args.apply_vcf'
 - will now generalize VCF application, allowing INDELs in addition to SUBs",2021-08-03T16:44:35Z,TimD1
d2e57720973185a62ce38453744a1e2e827d0319,Tim Dunn,me.timd1@gmail.com,"BUGFIX: code now works on unfiltered BAM files

 - wasn't filtering chimeric alignments, just secondary...
 - code also updated CIGAR by read_id, and didn't check if primary
 - added (commented) debug printing for mismatched cig/seq lengths",2021-07-22T16:37:13Z,TimD1
e1d8dcee102265650e51d1abea49c6126144be65,Tim Dunn,me.timd1@gmail.com,"Converted CIGAR standardization to Cython

 - should be WAY faster, no memory re-allocation now
 - added CIGAR helper functions and new globals
 - updated testing scripts",2021-07-22T14:22:57Z,TimD1
6d796532bd0a89fe73e62ab6f7fedaf1586009ec,Tim Dunn,me.timd1@gmail.com,ReAligner now skips supplementary alignments.,2021-07-22T03:04:14Z,TimD1
6aef87302c1ac12d932e61b2b160567968bbd27e,Tim Dunn,me.timd1@gmail.com,"Minor cleanup

 - added Makefile
 - moved realign script to tests dir",2021-07-21T18:08:55Z,TimD1
30f40d130dc1b09e4ec71e2d96eefe4b12dd5f86,Tim Dunn,me.timd1@gmail.com,"ReAligner can now tolerate arbitrary bases

 - split bases into nbases, bases (ACGT), and base_dict
 - all unknown bases (N/U/R) treated same, not penalized during alignment
 - added default contig range",2021-07-21T18:03:10Z,TimD1
445b2decf2015eae3b783dac3a4e5149a7ce4699,Tim Dunn,me.timd1@gmail.com,"Fixed CIGAR standardization

 - didn't need separate INS heuristic, DEL was more broadly applicable
 - had to allow 'M' in addition to '=' when pushing DELs left",2021-07-08T17:06:41Z,TimD1
952b218c79f80bcac5b97aa8b86ea7ef9be777b9,Tim Dunn,me.timd1@gmail.com,Added license: GPLv3,2021-07-07T20:01:21Z,TimD1
1eb3c2dcb2b0ec15b361bfcbffae640b227e0117,Tim Dunn,me.timd1@gmail.com,"Removed swalign license, not using any of that code.",2021-07-07T19:56:42Z,TimD1
9bdafa96ae89f3c3c517da5604dd0e17e1b23f48,Tim Dunn,me.timd1@gmail.com,Added warning if VCF is unphased.,2021-07-07T19:55:56Z,TimD1
22f893e4eb75a1a4eb950af48d95b01e45449e65,Tim Dunn,me.timd1@gmail.com,"Fixed alignment near applied SNPs

 - original reference isn't used for = / X, SNP is trusted
 - ""--indels_only"" converts = to M and X to ID
 - final CIGAR reported now uses M, instead of = / X",2021-07-06T17:51:30Z,TimD1
b09286cb34d3459cc7e0d03ef90036fbcd3cd2ee,Tim Dunn,me.timd1@gmail.com,Cleaned up alignment code,2021-07-06T17:31:46Z,TimD1
1db71a33129b3eb94aa004222c4b4c5af83fb1dd,Tim Dunn,me.timd1@gmail.com,"Added chunking-based alignment

 - align sections between break points
 - new code isn't thoroughly tested yet, but appears fine",2021-07-05T19:35:17Z,TimD1
90b11c5be603992ab635366f9a26027e4a642e61,Tim Dunn,me.timd1@gmail.com,"Figured out memory error, patchy temporary fix

 - it wasn't a memory leak, repeatedly re-allocating large numpy arrays
   just caused significant fragmentation and RAM consumption
 - for now, skipping all reads over fixed length
 - fixed handling of reference 'N' bases, no substitution penalty
 - numpy arrays are now contiguous",2021-07-05T13:47:56Z,TimD1
5c3b94e30101fb690671f7618dace91e9e0de02e,Tim Dunn,me.timd1@gmail.com,"Converted 'aln.py' to Cython

 - 5x faster than Numba, and without memory leaks
 - removed numba entirely
 - alignment still works fine",2021-06-28T20:34:26Z,TimD1
e5efdb07af994ab0c696b8927a701892bd93a25b,Tim Dunn,me.timd1@gmail.com,Removed obsolete code.,2021-06-24T23:23:21Z,TimD1
d0fd571407c0e2c9de22f249056a79eec9b4506a,Tim Dunn,me.timd1@gmail.com,Added code for splicing in SUBs.,2021-06-24T23:15:45Z,TimD1
8ace086cc354f3e48ab981c73aef9d5bbdff92ff,Tim Dunn,me.timd1@gmail.com,Parsed single-base SUBs from VCF.,2021-06-24T22:05:37Z,TimD1
c6a8a704f2f3760ee3e9802daf1bcf2d1728414e,Tim Dunn,me.timd1@gmail.com,"Merge branch 'better_alignments'

Conflicts:
	aln.py",2021-06-24T18:31:59Z,TimD1
001b1f267f0ed96ca17ac9eea42686d751d9d9df,Tim Dunn,me.timd1@gmail.com,"Last commit was aligning reads, but not properly

 - allowing mid-HP SHP/LHP INDELs fixed weird alignments
 - ran on 115,000 reads without errors (besides out-of-memory -> fix later)
 - verified on ~2,500 reads in IGV, everything looks good
 - added per-cell score/ptr printing
 - converted alignment verbosity from boolean to int
 - re-added CIGAR standardization",2021-06-24T18:26:42Z,TimD1
829b621598e0abc03fdd52bd6dcb115203c34b76,Tim Dunn,me.timd1@gmail.com,"Renamed SUB->MAT(CH), removed some debugging code.",2021-06-23T20:17:06Z,TimD1
e5eff07c228195641b7ecc813e1b3867b1f7a17c,Tim Dunn,me.timd1@gmail.com,"All reads successfully aligned!

 - remaining errors were from starting INDEL to LHP or SHP",2021-06-23T20:15:12Z,TimD1
ee77f3b31fff20479e4aeca657442ce65fa67205,Tim Dunn,me.timd1@gmail.com,"Much-improved, but still buggy

 - removed C (left bias), causing issues for long strings
 - penalize impossible INDELs on matrix border
 - everything centered around SUB matrix, tracking RUNLENs, backtracking
 - two backtracking errors on dataset of 2,300 reads",2021-06-23T19:42:01Z,TimD1
ddd4d9bd59b20d28fa76efbae3eae23f4e8a136b,Tim Dunn,me.timd1@gmail.com,Found better way to remove softclips.,2021-06-22T20:45:48Z,TimD1
973f158a520d3c4014aa4bbbe6ec089c283087af,Tim Dunn,me.timd1@gmail.com,"Continued debugging

 - questionable alignment choice in one of the test cases
 - on real dataset, CIGAR length != seq len for read 'f23cfab...'
 - error stems from the align() matrix computation
 - added more efficient matrix A <-> B conversion algorithm
 - trim all 'S' softclipped bases, not in result
 - added multi-line alignment printing for 'dump()'
 - added progress printing during realignment",2021-06-22T20:42:39Z,TimD1
0c9021431e549d3f144d3c1e125a1a5fcb672e4a,Tim Dunn,me.timd1@gmail.com,"Debugging in progress...

 - added alignment testing framework in 'test/align.py'
 - added verbose debug printing, matrices A and B
 - rename 'query' -> 'seq'
 - CIGAR S == I, not D. fixed other typo",2021-06-22T16:56:07Z,TimD1
9ca7f143416ecd354baa462e0c9c0c3a36ceaa22,Tim Dunn,me.timd1@gmail.com,"BUGGED: wrote read-based alignment

 - first full attempt at read-based alignment
 - this got complicated quick... will spend tomorrow debugging",2021-06-22T00:08:01Z,TimD1
38754e89d46e0fc9afba0b72c1b994df38bbc0b9,Tim Dunn,me.timd1@gmail.com,"Started shifting from pos-based to read-based

 - wrote code for BAM -> per-read data
 - work in progress, new alignment alg next",2021-06-18T22:03:46Z,TimD1
070c40f4edb8db5ffe5b7678c598924a3b216c96,Tim Dunn,me.timd1@gmail.com,Merged plotting functions.,2021-06-18T20:13:23Z,TimD1
ea753d3b560722e87871e28d4a05ba36ef0a2faa,Tim Dunn,me.timd1@gmail.com,Removed obsolete curve fitting code.,2021-06-18T19:48:44Z,TimD1
a05c304b3729f1d2e73b025193613b93bc788cfd,Tim Dunn,me.timd1@gmail.com,Added code for CIGAR standardization.,2021-06-08T15:10:12Z,TimD1
9817b0d69f6ac8a81a3db89e5533570e5789dd84,Tim Dunn,me.timd1@gmail.com,DELs pushed left.,2021-05-26T00:03:30Z,TimD1
5bdbb3a228597e9c4912b43425fb43179cf51bd9,Tim Dunn,me.timd1@gmail.com,"Added left bias, working on CIGAR standardization.",2021-05-25T14:48:59Z,TimD1
e3ae5b9186336ef1d3d33e668facabd96055decf,Tim Dunn,me.timd1@gmail.com,"Minor bugfixes with phased realignment

 - if final DeepVariant call agrees with ref, genotype = (None, None)
 - added --phased_output flag to DeepVariant script, not on by default
 - IGV wasn't loading the updated alignment, caused headache",2021-05-24T16:16:13Z,TimD1
b2d2b7dedb7c0588deb6900b2662301c9f5b62d2,Tim Dunn,me.timd1@gmail.com,"Aligner now uses variant called substitutions

 - since DeepVariant is >99.9% accurate, we're not worried about errors",2021-05-21T13:44:54Z,TimD1
a588080de72d889fb56944946b3919e5b82cbe9c,Tim Dunn,me.timd1@gmail.com,"Added Numba acceleration.

 - 'realign' script will regenerate index afterwards
 - removed old swalign code
 - moved cigar functions to separate file",2021-05-20T22:01:55Z,TimD1
12dc4abe19fbc8eca1be6505af3caf09509580c7,Tim Dunn,me.timd1@gmail.com,Full Smith-Waterman alignment functional.,2021-05-20T04:04:48Z,TimD1
2856c61392b13ac0e9267f6089bd5fe61504b246,Tim Dunn,me.timd1@gmail.com,"Working on improving alignments...

 - realized this algorithm isn't actually Smith-Waterman
 - currently debugging: just aligning first position
 - updated score matrix calculation, enforce new properties
 - 3D surface plot of score matrix
 - force HP INDELs at start only
 - using global read starts/CIGARs to reduce RAM usage during parallelization
 - better custom BAM output header
 - display final score matrix",2021-05-18T13:29:43Z,TimD1
1e977458c453683ee4d0c53cea53787e99750e41,Tim Dunn,me.timd1@gmail.com,"ReAlignment pipeline appears fully functional!

 - still needs more testing, but working fine now
 - bug fixes: rare empty inputs, align(seq, ref) -> align(ref, seq)
 - improved in-progress ReAligner printing
 - added splicing of all sub-read alignments
 - added CIGAR string helper functions
 - added output writing for final realignments",2021-05-13T16:43:27Z,TimD1
d235739b97c7f364d8eaf94d287df2e36e2f847c,Tim Dunn,me.timd1@gmail.com,"Basic alignment works well now!

 - added DP smoothing to HP score matrix
 - added contour plotting of HP score matrix
 - fixed off-by-one bug in INS placement within HPs",2021-05-12T16:25:01Z,TimD1
8edd433dde37bb8cb7c15269e9366e9cc26526fd,Tim Dunn,me.timd1@gmail.com,"Added separate INDEL type for HP length

 - alignments looking better, need to smoothen cost matrix
 - collapsed all bases in penalty matrix together",2021-05-12T15:07:00Z,TimD1
92c451f454686706fe695a8cfba48a0c3b473a04,Tim Dunn,me.timd1@gmail.com,Added curve-fitting for HP distribution.,2021-05-11T21:37:48Z,TimD1
519fdb7cc218a42f5b7f084b0a3527927f77e83c,Tim Dunn,me.timd1@gmail.com,"Converted BamStats from class to functions, fixed progress printing.",2021-05-11T15:44:30Z,TimD1
ba070bd878d030edc82be08ffa86ab6ffad5d251,Tim Dunn,me.timd1@gmail.com,Homopolymer INDEL matrices fixed.,2021-05-11T15:23:33Z,TimD1
fbafeb14261239df3f2c92044079fadc24173b16,Tim Dunn,me.timd1@gmail.com,"Added multi-threaded CM calculation

 - MAJOR ERROR remains in INDEL detection: basically, PySam's pileup() method
 is terrible, and I need to use fetch() and parse the CIGAR myself",2021-05-11T00:30:35Z,TimD1
7bb041389a145bbbded6e714da8015cd01ed84e2,Tim Dunn,me.timd1@gmail.com,"Added BamStats class, plotting confusion matrices

 - added smoothing, may still need some work",2021-05-10T22:39:17Z,TimD1
7edfa33a661edbbf97e98878113572ade42ae147,Tim Dunn,me.timd1@gmail.com,SWAlign-based global alignment functional.,2021-05-10T01:29:39Z,TimD1
d017ebfc2e9d454280c41bea463cd6210d06718d,Tim Dunn,me.timd1@gmail.com,"Added swalign starter code, README, and license",2021-05-07T16:34:09Z,TimD1
c94de0fceff12f2bed4f7adfda308acc36e6df35,Tim Dunn,me.timd1@gmail.com,"Restructured project

 - removed all signal-based code
 - sorted functions into BAM / VCF, added global config",2021-05-07T16:28:28Z,TimD1
5f01deb8949408607fd2b634c17f50b9101fd27c,Tim Dunn,me.timd1@gmail.com,"Initial commit.

 - implemented k-mer based alignment, shifting to more predictable alg now",2021-05-07T13:44:04Z,TimD1
