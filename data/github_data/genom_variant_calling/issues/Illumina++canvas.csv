id,title,state,created_at,updated_at,closed_at,body,user,url
MDU6SXNzdWUxNDY2MzUwNjE=,Statically linked distribution?,CLOSED,2016-04-07T13:58:28Z,2016-05-18T22:54:18Z,2016-05-18T22:54:18Z,"I'm a new Mono user, long time bioinformatics software user/installer. Maybe for the benefit of the community you could provide a [Linux bundle](http://www.mono-project.com/docs/advanced/runtime/#bundles) so end users don't need Mono installed?
",mdshw5,https://github.com/Illumina/canvas/issues/3
MDU6SXNzdWUxNTA5NTE4ODI=,Build and reference format documentation,CLOSED,2016-04-25T19:01:07Z,2016-05-18T22:19:23Z,2016-05-18T22:19:23Z,"I'm trying to prepare a mouse reference genome for canvas, but so far cannot figure out how to build FlagUniqueKmers.csproj using `xbuild` under mono. Some better documentation around this area would help me quite a bit.
",mdshw5,https://github.com/Illumina/canvas/issues/4
MDU6SXNzdWUxNTIwNDYyNTQ=,manta and canvas,CLOSED,2016-04-30T18:52:33Z,2016-05-02T21:17:19Z,2016-05-02T21:17:19Z,"Hi 

I am wondering the main difference between Manta and Canvas. I've got the literatures for both and actually Manta user for a large dataset. My understanding is Canvas takes a bin-based approach (RD method?) .. Also, the supplementary document of Canvas has few benchmark tables but no comparison with Manta. Just wondering how the performance is different between two tools.

Thanks
",N/A,https://github.com/Illumina/canvas/issues/5
MDU6SXNzdWUxNTI3NjQ2MTM=,Canvas workflow error,CLOSED,2016-05-03T12:46:06Z,2016-06-29T16:42:09Z,2016-06-29T16:42:09Z,"Hi, I posted on SEQanswers about this error: 
ERROR: Canvas workflow error: Illumina.SecondaryAnalysis.JobFailedException: mono returned error code -1

Attached are the Log and Error files. Thank you for your help. 
[CanvasError.txt](https://github.com/Illumina/canvas/files/246862/CanvasError.txt)
[CanvasLog.txt](https://github.com/Illumina/canvas/files/246863/CanvasLog.txt)
",dmb107,https://github.com/Illumina/canvas/issues/6
MDU6SXNzdWUxNTUxNTI2MTg=,analyzing only chromosome of interest,CLOSED,2016-05-17T00:35:24Z,2016-11-29T22:36:58Z,2016-05-18T22:31:42Z,"Just clarifying, if I only want to analyze a single chromosome of interest, I passed the --chr=chr19 to CanvasBin.exe. But reading the doc, do I also have to -i param with the chrom specific .dat file?
",indapa,https://github.com/Illumina/canvas/issues/7
MDU6SXNzdWUxNTcwNTMzMTk=,Error during first run,CLOSED,2016-05-26T18:53:42Z,2016-11-07T20:34:10Z,2016-06-29T16:31:20Z,"Hi There,
This is my first attempt at running this.   One thing I didn't see in your docs was that I had to add the path to mono to my PATH before running.   However, even after that I'm still running into an error that I can't quite understand.   Does the following trace give you any ideas about what I might be doing wrong?

```
/opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/Canvas.exe  Somatic-WGS -b /projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam --somatic-vcf=/projects/rcorbettprj2/CNV_2016/Canvas/passed.somatic.snvs.eff.dbSNP_v137.cosmic_v64.annotations.vcf --b-allele-vcf=/projects/rcorbettprj2/CNV_2016/Canvas/A36973_5_lanes_dupsFlagged.varFilter.PASS.vcf -o /projects/rcorbettprj2/CNV_2016/Canvas/out -r /projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa -g /projects/rcorbettprj2/CNV_2016/Canvas/WholeGenomeFasta -f /projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed -n coloTest 
5/26/2016,10:10:39.729,Running Canvas Somatic-WGS 1.3.9.0
5/26/2016,10:10:39.730,Command-line arguments: Somatic-WGS -b /projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam --somatic-vcf=/projects/rcorbettprj2/CNV_2016/Canvas/passed.somatic.snvs.eff.dbSNP_v137.cosmic_v64.annotations.vcf --b-allele-vcf=/projects/rcorbettprj2/CNV_2016/Canvas/A36973_5_lanes_dupsFlagged.varFilter.PASS.vcf -o /projects/rcorbettprj2/CNV_2016/Canvas/out -r /projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa -g /projects/rcorbettprj2/CNV_2016/Canvas/WholeGenomeFasta -f /projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed -n coloTest
5/26/2016,10:10:40.249,Running checkpoint 1: 'CanvasSNV'
5/26/2016,10:10:40.284,Running checkpoint 2: 'CanvasBin'
5/26/2016,10:10:40.640,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 2 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_2.dat"" 
5/26/2016,10:10:40.640,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 6 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_6.dat"" 
5/26/2016,10:10:40.640,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 7 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_7.dat"" 
5/26/2016,10:10:40.640,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 3 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_3.dat"" 
5/26/2016,10:10:40.640,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 1 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_1.dat"" 
5/26/2016,10:10:40.640,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 4 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_4.dat"" 
5/26/2016,10:10:40.641,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 5 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_5.dat"" 
5/26/2016,10:10:40.641,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c X -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_X.dat"" 
5/26/2016,10:19:52.911,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 8 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_8.dat"" 
5/26/2016,10:21:33.514,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 9 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_9.dat"" 
5/26/2016,10:26:48.713,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 10 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_10.dat"" 
5/26/2016,10:29:11.423,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 11 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_11.dat"" 
5/26/2016,10:31:13.998,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 12 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_12.dat"" 
5/26/2016,10:31:48.709,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 13 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_13.dat"" 
5/26/2016,10:32:00.968,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 14 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_14.dat"" 
5/26/2016,10:32:49.648,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 15 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_15.dat"" 
5/26/2016,10:33:00.067,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 16 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_16.dat"" 
5/26/2016,10:35:05.512,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 17 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_17.dat"" 
5/26/2016,10:37:33.932,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 18 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_18.dat"" 
5/26/2016,10:38:55.683,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 20 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_20.dat"" 
5/26/2016,10:39:29.808,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c Y -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_Y.dat"" 
5/26/2016,10:39:39.565,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 19 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_19.dat"" 
5/26/2016,10:40:31.859,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 22 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_22.dat"" 
5/26/2016,10:40:40.170,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -c 21 -m GCContentWeighted -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_21.dat"" 
5/26/2016,10:43:25.457,Max job memory (GB): 2.4
5/26/2016,10:43:25.457,Longest job runtime (Hours): 0.37
5/26/2016,10:43:25.463,DoWorkParallelThreads, attempt 1 of 1
5/26/2016,10:43:25.463,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasBin.exe -b ""/projects/rcorbettprj2/CNV_2016/HMMCopy_Titan/tumour.bam"" -p -r ""/projects/rcorbettprj2/CNV_2016/Canvas/kmer.fa"" -f ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -d 100 -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0.binned"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_1.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_2.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_3.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_4.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_5.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_6.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_7.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_X.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_8.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_9.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_10.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_11.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_12.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_13.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_14.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_15.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_16.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_17.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_18.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_20.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_Y.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_19.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_22.dat"" -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0_21.dat"" -m GCContentWeighted 
5/26/2016,10:57:35.898,Max job memory (GB): 22.8
5/26/2016,10:57:35.898,Longest job runtime (Hours): 0.24
5/26/2016,10:57:35.899,Elapsed time (step/time(sec)/name)   2   00:46:55.6  CanvasBin
5/26/2016,10:57:35.899,Saving checkpoint results to /projects/rcorbettprj2/CNV_2016/Canvas/out/Checkpoints/02-CanvasBin.json
5/26/2016,10:57:36.447,Running checkpoint 3: 'CanvasClean'
5/26/2016,10:57:36.631,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasClean.exe -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest_0.binned"" -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest.cleaned"" -g -s -r -f ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/FilterRegions.txt""
5/26/2016,10:58:34.192,Max job memory (GB): 1.9
5/26/2016,10:58:34.193,Longest job runtime (Hours): 0.02
5/26/2016,10:58:34.193,Elapsed time (step/time(sec)/name)   3   00:00:57.7  CanvasClean
5/26/2016,10:58:34.193,Saving checkpoint results to /projects/rcorbettprj2/CNV_2016/Canvas/out/Checkpoints/03-CanvasClean.json
5/26/2016,10:58:34.280,Running checkpoint 4: 'CanvasPartition'
5/26/2016,10:58:34.286,Launch process: /opt/mono/bin/mono /home/rcorbett/bin/canvas-1.3.9_x64/CanvasPartition.exe -i ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest.cleaned"" -b ""/projects/rcorbettprj2/CNV_2016/Canvas/filter13.bed"" -o ""/projects/rcorbettprj2/CNV_2016/Canvas/out/TempCNV_coloTest/coloTest.partitioned"" 
5/26/2016,10:59:14.586,Max job memory (GB): 1.8
5/26/2016,10:59:14.586,Longest job runtime (Hours): 0.01
5/26/2016,10:59:14.586,Elapsed time (step/time(sec)/name)   4   00:00:40.3  CanvasPartition
5/26/2016,10:59:14.586,Saving checkpoint results to /projects/rcorbettprj2/CNV_2016/Canvas/out/Checkpoints/04-CanvasPartition.json
5/26/2016,10:59:14.610,ERROR: Canvas workflow error: System.InvalidOperationException: Operation is not valid due to the current state of the object
  at System.IO.StreamWriter.CheckState () [0x00000] in <filename unknown>:0 
  at System.IO.StreamWriter.Write (System.String value) [0x00000] in <filename unknown>:0 
  at System.IO.CStreamWriter.Write (System.String val) [0x00000] in <filename unknown>:0 
  at System.IO.TextWriter.Write (System.String format, System.Object arg0) [0x00000] in <filename unknown>:0 
  at System.IO.TextWriter.WriteLine (System.String format, System.Object arg0) [0x00000] in <filename unknown>:0 
  at System.IO.SynchronizedWriter.WriteLine (System.String format, System.Object value) [0x00000] in <filename unknown>:0 
  at System.Console.WriteLine (System.String format, System.Object arg0) [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.InvokeCanvasSnv (Canvas.CanvasCallset callset) [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<>c__DisplayClass17_0.<CallSampleInternal>b__0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.LegacyCheckpointRunnerAsync+<>c__DisplayClass0_0.<RunCheckpointAsync>b__0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.LegacyCheckpointRunner+NullSandboxedCheckpoint`2[System.String,System.String].Run (System.String input, IDirectoryLocation tempDirectory) [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+<>c__DisplayClass23_0`2[System.String,System.String].<RunCheckpointAsync>b__0 (ICheckpointRunnerAsync checkpointer, System.String runInput, IDirectoryLocation tempDir) [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+<>c__DisplayClass22_1`2[System.String,System.String].<WrapWithLoadingConvention>b__2 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[System.String].<WrapWithBenchmark>b__9_0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[System.String].<WrapWithSave>b__10_0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+<>c__DisplayClass22_0`2[System.String,System.String].<WrapWithLoadingConvention>b__0 (ICheckpointRunnerAsync runner, IDirectoryLocation tempDir) [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+<>c__DisplayClass18_0`1[System.String].<SupplyNestedCheckpoint>b__0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[System.String].<WrapWithStopCheckpointCheck>b__12_0 () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.TaskActionInvoker+FuncInvoke`1[TResult].Invoke (System.Threading.Tasks.Task owner, System.Object state, System.Threading.Tasks.Task context) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.InnerInvoke () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.ThreadStart () [0x00000] in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter`1[TResult].GetResult () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.LegacyCheckpointRunnerAsync+<RunCheckpointAsync>d__0.MoveNext () [0x00000] in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.GetResult () [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<CallSampleInternal>d__17.MoveNext () [0x00000] in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.GetResult () [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.CallSample (Canvas.CanvasCallset callset) [0x00000] in <filename unknown>:0 
  at Canvas.TumorNormalWgsRunner.Run (ILogger logger, ICheckpointRunnerAsync checkpointRunner, IWorkManager workManager) [0x00000] in <filename unknown>:0 
  at Canvas.ModeLauncher.Launch () [0x00000] in <filename unknown>:0
```
",RichardCorbett,https://github.com/Illumina/canvas/issues/8
MDU6SXNzdWUxNjI5NjcxMTY=,FFPE mode?,CLOSED,2016-06-29T16:14:49Z,2016-06-29T16:49:28Z,2016-06-29T16:49:28Z,"Hi again,
I see in your paper that you have some promising results for FFPE data when using your software.   Is there anything special needed to engage the FFPE processing, or do the regular commands include the same processing steps?
",RichardCorbett,https://github.com/Illumina/canvas/issues/10
MDU6SXNzdWUxNjMwMDI5NTQ=,Canvas usage for mouse,CLOSED,2016-06-29T19:08:53Z,2017-05-30T19:18:16Z,2017-05-30T19:18:16Z,"I have a set of samples from a mouse cancer cell lines sequenced using Illumina HiSeq (exome capture) in addition to a wild type reference (2 replicates of each WT/Cancer).

The purpose is to extract possible CNVs. I have only bam files mapped with BWA and the corresponding genome reference data (mm9).

The first question would be, would you recommend CANVAS for CNV calls from such mouse cell line samples?

If yes, this would lead to the next set of questions:

1-  I guess the “Tumor-normal-enrichment” workflow should be used. Right?
2-  What should be the --manifest= option in this case? The same as in the github demo?
3-  Is providing a filter (-f) required? I have no specifics here for my experiement. Any recommendations?
4-  “--b-allele-vcf” I did not get what should I fill in for this parameter.
5-  What kind of custom parameters should I add?
6-  The “-m” parameter is found in the demo but not in the actual help of CANVAS? What is its usage?
",eroller,https://github.com/Illumina/canvas/issues/11
MDU6SXNzdWUxNjQxMjM4MTY=,No Germline Enrichment mode,CLOSED,2016-07-06T16:53:36Z,2016-08-04T19:07:14Z,2016-08-04T19:07:14Z,"Nearly all of my germline data is from whole exome sequencing, and I was wondering if it would be possible to use your software to detect variants in exome data. From the documentation it looks like there is only a WGS (not exome) option for germline samples. Do you know if there is a way around this that might enable me to use your software?
",eroller,https://github.com/Illumina/canvas/issues/12
MDU6SXNzdWUxNjQxNjM2NTA=,"Use the matched normal during ""Somatic-WGS""?",CLOSED,2016-07-06T20:14:59Z,2016-07-26T15:45:47Z,2016-07-26T15:45:47Z,"Hey there,
I don't see an option to include the aligned reads from the matched normal to help normalize the depths of the tumour read counts.    It does show up in your example of the ""Tumor-normal-enrichment"" command.    In my experience, having the matched normal helped normalize out some biases in read coverage that weren't properly modeled by GC, etc.   Is there a way to include the normal read depths when running ""somatic-WGS"" ?

thanks,
RIchard
",RichardCorbett,https://github.com/Illumina/canvas/issues/13
MDU6SXNzdWUxNjQxNzU1Mzk=,Get purity estimate in quiet sample,CLOSED,2016-07-06T21:13:01Z,2016-08-04T19:07:50Z,2016-08-04T19:07:50Z,"Hi again,

I'm doing some test regarding the ploidy and tumour purity estimation.   In the design document I see this:

> If we did not assign many CNVs (.....), then this SNV-estimated purity is what gets reported to the purity output VCF file

and I see this in my SomaticCNV-a.stdout.txt file

> > > > Loaded 3423 somatic variants; saved 3368 somatic SNV frequencies
> > > > Estimated tumor purity of 0.410252243280411 from somatic SNV calls
> > > > Purity estimates: 1.0000 from CNVs, 0.4103 from SNVs
> > > > Fraction abnormal CNV is 0.0407

but my VCF file says 

> ## EstimatedTumorPurity=1.00

Am I missing something or should my tumour purity estimate be 0.4103 in the VCF file?
",RichardCorbett,https://github.com/Illumina/canvas/issues/14
MDU6SXNzdWUxNjQxNzU3NDg=,Missing NA12878 Truth Set?,CLOSED,2016-07-06T21:14:04Z,2016-07-26T15:46:14Z,2016-07-26T15:46:14Z,"Hello,
the paper says that: ""To benchmark the germline workflow, a reference CNV call set for NA12878 individual from the PG family was created by selecting the pedigree-consistent set of deletion calls made using a range of structural variant calling tools.""
But I can't find the reference set in the EvaluateCNV folder of the Canvas GitHub repository.
Is that publicly available?
Thanks a lot in advance.
Kind Regards.
-- Jacopo
",jacirrone,https://github.com/Illumina/canvas/issues/15
MDU6SXNzdWUxNjQ1NTUxMTg=,index out of range error in CanvasSomaticCaller.exe,CLOSED,2016-07-08T15:25:29Z,2017-12-14T05:11:48Z,2017-12-14T05:11:48Z,"Hi there,
I'm trying to run a set of analyses to see what sort of results I get for various tumours.   On my seventh tumour-normal pair, I got this error.   If I start from scratch and try again I get the same error.

```
 /gsc/software/linux-x86_64-centos6/mono-4.2.3/bin/mono /home/rcorbett/bin/1.11.0/CanvasSomaticCaller.exe -v /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/VFResultsPOG558.txt.gz -i /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/POG558.partitioned -o /projects/rcorbettprj2/CNV_2016/tests/POG558/out/CNV.vcf.gz -b /projects/rcorbettprj2/CNV_2016/Canvas/GRCh37/filter13.bed -n POG558 -f ""/projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/FilterRegions.txt"" -s /projects/rcorbettprj2/CNV_2016/tests/POG558/passed.somatic.snvs.eff.vcf -r ""/projects/rcorbettprj2/CNV_2016/Canvas/GRCh37/""
>>>Command-line arguments:
-v /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/VFResultsPOG558.txt.gz -i /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/POG558.partitioned -o /projects/rcorbettprj2/CNV_2016/tests/POG558/out/CNV.vcf.gz -b /projects/rcorbettprj2/CNV_2016/Canvas/GRCh37/filter13.bed -n POG558 -f /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/FilterRegions.txt -s /projects/rcorbettprj2/CNV_2016/tests/POG558/passed.somatic.snvs.eff.vcf -r /projects/rcorbettprj2/CNV_2016/Canvas/GRCh37/ 
>>> Loaded 416 intervals for 24 sequences
7/8/2016 8:20:26 AM CallVariants start:
7/8/2016 8:20:26 AM Read segments from /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/POG558.partitioned
7/8/2016 8:20:37 AM Loaded 4268 segments
7/8/2016 8:20:37 AM Load variant frequencies from /projects/rcorbettprj2/CNV_2016/tests/POG558/out/TempCNV_POG558/VFResultsPOG558.txt.gz
7/8/2016 8:20:40 AM Loaded a total of 2277581 usable variant frequencies
7/8/2016 8:20:40 AM Initialize ploidy models...
7/8/2016 8:20:40 AM Ploidy models prepared.
Modeling overall coverage/purity across 3293 segments
>>> Running density clustering for cutoff 0.06000 , number of clusters 4
>>> Running density clustering for cutoff 0.05480 , number of clusters 4
>>> Running density clustering for cutoff 0.04960 , number of clusters 5
>>> Running density clustering for cutoff 0.04440 , number of clusters 5
>>> Running density clustering for cutoff 0.03920 , number of clusters 7
>>> Running density clustering for cutoff 0.03400 , number of clusters 7
>>> Running density clustering for cutoff 0.02880 , number of clusters 11
>>> Running density clustering for cutoff 0.02360 , number of clusters 11
>>> Running density clustering for cutoff 0.01840 , number of clusters 13
>>> Running density clustering for cutoff 0.01320 , number of clusters 13
>>> Running density clustering for cutoff 0.00800 , number of clusters 17

Unhandled Exception:
System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
  at System.ThrowHelper.ThrowArgumentOutOfRangeException () <0x7fa81a500d10 + 0x00034> in <filename unknown>:0 
  at System.Collections.Generic.List`1[T].get_Item (Int32 index) <0x7fa81a723ed0 + 0x0001e> 24634 in <filename unknown>:0 
  at CanvasSomaticCaller.SomaticCaller.ModelOverallCoverageAndPurity (Int64 genomeLength, CanvasSomaticClusteringMode clusteringMode) <0x414c0000 + 0x013c0> in <filename unknown>:0 
  at CanvasSomaticCaller.SomaticCaller.CallCNVUsingSNVFrequency (Nullable`1 localSDmertic, System.String referenceFolder, CanvasSomaticClusteringMode clusteringMode) <0x414b8720 + 0x00163> in <filename unknown>:0 
  at CanvasSomaticCaller.SomaticCaller.CallVariants (System.String inFile, System.String variantFrequencyFile, System.String outputVCFPath, System.String referenceFolder, System.String name, Nullable`1 localSDmertic, CanvasSomaticClusteringMode clusteringMode) <0x414b4180 + 0x004cf> in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
  at System.ThrowHelper.ThrowArgumentOutOfRangeException () <0x7fa81a500d10 + 0x00034> in <filename unknown>:0 
  at System.Collections.Generic.List`1[T].get_Item (Int32 index) <0x7fa81a723ed0 + 0x0001e> 24634 in <filename unknown>:0 
  at CanvasSomaticCaller.SomaticCaller.ModelOverallCoverageAndPurity (Int64 genomeLength, CanvasSomaticClusteringMode clusteringMode) <0x414c0000 + 0x013c0> in <filename unknown>:0 
  at CanvasSomaticCaller.SomaticCaller.CallCNVUsingSNVFrequency (Nullable`1 localSDmertic, System.String referenceFolder, CanvasSomaticClusteringMode clusteringMode) <0x414b8720 + 0x00163> in <filename unknown>:0 
  at CanvasSomaticCaller.SomaticCaller.CallVariants (System.String inFile, System.String variantFrequencyFile, System.String outputVCFPath, System.String referenceFolder, System.String name, Nullable`1 localSDmertic, CanvasSomaticClusteringMode clusteringMode) <0x414b4180 + 0x004cf> in <filename unknown>:0
```
",RichardCorbett,https://github.com/Illumina/canvas/issues/16
MDU6SXNzdWUxNjgzODgxMDg=,Dockerfile?,OPEN,2016-07-29T18:41:37Z,2019-03-28T19:10:38Z,,"To make it easier to run on container-aware linux distributions, it might be good to distribute a Docker Image or at least a Dockerfile.  

```
FROM mono

RUN mkdir /canvas

COPY * /canvas/

ENTRYPOINT [""mono"", ""/canvas/Canvas.exe""]

CMD [""--help""]
```
",alanhoyle,https://github.com/Illumina/canvas/issues/17
MDU6SXNzdWUxNjg1OTkxMjg=,Somatic-Enrichment: Out of memory - error,CLOSED,2016-08-01T09:03:15Z,2016-08-04T19:04:40Z,2016-08-04T19:04:40Z,"After installing canvas I verified this with the example dataset and it worked like a charm. But then I tried to use my own data and I got an error without report. I tried to run the command which produced the error and got the following:

Unhandled Exception:
System.OutOfMemoryException: Out of memory
  at (wrapper alloc) System.Object:AllocVector (intptr,intptr)
  at SequencingFiles.BamReader.Read (System.Byte[]& data, UInt32 dataLength) <0x41b7b980 + 0x0006a> in <filename unknown>:0 
  at SequencingFiles.BamReader.GetNextAlignment (SequencingFiles.BamAlignment& alignment, Boolean skipAdditionalParsing) <0x41b7f480 + 0x000a3> in <filename unknown>:0 
  at SequencingFiles.BamReader.Jump (Int32 refID, Int32 position) <0x41b7c300 + 0x00373> in <filename unknown>:0 
  at CanvasBin.CanvasBin.LoadObservedAlignmentsBAM (System.String bamFile, Boolean isPairedEnd, System.String chromosome, CanvasCoverageMode coverageMode, CanvasBin.HitArray observed, System.Int16[] fragmentLengths) <0x41b795b0 + 0x0011b> in <filename unknown>:0 
  at CanvasBin.CanvasBin.BinOneGenomicInterval (CanvasBin.CanvasBinParameters parameters, System.Collections.Generic.Dictionary`2 possibleAlignments, System.Collections.Generic.Dictionary`2 observedAlignments, System.Collections.Generic.Dictionary`2 fragmentLengths) <0x41b77aa0 + 0x0011b> in <filename unknown>:0 
  at CanvasBin.CanvasBin.Run (CanvasBin.CanvasBinParameters parameters) <0x41b76e90 + 0x00233> in <filename unknown>:0 
  at CanvasBin.Program.Main (System.String[] args) <0x41b47d50 + 0x000e3> in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.OutOfMemoryException: Out of memory
  at (wrapper alloc) System.Object:AllocVector (intptr,intptr)
  at SequencingFiles.BamReader.Read (System.Byte[]& data, UInt32 dataLength) <0x41b7b980 + 0x0006a> in <filename unknown>:0 
  at SequencingFiles.BamReader.GetNextAlignment (SequencingFiles.BamAlignment& alignment, Boolean skipAdditionalParsing) <0x41b7f480 + 0x000a3> in <filename unknown>:0 
  at SequencingFiles.BamReader.Jump (Int32 refID, Int32 position) <0x41b7c300 + 0x00373> in <filename unknown>:0 
  at CanvasBin.CanvasBin.LoadObservedAlignmentsBAM (System.String bamFile, Boolean isPairedEnd, System.String chromosome, CanvasCoverageMode coverageMode, CanvasBin.HitArray observed, System.Int16[] fragmentLengths) <0x41b795b0 + 0x0011b> in <filename unknown>:0 
  at CanvasBin.CanvasBin.BinOneGenomicInterval (CanvasBin.CanvasBinParameters parameters, System.Collections.Generic.Dictionary`2 possibleAlignments, System.Collections.Generic.Dictionary`2 observedAlignments, System.Collections.Generic.Dictionary`2 fragmentLengths) <0x41b77aa0 + 0x0011b> in <filename unknown>:0 
  at CanvasBin.CanvasBin.Run (CanvasBin.CanvasBinParameters parameters) <0x41b76e90 + 0x00233> in <filename unknown>:0 
  at CanvasBin.Program.Main (System.String[] args) <0x41b47d50 + 0x000e3> in <filename unknown>:0

Why does the test set work and my own with a much smaller bam (only about 2.3 Gb) not? I used the same reference files as in the test setting, only changed the bam... 
",Caninus23,https://github.com/Illumina/canvas/issues/18
MDU6SXNzdWUxNjkwNDI4NDc=,CNV calling of a tumor/normal pair from whole-genome sequencing data,CLOSED,2016-08-03T04:01:20Z,2017-04-04T18:57:04Z,2016-08-04T19:06:55Z,"May I know how I can perform CNV calling of a tumor/normal pair from whole-genome sequencing data with the current version of the software? Thanks
",JoKw,https://github.com/Illumina/canvas/issues/19
MDU6SXNzdWUxNjk0NTA2NTY=,CanvasBin error during Somatic-WGS workflow,CLOSED,2016-08-04T19:10:17Z,2016-08-31T20:40:54Z,2016-08-31T20:40:54Z,"Hello all,
I'm running Somatic Canvas, but I keep getting the following error. Do you know what is this about?
---Failed command:
mono-4.4.0/bin/mono canvas-1.3.9/CanvasBin.exe

--- both stdout and stderr log files are empty!
  at Illumina.SecondaryAnalysis.JobManager.CheckExitCodes (System.Collections.Generic.List`1 jobs, Boolean throwExceptionOnBadExitCode) <0x411493b0 + 0x004eb> in <filename unknown>:0
",eroller,https://github.com/Illumina/canvas/issues/20
MDU6SXNzdWUxNzE1NjE2OTc=,Targeted sequencing on FFPE tumours,CLOSED,2016-08-17T02:40:45Z,2017-12-14T05:10:57Z,2017-12-14T05:10:57Z,"Hello,

I am confused about which parameters should be set for an FFPE tumour run without a matched normal. 
My specific questions are:
1. Is the Somatic-Enrichment workflow correct for targeted sequencing on an unmatched FFPE tumour?
2. Is it wise to use a non-FFPE **unmatched** normal control sample with an FFPE tumour? I recall you saying this was not helpful, so I have not defined a control sample below.
3. When specifying custom parameters to multiple tools, is each tool specification separated by a semicolon?
4. Are the custom parameters below appropriate for an FFPE sample?
5. Which custom parameters are set for each step of the Somatic-Enrichment workflow by default?

At the moment what I have is the following (values inside <> are my files):

Canvas.exe Somatic-Enrichment --bam=<TUMOUR_FFPE.BAM>
--manifest=<MANIFEST>
--b-allele-vcf=dbsnp.vcf
--exclude-non-het-b-allele-sites=TRUE
--output=<OUT_DIR> --reference=kmer.fa
--genome-folder=<GENOME_DIR>
--sample_name=<SAMPLE>
--custom-parameters=CanvasBin,-m=TruncatedDynamicRange;CanvasClean,--ffpeoutliers=TRUE

Thank you very much for your time, sorry for the many questions.

Cheers,
Peter

ADDIT: I just saw in the source code of CanvasClean.exe that ffpeoutliers is not recommended for targeted data - so for Somatic-Enrichment it should be turned off?
",cloudbroken,https://github.com/Illumina/canvas/issues/21
MDU6SXNzdWUxNzE1ODA2Mjk=,Bam file error,CLOSED,2016-08-17T05:59:56Z,2016-08-31T19:33:06Z,2016-08-31T19:33:06Z,"Trying to run the Somatic-Enrichment workflow. Getting the following error:

17/08/2016,15:24:00.636,ERROR: Canvas workflow error: System.BadImageFormatException: An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B)
   at SequencingFiles.Compression.SafeNativeMethods.UncompressBlock(Byte[] compressedBlock, UInt32 compressedLen, Byte[] uncompressedBlock, UInt32 uncompressedLen)
   at SequencingFiles.BamReader.ReadBlock()
   at SequencingFiles.BamReader.Read(Byte[]& data, UInt32 dataLength)
   at SequencingFiles.BamReader.LoadHeaderData()
   at SequencingFiles.BamReader.Open(Stream inStream)
   at SequencingFiles.BamReader.Open(String filename)
   at Isas.Shared.Bam.LoadIsPairedEnd()
   at Illumina.SecondaryAnalysis.CanvasRunner.InvokeCanvasBin(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyBedPath) in D:\TeamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 126
   at Illumina.SecondaryAnalysis.CanvasRunner.<>c__DisplayClass17_0.<CallSampleInternal>b__1() in D:\TeamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 528
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.CheckpointHelper`1.<WrapWithBenchmark>b__9_0()
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.CheckpointHelper`1.<WrapWithSave>b__10_0()
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.CheckpointHelper`1.<WrapWithStopCheckpointCheck>b__12_0()
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.RunCheckpoint[TOut](String key, Func`1 function)
   at Illumina.SecondaryAnalysis.CanvasRunner.<CallSampleInternal>d__17.MoveNext() in D:\TeamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 528
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Illumina.SecondaryAnalysis.CanvasRunner.CallSample(CanvasCallset callset) in D:\TeamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 498
   at Canvas.ModeLauncher.Launch() in D:\TeamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\ModeLauncher.cs:line 61

From trying CanvasBin separately, there seems to be a problem loading the Bam file. My Bam files validated with picard validatesamfile. Not sure what the problem is? The Bam files were aligned with bwa, and the reference used in alignment included GL chromosomes, not sure if that is causing the problem? The chromosome names in the Bam file, the reference fasta and the manifest are all in the same format.

Thank you.

Cheers,
Peter
",cloudbroken,https://github.com/Illumina/canvas/issues/22
MDU6SXNzdWUxNzE3OTk3MjI=,Somatic-Enrichment error ,CLOSED,2016-08-18T01:42:03Z,2017-12-14T05:09:49Z,2017-12-14T05:09:49Z,"Getting the error below running Canvas Somatic-Enrichment.
The thing is that the files are actually there. If I go on to run CanvasPartition etc manually then it all works.

18/08/2016,11:03:16.264,Launch process: C:\1.11.0\CanvasClean.exe -i ""C:\Canvas_test\TempCNV_sample1\sample1_0.binned""
 -o ""C:\Canvas_test\TempCNV_sample1\sample1.cleaned"" -g -t ""C:\Canvas_test\TempCNV_sample1\manifest.txt""
18/08/2016,11:03:16.997,Max job memory (GB): 0.0
18/08/2016,11:03:16.997,Longest job runtime (Hours): 0.00
18/08/2016,11:03:17.200,ERROR: Canvas workflow error: System.ArgumentNullException: Value cannot be null.
Parameter name: fileName
   at System.IO.FileInfo..ctor(String fileName)
   at Illumina.SecondaryAnalysis.CanvasRunner.InvokeCanvasClean(CanvasCallset callset, IFileLocation binnedPath) in D:\T
eamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 637
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.CheckpointHelper`1.<WrapWithBenchmark>b__9_0()
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.CheckpointHelper`1.<WrapWithSave>b__10_0()
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.CheckpointHelper`1.<WrapWithStopCheckpointCheck>b__12_0()
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Shared.Checkpointing.CheckpointRunnerAsync.RunCheckpoint[TOut](String key, Func`1 function)
   at Illumina.SecondaryAnalysis.CanvasRunner.<CallSampleInternal>d__17.MoveNext() in D:\TeamCity\buildAgent\work\7ce21c
24b500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 532
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Illumina.SecondaryAnalysis.CanvasRunner.CallSample(CanvasCallset callset) in D:\TeamCity\buildAgent\work\7ce21c24b
500a92f\Src\Canvas\Canvas\CanvasRunner.cs:line 498
   at Canvas.ModeLauncher.Launch() in D:\TeamCity\buildAgent\work\7ce21c24b500a92f\Src\Canvas\Canvas\ModeLauncher.cs:lin
e 61

Thanks.

Cheers,
Peter
",cloudbroken,https://github.com/Illumina/canvas/issues/23
MDU6SXNzdWUxNzIwMTcxNzA=,How is localSD metric calculated,CLOSED,2016-08-18T22:37:07Z,2016-08-18T22:40:13Z,2016-08-18T22:40:13Z,"``` cs
        /// <summary>
        /// Estimate local standard deviation (SD).
        /// </summary>
        /// <param name=""bins"">Genomic bins from which we filter out local SD outliers associated with FFPE biases.</param>
        /// <param name=""threshold"">Median SD value which is used to determine whereas to run RemoveBinsWithExtremeLocalMad on a sample and which set of bins to remove (set as threshold*5).</param>
        /// The rationale of this function is that standard deviation of difference of consecutive bins values, when taken over a small range of bin (i.e. 20 bins),
        /// has a distinct distribution for FFPE compared to Fresh Frozen (FF) samples. This property is used to flag and remove such bins.

        static double getLocalStandardDeviation(List<GenomicBin> bins)
        {
            // Will hold consecutive bin count difference (approximates Skellam Distribution: mean centred on zero so agnostic to CN changes)
            double[] countsDiffs = new double[bins.Count - 1];

            for (int binIndex = 0; binIndex < bins.Count - 1; binIndex++)
            {
                countsDiffs[binIndex] = Convert.ToDouble(bins[binIndex + 1].Count - bins[binIndex].Count);
            }

            // holder of local SD values (SDs of 20 bins)
            List<double> localSDs = new List<double>();
            List<string> chromosomeBin = new List<string>();

            // calculate local SD metric
            int windowSize = 20;
            for (int windowEnd = windowSize, windowStart = 0; windowEnd < countsDiffs.Length; windowStart += windowSize, windowEnd += windowSize)
            {
                double localSD = Utilities.StandardDeviation(countsDiffs, windowStart, windowEnd);
                localSDs.Add(localSD);
                chromosomeBin.Add(bins[windowStart].Chromosome);
                for (int binIndex = windowStart; binIndex < windowEnd; binIndex += 1)
                {
                    bins[binIndex].MadOfDiffs = localSD;
                }
            }

            // average of local SD metric
            double localSDaverage = GetLocalStandardDeviationAverage(localSDs, chromosomeBin);
            return localSDaverage;
        }
```
",eroller,https://github.com/Illumina/canvas/issues/24
MDU6SXNzdWUxNzIwMTk4NzU=,Job Manager detected that mono ran for more than 2.50 hours,CLOSED,2016-08-18T22:56:53Z,2016-08-31T19:32:01Z,2016-08-31T19:32:01Z,"On multiprocessor machines with sufficient memory we do not expect any single Canvas step to take more than 2.5 hours. However, if you are encountering this issue you can workaround it by modifying Canvas.exe.config as follows (increasing to 10 hours maximum):

``` xml
<?xml version=""1.0""?>
<configuration>
  <appSettings>
    <add key=""MaximumHoursPerProcess"" value=""10""/>
  </appSettings>
  <startup> 
    <supportedRuntime version=""v4.0"" sku="".NETFramework,Version=v4.5.1""/>
  </startup>
</configuration>
```
",eroller,https://github.com/Illumina/canvas/issues/25
MDU6SXNzdWUxNzI2MDI5MDQ=,CanvasSomaticCaller.exe failed,CLOSED,2016-08-23T03:12:05Z,2017-12-14T05:09:17Z,2017-12-14T05:09:17Z,"Hi,

I am running Canvas on tumor WGS samples and get the following error. I have attached the stderr file, please let me know what other information you might need. 
[SomaticCNV.stderr.txt](https://github.com/Illumina/canvas/files/431609/SomaticCNV.stderr.txt)
This error has occurred only on some samples that I have been testing. 

Thanks,
Minita
",shahmj,https://github.com/Illumina/canvas/issues/26
MDU6SXNzdWUxNzMwOTgyNTg=,Sub-clonal events in WGS samples,CLOSED,2016-08-25T02:04:23Z,2016-09-01T16:40:33Z,2016-09-01T16:40:33Z,"How does Canvas deal with sub-clonal events in WGS samples? Is there anyway to get that information from the Canvas output if there are sub-clonal events present?

Thanks,
Minita
",shahmj,https://github.com/Illumina/canvas/issues/27
MDU6SXNzdWUxNzMyMDA5NTk=,Error in SomaticCNV.stderr.txt,CLOSED,2016-08-25T13:19:31Z,2016-09-14T20:26:07Z,2016-09-14T18:58:09Z,"Any idea what might be causing this?
`* Error deriving purity estimate from somatic SNVs.  Details:
System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
  at System.ThrowHelper.ThrowKeyNotFoundException () <0x7f0227c98970 + 0x00015> in <filename unknown>:0
  at System.Collections.Generic.Dictionary`2[TKey,TValue].get_Item (System.Collections.Generic.TKey key) <0x7f0227b0e3e0 + 0x0004a> in <filename unknown>:0
  at CanvasSomaticCaller.SomaticCaller.EstimatePurityFromSomaticSNVs () <0x41177660 + 0x00329> in <filename unknown>:0
  at CanvasSomaticCaller.SomaticCaller.CallCNVUsingSNVFrequency (Nullable`1 localSDmertic, System.String referenceFolder) <0x4114eea0 + 0x00273> in <filename unknown>:0`
",shahmj,https://github.com/Illumina/canvas/issues/28
MDU6SXNzdWUxNzg5NzA4OTU=,Canvas workflow error,CLOSED,2016-09-23T20:52:16Z,2017-12-14T05:08:20Z,2017-12-14T05:08:20Z,"Hello,

I'm trying to test Canvas on a human sample and it's giving me errors. It says:

> Canvas workflow error: Isas.Shared.JobFailedException: mono returned error code 1

I also attached the CanvasError.txt that is produced. Would appreciate your help.
[CanvasLog.txt](https://github.com/Illumina/canvas/files/490652/CanvasLog.txt)
",rajeha,https://github.com/Illumina/canvas/issues/29
MDU6SXNzdWUxODE2MzkzNzM=,Limiting number of threads to use,OPEN,2016-10-07T10:52:49Z,2020-04-20T21:28:49Z,,"How can I limit the number of threads to use by Canvas? This is important in shared environments such as HPC clusters.
",holtgrewe,https://github.com/Illumina/canvas/issues/30
MDU6SXNzdWUxODM1MjgwMDM=,Calling CNV without a matched normal?,CLOSED,2016-10-17T21:07:40Z,2016-11-14T15:29:10Z,2016-11-14T15:29:10Z,"Is it possible to use Canvas to call CNV without a matched-normal bam file? I.e. I have targeted sequence data from tumors from multiple subjects, and targeted sequence from normal tissue for a  subset of those.  Is it possible to use Canvas to call CNV alterations on the unmatched tumor data?  If so, how?  Can I just dump in an unmatched normal BAM in the --normal-bam=... as follows?  

mono Canvas.exeTumor-normal-enrichment -b subject1-tumor.bam --normal-bam=subject1-normal.bam 
",alanhoyle,https://github.com/Illumina/canvas/issues/31
MDU6SXNzdWUxODM2MjI5NDc=,Set Binning Size in output,CLOSED,2016-10-18T08:37:38Z,2017-12-14T05:07:42Z,2017-12-14T05:07:42Z,"Hi, 

Is it possible to alter the 100kb binning sizes in the CNV.CoverageAndVariantFrequency.txt file? I've been looking around but can't seem to find an option for it...

Regards
Per Sikora
",persikora,https://github.com/Illumina/canvas/issues/32
MDU6SXNzdWUxODM3ODM0MzE=,Canvas workflow error: System.IO.FileNotFoundException,CLOSED,2016-10-18T19:41:09Z,2017-03-06T19:24:07Z,2017-03-06T19:24:07Z,"Hi,

Canvas tells me it cannot find 'mono', but it is the right path.

. OS: Linux

. Downloaded Canvas binaries (not built from source)

. Downloaded all reference files (except 'dbsnp.vcf') from BaseSpace and placed then in '$HOME/lib/Canvas_1.11.0/ref_files/'

. The following command works:
$HOME/lib/mono-4.6.1/bin/mono $HOME/lib/Canvas_1.11.0/Canvas.exe -h

. The following command does NOT work (Error_log attached):
$HOME/lib/mono-4.6.1/bin/mono $HOME/lib/Canvas_1.11.0/Canvas.exe \
    Tumor-normal-enrichment \
    --bam=$HOME/tumor.bam \
    --normal-bam=$HOME/normal.bam \
    --reference=$HOME/lib/Canvas_1.11.0/ref_files/kmer.fa \
    --manifest=$HOME/lib/Canvas_1.11.0/ref_files/targets_Canvas.txt \
    --genome-folder=$HOME/lib/Canvas_1.11.0/ref_files/ \
    --sample-name=TEST \
    --filter-bed=$HOME/lib/Canvas_1.11.0/ref_files/filter13.bed \
    --output=$HOME/Canvas/test \
    --b-allele-vcf=$HOME/normal_snps_indels.g.vcf \
    --custom-parameters=CanvasBin,-m=TruncatedDynamicRange

I get the error after 'Running checkpoint 1: 'CanvasSNV''

Any idea what could be wrong?
Thanks !

[CanvasError.txt](https://github.com/Illumina/canvas/files/537194/CanvasError.txt)
",u9090,https://github.com/Illumina/canvas/issues/33
MDU6SXNzdWUxODkxNDc1MTU=,allow use of BED file for manifest,OPEN,2016-11-14T15:50:36Z,2018-05-18T18:11:26Z,,"We're using custom targeted sequencing from a different company than Illumina.  They don't provide us with a Nextera manifest formatted file, but I was able to get things to run and get some results by performing some editing, and awk/perl/etc. to make a file that at least looks like an example manifest file I've seen online.  It would be much easier to deal with if the --manifest parameter could accept a standard BED file in addition to the proprietary Nextera Manifest format.  ",alanhoyle,https://github.com/Illumina/canvas/issues/34
MDU6SXNzdWUxODk5NzMxMDI=,Canvas for non-tumorous data?,CLOSED,2016-11-17T08:22:17Z,2017-12-14T05:01:38Z,2017-12-14T05:01:38Z,"Hi

I was just wondering, can you use Canvas to detect copy number variants from any WGS data? The manual and publication talks almost explicitly about tumor and normal samples. Shouldn't e.g. Somatic-WGS (CNV calling of a somatic sample from whole genome sequencing data) mode be apt for any human somatic-WGS data?",P4sm,https://github.com/Illumina/canvas/issues/35
MDU6SXNzdWUxOTAzNzYyNTA=,Canvas workflow error: System.TypeInitializationException: The type initializer for 'Newtonsoft.Json.JsonWriter' threw an exception. ---> System.BadImageFormatException,CLOSED,2016-11-18T17:28:38Z,2017-12-14T05:06:49Z,2017-12-14T05:06:49Z,"Hello,

My name is Rabia and I am trying to run the demo for Canvas with the provided data sets/files but seem to be running into errors. I used the exact commands and files as specified in both the Canvas documentation: https://github.com/Illumina/canvas/blob/master/SoftwareDesignDocument.pdf and readme at github: https://github.com/Illumina/canvas, and got the same error both times. I would appreciate any help into resolving this issue and so that I am sure that canvas is successfully installed and running on my computer(linux). 

Thank you,
[CanvasError.txt](https://github.com/Illumina/canvas/files/600539/CanvasError.txt)

Rabia



My terminal command:

/home/rabia/Desktop/Canvas_Test# /usr/bin/mono /home/rabia/Programs/Canvas/Canvas.exe Tumor-normal-enrichment -b HCC1187C_S1.bam --normal-bam=HCC1187BL_S1.bam --reference=kmer.fa --manifest=nexterarapidcapture_expandedexome_targetedregions.txt -g hg19_genome/ -n HCC1187 -f filter13.bed -o out --b-allele-vcf=dbsnp.vcf --custom-parameters=CanvasBin,-m=TruncatedDynamicRange

Error log: 
11/16/2016,15:00:23.003,ERROR: Canvas workflow error: System.TypeInitializationException: The type initializer for 'Newtonsoft.Json.JsonWriter' threw an exception. ---> System.BadImageFormatException: Could not resolve field token 0x04000493
File name: 'Newtonsoft.Json'
  at Newtonsoft.Json.JsonWriter.BuildStateArray () <0x417b26c0 + 0x0008b> in <filename unknown>:0 
  at Newtonsoft.Json.JsonWriter..cctor () <0x417b22c0 + 0x003cf> in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at Newtonsoft.Json.JsonTextWriter..ctor (System.IO.TextWriter textWriter) <0x417b2190 + 0x00017> in <filename unknown>:0 
  at Newtonsoft.Json.JsonConvert.SerializeObjectInternal (System.Object value, System.Type type, Newtonsoft.Json.JsonSerializer jsonSerializer) <0x417b1f70 + 0x000c3> in <filename unknown>:0 
  at Newtonsoft.Json.JsonConvert.SerializeObject (System.Object value, System.Type type, Formatting formatting, Newtonsoft.Json.JsonSerializerSettings settings) <0x417b0630 + 0x0004b> in <filename unknown>:0 
  at Newtonsoft.Json.JsonConvert.SerializeObject (System.Object value, Formatting formatting, Newtonsoft.Json.JsonSerializerSettings settings) <0x417b0540 + 0x00023> in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointJsonSerializerAsync.Serialize[T] (IFileLocation path, Isas.Shared.Checkpointing.T obj) <0x417b0120 + 0x000a7> in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointJsonSerializerAsync.Save[T] (Isas.Shared.Checkpointing.Checkpoint checkpoint, Isas.Shared.Checkpointing.T output) <0x417b0030 + 0x000a7> in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[T].<WrapWithSave>b__10_0 () <0x41753680 + 0x00082> in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[T].<WrapWithStopCheckpointCheck>b__12_0 () <0x41750410 + 0x0001e> in <filename unknown>:0 
  at System.Threading.Tasks.Task`1[TResult].InnerInvoke () <0x7f9e0508cb10 + 0x00053> in <filename unknown>:0 
  at System.Threading.Tasks.Task.Execute () <0x7f9e0509e050 + 0x00055> in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () <0x7f9e050016d0 + 0x00029> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess (System.Threading.Tasks.Task task) <0x7f9e04fff6b0 + 0x000a7> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification (System.Threading.Tasks.Task task) <0x7f9e04fff630 + 0x0006b> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd (System.Threading.Tasks.Task task) <0x7f9e04fff5e0 + 0x0003a> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter`1[TResult].GetResult () <0x7f9e04fff8d0 + 0x00017> in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync.RunCheckpoint[TOut] (System.String key, System.Func`1 function) <0x41750320 + 0x000ac> in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<CallSampleInternal>d__17.MoveNext () <0x4174dd90 + 0x00549> in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () <0x7f9e050016d0 + 0x00029> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess (System.Threading.Tasks.Task task) <0x7f9e04fff6b0 + 0x000a7> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification (System.Threading.Tasks.Task task) <0x7f9e04fff630 + 0x0006b> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd (System.Threading.Tasks.Task task) <0x7f9e04fff5e0 + 0x0003a> in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.GetResult () <0x7f9e04fff5c0 + 0x00012> in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.CallSample (Canvas.CanvasCallset callset) <0x4174d4a0 + 0x001b3> in <filename unknown>:0 
  at Canvas.TumorNormalEnrichmentRunner.Run (ILogger logger, ICheckpointRunnerAsync checkpointRunner, IWorkManager workManager) <0x41747220 + 0x0009b> in <filename unknown>:0 
  at Canvas.ModeLauncher.Launch () <0x4170dcc0 + 0x002a6> in <filename unknown>:0 


",RabiaMaqsood,https://github.com/Illumina/canvas/issues/36
MDU6SXNzdWUxOTA1NzczMDQ=,"Isas.Shared.JobFailedException, ""both stdout and stderr log files are empty!""",CLOSED,2016-11-20T19:21:53Z,2016-11-22T14:56:28Z,2016-11-22T14:56:28Z,"The following error occurs when attempting run ""Somatic-WGS"". Any idea how to solve it?

```
2016-11-20,19:36:24.224,ERROR: Canvas workflow error: Isas.Shared.JobFailedException: mono returned error code -1

---Failed command:
/sw/comp/mono/3.12.0/milou/bin/mono /pica/h1/xkajoa/bin/1.11.0/CanvasBin.exe -b ""/home/xkajoa/b2013029/INBOX/P4951/P4951_104/03-BAM/P4951_104.clean.dedup.bam"" -p -r ""/home/xkajoa/private/GRCh37/WholeGenomeFasta/genome.fa"" -c 1 -m GCContentWeighted -f ""/home/xkajoa/private/GRCh37/filter13.bed"" -d 100 -o ""/home/xkajoa/private/canvas_104/TempCNV_104/104_0_1.dat""

--- both stdout and stderr log files are empty!
```

I'm running Canvas on Linux (Scientific Linux release 6.8), with the following mono version:

```
Mono JIT compiler version 3.12.0 (tarball Fri Jan 16 10:29:56 CET 2015)
Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
	TLS:           __thread
	SIGSEGV:       altstack
	Notifications: epoll
	Architecture:  amd64
	Disabled:      none
	Misc:          softdebug
	LLVM:          supported, not enabled.
	GC:            sgen
```

(Unfortunately I can't try out any more recent version of Mono, if that is what might cause the problem, since I don't have root access on this server)

[CanvasError.txt](https://github.com/Illumina/canvas/files/602230/CanvasError.txt)
[CanvasLog.txt](https://github.com/Illumina/canvas/files/602229/CanvasLog.txt)
",jowkar,https://github.com/Illumina/canvas/issues/37
MDU6SXNzdWUxOTc5NzQ0NjQ=,Canvas for CNV calling of a germline sample from targeted sequencing data,CLOSED,2016-12-29T08:56:51Z,2017-03-23T23:29:30Z,2017-03-23T23:29:30Z,"Dear developer,
I'm interested in using Canvas for CNV calling of a germline sample from targeted sequencing data (gene panel), but having a look at the available modes, there isn't a mode for my experiment. Not sure if I can use Germline-WGS instead...
Thanks!
Javier
",jpflorido,https://github.com/Illumina/canvas/issues/38
MDU6SXNzdWUyMDI1NTQ3NDM=,"Custom fixed ""physical"" window/bin size",CLOSED,2017-01-23T14:52:36Z,2017-12-14T05:05:35Z,2017-12-14T05:05:35Z,"I know that bin size means something a little different in Canvas (""the number of unique
genomic k-mers per bin""), but is it possible to set a fixed physical window size, e.g. 10 kb, which is what most CNV detection algorithms do. They just count reads within these windows. 

In SoftwareDesignDocument.pdf it says: ""CanvasBin supports user-defined bins specified by -n <path to a BED file>."" But I actually tried this with 50 kb windows and Canvas didn't run. The file format was:

chr1    0	50000
chr1    50000   100000
chr1    100000  150000

etc.

",P4sm,https://github.com/Illumina/canvas/issues/39
MDU6SXNzdWUyMDQ2ODAwMjM=,Merging of multiple germline CNV VCF files,CLOSED,2017-02-01T19:26:18Z,2017-03-30T07:18:09Z,2017-03-30T07:18:09Z,"Hi, is there a tool that allows for the robust merging of CNV calls for more than one individual?

I have a trio and want to combine the CNV calls generated by Canvas for each individual into a common one.

What is the best approach here?",holtgrewe,https://github.com/Illumina/canvas/issues/40
MDU6SXNzdWUyMDU4NjI3NzM=,Canvas Run is failing at CanvasSomaticCaller.exe step,CLOSED,2017-02-07T11:40:55Z,2017-12-14T05:03:27Z,2017-12-14T05:03:27Z,"Hi,

I am running CANVAS on WES data and getting the error at CanvasSomaticCaller.exe step.Please find the SomaticCNV-WES_65324.stderr.txt as an attachment.

Thanks
Shruti Kapil
[SomaticCNV-WES_65324.stderr.txt](https://github.com/Illumina/canvas/files/757449/SomaticCNV-WES_65324.stderr.txt)
",Shrutikapil,https://github.com/Illumina/canvas/issues/41
MDU6SXNzdWUyMDgwMzkyODk=,What are -t and -n values in Weaver LITE ?,CLOSED,2017-02-16T07:17:58Z,2017-02-17T06:47:35Z,2017-02-17T06:47:35Z,"In the Weaver LITE last step (taken up from Weaver github)
Weaver LITE -f SIMU.fa -S FINAL_SV -s SNP -g REGION -w X.bam.wig -r 0 -m map100mer.bd -p 64 -t 20 -n 0

What are -t and -n values?
I am running Weaver for whole exome sequencing data and there is only one sample and no control, only single sample. What are the values that need to be entered in -t and -n option and how can I get these values?",Shrutikapil,https://github.com/Illumina/canvas/issues/42
MDU6SXNzdWUyMjI4NzM0NTc=,Limit of detection (LOD) of canvas?,CLOSED,2017-04-19T21:12:58Z,2017-12-14T05:02:33Z,2017-12-14T05:02:33Z,"Can Canvas be used for detecting CNVs in constitutional diseases with WES data? 
Basically, we expect a smaller fold change in copy number in constitutional diseases than in somatic samples. What is the Limit of Detection (LOD) of Canvas? is it able to detect a single copy of gain/loss?",geekgeekhello,https://github.com/Illumina/canvas/issues/44
MDU6SXNzdWUyMjQyMzkyMjU=,Unable to access input reference files for GRCh38 from box,CLOSED,2017-04-25T18:58:36Z,2017-05-03T11:43:18Z,2017-05-01T17:25:24Z,"Tried to download GRCh38 reference files from https://illumina.box.com/CanvasPublic. Error message is- ""files do not exist or you do not have permissions to access this folder"".

I was able to download hg19 input files a couple of months back, not sure if the file permissions were changed after that..

Thanks
Kshithija",knagulapalli,https://github.com/Illumina/canvas/issues/45
MDU6SXNzdWUyMjY0NzMxOTY=,Low tumour purity estimation (< 20% purity),CLOSED,2017-05-05T04:47:43Z,2017-05-12T04:53:36Z,2017-05-12T04:53:36Z,"Hi,

I've been analysing tumour-normal-paired exome sequencing data using Canvas 1.11.0 on Tumor-normal-enrichment mode. This has been conducted on a dilution series of samples to simulate a range of different levels of tumour purity (i.e. from 100% tumour all the way down to 5% tumour).

At a sample tumour purity of >20% Canvas does a reasonably good job of estimating tumour purity, however it does not seem to be able to estimate tumour purity levels <20%. The final estimate always appears to bottom-out at ##EstimatedTumorPurity=0.20, even if the actual purity of the sample is much lower.

I was hoping that somebody could shed some light on this situation. Is it a feature of the program that it simply will not attempt to estimate low tumour purity samples? Are purity estimates below 0.20 possible?

Could this phenomena be related to the filtering of MAFs > 0.1 as part of the CanvasSomaticCaller in an effort to remove putative homozygous positions? If so, is there a way of avoiding this filter?

I've scoured the documentation however I cannot reconcile this issue.

Thank you for help.
",sternp,https://github.com/Illumina/canvas/issues/47
MDU6SXNzdWUyMjc4ODk3MjM=,How to make or download the hg19 reference fastq and xml file?,CLOSED,2017-05-11T06:23:15Z,2017-05-17T17:58:49Z,2017-05-17T17:58:49Z,"Hi,
I am trying to use the Canvas tool for WGS CNV detection.

Instructions says we can download the hg19 reference fasta (and I hope xml file) using the https://illumina.box.com/CanvasPublic link, but is looks like files have been moved.

I also tried to make the reference files using the command:
dotnet ~/canvas-1.25.0/Tools/FlagUniqueKmers/FlagUniqueKmers.dll ~/refs/M_hg19_ucsc_all.fa ~/M_hg19_ucsc_all.Canvas.fa

But it failed with error ""Unhandled Exception: OutOfMemoryException.""

I am running over 128GB RAM ubuntu server.

Any recommendation will be helpful.

Amit",amitgsir,https://github.com/Illumina/canvas/issues/48
MDU6SXNzdWUyMjgyMDE0NTk=,Can you send GenomeSize.xml and filter13.bed to me?,CLOSED,2017-05-12T06:42:57Z,2017-05-16T07:43:23Z,2017-05-16T07:43:18Z,"I try to download GenomeSize.xml and filter13.bed from https://illumina.box.com/CanvasPublic into WORKDIR/testing/hg19/, but i can't open it.Can you send those files to me?Thank you very much! ( j.b.zhang@foxmail.com)",a81501457,https://github.com/Illumina/canvas/issues/49
MDU6SXNzdWUyMzEzODUxMTk=,chromosome notation does not match ,CLOSED,2017-05-25T16:10:54Z,2017-08-16T16:04:10Z,2017-08-16T15:49:47Z,"Dear Development Team,

The chromosome notation in my bam file is 1,2,3 ..., which does not match the default of the notation in Canvas: chr1,chr2,chr3.... After manually changing the command from chr1 to 1, the CanvasSNV.dll worked.

I wonder if possible to change this default in Canvas. If not, would it be possible to send me the full list of commands that Canvas.dll would generate. I could use that as a template to generate my own commands.

Thank you. I will appreciate your help.
Best,
Shan 

",chenshan03,https://github.com/Illumina/canvas/issues/50
MDU6SXNzdWUyMzU4MDU5MzY=,Canvas version 1.25.0,CLOSED,2017-06-14T08:47:13Z,2017-12-14T05:00:24Z,2017-12-14T05:00:24Z,"Do we have mono/Linux executable (Canvas.exe) for the latest version 1.25.0? 
Looks, we don't see Canvas.exe in Canvas-1.25_x64.tar.gz. 
Thanks and Regards,
Naga",sidratools,https://github.com/Illumina/canvas/issues/51
MDU6SXNzdWUyMzU5OTU3NDk=,help with .NET execution,CLOSED,2017-06-14T20:11:17Z,2017-06-14T21:10:21Z,2017-06-14T21:10:21Z,"Hi there,

I'm trying to get Canvas 1.25 working.     I gather from the docs that this new version requires .NET instead of mono.

I installed the .Net Core and tried running Canvas with this command:
```
/opt/dotnet/shared/Microsoft.NETCore.App/1.1.2/dotnet Canvas.dll
Error: assembly specified in the dependencies manifest was not found -- package: 'combinatorics', version: '1.0.0', path: 'Combinatorics.dll'
```
Obfiously, I'm new to the .NET side of things.   Do you have any tips?    I tried searching my .NET install for the combinatorics dll, but didn't find anything. Is it part of canvas?",RichardCorbett,https://github.com/Illumina/canvas/issues/52
MDU6SXNzdWUyMzk2NjE2MjU=,Unable to download reference genome files,CLOSED,2017-06-30T02:31:14Z,2017-08-09T21:58:15Z,2017-08-09T21:58:15Z,"I attempted to download the hg38 and GRCh37 reference genome files, but the link isn't working. When I click it, I get the following error message:

This shared file or folder link has been removed or is unavailable to you.

Also, I would like to build these files for additional reference genomes, but I cannot find any use instructions for how to do this using the FlagUniqueKmers file.

Thanks in advance for your help.

Justin",jlac,https://github.com/Illumina/canvas/issues/53
MDU6SXNzdWUyMzk4NTM1MTQ=,Canvas reference data,CLOSED,2017-06-30T18:19:09Z,2017-12-14T04:58:54Z,2017-12-14T04:58:54Z,"How do I get the Canvas reference data for, say, GRCh37? I looked at  https://illumina.box.com/CanvasPublic but that link appears to be dead, or there is nothing in there. Does anyone know the current location for the Canvas reference data? 

Thanks,
Susan.",susanchacko,https://github.com/Illumina/canvas/issues/54
MDU6SXNzdWUyNDYwNzc3Mjc=,"Manually Generating GenomeSize.xml - ""md5"" field",CLOSED,2017-07-27T15:23:25Z,2017-07-27T18:16:45Z,2017-07-27T18:16:45Z,"I have a reference genome that I'm trying to generate GenomeSize.xml for. Looking at a few other issues on here, I see there's no standalone tool used to generate this file, so I'm doing it manually, but I'm confused about the ""md5"" field. In the example file, the md5 is different for all chromosomes, but they all come from the same reference genome file. Please let me know what this ""md5"" field refers to.

Thanks,
Raymon",N/A,https://github.com/Illumina/canvas/issues/55
MDU6SXNzdWUyNDYzMzM2Nzg=,System.Exception: Cannot calculate median of an empty SortedList.,OPEN,2017-07-28T12:30:03Z,2019-01-23T16:54:29Z,,"Dear Development Team,

I could successfully run the demo with the HCC2218 dataset.

Unfortunately, when I run the workflow Germline-WGS with my own data (a non-model organism- diploid fungus), I had errors.


Here is my command line for the version 1.25:

dotnet ./1.25/Canvas.dll Germline-WGS --bam Run_Canvas/699.MvSl-1064-A1.marked.dupl.realigned.bam --sample-name=699 -r Run_Canvas/MvSl-1064-A1-R4kmer.fa -g Run_Canvas/WholeGenomeFasta --sample-b-allele-vcf Run_Canvas/699.MvSl-1064-A1.tagged.vcf --filter-bed Run_Canvas/filter.bed -o ./OutputCanvasrecentversion


Here is the error message:
---Last lines of stderr log file from /home/fannie/Bureau/OutputCanvasrecentversion/Logging/699_0.binned.stderr.txt:
at CanvasBin.CanvasBin.CalculateSingleSampleBinSize(CanvasBinParameters parameters, Dictionary`2 possibleAlignments, Dictionary`2 observedAlignments, Dictionary`2 fragmentLengths, NexteraManifest manifest)
   at CanvasBin.CanvasBin.RunSingleSample(CanvasBinParameters parameters)
   at CanvasBin.CanvasBin.Run(CanvasBinParameters parameters)
   at CanvasBin.Program.Main(String[] args)
   at Isas.Framework.WorkManagement.JobManager.CheckExitCodes(List`1 jobs, Boolean throwExceptionOnBadExitCode)
   at Isas.Framework.WorkManagement.JobManager.ProcessJobs(List`1 jobs, Int32 maxNumThreads, Boolean redirectOutput, Boolean checkExitCodes, Boolean throwExceptionOnBadExitCode)
   at Isas.Framework.WorkManagement.LocalWorkManager.DoWorkParallelLocal(List`1 tasks, TaskResourceRequirements taskRequirements, Int32 maximumThreads, Boolean checkReturnCode, Boolean redirectOutput, Boolean throwExceptionOnError)
   at Isas.Framework.WorkManagement.LocalWorkManager.DoWorkParallel(List`1 tasks, TaskResourceRequirements taskRequirements, Int32 maxAttempts, Boolean throwExceptionOnError)
   at Canvas.CanvasRunner.BamToBinned(IDirectoryLocation tempFolder, Boolean isPairedEnd, List`1 sampleIds, String canvasReferencePath, String canvasBedPath, List`1 bamPaths, StringBuilder commandLine, Int32 binSize, Dictionary`2 intermediateDataPathsByBam)
   at Canvas.CanvasRunner.InvokeCanvasBin35Mers(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyBedPath)
   at Isas.Framework.Checkpointing.SerializingCheckpointRunner.<>c__DisplayClass7_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__33.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.<>c__DisplayClass5_0.<Launch>b__0(FrameworkServices frameworkServices)
2017-07-28T14:17:44,Max job memory (GB): 0,0
2017-07-28T14:17:44,Longest job runtime (Hours): 0,00
2017-07-28T14:17:44,Total execution time: 00:01:07.9
[699_0.binned.stderr.txt](https://github.com/Illumina/canvas/files/1183018/699_0.binned.stderr.txt)
[699_0.binned.stdout.txt](https://github.com/Illumina/canvas/files/1183019/699_0.binned.stdout.txt)

see attached error files

I will appreciate your help as I really would be interested in running Canvas. Thank you.

Best  wishes,


Fanny",fannyhartmann,https://github.com/Illumina/canvas/issues/56
MDU6SXNzdWUyNDg3ODY2ODI=,Error running Canvas error code 134,CLOSED,2017-08-08T17:18:54Z,2018-03-05T18:48:20Z,2018-03-05T18:48:20Z,"Running Canvas within a docker and encounter error. Here is the parameter list used:
```
Canvas  Germline-WGS   -b bam/NA12878.bam -o out -r sv-resource/grch38.fasta -g sv-resource -f sv-resource/wgs-exclude.bed  --population-b-allele-vcf=sv-resource/db2.vcf -n NA12878
```

First few lines in CanvasError.txt:
```
2017-08-08T16:43:19,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: dotnet returned error code 134

---Failed command:
/usr/local/bin/dotnet /opt/canvas/CanvasSNV.dll  -c chr1 -v /wss/sv-resource/db2.vcf -b /wss/bam/NA12878.bam -o /wss/out/TempCNV_NA12878/chr1-NA12878.SNV.txt.gz --isDbSnpVcf

---Last lines of stderr log file from /wss/out/Logging/CanvasSNV-'NA12878'-'chr1'.stderr.txt:
at Illumina.Common.OptionSet.<>c__DisplayClass11_0.<Add>b__0(OptionValueCollection v)
   at Illumina.Common.Option.Invoke(OptionContext c)
   at Illumina.Common.OptionSet.Parse(IEnumerable`1 arguments)
   at CanvasSNV.Program.Main(String[] args)
```

Content of CanvasSNV-'NA12878'-'chr1'.stderr.txt:
```
Unhandled Exception: Illumina.Common.OptionException: Missing required value for option '--isDbSnpVcf'.
   at Illumina.Common.OptionValueCollection.AssertValid(Int32 index)
   at Illumina.Common.OptionSet.<>c__DisplayClass11_0.<Add>b__0(OptionValueCollection v)
   at Illumina.Common.Option.Invoke(OptionContext c)
   at Illumina.Common.OptionSet.Parse(IEnumerable`1 arguments)
   at CanvasSNV.Program.Main(String[] args)
```

Why is missing required value for option --isDbSnpVcf ? 


",wongs2,https://github.com/Illumina/canvas/issues/57
MDU6SXNzdWUyNDg4MTUyNjQ=,Canvas .dll files are 32-bit? ,CLOSED,2017-08-08T19:06:05Z,2017-08-15T16:00:55Z,2017-08-15T16:00:55Z,"Hi, 
A user on our systems is running into memory limits running Canvas. I checked the .dll files, and they seem to be 32-bit, even though I had downloaded what looked like a 64-bit package https://github.com/Illumina/canvas/releases/download/v1.25.0/Canvas-1.25_x64.tar.gz

$ file Canvas.dll
Canvas.dll: PE32 executable for MS Windows (console) Intel 80386 Mono/.Net assembly

So the Canvas jobs are restricted to ~4 GB memory, unless I'm missing something. Is it possible to get a 64-bit Canvas package? ",susanchacko,https://github.com/Illumina/canvas/issues/58
MDU6SXNzdWUyNDk5ODU1Mjk=,Bin sizes and .binned files,OPEN,2017-08-14T10:00:58Z,2017-08-28T13:21:31Z,,"Hello!

I am trying to run canvas on Exome samples but the CNV values reported in the .seg files are very high. To normalise the values, I am thinking that I will need to add some unmatched controls.

When running “mono Canvas.exe Somatic-Enrichment -h”, I see that there are a few flags needed for this:

```
--control-bam=VALUE    Bam file of an unmatched control sample. Option
                               can be specified multiple times.
--control-binned=VALUE Canvas .binned file containing precomputed
                               control bin data to use for normalization
--control-bin-size=VALUE
                             bin size for control .binned file
--control-ploidy-bed=VALUE
                             .bed file containing regions of known ploidy for
                               the control .binned file
```

How is this .binned file created?
How do I calculate the bin size?
How is this .bed file made or what should it contain? Manually from the manifest file?

Thanks!",alvaralmstedt,https://github.com/Illumina/canvas/issues/59
MDU6SXNzdWUyNTAxMzE5NDc=,Paired Somatic WGS?,CLOSED,2017-08-14T19:39:11Z,2018-10-19T00:39:54Z,2017-10-31T20:23:08Z,"I am running Canvas for a variety of somatic pipelines, one of which is a paired WGS Tumor-Normal design. However, I see no available mode for running paired Tumor-Normal WGS, only Tumor Somatic WGS. Is there a way to incorporate the Normal WGS sample with the tumor? Thanks in advance for your help!

Best,

Justin",jlac,https://github.com/Illumina/canvas/issues/60
MDU6SXNzdWUyNTQ5MDE5OTg=,Tumor-normal-enrichment Mode for Version 1.25 and up,CLOSED,2017-09-03T21:29:47Z,2018-08-23T17:21:42Z,2018-08-23T17:21:42Z,"I'm trying to run Tumor-normal-enrichment mode on some samples, but I'm getting several errors even with the sample data in the README:

`~/Canvas-1.25/Canvas Tumor-normal-enrichment -b HCC2218C_S1.bam --normal-bam HCC2218BL_S1.bam --manifest NexteraRapidCapture_Exome_TargetedRegions_v1.2Used.txt -o output -r hg19/kmer.fa -g hg19/genome_dir/ -f hg19/filter13.bed --sample-b-allele-vcf HCC2218BL_S1.vcf -n HCC_samples`

One of the errors I'm getting on both my samples and the example in the README is:
```
ERROR: Canvas workflow error: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
   at System.ThrowHelper.ThrowArgumentOutOfRange_IndexException()
   at Canvas.CanvasRunner.GetIntermediateBinnedFilesByBamPath(GenomeMetadata genomeInfo, Boolean isPairedEnd, List`1 sampleIds, IDirectoryLocation tempFolder, String canvasReferencePath, String canvasBedPath, List`1 bamPaths, StringBuilder commandLine, String tempManifestPath)
   at Canvas.CanvasRunner.InvokeCanvasBin35Mers(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyBedPath)
   at Isas.Framework.Checkpointing.SerializingCheckpointRunner.<>c__DisplayClass7_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__33.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.<>c__DisplayClass5_0.<Launch>b__0(FrameworkServices frameworkServices)
2017-09-03T21:12:52,ERROR: Exception from tracked tasks encountered in checkpointer dispose: System.AggregateException: One or more errors occurred. (dotnet returned error code 134

---Failed command:
/usr/bin/dotnet /home/ec2-user/Canvas-1.25/CanvasSNV.dll  -c 1 -v /home/ec2-user/canvas_tn/HCC_test/HCC2218BL_S1.vcf -b /home/ec2-user/canvas_tn/HCC_test/HCC2218C_S1.bam -o /home/ec2-user/canvas_tn/HCC_test/output/TempCNV_HCC_samples/1-HCC_samples.SNV.txt.gz --isSomatic
```

With only the README samples, I'm also getting several ```Unhandled Exception: System.ArgumentException: Error: Chromosome name '1' does not match bam file at '/home/ec2-user/canv
as_tn/HCC_test/HCC2218C_S1.bam'``` errors, but that's not occurring with my samples, so it's probably just an issue with the formatting of the HCC2218 VCF.

The example in the README is for version 1.3.4, which is very outdated. Can you please update the README with a working Tumor-normal-enrichment example for 1.25 and up?

Thank you,

Raymon",N/A,https://github.com/Illumina/canvas/issues/62
MDU6SXNzdWUyNTU3MTc3ODU=,CanvasSomaticCaller.dll failing,CLOSED,2017-09-06T19:33:11Z,2017-12-14T04:54:46Z,2017-12-14T04:54:46Z,"I am running Canvas for a whole genome tumor sample, and am getting an error that I am unable to understand:

2017-09-06T19:11:10,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: dotnet returned error code 134

---Failed command:
/usr/bin/dotnet /usr/local/Canvas-1.25/CanvasSomaticCaller.dll  -v /gs4/users/CCBR/projects/ccbr785/wgs_merged2/canvas_test/11-CT35-2-neck-metastasis-G11_merged/TempCNV_11-CT35-2-neck-metastasis-G11_merged/VFResults11-CT35-2-neck-metastasis-G11_merged.txt.gz -i /gs4/users/CCBR/projects/ccbr785/wgs_merged2/canvas_test/11-CT35-2-neck-metastasis-G11_merged/TempCNV_11-CT35-2-neck-metastasis-G11_merged/11-CT35-2-neck-metastasis-G11_merged.partitioned -o /gs4/users/CCBR/projects/ccbr785/wgs_merged2/canvas_test/11-CT35-2-neck-metastasis-G11_merged/CNV.vcf.gz -b /data/CCBR_Pipeliner/db/PipeDB/lib/canvas_refs/GRCh37/filter13.bed -n 11-CT35-2-neck-metastasis-G11_merged -f ""/gs4/users/CCBR/projects/ccbr785/wgs_merged2/canvas_test/11-CT35-2-neck-metastasis-G11_merged/TempCNV_11-CT35-2-neck-metastasis-G11_merged/FilterRegions.txt"" -s /gs4/users/CCBR/projects/ccbr785/wgs_merged2/strelka_out/12-CT35-normal-saliva_merged+11-CT35-2-neck-metastasis-G11_merged_FINAL.vcf -r ""/data/CCBR_Pipeliner/db/PipeDB/lib/canvas_refs/GRCh37/WholeGenomeFasta"" 

---Last lines of stderr log file from /gs4/users/CCBR/projects/ccbr785/wgs_merged2/canvas_test/11-CT35-2-neck-metastasis-G11_merged/Logging/SomaticCNV-11-CT35-2-neck-metastasis-G11_merged.stderr.txt:
at CanvasSomaticCaller.SomaticCaller.ModelOverallCoverageAndPurity(Int64 genomeLength, CanvasSomaticClusteringMode clusteringMode)
   at CanvasSomaticCaller.SomaticCaller.CallCNVUsingSNVFrequency(Nullable`1 localSDmertic, String referenceFolder, CanvasSomaticClusteringMode clusteringMode)
   at CanvasSomaticCaller.SomaticCaller.CallVariants(String inFile, String variantFrequencyFile, String outputVCFPath, String referenceFolder, String name, Nullable`1 localSDmertic, CanvasSomaticClusteringMode clusteringMode)
   at CanvasSomaticCaller.Program.Main(String[] args)


   at Isas.Framework.WorkManagement.JobManager.CheckExitCodes(List`1 jobs, Boolean throwExceptionOnBadExitCode)
   at Isas.Framework.WorkManagement.JobManager.ProcessJobs(List`1 jobs, Int32 maxNumThreads, Boolean redirectOutput, Boolean checkExitCodes, Boolean throwExceptionOnBadExitCode)
   at Isas.Framework.WorkManagement.LocalWorkManager.DoWorkParallelLocal(List`1 tasks, TaskResourceRequirements taskRequirements, Int32 maximumThreads, Boolean checkReturnCode, Boolean redirectOutput, Boolean throwExceptionOnError)
   at Isas.Framework.WorkManagement.IWorkManagerExtensions.DoWorkSingleThread(IWorkManager manager, UnitOfWork job, Boolean checkReturnCode, Boolean redirectOutput, Boolean throwExceptionOnError)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.SerializingCheckpointRunner.<>c__DisplayClass7_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__33.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.<>c__DisplayClass5_0.<Launch>b__0(FrameworkServices frameworkServices)

It appears that Canvas is having some issues with my somatic VCF, and I have attempted running it with somatic VCFs generated by strelka, mutect and mutect2, and I am unable to get it to run. Any ideas what might be going on?

[CanvasError.txt](https://github.com/Illumina/canvas/files/1282398/CanvasError.txt)
[CanvasLog.txt](https://github.com/Illumina/canvas/files/1282399/CanvasLog.txt)

Justin",jlac,https://github.com/Illumina/canvas/issues/63
MDU6SXNzdWUyNTczNzc5ODg=,HCC2218 truth set,CLOSED,2017-09-13T13:20:39Z,2017-12-14T04:54:15Z,2017-12-14T04:54:15Z,"Hi,

The amazon link to the truth set for HCC2218 does not seem to be working.  Is there an alternative location for: 

HCC2218Truth.vcf
HCC2218.cnaqc.excluded_regions.bed

Thanks!",robrollback,https://github.com/Illumina/canvas/issues/64
MDU6SXNzdWUyNTgwOTU2NTc=,Canvas crashing on sample,CLOSED,2017-09-15T16:27:20Z,2017-12-14T04:54:03Z,2017-12-14T04:54:03Z,"Command I am using...

`/opt/dotnet/shared/Microsoft.NETCore.App/1.1.2/dotnet ~/bin/Canvas-1.29/Canvas.dll Somatic-WGS -b tumour.bam  --somatic-vcf=passed.somatic.snvs.eff.classic.vcf --sample-b-allele-vcf=ballele.PASS.vcf -o sample594 -r ../Canvas/GRCh37/kmer.fa -g ../Canvas/GRCh37/ -f ..Canvas/GRCh37/filter13.bed -n canvas
`

Runs for a while but eventually fails with this error:


> at CanvasBin.CanvasBin.BinCounts(String referenceFile, Int32 binSize, CanvasCoverageMode coverageMode, NexteraManifest manifest, Dictionary`2 possibleAlignments, Dictionary`2 observedAlignments, Dictionary`2 fragmentLengths, Dictionary`2 predefinedBins, String outFile)
   at CanvasBin.CanvasBin.CalculateSingleSampleBins(CanvasBinParameters parameters, Dictionary`2 possibleAlignments, Dictionary`2 observedAlignments, Dictionary`2 fragmentLengths, NexteraManifest manifest)
   at CanvasBin.CanvasBin.Run(CanvasBinParameters parameters)
   at CanvasBin.Program.Main(String[] args)


   at Isas.Framework.WorkManagement.JobManager.CheckExitCodes(List`1 jobs, Boolean throwExceptionOnBadExitCode)
   at Isas.Framework.WorkManagement.JobManager.ProcessJobs(List`1 jobs, Int32 maxNumThreads, Boolean redirectOutput, Boolean checkExitCodes, Boolean throwExceptionOnBadExitCode)
   at Isas.Framework.WorkManagement.LocalWorkManager.DoWorkParallelLocal(List`1 tasks, TaskResourceRequirements taskRequirements, Int32 maximumThreads, Boolean checkReturnCode, Boolean redirectOutput, Boolean throwExceptionOnError)
   at Isas.Framework.WorkManagement.LocalWorkManager.DoWorkParallel(List`1 tasks, TaskResourceRequirements taskRequirements, Int32 maxAttempts, Boolean throwExceptionOnError)
   at Canvas.CanvasRunner.BamToBinned(IDirectoryLocation tempFolder, Boolean isPairedEnd, List`1 sampleIds, String canvasReferencePath, String canvasBedPath, List`1 bamPaths, StringBuilder commandLine, Int32 binSize, Dictionary`2 intermediateDataPathsByBam)
   at Canvas.CanvasRunner.InvokeCanvasBin35Mers(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyBedPath)
   at Isas.Framework.Checkpointing.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__33.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.<>c__DisplayClass5_0.<Launch>b__0(FrameworkServices frameworkServices)
2017-09-15T09:18:26,Total execution time: 00:57:48.1


The last time I used canvas it was an older version that used mono.     Do you have any suggestions I could try with this sample?

",RichardCorbett,https://github.com/Illumina/canvas/issues/65
MDU6SXNzdWUyNjc1NzAxMTI=,Unable to generate kmer.fa by FlagUniqueKmers.dll,CLOSED,2017-10-23T07:44:21Z,2017-12-14T04:52:41Z,2017-12-14T04:52:41Z,"the kmer.fa generated by FlagUniqueKmers.dll is empty， even the inputFasta became empty.

$ mono ../src/Canvas/Tools/FlagUniqueKmers/FlagUniqueKmers.dll chr1.fa kmer.fa
2017/10/23 15:38:30 Start
Load FASTA file at chr1.fa, write kmer-flagged output to kmer.fa
2017/10/23 15:38:30 >>>Pass 1: flagged 0 unique kmers

2017/10/23 15:38:30 Flagging complete
2017/10/23 15:38:30 Output written to kmer.fa

",Aliyabai,https://github.com/Illumina/canvas/issues/66
MDU6SXNzdWUyNzAwMzczNzk=,Pipeline for tumor-normal analysis,CLOSED,2017-10-31T16:56:48Z,2017-10-31T20:36:00Z,2017-10-31T20:36:00Z,"Hello- I'm a bit confused about the appropriate way to call CNVs in tumour-normal pairs from WGS data. Is this procedure optimal?

```
Canvas.exe Somatic-WGS \
    -b tumour.bam \
    --somatic-vcf somatic_variants.vcf.gz \  
    --b-allele-vcf normal.vcf \
    -o output_dir \
    -r GRCh38/canvas/kmer.fa \
    -g GRCh38/canvas/WholeGenomeFasta
``` 

Where:

* `somatic_variants.vcf.gz` are SNV and indels from a somatic variant caller such as mutect or strelka, right?

* `normal.vcf` is a vcf of germline SNV and indels detected in the matched normal sample (see also [issue#60](https://github.com/Illumina/canvas/issues/60)). `normal.vcf` may be obtained with (see also [bcftools variant-calling](https://samtools.github.io/bcftools/howtos/variant-calling.html)):

```
bcftools mpileup -O u -f genome.fa normal.bam \
| bcftools call -v -m -O u \
| bcftools filter -i '%QUAL>=20' > normal.vcf
```

Is there any recommendation on how accurate the set of somatic and normal calls should be (files `somatic_variants.vcf.gz` and `normal.vcf`)? I mean, how sensitive is the method to false positives and false negatives in these files?

Any thoughts much appreciated!
Dario
 ",dariober,https://github.com/Illumina/canvas/issues/67
MDU6SXNzdWUyNzAzMjk2MzM=,"mono error code 137 and ""object was used after being disposed""",CLOSED,2017-11-01T14:38:28Z,2017-12-14T04:52:12Z,2017-12-14T04:52:12Z,"Hello again- I'm trying to run `Somatic-WGS` on a small test bam file and I come across the error `Isas.Shared.JobFailedException: mono returned error code 137` (see CanvasError.txt below).

Canvas was executed with mono 4.0.2 (see below for output of `mono --version`):

```
mono ~/applications/canvas/1.11.0/Canvas.exe Somatic-WGS \
    -b test.tumour.bam \
    --somatic-vcf WW00274.tmp.vcf \
    --b-allele-vcf GRCh38/All_20170710.vcf.gz \
    --exclude-non-het-b-allele-sites \
    --filter-bed GRCh38/canvas/filter13.bed \
    --sample-name test \
    -o canvas/test \
    -r GRCh38/canvas/kmer.fa \
    -g GRCh38/canvas/WholeGenomeFasta/
```

`test.tumour.bam` is a bam file of ~2 million PE reads sampled from a larger file. `All_20170710.vcf.gz` is from dbSNP. At this stage, I just wanted to see if I could make Canvas work from start to finish.

I should say that I'm executing this on a node with 16 CPUs and 48 GB of RAM. Is this enough? I submitted the job via slurm scheduler and although I didn't get an explicit out-of-memory error, I could see that the peak memory was ~46 GB, so pretty close to the limit. Unfortunately, I cannot upgrade to dotnet core as I'm on CentOS 6.

Any hint much appreciated!

Dario

**CanvasError.txt**:

```
11/1/2017,12:43:03.644,ERROR: Canvas workflow error: Isas.Shared.JobFailedException: mono returned error code 137

---Failed command:
/cm/shared/apps/mono/mono-4.0.2/bin/mono /home/db291g/applications/canvas/1.11.0/CanvasBin.exe -b ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/test.tumour.bam"" -p -r ""/scratch/dberaldi/ref/GRCh38/canvas/kmer.fa"" -f ""/scratch/dberaldi/ref/GRCh38/canvas/filter13.bed"" -d 100 -o ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0.binned"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr1.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr2.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr3.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr4.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr5.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr6.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr7.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chrX.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr8.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr9.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr11.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr10.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr12.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr13.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr14.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr15.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr16.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr17.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr18.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr20.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr19.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chrY.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr22.dat"" -i ""/scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/TempCNV_test./test._0_chr21.dat"" -m GCContentWeighted 

--- stderr log file is empty! Last lines of stdout log file from /scratch/dberaldi/projects/20170918_sgp_oesophageal/20171002_mutect/canvas/test/Logging/test._0.binned.stdout.txt:
CalculateNumberOfPossibleAlignmentsPerBin jobs complete.

11/1/2017 12:33:46 PM Launching normalization tasks.


  at Isas.Shared.JobManager.CheckExitCodes (System.Collections.Generic.List`1 jobs, Boolean throwExceptionOnBadExitCode) [0x00000] in <filename unknown>:0 
  at Isas.Shared.JobManager.ProcessJobs (System.Collections.Generic.List`1 jobs, Int32 maxNumThreads, Boolean redirectOutput, Boolean checkExitCodes, Boolean throwExceptionOnBadExitCode) [0x00000] in <filename unknown>:0 
  at (wrapper synchronized) Isas.Shared.JobManager:ProcessJobs (System.Collections.Generic.List`1<Isas.Shared.UnitOfWork>,int,bool,bool,bool)
  at Isas.Shared.LocalWorkManager.DoWorkParallelLocal (System.Collections.Generic.List`1 tasks, Isas.Shared.TaskResourceRequirements taskRequirements, Int32 maximumThreads, Boolean checkReturnCode, Boolean redirectOutput, Boolean throwExceptionOnError) [0x00000] in <filename unknown>:0 
  at Isas.Shared.LocalWorkManager.DoWorkParallel (System.Collections.Generic.List`1 tasks, Isas.Shared.TaskResourceRequirements taskRequirements, Int32 maxAttempts, Boolean throwExceptionOnError) [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.InvokeCanvasBin (Canvas.CanvasCallset callset, System.String canvasReferencePath, System.String canvasBedPath, System.String ploidyBedPath) [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<>c__DisplayClass17_0.<CallSampleInternal>b__1 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[Isas.Shared.IFileLocation].<WrapWithBenchmark>b__9_0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[Isas.Shared.IFileLocation].<WrapWithSave>b__10_0 () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[Isas.Shared.IFileLocation].<WrapWithStopCheckpointCheck>b__12_0 () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task`1[Isas.Shared.IFileLocation].InnerInvoke () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.Execute () [0x00000] in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess (System.Threading.Tasks.Task task) [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification (System.Threading.Tasks.Task task) [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd (System.Threading.Tasks.Task task) [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter`1[Isas.Shared.IFileLocation].GetResult () [0x00000] in <filename unknown>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync.RunCheckpoint[IFileLocation] (System.String key, System.Func`1 function) [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<CallSampleInternal>d__17.MoveNext () [0x00000] in <filename unknown>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess (System.Threading.Tasks.Task task) [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification (System.Threading.Tasks.Task task) [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd (System.Threading.Tasks.Task task) [0x00000] in <filename unknown>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.GetResult () [0x00000] in <filename unknown>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.CallSample (Canvas.CanvasCallset callset) [0x00000] in <filename unknown>:0 
  at Canvas.TumorNormalWgsRunner.Run (ILogger logger, ICheckpointRunnerAsync checkpointRunner, IWorkManager workManager) [0x00000] in <filename unknown>:0 
  at Canvas.ModeLauncher.Launch () [0x00000] in <filename unknown>:0
```

stdout/stderr captured by slurm (full log in [slurm-54009.out.gz](https://github.com/Illumina/canvas/files/1434395/slurm-54009.out.gz)):

```
[ERROR] FATAL UNHANDLED EXCEPTION: System.ObjectDisposedException: The object was used after being disposed.
  at Isas.Shared.Logger.Log (Isas.Shared.LogEntry entry) [0x00000] in <filename unknown>:0 
  at Isas.Shared.LoggerExtensions.Info (ILogger logger, System.String message) [0x00000] in <filename unknown>:0 
  at Isas.Shared.JobManager.OnLog (System.String message) [0x00000] in <filename unknown>:0 
  at Isas.Shared.JobManager.RunJob (Isas.Shared.UnitOfWork job, Boolean redirectOutput, Boolean throwExceptionOnBadExitCode, System.Boolean& cancelJobs, System.Int64& maxVMem, System.TimeSpan& maxWallTime) [0x00000] in <filename unknown>:0 
  at Isas.Shared.JobManager+<>c__DisplayClass24_0.<ProcessJobs>b__0 (System.Object o) [0x00000] in <filename unknown>:0 
  at System.Threading.Thread.StartInternal () [0x00000] in <filename unknown>:0
```

**mono --version**

```
Mono JIT compiler version 4.0.2 (Stable 4.0.2.5/c99aa0c Tue Oct 31 12:06:43 GMT 2017)
Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
	TLS:           __thread
	SIGSEGV:       altstack
	Notifications: epoll
	Architecture:  amd64
	Disabled:      none
	Misc:          softdebug 
	LLVM:          supported, not enabled.
	GC:            sgen
```

",dariober,https://github.com/Illumina/canvas/issues/68
MDU6SXNzdWUyNzU0Mzc4NTI=,NullReferenceException when running Germline-WGS,OPEN,2017-11-20T17:31:45Z,2018-06-28T16:59:20Z,,"I am running Canvas in a docker container using the hg19 reference files from the S3 link.

I am trying to call Canvas using variants called by strelka/starling on a shallow WGS (7 fold) dataset:

root@711ba034ea7e:/reference# dotnet /opt/Canvas/Canvas.dll Germline-WGS -r /reference/kmer.fa -g /reference/ -f /reference/filter13.bed -b /data/test_cov7.bam -n testsample --sample-b-allele-vcf=/data/test_cov7.variants.vcf.gz -o /data/canvas.result

However, I get a NullReferenceException relating to the reference:

2017-11-20T17:26:39,Running checkpoint 01: Validate input
2017-11-20T17:26:40,Saved checkpoint results to /localcanvas.result/Checkpoints/progress.json
2017-11-20T17:26:40,Running Canvas Germline-WGS 1.30.0.725+master
2017-11-20T17:26:40,ERROR: Canvas workflow error: System.NullReferenceException: Object reference not set to an instance of an object.
   at Isas.SequencingFiles.ReferenceGenome.get_Build()
   at Isas.SequencingFiles.GenomeMetadata.Deserialize(TextReader reader, IDirectoryLocation genomeFastaFolder, IReferenceGenome referenceGenome)
   at Isas.SequencingFiles.GenomeMetadata.Deserialize(IFileLocation genomeSizeXml)
   at Canvas.GermlineWgsRunner.GetCallset()
   at Canvas.GermlineWgsRunner.Run(ILogger logger, ICheckpointRunner checkpointRunner, IWorkManager workManager, IFileLocation runtimeExecutable)
   at Canvas.ModeLauncher.Launch()
2017-11-20T17:26:40,Command-line arguments: Germline-WGS -r /reference/kmer.fa -g /reference/ -f /reference/filter13.bed -b /data/test_cov7.bam -n testsample --sample-b-allele-vcf=/data/test_cov7.variants.vcf.gz -o /data/canvas.result
2017-11-20T17:26:40,Saved checkpoint results to /local/canvas.result/Checkpoints/01-Validateinput.json
2017-11-20T17:26:40,Elapsed time (step/time(sec)/name)	01	00:00:00.6	Validate input
2017-11-20T17:26:40,Total execution time: 00:00:00.6

The reference folder is as follows:
root@711ba034ea7e:/reference# ls -lh
total 5.9G
-rw-r--r-- 1 root root 4.6K Aug 28 16:03 GenomeSize.xml
-rw-r--r-- 1 root root  11K Aug 28 15:48 filter13.bed
-rw-r--r-- 1 root root 3.0G Aug 28 16:03 genome.fa
-rw-r--r-- 1 root root  783 Aug 28 16:03 genome.fa.fai
-rw-r--r-- 1 root root 3.0G Aug 28 15:48 kmer.fa
-rw-r--r-- 1 root root  783 Aug 28 16:03 kmer.fa.fai


Here's the Dockerfile contents, in case you want to provide a docker image (I saw the request on another issue)

FROM ubuntu:16.04
# dependency: mono
RUN apt-get update
RUN apt-get -y install mono-runtime mono-complete wget curl apt-transport-https pigz
# dependency: dotnet
RUN sh -c 'echo ""deb [arch=amd64] https://apt-mo.trafficmanager.net/repos/dotnet-release/ xenial main"" > /etc/apt/sources.list.d/dotnetdev.list'
RUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 417A0893
RUN apt-get update
RUN apt-get install -y dotnet-dev-1.0.4 
# download canvas
RUN cd opt && wget https://github.com/Illumina/canvas/releases/download/1.30.0.725%2Bmaster/Canvas-1.30.0.725.master_x64.tar.gz
RUN cd opt && tar xzvf Canvas-1.30.0.725.master_x64.tar.gz
RUN ln -s /opt/Canvas-1.30.0.725+master_x64 /opt/Canvas
# download hg19 ref files
RUN mkdir /reference
RUN cd /reference && wget http://canvas-cnv-public.s3.amazonaws.com/hg19/WholeGenomeFasta/GenomeSize.xml
RUN cd /reference && wget http://canvas-cnv-public.s3.amazonaws.com/hg19/filter13.bed
RUN cd /reference && wget http://canvas-cnv-public.s3.amazonaws.com/hg19/kmer.fa
RUN cd /reference && wget http://canvas-cnv-public.s3.amazonaws.com/hg19/kmer.fa.fai
RUN cd /reference && wget http://canvas-cnv-public.s3.amazonaws.com/hg19/WholeGenomeFasta/genome.fa
RUN cd /reference && wget http://canvas-cnv-public.s3.amazonaws.com/hg19/WholeGenomeFasta/genome.fa.fai
RUN apt-get clean
RUN export DOTNET_CLI_TELEMETRY_OPTOUT=1

ENV PATH=""/opt/Canvas/:$PATH""
ENTRYPOINT [""dotnet"",""/opt/Canvas/Canvas.dll"",""Germline-WGS"",""-r"",""/reference/kmer.fa"",""-g"",""/reference/"",""-f"",""/reference/filter13.bed""]


",fbattke,https://github.com/Illumina/canvas/issues/69
MDU6SXNzdWUyNzYwOTY5NzU=,Canvas Somatic-Enrichment  not running in every version of canvas from 1.25 to 1.30,CLOSED,2017-11-22T14:56:39Z,2018-10-19T00:14:48Z,2018-10-19T00:14:48Z,"Hi, I tried version 1.25 to 1.30 and in all of them I keep getting the following error when running Somatic-Enrichment and Tumor-normal-enrichment:

-------------------------
root@0fcf3319bf7f:/canvas/Canvas-1.30.0.725.master_x64# /canvas/Canvas-1.30.0.725.master_x64/Canvas Somatic-Enrichment 

Unhandled Exception: System.ArgumentException: An item with the same key has already been added. Key: o
   at System.ThrowHelper.ThrowAddingDuplicateWithKeyArgumentException(Object key)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.ObjectModel.KeyedCollection`2.AddKey(TKey key, TItem item)
   at System.Collections.ObjectModel.KeyedCollection`2.InsertItem(Int32 index, TItem item)
   at Illumina.Common.OptionSet.InsertItem(Int32 index, Option item)
   at Illumina.Common.OptionSet.Add(String prototype, String description, Action`1 action)
   at CanvasCommon.CommandLineParsing.OptionProcessing.OptionCollection`1.AddOption(IOptionInfo info, OptionSet set)
   at CanvasCommon.CommandLineParsing.OptionProcessing.OptionCollection`1.GetOptionSet(Dictionary`2& optionResults)
   at CanvasCommon.CommandLineParsing.OptionProcessing.OptionCollection`1.Parse(IEnumerable`1 args)
   at Canvas.CommandLineParsing.MainParser.AnyBaseOptions(String[] args, BaseOptions& baseOptionsResult)
   at Canvas.CommandLineParsing.MainParser.Parse(String[] args, WriteLine standardWriter, WriteLine errorWriter)
   at Canvas.CommandLineParsing.MainParser.Run(String[] args, TextWriter standardOutput, TextWriter standardError)
   at Canvas.Program.Main(String[] args)
Aborted
-------------------------
I tried all other models (Germline-WGS,Somatic-WGS  and SmallPedigree-WGS)  and all those work , so I know its not a problem of my setup and framework installation. Can you help me with this?",aldembert,https://github.com/Illumina/canvas/issues/70
MDU6SXNzdWUyNzkwNzQ3Mjg=,Somatic-WGS can not run,CLOSED,2017-12-04T17:11:51Z,2018-05-22T17:55:35Z,2017-12-14T04:49:56Z,"/usr/bin/mono /share/newdata4/baiyl/basic/tools/Canvas-1.30.0.725/Canvas.dll Somatic-WGS --bam=test/S131_rmdup.bam --sample-name=S131 --reference=kmer/kmer.fa --genome-folder=WholeGenomeFasta --filter-bed=filter13.bed --output=test

2017-12-04T12:10:36,Running checkpoint 01: Validate input
2017-12-04T12:10:36,ERROR: System.InvalidOperationException: The Process object must have the UseShellExecute property set to false in order to redirect IO streams.
  at System.Diagnostics.Process.StartWithShellExecuteEx (System.Diagnostics.ProcessStartInfo startInfo) [0x00060] in <bac62d3dd1c44e1aa31084f6d64e088f>:0 
  at System.Diagnostics.Process.Start () [0x00032] in <bac62d3dd1c44e1aa31084f6d64e088f>:0 
  at (wrapper remoting-invoke-with-check) System.Diagnostics.Process:Start ()
  at System.Diagnostics.Process.Start (System.Diagnostics.ProcessStartInfo startInfo) [0x0001b] in <bac62d3dd1c44e1aa31084f6d64e088f>:0 
  at Illumina.Common.CrossPlatformLink.ReadLinkUnix (System.String path) [0x0001c] in <6d10db4ac92d4b6a9dc2fdb98b61b438>:0 
  at Illumina.Common.CrossPlatformLink.ReadLink (System.String path) [0x00007] in <6d10db4ac92d4b6a9dc2fdb98b61b438>:0 
.......
",Aliyabai,https://github.com/Illumina/canvas/issues/71
MDU6SXNzdWUyOTMzNDY0MjI=,"is ""canvas"" tested on Centos7?",OPEN,2018-01-31T23:12:39Z,2018-02-05T19:05:43Z,,"Is ""canvas"" tested on Centos7?",Sinan81,https://github.com/Illumina/canvas/issues/72
MDU6SXNzdWUyOTUxMDUwODE=,System.ArgumentOutOfRangeException: Index was out of range,OPEN,2018-02-07T11:36:54Z,2019-06-24T16:36:19Z,,"Dear all,
      I meet an error while running canvas Tumor-normal-enrichment, could you please help me ? 
      The CMD:
```
Canvas Tumor-normal-enrichment -b HCC2218C_S1.bam --normal-bam=HCC2218BL_S1.bam --reference=kmer.fa --manifest=NexteraRapidCapture_Exome_TargetedRegions_v1.2Used.txt -g hg19 -n HCC2218C -f filter13.bed -o result --sample-b-allele-vcf=HCC2218BL_S1.vcf --custom-parameters=CanvasBin,-m=TruncatedDynamicRange
```
      All the files are download from demo data.
      The error messages:
```
ERROR: Canvas workflow error: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
   at System.ThrowHelper.ThrowArgumentOutOfRange_IndexException()
   at Canvas.CanvasRunner.GetIntermediateBinnedFilesByBamPath(GenomeMetadata genomeInfo, Boolean isPairedEnd, List`1 sampleIds, IDirectoryLocation tempFolder, String canvasReferencePath, String canvasBedPath, List`1 bamPaths, StringBuilder commandLine, String tempManifestPath)
   at Canvas.CanvasRunner.InvokeCanvasBin35Mers(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyVcfPath)
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.Launch()
```
      Thanks a lot !
      PS: the version of Canvas is 1.32.0.918

Best,
Gerde",Gerde89,https://github.com/Illumina/canvas/issues/73
MDU6SXNzdWUyOTYxMDMzNzU=,need sample test data,OPEN,2018-02-10T14:05:12Z,2018-02-10T14:05:12Z,,"Hi,
Could you please provide some test data (like the .bam/.vcf) files? I am trying to use SmallPedigree-WGS, and want to make sure I did it in a right way. Thanks.",YulongNiu,https://github.com/Illumina/canvas/issues/74
MDU6SXNzdWUyOTYxMDk0ODQ=,Can not run canvas on Fedora 26,CLOSED,2018-02-10T15:36:52Z,2018-02-13T06:54:55Z,2018-02-13T06:54:55Z,"At first, I installed the dotnet following the link 

https://docs.microsoft.com/en-us/dotnet/core/linux-prerequisites?tabs=netcore1x#install-net-core-for-fedora-24-fedora-25-or-fedora-26-64-bit

```
% /usr/local/bin/dotnet 

Microsoft .NET Core Shared Framework Host

  Version  : 1.1.0
  Build    : 928f77c4bc3f49d892459992fb6e1d5542cb5e86

Usage: dotnet [common-options] [[options] path-to-application]

Common Options:
  --help                           Display .NET Core Shared Framework Host help.
  --version                        Display .NET Core Shared Framework Host version.

Options:
  --fx-version <version>           Version of the installed Shared Framework to use to run the application.
  --additionalprobingpath <path>   Path containing probing policy and assemblies to probe for.

Path to Application:
  The path to a .NET Core managed application, dll or exe file to execute.

If you are debugging the Shared Framework Host, set 'COREHOST_TRACE' to '1' in your environment.

Use dotnet --help to get help with the SDK
```

When I run Canvas, I got the error

```
% /usr/local/bin/dotnet Canvas.dll
Failed to initialize CoreCLR, HRESULT: 0x80131500
```",YulongNiu,https://github.com/Illumina/canvas/issues/75
MDU6SXNzdWUyOTY1MzExOTg=,Preparing non-human genome for Canvas,CLOSED,2018-02-12T21:30:58Z,2018-04-13T17:29:21Z,2018-04-13T17:29:21Z,"Hello, I'm trying to get a couple plant genomes ready for Canvas, but I've run into an issue. How do I prepare the GenomeSize.xml file? I saw links in another answer, but the links were broken. Do you have a link to an example file or a tool for preparing it from a reference genome?
",cheffelfinger,https://github.com/Illumina/canvas/issues/76
MDU6SXNzdWUyOTgzMTYyNTk=,Canvas-1.32: FlagUniqueKmers.dll fails in dotnet 1.1.5,CLOSED,2018-02-19T15:30:56Z,2018-02-19T17:29:16Z,2018-02-19T17:29:16Z,"I need to make a kmer.fa for a custom reference genome (in our genome chrmosome 3 is a bit different from your GRCh37.) I'm running FlagUniqueKmers.dll in dotnet on Linux and I get ""Unhandled Exception: OutOfMemoryException."" soon after it starts. The details:
$ dotnet --version
1.1.5
$ cat /etc/os-release
NAME=""Scientific Linux""
VERSION=""7.3 (Nitrogen)""
ID=""rhel""
ID_LIKE=""fedora""
VERSION_ID=""7.3""
...

Working node has 32 cores and 192GB memory.

The command I run is 
$ dotnet ../../Canvas-1.32.0.918.master_x64/Tools/FlagUniqueKmers/FlagUniqueKmers.dll genome.fa kmer.fa

It fails after "">>>1 1 52000000 dict 47331105 incomplete 0"", the exit code is 134.

I also tried to run FlagUniqueKmers.dll in mono, it ran for a week and then failed with ""[ERROR] FATAL UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object"" after outputting "">>>1 1 103000000 dict 95491538 incomplete 0"" line.

Thank you!",shamardina,https://github.com/Illumina/canvas/issues/77
MDU6SXNzdWUyOTg3NjA5NjY=,Germline-WGS: too many LOH? (Canvas-1.32),OPEN,2018-02-20T21:47:23Z,2018-02-26T16:19:23Z,,"I ran Canvas Germline-WGS for several samples and all have lots of LOH variants (I consider only PASS variants.) For example, Illumina's .SV.vcf.gz for a sample has only one LOH:
16 GAIN
1 LOH
17 LOSS
427 REF

And if I run the Canvas-1.32 Germline-WGS for this sample I get:
15 GAIN
112 LOH
34 LOSS
223 REF

The regions identified as LOH do contain PASS heterozygous variants. Is it an expected behaviour?

I run Canvas like this:
dotnet ${CANVAS}/Canvas.dll Germline-WGS -b ${BAM} --sample-b-allele-vcf=${VCF} -n ${SAMPLE} -o ${SAMPLE}-test -r ${REF}/kmer.fa -g ${REF} -f ${REF}/filter13.bed

Reference files are from http://canvas-cnv-public.s3.amazonaws.com/ 

Thank you!",shamardina,https://github.com/Illumina/canvas/issues/78
MDU6SXNzdWUzMDE0NDg2MjI=,Germline-WGS: System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values (Canvas v1.32),OPEN,2018-03-01T15:32:36Z,2018-03-01T15:32:36Z,,"Hi Eric, 
I am attempting to run Canvas Germline-WGS (v1.32.x) on Human WGS data using an Ubuntu 14.04 (trusty) Linux environment. The program reaches 'checkpoint 04: CanvasClean', calling (and completing) CanvasClean for one sample before throwing the error below. I have uploaded the [CanvasError.txt](https://nmns93.github.io/canvas_180227/CanvasError.txt), [CanvasLog.txt](https://nmns93.github.io/canvas_180227/CanvasLog.txt) and [jobManager.commands.tsv](https://nmns93.github.io/canvas_180227/jobManager.commands.tsv.txt) files for your reference. 

I believe the error comes from a regular expression mismatch somewhere? If this is a file naming issue, could you point me to the file/string/naming-convention expected by Canvas?
Note, there were no *.stderr.txt files in the `Logging/` directory. Any help is much appreciated.

	Command:
	Germline-WGS --bam=${BAM} --sample-name=${SAMPLE} \
	--genome-folder=reference/Homo_sapiens/NCBI/GRCh37/Sequence/WholeGenomeFasta \
	--reference=reference/Homo_sapiens/NCBI/GRCh37/Sequence/WholeGenomeFasta/kmer.fa \
	--population-b-allele-vcf=reference/Homo_sapiens/NCBI/GRCh37/Sequence/WholeGenomeFasta/dbsnp.vcf \
	--filter-bed=reference/Homo_sapiens/NCBI/GRCh37/Sequence/WholeGenomeFasta/filter13.bed \
	--output=out/output_files --custom-parameters=CanvasSNV,--isDbSnpVcf=True

	Error:
	2018-02-27T12:13:17,ERROR: Canvas workflow error: System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values.
	Parameter name: i
	   at System.Text.RegularExpressions.MatchCollection.get_Item(Int32 i)
	   at Isas.Framework.Settings.CommandOptionsUtilities.GetValues(String currentValues, String expectedValues, String& remainingValues)
	   at Isas.Framework.Settings.CommandOptionsUtilities.MergeCommandLineOptions(String commandLineWithOptions, String moreOptions, Boolean insertAtEnd)
	   at Canvas.CanvasRunner.InvokeCanvasSnv(CanvasCallset callset, Boolean isSomatic, String sampleName)
	   at System.Threading.Tasks.Task`1.InnerInvoke()
	   at System.Threading.Tasks.Task.Execute()
	--- End of stack trace from previous location where exception was thrown ---
	   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
	   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
	   at Canvas.CanvasRunner.<CallSampleInternal>d__36.MoveNext()
	--- End of stack trace from previous location where exception was thrown ---
	   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
	   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
	   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
	   at Canvas.ModeLauncher.Launch()
	2018-02-27T12:13:17,ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception: 
		One or more errors occurred. (One or more errors occurred. (Specified argument was out of the range of valid values.
	Parameter name: i))
",NMNS93,https://github.com/Illumina/canvas/issues/79
MDU6SXNzdWUzMTE3OTIwODU=,Executable permission error in recent releases,OPEN,2018-04-05T22:34:31Z,2018-04-05T22:34:31Z,,"You get permission denied error trying to run canvas executables under linux in recent releases.
You need to give all executable files correct permission to run Canvas applications.
Give them +x permission by default. 
This affects multiple executables inside Canvas folder.",osowiecki,https://github.com/Illumina/canvas/issues/80
MDU6SXNzdWUzMTQxOTIxNTc=,Germline-WGS crashing,CLOSED,2018-04-13T17:35:18Z,2019-03-22T17:10:13Z,2019-03-22T17:10:13Z,"I think I have all of the required input files formatted correctly at this point, but I'm still having issues with the Germline-WGS pipeline. 

I'm seeing the following error appear in the error logs, though this appears before the program finally crashes.

System.ArgumentException: File '<VCF File>' contains >1 samples, name for a sample of interest must be provided
   at CanvasSNV.SNVReviewer.LoadVariants(String vcfPath, Boolean isSomatic)
   at CanvasSNV.SNVReviewer.Run()
   at CanvasSNV.Program.Main(String[] args)

Note that I have renamed the bam file to match the name within the VCF File and also use the name within the VCF file for the -n command.

The crash occurs with the following exit:

2018-04-13T13:28:03,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: dotnet returned error code 134

I am attaching the complete error log


[CanvasError.txt](https://github.com/Illumina/canvas/files/1908350/CanvasError.txt)


EDIT: I managed to get past this point by removing all but the relevant sample from the VCF. It's now crashing at this point. I'm including the new log:

[CanvasError2.txt](https://github.com/Illumina/canvas/files/1908739/CanvasError2.txt)





",cheffelfinger,https://github.com/Illumina/canvas/issues/81
MDU6SXNzdWUzMTUyMjQ4MDY=,libhostfxr.so could not be found,OPEN,2018-04-17T20:33:54Z,2018-04-17T20:33:54Z,,"Hi All,
I am trying to use Canvas in linux. When I was running the command line 'dotnet Canvas.dll', a fatal error occurred - the required library libhostfxr.so could not be found at /usr/local/bin. 

Could anyone give me some suggestions on how to fix it? I'd really appreciate your help!

Thanks,
Jing",jingjin0322,https://github.com/Illumina/canvas/issues/82
MDU6SXNzdWUzMjIwMDk4Nzk=,Conversion from raw snp142Common.txt.gz to dbsnp.vcf and update / questions about  FAQ.md file (Strelka2),CLOSED,2018-05-10T17:13:59Z,2018-06-01T20:43:59Z,2018-05-10T17:27:08Z,"Hi,

  I can't  find what AWK / Script are you using to convert from the Raw text file to generate the dbsnp.vcf file.

From  the dbsnp.vcf in http://canvas-cnv-public.s3.amazonaws.com/GRCh38/dbsnp.vcf

```
[bfiset@ip14-mp2 Canvas-Data]$ more dbsnp.vcf 
##fileformat=VCFv4.0
##source=http://hgdownload.cse.ucsc.edu/goldenPath/hg38/database/snp142Common.txt.gz
#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO
chr1	11008	rs575272151	C	G	0	.	.
chr1	11012	rs544419019	C	G	0	.	.
```

The FAQ.md should get an update.... but just to be certain this FAQ states for the --b-allele-vcf parameter you should  download dbsnp.vcf at  https://illumina.app.box.com/CanvasPublic/ should the URL be : http://canvas-cnv-public.s3.amazonaws.com/  ?

The #2 option for --b-allele-vcf file is to generate the SNV with Germline SNV caller... can Strelka2 output be used directly or the vcf output files from Strelka are not compatible with Canvas ?

Thanks,

B.",BenoitFiset,https://github.com/Illumina/canvas/issues/83
MDU6SXNzdWUzMjIwNjcxMTM=,FlagUniqueKmers estimated run time for a GRCh38 - 3.1G Genome file,OPEN,2018-05-10T20:10:25Z,2019-01-06T14:58:01Z,,"Hi,
 
 Setting up files for a trial Tumor-normal-enrichment Canvas run and have it seems I have to run FlagUniqueKmers.  FlagUniqueKmers doesn't seem to be multicore...

After an hour I only had this completed.... still lots of Chromosomes left....

```
5/9/2018 3:42:16 PM Start
Load FASTA file at Homo_sapiens.GRCh38.dna.primary_assembly.fa, write kmer-flagged output to Homo_GRCh38_kmer.fa
>>>1 1 0 dict 0 incomplete 0
>>>1 1 1000000 dict 542569 incomplete 0
>>>1 1 2000000 dict 1456703 incomplete 0
>>>1 1 3000000 dict 2334153 incomplete 0
>>>1 1 4000000 dict 3311993 incomplete 0
>>>1 1 5000000 dict 4292821 incomplete 0
>>>1 1 6000000 dict 5273936 incomplete 0
>>>1 1 7000000 dict 6234028 incomplete 0
>>>1 1 8000000 dict 7201370 incomplete 0
```
What should I expect as a run time for a complete 22 CHR + X + Y and MT run for a GRCh38 file

Thanks,

B.",BenoitFiset,https://github.com/Illumina/canvas/issues/84
MDU6SXNzdWUzMjMzOTUxODY=,-genome-folder.  The files genome.fa and GenomeSize.xml,OPEN,2018-05-15T21:46:27Z,2018-05-22T17:58:10Z,,"Hi,

  I can't find explanation on these files. Is the genome.fa a real genome assembly file of the flavour of the month ?  IE a GRCh38 version that is the same that generated the kmer.fa file ? How is the GenomeSize.xml generated ? Do the files have to have those name ?

Asking again because have to convert from UCSC to Ensembl nomenclature with the file you provide in Amazon S3.  Using grep, sed, awk and perl are fun, but if the tool to generate the GenomeSize.xml is available, the better.

From the output of the help of: Canvas.dll Tumor-normal-enrichment --help
```
Common options:
  -o, --output=VALUE         output directory. Will be created if it doesn't 
                               exist. (required)
  -r, --reference=VALUE      Canvas-ready reference fasta file (required)
  -g, --genome-folder=VALUE  folder that contains both genome.fa and 
                               GenomeSize.xml (required)
```

The section called ""Common Options"" ... but all seem required.... Are they options or really required... for me the meaning of options is something Optional...

I just hope at the end of all these conversions that I'll be able to run the Tumor-normal-enrichment workflow.

Thanks
",BenoitFiset,https://github.com/Illumina/canvas/issues/85
MDU6SXNzdWUzMjU0NzgzNzY=,ERROR: Canvas workflow error: System.ArgumentOutOfRangeException: Index was out of range. ,OPEN,2018-05-22T21:58:17Z,2018-05-23T22:07:55Z,,"Finally got to get Tumor-normal-enrichment on a PC with .NET Core 1.1.9 on a PC with version 1.35.1.1316+master of Canvas.

Don't understand why the work flow starts off with Chromosome 2 - CanvasSNV.dll  -c 2 but this runs ok. 

The jobManager.commands.tsv has the right order of things:
```
C:\Users\WalshLab\Downloads\Canvas_T1\Logging>more jobManager.commands.tsv
CanvasSNV-'SSXT96_F01_VS_SSXT96_B01'-'1'        C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c 1 -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\1-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
CanvasSNV-'SSXT96_F01_VS_SSXT96_B01'-'2'        C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c 2 -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\2-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
CanvasSNV-'SSXT96_F01_VS_SSXT96_B01'-'3'        C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c 3 -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\3-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
```

```
2018-05-22T17:16:46,Checkpoint 01 Validate input complete. Elapsed time (hh/mm/ss): 00:00:00.1
2018-05-22T17:16:47,Normal Vcf path: C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf
2018-05-22T17:16:47,
2018-05-22T17:16:47,Running checkpoint 02: CanvasSNV
2018-05-22T17:16:47,
2018-05-22T17:16:47,Running checkpoint 03: CanvasBin
Invoking 24 processor jobs...for sample SSXT96_F01_VS_SSXT96_B01
CanvasSNV start for sample SSXT96_F01_VS_SSXT96_B01
2018-05-22T17:16:47,DoWorkParallelThreads, attempt 1 of 1
2018-05-22T17:16:47,Launch process: C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c 2 -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\2-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
```

Then it starts to run Chromosome 1 and then get the error:
```
2018-05-22T17:16:47,Launch process: C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c 1 -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\1-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
2018-05-22T17:16:47,ERROR: Canvas workflow error: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
```
The whole error In the CanvasError.txt file:
```
>more CanvasError.txt
2018-05-22T17:16:47,ERROR: Canvas workflow error: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
   at System.ThrowHelper.ThrowArgumentOutOfRange_IndexException()
   at Canvas.CanvasRunner.GetIntermediateBinnedFilesByBamPath(GenomeMetadata genomeInfo, Boolean isPairedEnd, List`1 sampleIds, IDirectoryLocation tempFolder, String canvasReferencePath, String canvasBedPath, List`1 bamPaths, StringBuilder commandLine, String tempManifestPath) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\CanvasRunner.cs:line 346
   at Canvas.CanvasRunner.InvokeCanvasBin35Mers(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyVcfPath) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\CanvasRunner.cs:line 230
   at Canvas.CanvasRunner.InvokeCanvasBin(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyVcfPath) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\CanvasRunner.cs:line 197
   at Canvas.CanvasRunner.<>c__DisplayClass38_0.<CallSampleInternal>b__1() in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\CanvasRunner.cs:line 805
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.RunCheckpoint[TResult](String checkpointName, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__38.MoveNext() in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\CanvasRunner.cs:line 805
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\CanvasRunner.cs:line 767
   at Canvas.ModeLauncher.Launch() in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\Canvas\ModeLauncher.cs:line 64
```

And there are no errors in the CanvasSNV-'SSXT96_F01_VS_SSXT96_B01'-'1'.stdout.txt file
```
more ""CanvasSNV-'SSXT96_F01_VS_SSXT96_B01'-'1'.stdout.txt""
>>>Command-line arguments:
-c 1 -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\1-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
2018-05-22 5:16:50 PM Loading variants of interest from C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf
Retained 2177785 variants, out of 2823256 records for 1
2018-05-22 5:17:26 PM Looping over bam records from C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam
Jump to refid 0 1
Record 1000000 at 15929902...
Record 2000000 at 28646963...
Record 3000000 at 40076862...
Record 4000000 at 52028879...
Record 5000000 at 70994903...
Record 6000000 at 92843814...
Record 7000000 at 111759462...
Record 8000000 at 148776015...
Record 9000000 at 155610977...
Record 10000000 at 166620829...
Record 11000000 at 180014442...
Record 12000000 at 197435003...
Record 13000000 at 209938150...
Record 14000000 at 226309248...
Record 15000000 at 241679341...
Looped over 15487563 bam records in all
2018-05-22 5:17:47 PM Results written to C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\1-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz
```

Then no errors for the rest of the other Chromosomes.... till the end

```
2018-05-22T17:41:06,Launch process: C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c X -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\X-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
2018-05-22T17:42:15,Launch process: C:\Program Files\dotnet\dotnet.exe C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\CanvasSNV\CanvasSNV.dll  -c Y -v C:\Users\WalshLab\Downloads\Canvas-Ensembl\common_all_20180418.vcf -b C:\Users\WalshLab\Downloads\SSXT96_B01_Aligned_01\Projects\default\default\sorted.bam -o C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\Y-SSXT96_F01_VS_SSXT96_B01.SNV.txt.gz --isSomatic
CanvasSNV complete for sample SSXT96_F01_VS_SSXT96_B01
2018-05-22T17:45:10,Begin converting 'C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\VFResultsSSXT96_F01_VS_SSXT96_B01.txt.gz.baf' to 'C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\ballele.bedgraph.gz'
2018-05-22T17:45:27,Launching process for job tabix-index-tmp-ballele.bedgraph.gz.1:
cmd /c ""C:\Users\WalshLab\Downloads\Canvas-1.35.1.1316+master_x64\tabix.exe -p bed -f C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\ballele.bedgraph.gz""
2018-05-22T17:45:31,Job tabix-index-tmp-ballele.bedgraph.gz.1 took 00:00:04.5 seconds
2018-05-22T17:45:31,Finished converting 'C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\VFResultsSSXT96_F01_VS_SSXT96_B01.txt.gz.baf' to 'C:\Users\WalshLab\Downloads\Canvas_T1\TempCNV_SSXT96_F01_VS_SSXT96_B01\ballele.bedgraph.gz'. Elapsed time: 00:00:21.3
2018-05-22T17:45:31,Checkpoint 02 CanvasSNV complete. Elapsed time (hh/mm/ss): 00:28:44.6
```

Any tips on debugging this as I don't know where this stems from.

Thanks.


",BenoitFiset,https://github.com/Illumina/canvas/issues/86
MDU6SXNzdWUzMjYzNzQ5NjA=,filter-bed parameter / option,OPEN,2018-05-25T04:12:38Z,2018-08-24T17:04:03Z,,"Hi Eric,

  question about --filter-bed for Tumor-normal-enrichment. I was using the filter13.bed file to filter the centromere and all was fine and dandy.. Got results.

I created a bed (0 based as should be) file to filter everything (including the centromeres) that are not exon (so to keep only exon regions).  My thought would be that the result CNV files would be smaller than when I only filter the centromeres.

Sample of the bed file: (total of 33491 lines in the whole file)
```
1	11868	31109
1	34553	36081
1	52472	53312
1	57597	64116
1	65418	71585
1	89294	134836
1	135140	135895
1	137681	137965
1	139789	140339
1	141473	173862
1	182695	184174
1	185216	195411
1	257863	522928
1	586070	859446
1	868070	877234
1	904833	915976
1	916864	921016
1	923927	959309
1	960586	965715
1	966496	982093
1	995965	998051
```

But no, there are many more CNVs called, lots more. 
```
2465 - lines in the CNV.vcf of filter13.bed - centromere filter file
16944 - lines in the CNV.vcf of the filter not exon regions bed file
```

Other interesting thing, the EstimatedTumorPurity and OverallPloidy values are much better with the Exoms only region.

filter13.bed - (filter centromere) results:
```
##EstimatedTumorPurity=0.80
##PurityModelFit=0.0400
##InterModelDistance=0.7024
##LocalSDmetric=5.21
##Heterogeneity=0.00
##EstimatedChromosomeCount=49.86
##OverallPloidy=2.12
```

Filter not exon regions bed file results:
```
##EstimatedTumorPurity=0.99
##PurityModelFit=0.0312
##InterModelDistance=0.0293
##LocalSDmetric=3.09
##Heterogeneity=0.00
##EstimatedChromosomeCount=76.14
##OverallPloidy=3.25
```

Any thought on this, why more CNV when I filter out more regions ? 
Is my understanding of the --filter-bed option good ? (In the file regions you want to exclude)

Thanks.


",BenoitFiset,https://github.com/Illumina/canvas/issues/87
MDU6SXNzdWUzMzMzNTgwNDA=,Filtered or unfiltered germline SNPs for Canvas Germline-WGS?,CLOSED,2018-06-18T17:05:41Z,2018-06-18T19:12:44Z,2018-06-18T19:12:44Z,"Hi,
Could you advise me on which germline SNP VCFs I should use for `--sample-b-allele-vcf` in Canvas Germline-WGS? I have an unfiltered germline SNP VCF that is directly from a SNP/INDEL caller, and a germline SNP VCF that is hard-filtered by variant qualities.
",jnktsj,https://github.com/Illumina/canvas/issues/88
MDU6SXNzdWUzMzYyODI1NTA=,Expecting ploidyVcfFile in CanvasPartition,OPEN,2018-06-27T15:37:00Z,2018-07-10T18:50:50Z,,"Hi,

In the latest version 1.38 when I am running Somatic-WGS workflow, it is expecting a ploidyVcfFile at the 5th step 'CanvasPartition'.

So the command has:
${DOTNET}/dotnet {$CANVAS}/CanvasPartition/CanvasPartition.dll -p """" 

So instead of NULL the script is taking it as an empty string and still trying to validate the VCF and erroring out. 

Can you please check if that is actually an issue?

The way I am running CANVAS is:

{$DOTNET}/dotnet {$CANVAS}/Canvas.dll Somatic-WGS \
--bam=$TUMOR_BAMFILE \
--output=$outdir \
--reference=$CANVAS_data/kmer.fa \
--genome-folder=$CANVAS_data/WholeGenomeFasta \
--sample-name=$SAMPLE \
--filter-bed=$CANVAS_data/filter13.bed \
--sample-b-allele-vcf=$NORMAL_VCF \
--somatic-vcf=$TUMOR_VCF

",Rashesh7,https://github.com/Illumina/canvas/issues/89
MDU6SXNzdWUzNDUxNjQ2NDQ=,how to use FlagUniqueKmers ?,CLOSED,2018-07-27T09:55:11Z,2018-07-30T12:44:28Z,2018-07-30T12:44:28Z,"Dear,

Firstly thanks for your awesome works .
I try to use FlagUniqueKmers in order to use a custom reference but I got an exception.

```bash
$ pwd
/tmp/refs
$ ls
hs37d5_all_chr.fasta
$ export COMPlus_gcAllowVeryLargeObjects=1
$ mono /opt/canvas/1.38.0.1554/Canvas-1.38.0.1554+master_x64/Tools/FlagUniqueKmers/FlagUniqueKmers.dll

Unhandled Exception:
System.IO.FileNotFoundException: Could not load file or assembly 'System.Console, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies.
File name: 'System.Console, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'
[ERROR] FATAL UNHANDLED EXCEPTION: System.IO.FileNotFoundException: Could not load file or assembly 'System.Console, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies.
File name: 'System.Console, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'
```

On centos 6 I use mono  `v4.2.4` :
```bash
$ yum list installed | grep mono
dejavu-lgc-sans-mono-fonts.noarch    2.33-1.el6                 @base
dejavu-sans-mono-fonts.noarch        2.33-1.el6                 @base
gnu-free-mono-fonts.noarch           20100919-3.el6             @epel
liberation-mono-fonts.noarch         1.05.1.20090721-5.el6      @base
mono-core.x86_64                     4.2.4-9.el6                @epel
mono-data.x86_64                     4.2.4-9.el6                @epel
mono-data-sqlite.x86_64              4.2.4-9.el6                @epel
mono-extras.x86_64                   4.2.4-9.el6                @epel
mono-mvc.x86_64                      4.2.4-9.el6                @epel
mono-wcf.x86_64                      4.2.4-9.el6                @epel
mono-web.x86_64                      4.2.4-9.el6                @epel
mono-winforms.x86_64                 4.2.4-9.el6                @epel
```

On CentOs 7 I use mono `4.6.2` and I have this exception:
```bash
$  mono Canvas-1.38.0.1554+master_x64/Tools/FlagUniqueKmers/FlagUniqueKmers.dll --help

Unhandled Exception:
System.TypeLoadException: Could not resolve type with token 01000029
```

could you provide a example of use please  ?

Thanks

Best regards
",bioinfornatics,https://github.com/Illumina/canvas/issues/90
MDU6SXNzdWUzNDk0NTE3MzE=,CanvasPedigreeCaller looking for hardcoded path to GenomeSize.xml,OPEN,2018-08-10T09:58:47Z,2018-11-30T17:16:19Z,,"Hi,

Using the precompiled release Canvas-1.38.0.1554+master_x64, I run into the following error when running the SmallPedigree-WGS workflow: 

```
2018-08-10T01:07:05+01:00,ERROR: Job CanvasPedigreeCaller failed with exit code 255. Job logs: 
	/path/edited/for/privacy/canvas_cnv_calling/canvas_results/1268/Logging/CanvasPedigreeCaller.stdout
	/path/edited/for/privacy/canvas_cnv_calling/canvas_results/1268/Logging/CanvasPedigreeCaller.stderr
Job error message:
2018-08-10T01:07:04+01:00,ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception: 
	Could not find a part of the path '/path/edited/for/privacy/Sequence/WholeGenomeFasta/GenomeSize.xml'.
System.IO.DirectoryNotFoundException: Could not find a part of the path '/path/edited/for/privacy/Sequence/WholeGenomeFasta/GenomeSize.xml'.
   at Interop.ThrowExceptionForIoErrno(ErrorInfo errorInfo, String path, Boolean isDirectory, Func`2 errorRewriter)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String path, OpenFlags flags, Int32 mode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileInfo.OpenRead()
   at Isas.SequencingFiles.GenomeMetadata.Deserialize(IReferenceGenome referenceGenome)
   at Isas.SequencingFiles.ReferenceGenome.get_GenomeMetadata()
   at CanvasPedigreeCaller.Program.<>c__DisplayClass2_0.<Run>b__12(IWorkDoer workDoer) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 175
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation loggingDir, Action`1 logCommand, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.ResourceManagement.WorkResourceManagerFactory.RunWithResourceManager(ILogger logger, ISettings settings, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.WorkDoerFactory.RunWithWorkDoer(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationTokenSource cancellationTokenSource, Action`1 function)
   at CanvasPedigreeCaller.Program.Run(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 192
   at CanvasPedigreeCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 39
2018-08-10T01:07:05+01:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job CanvasPedigreeCaller failed with exit code 255
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTask, Task`1 functionTask)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.RunSmallPedigreeCalling(List`1 partitionedPaths, SmallPedigreeCallset callsets)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.RunCheckpoint(ICheckpointRunner runner, String name, Action a)
   at Canvas.CanvasRunner.CallSampleInternal(SmallPedigreeCallset callset)
   at Canvas.CanvasRunner.CallPedigree(SmallPedigreeCallset callset)
   at Canvas.ModeLauncher.Launch()
```

It appears that despite providing the location of the --genome-folder containing GenomeSize.xml when invoking the SmallPedigree-WGS workflow, the CanvasPedigreeCaller expects 'Sequence/WholeGenomeFasta/GenomeSize.xml' to be present in the parent directory of my 'Canvas-1.38.0.1554+master_x64' folder (or equivalently, two folders above the location specified using the --genome-folder argument). The workflow completes successfully if I add the file where the program expects it, but it would be great if this could be fixed so I don't have to clutter my directory in order to get this to run or remember this fix when running on a different machine.

Thanks

Dave
",david-a-parry,https://github.com/Illumina/canvas/issues/91
MDU6SXNzdWUzNTU4Njc4NDI=,Unhandled Exception: System.IndexOutOfRangeException: Index was outside the bounds of the array.,CLOSED,2018-08-31T07:21:55Z,2019-06-24T23:50:49Z,2018-08-31T09:26:26Z,"Hi Eric,

  As you know, using mono and TN with 1.11.0 of canvas.... Trying to adjust files for WES and getting these errors.

These errors are in all the dat.stderr.txt files. Where do I start to debug this ?

A full error sample:
```
Unhandled Exception:
System.IndexOutOfRangeException: Index was outside the bounds of the array.
at CanvasBin.CanvasBin.ExcludeTagsOverlappingFilterFile (System.String filterFile, System.Collections.Generic.IDictionary`2[TKey,TValue] tags) [0x0001a] in <63fa03d6c0824
e34bfc976c23685abf9>:0 
  at CanvasBin.CanvasBin.BinOneGenomicInterval (CanvasBin.CanvasBinParameters parameters, System.Collections.Generic.Dictionary`2[TKey,TValue] possibleAlignments, System.Co
llections.Generic.Dictionary`2[TKey,TValue] observedAlignments, System.Collections.Generic.Dictionary`2[TKey,TValue] fragmentLengths) [0x0007f] in <63fa03d6c0824e34bfc976c2
3685abf9>:0 
  at CanvasBin.CanvasBin.Run (CanvasBin.CanvasBinParameters parameters) [0x00040] in <63fa03d6c0824e34bfc976c23685abf9>:0 
  at CanvasBin.Program.Main (System.String[] args) [0x0003b] in <63fa03d6c0824e34bfc976c23685abf9>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.IndexOutOfRangeException: Index was outside the bounds of the array.
  at CanvasBin.CanvasBin.ExcludeTagsOverlappingFilterFile (System.String filterFile, System.Collections.Generic.IDictionary`2[TKey,TValue] tags) [0x0001a] in <63fa03d6c0824
e34bfc976c23685abf9>:0 
  at CanvasBin.CanvasBin.BinOneGenomicInterval (CanvasBin.CanvasBinParameters parameters, System.Collections.Generic.Dictionary`2[TKey,TValue] possibleAlignments, System.Co
llections.Generic.Dictionary`2[TKey,TValue] observedAlignments, System.Collections.Generic.Dictionary`2[TKey,TValue] fragmentLengths) [0x0007f] in <63fa03d6c0824e34bfc976c2
3685abf9>:0 
  at CanvasBin.CanvasBin.Run (CanvasBin.CanvasBinParameters parameters) [0x00040] in <63fa03d6c0824e34bfc976c23685abf9>:0 
  at CanvasBin.Program.Main (System.String[] args) [0x0003b] in <63fa03d6c0824e34bfc976c23685abf9>:0 
```

Thanks,

B.
",BenoitFiset,https://github.com/Illumina/canvas/issues/92
MDU6SXNzdWUzNTU5MDg3ODg=,CheckPoint 3: Canvas workflow error: System.ArgumentNullException: Value cannot be null. Parameter name: fileName,OPEN,2018-08-31T09:34:45Z,2019-01-04T17:44:14Z,,"Hi Eric,

  Canvas 1.11.0 crashes at the start of CheckPoint 3 with Value cannot be null.
Parameter name: fileName

I'm really stumped at this one.... Where would I start to figure this one ?  

The Error:
```
8/31/2018,05:23:15.539,ERROR: Canvas workflow error: System.ArgumentNullException: Value cannot be null.
Parameter name: fileName
  at System.IO.FileInfo..ctor (System.String fileName) [0x0000c] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at (wrapper remoting-invoke-with-check) System.IO.FileInfo:.ctor (string)
  at Isas.Shared.FileLocation..ctor (System.String filePath) [0x00000] in <50a58fca929d4779b288da9d5fc7e23a>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.InvokeCanvasClean (Canvas.CanvasCallset callset, Isas.Shared.IFileLocation binnedPath) [0x0017f] in <40480894c2e34a83bba19927b2
1c54fe>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<>c__DisplayClass17_0.<CallSampleInternal>b__2 () [0x00000] in <40480894c2e34a83bba19927b21c54fe>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[T].<WrapWithBenchmark>b__9_0 () [0x00032] in <50a58fca929d4779b288da9d5fc7e23a>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[T].<WrapWithSave>b__10_0 () [0x00006] in <50a58fca929d4779b288da9d5fc7e23a>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync+CheckpointHelper`1[T].<WrapWithStopCheckpointCheck>b__12_0 () [0x00006] in <50a58fca929d4779b288da9d5fc7e23a>:0 
  at System.Threading.Tasks.Task`1[TResult].InnerInvoke () [0x00012] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Threading.Tasks.Task.Execute () [0x00016] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x0000c] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess (System.Threading.Tasks.Task task) [0x0004e] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification (System.Threading.Tasks.Task task) [0x0002e] in <d5caad886768424fa3a1522c6f4e7dd5>:
0 
  at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd (System.Threading.Tasks.Task task) [0x0000b] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Runtime.CompilerServices.TaskAwaiter`1[TResult].GetResult () [0x00000] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at Isas.Shared.Checkpointing.CheckpointRunnerAsync.RunCheckpoint[TOut] (System.String key, System.Func`1[TResult] function) [0x0000e] in <50a58fca929d4779b288da9d5fc7e23a
>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner+<CallSampleInternal>d__17.MoveNext () [0x0017b] in <40480894c2e34a83bba19927b21c54fe>:0 
--- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw () [0x0000c] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess (System.Threading.Tasks.Task task) [0x0004e] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification (System.Threading.Tasks.Task task) [0x0002e] in <d5caad886768424fa3a1522c6f4e7dd5>:
0 
  at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd (System.Threading.Tasks.Task task) [0x0000b] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at System.Runtime.CompilerServices.TaskAwaiter.GetResult () [0x00000] in <d5caad886768424fa3a1522c6f4e7dd5>:0 
  at Illumina.SecondaryAnalysis.CanvasRunner.CallSample (Canvas.CanvasCallset callset) [0x00029] in <40480894c2e34a83bba19927b21c54fe>:0 
  at Canvas.TumorNormalEnrichmentRunner.Run (Isas.Shared.ILogger logger, Isas.Shared.Checkpointing.ICheckpointRunnerAsync checkpointRunner, Isas.Shared.IWorkManager workMan
ager) [0x00021] in <40480894c2e34a83bba19927b21c54fe>:0 
  at Canvas.ModeLauncher.Launch () [0x000c2] in <40480894c2e34a83bba19927b21c54fe>:0 
```

The Command a launched a CheckPoint 3:

```
8/31/2018,05:23:02.001,Running checkpoint 3: 'CanvasClean'
8/31/2018,05:23:02.004,Launch process: /cvmfs/soft.computecanada.ca/easybuild/software/2017/sse3/Compiler/intel2016.4/mono/4.6.2.7/bin/mono /project/6014302/bfiset/Canvas/1
.11.0/CanvasClean.exe -i ""/home/bfiset/scratch/WGS/Canvas_01/TempCNV_4748_007_VS_4748-008_4763-006/4748_007_VS_4748-008_4763-006.ratio.binned"" -o ""/home/bfiset/scratch/WGS/
Canvas_01/TempCNV_4748_007_VS_4748-008_4763-006/4748_007_VS_4748-008_4763-006.cleaned"" -g -t ""/home/bfiset/scratch/WGS/Canvas_01/TempCNV_4748_007_VS_4748-008_4763-006/manif
est.txt""
```

Thanks,

B.


",BenoitFiset,https://github.com/Illumina/canvas/issues/93
MDU6SXNzdWUzNTYxNzQ1Nzc=,tabix: Permission denied,CLOSED,2018-09-01T05:39:18Z,2019-08-29T15:42:03Z,2018-10-19T00:29:15Z,"Hi Eric,

  Moving along.... Now trying Canvas-1.38.0.1554 with dotnet 2.0.7 to get canvas Somatic-WGS to work... configured, started and got to Checkpoint 04-CanvasClean.json

Then this error:


```
more CanvasError.txt
2018-08-31T23:00:09-04:00,ERROR: Job tabix-index-tmp-ballele.bedgraph.gz.1 failed with exit code 126. Job logs: 
	/home/bfiset/scratch/WGS/HI.4748-008_4763-006_V418_Aligned_01_SWGS_Canvas_01/Logging/tabix-index-tmp-ballele.bedgraph.gz.1.stdout
	/home/bfiset/scratch/WGS/HI.4748-008_4763-006_V418_Aligned_01_SWGS_Canvas_01/Logging/tabix-index-tmp-ballele.bedgraph.gz.1.stderr
Job error message:
bash: /project/6014302/bfiset/Canvas/Canvas-1.38.0.1554/tabix: Permission denied
2018-08-31T23:13:37-04:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job tabix-index-tmp-ballele.bedgraph.gz.1 failed with exit code 12
6
```

In the file: tabix-index-tmp-ballele.bedgraph.gz.1.stderr has this:
```
bash: /project/6014302/bfiset/Canvas/Canvas-1.38.0.1554/tabix: Permission denied
```

Tabix and Tabix.exe are in the /project/6014302/bfiset/Canvas/Canvas-1.38.0.1554/tabix directory.

When I try to execute tabix.exe with dotnet get this:

```
dotnet tabix.exe
A fatal error was encountered. The library 'libhostpolicy.so' required to execute the application was not found in '/project/6014302/bfiset/Canvas/Canvas-1.38.0.1554/'.
```

Haven't seen this issue in the Cavas issues.

Any guidance possible ?

Thanks,

B.
",BenoitFiset,https://github.com/Illumina/canvas/issues/94
MDU6SXNzdWUzNTk1MzE4MzI=,System.IO.FileNotFoundException: The specified vcf file () does not exist.,CLOSED,2018-09-12T15:20:40Z,2019-04-17T23:31:27Z,2018-10-19T00:33:05Z,"Dear Eric,

might you have a look at the following error message. Somatic-WGS (current release) was run with this code:

```
$DOTNET $CANVAS Somatic-WGS \
  --bam=${BASENAME}-t_SortedRmdup.bam \
  --somatic-vcf=Strelka2Dir_${BASENAME}/Somatic/results/variants/somatic.snvs.vcf.gz \
  --sample-b-allele-vcf=Strelka2Dir_${BASENAME}/Germline/results/variants/variants.vcf.gz \
  --sample-name=${BASENAME}-t \
  --output=CanvasDir_${BASENAME}/Somatic \
  --reference=${KMER} \
  --genome-folder=${GENOME_FOLDER} \
  --filter-bed=${FILTER13}
```

[Here](https://uni-muenster.sciebo.de/s/1VWvCGWHWvHGhh6) are both CanvasLog.txt and CanvasError.txt. After checkpoint 5, it complains about `Unhandled Exception: System.IO.FileNotFoundException: The specified vcf file () does not exist.` Can you help out here?

best wishes,
Alexander",ATpoint,https://github.com/Illumina/canvas/issues/95
MDU6SXNzdWUzNjAxMzcxNTA=,Using precomputed .binned files,OPEN,2018-09-14T02:47:18Z,2018-10-25T17:42:47Z,,"Dear Eric et al, 

I have been trying to produce a precomputed Canvas .binned file from a panel of normals for the purpose of calling germline CNVs in future. Whilst I have been able to generate the .binned file, Canvas has been unable to utilise this file in the three versions of Canvas I have tried (1.11, 1.29 and 1.38). I have managed to circumvent issues described by other users, however I have uncovered some new issues. My procedure is as follows:

1. Generate a precomputed .binned file (using Canvas 1.11. I get `index out of range` errors for 1.29 and 1.38)
```
mono /Canvas-1.11/Canvas.exe Somatic-Enrichment
--bam bamfile.bam
--control-bam controlbam1.bam
--control-bam controlbam2.bam
--reference kmer.fa
--manifest grch37.txt
-g Illumina_grch37_files/WholeGenomeFASTA
-n output
-f filter13.bed
-o output
--b-allele-vcf dbsnp.vcf
--exclude-non-het-b-allele-sites
--custom-parameters=CanvasSomaticCaller,--definedpurity=1
```



2. Use the generated .normal.binned file and the output binsize and attempt to call germline CNVs. (Using Canvas 1.11). 
```
mono /Canvas-1.11/Canvas.exe Somatic-Enrichment 
--bam bamfile.bam \
--control-binned output.normal.binned
--control-bin-size 713 
--reference kmer.fa 
--manifest grch37.txt 
-g Illumina_grch37_files/WholeGenomeFASTA
-n output2 
-f filter13.bed
-o output2
--b-allele-vcf dbsnp.vcf
--exclude-non-het-b-allele-sites
--custom-parameters=CanvasSomaticCaller,--definedpurity=1
--custom-parameters=CanvasSNV,--isDbSnpVcf=True
```

However it seems that the --control-bin-size parameter cannot be parsed `failed to convert 713 to System.Nullable 1[System.UInt32]`




3. Because Step 2 failed, I attempted it with later versions of Canvas.
```
dotnet /Canvas-1.38/Canvas.dll Somatic-Enrichment
--bam bamfile.bam
--control-binned output.normal.binned
--control-bin-size 713 
--reference kmer.fa 
--manifest grch37.txt 
-g Illumina_grch37_files/WholeGenomeFASTA
-n output3
-f filter13.bed 
-o output3 
--ploidy-vcf male_ploidy.vcf 
--population-b-allele-vcf dbsnp.vcf 
--custom-parameters=CanvasSomaticCaller,--definedpurity=1
--custom-parameters=CanvasSNV,--isDbSnpVcf=True
```
However Canvas  fails.  `Note: Evenness metric file not found at /output3/TempCNV_output3/EvennessMetric.txt`. This does not seem be generated by the program.

```
2018-09-13T16:02:58+10:00,Running checkpoint 07: Variant calling
2018-09-13T16:02:58+10:00,Checkpoint 06 Intersect bins with manifest complete. Elapsed time (hh/mm/ss): 00:00:00.1
2018-09-13T16:02:58+10:00,Note: Evenness metric file not found at '/cnv/Germline_PON/output3/TempCNV_output3/EvennessMetric.txt'
2018-09-13T16:02:58+10:00,Launching process for job SomaticCNV-output3:
/usr/bin/dotnet /cnv/Canvas-1.38.0.1554/CanvasSomaticCaller/CanvasSomaticCaller.dll  -v /cnv/Germline_PON/output3/TempCNV_output3/VFResultsoutput3.txt.gz -i /cnv/Germline_PON/output3/TempCNV_output3/output3.partitioned -o /cnv/Germline_PON/output3/CNV.vcf.gz -b /ref_seq/Illumina_grch37_files/filter13.bed -p /cnv/Germline_PON/male_ploidy.vcf -n output3 -e -d --local-sd-metric-file ""/cnv/Germline_PON/output3/TempCNV_output3/LocalSdMetric.txt"" -r ""/ref_seq/Illumina_grch37_files/WholeGenomeFASTA"" --definedpurity=1
2018-09-13T16:03:00+10:00,Job SomaticCNV-output3 duration: 00:00:01.4
2018-09-13T16:03:00+10:00,ERROR: Job SomaticCNV-output3 failed with exit code 134. Job logs: 
	/cnv/Germline_PON/output3/Logging/SomaticCNV-output3.stdout
	/cnv/Germline_PON/output3/Logging/SomaticCNV-output3.stderr
```

If you could help me get this working that would be very much appreciated!",sternp,https://github.com/Illumina/canvas/issues/96
MDU6SXNzdWUzNjQ4Njk1NDY=,Sequence contains no elements?,CLOSED,2018-09-28T12:32:13Z,2018-12-24T16:22:28Z,2018-11-02T17:40:54Z,"Hi!


Running rhel7, we are having issues getting Canvas Somatic-WGS for version 1.38.0.1554 working with our whole genome samples:

```
dotnet /apps/bio/software/canvas/1.38.0.1554/Canvas.dll Somatic-WGS -b /tmp/canvas_on_sentieon/LCH16_REALIGNED_tumor.bam --sample-b-allele-vcf=/tmp/canvas_on_sentieon/LCH16_normal_SVs.vcf -o /tmp/canvas_on_sentieon/new --reference=/medstore/External_References/Canvas_CLC_HG19_Dataset/kmer.fa -g /medstore/External_References/Canvas_CLC_HG19_Dataset/new/Homo_sapiens/UCSC/hg19/Sequence/WholeGenomeFasta -f /medstore/External_References/Canvas_CLC_HG19_Dataset/new/Homo_sapiens/UCSC/hg19/Sequence/WholeGenomeFasta/filter13.bed -n WGS --ploidy-vcf=/apps/bio/software/canvas/female_hg19.vcf
```

The error I’m getting is:

```
2018-09-25T15:29:16+02:00,ERROR: Job SomaticCNV-WGS failed with exit code 134. Job logs:
        /tmp/canvas_on_sentieon/new/Logging/SomaticCNV-WGS.stdout
        /tmp/canvas_on_sentieon/new/Logging/SomaticCNV-WGS.stderr
Job error message:
Unhandled Exception: System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.Average(IEnumerable`1 source)
   at CanvasSomaticCaller.SomaticCaller.CallVariants(String inFile, String variantFrequencyFile, String outputVCFPath, String referenceFolder, String name, Nullable`1 localSDmetric, Nullable`1 evennessScore, CanvasSomaticClusteringMode clusteringMode) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 392
   at CanvasSomaticCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\Program.cs:line 196
2018-09-25T15:29:16+02:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job SomaticCNV-WGS failed with exit code 134
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.<RunSystemProcessCheckExitAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.<LaunchJobAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<<RunWithResources>b__11_1>d`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.RunSomaticCalling(IFileLocation partitionedPath, CanvasCallset callset, String canvasBedPath, String ploidyVcfPath, IFileLocation localSdMetricFile, IFileLocation evennessMetricFile, IFileLocation canvasSnvPath)
   at Canvas.CanvasRunner.<>c__DisplayClass38_0.<CallSampleInternal>b__5()
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.RunCheckpoint(ICheckpointRunner runner, String name, Action a)
   at Canvas.CanvasRunner.<CallSampleInternal>d__38.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.Launch()
```


This error seems to happen when I am using vcf-files versioned 4.2 or 4.1 for the --sample-b-allele-vcf input. When using the old dbsnp_common_all_20160601.vcf (vcf v4.0) it instead crashed with the following error:

```
2018-09-26T16:49:03+02:00,ERROR: Job SomaticCNV-WGS failed with exit code 134. Job logs:
        /tmp/canvas_on_sentieon/old_bam/result/Logging/SomaticCNV-WGS.stdout
        /tmp/canvas_on_sentieon/old_bam/result/Logging/SomaticCNV-WGS.stderr
Job error message:
Unhandled Exception: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
   at System.ThrowHelper.ThrowArgumentOutOfRange_IndexException()
   at CanvasSomaticCaller.SomaticCaller.GetUsableSegmentsAndSourcesForModeling(IEnumerable`1 segments, Boolean IsEnrichment, Int32 MinimumVariantFrequenciesForInformativeSegment, Nullable`1 overallMedianCoverage) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 1436
   at CanvasSomaticCaller.SomaticCaller.GetUsableSegmentsForModeling(List`1 segments, Boolean IsEnrichment, Int32 MinimumVariantFrequenciesForInformativeSegment, Nullable`1 overallMediancoverage) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 1428
   at CanvasSomaticCaller.SomaticCaller.ModelOverallCoverageAndPurity(Int64 genomeLength, CanvasSomaticClusteringMode clusteringMode, Nullable`1 evennessScore) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 1628
   at CanvasSomaticCaller.SomaticCaller.CallCNVUsingSNVFrequency(Nullable`1 localSDmetric, Nullable`1 evennessScore, String referenceFolder, CanvasSomaticClusteringMode clusteringMode) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 2556
   at CanvasSomaticCaller.SomaticCaller.CallVariants(String inFile, String variantFrequencyFile, String outputVCFPath, String referenceFolder, String name, Nullable`1 localSDmetric, Nullable`1 evennessScore, CanvasSomaticClusteringMode clusteringMode) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 437
   at CanvasSomaticCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\Program.cs:line 196
2018-09-26T16:49:03+02:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job SomaticCNV-WGS failed with exit code 134
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.<RunSystemProcessCheckExitAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.<LaunchJobAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<<RunWithResources>b__11_1>d`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.RunSomaticCalling(IFileLocation partitionedPath, CanvasCallset callset, String canvasBedPath, String ploidyVcfPath, IFileLocation localSdMetricFile, IFileLocation evennessMetricFile, IFileLocation canvasSnvPath)
   at Canvas.CanvasRunner.<>c__DisplayClass38_0.<CallSampleInternal>b__5()
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.RunCheckpoint(ICheckpointRunner runner, String name, Action a)
   at Canvas.CanvasRunner.<CallSampleInternal>d__38.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
```

Which I found this person also had an issue with this: https://github.com/Illumina/canvas/issues/86
Although he was running on PC and using TN-enrichment instead of Somatic-WGS

Do you suggest we stick with the old canvas version 1.11.0 & mono when running canvas on Red Hat instead of trying to get the newer versions using dotnet core running or is there some fix i could try for the new version?

Thankful for any assistance!
",alvaralmstedt,https://github.com/Illumina/canvas/issues/97
MDU6SXNzdWUzNjUxMTg4NzU=,"I'm running Tool: Somatic-Enrichment with error "" Missing required value for option '--sample-name' "", but I add the parameter.",OPEN,2018-09-29T10:10:52Z,2018-09-30T00:50:32Z,,,Schaudge,https://github.com/Illumina/canvas/issues/98
MDU6SXNzdWUzNjg2NDUxOTY=,Proper installation instructions for Ubuntu x64 are here,CLOSED,2018-10-10T12:39:03Z,2018-10-19T00:12:56Z,2018-10-19T00:12:56Z,"Can you please update the readme, it is a bit out of date.
Here: https://github.com/Illumina/canvas


Installation instructions for Linux 64 is as follows:


Install dotnet Build apps - SDK v2.1.403 from here:
https://www.microsoft.com/net/download/dotnet-core/2.1
Pick :  .NET Core Binaries: x64


Download Canvas precompiled from here:
https://github.com/Illumina/canvas/releases
Canvas-1.38.0.1554.master_x64.tar.gz


Test that it is working:
 ~/bin/dotnet2.1/dotnet Canvas.dll

Canvas 1.38.0.1554+master Copyright © Illumina 2018

Usage: Canvas.exe [MODE] [OPTIONS]+

Available modes:
	Germline-WGS - CNV calling of a germline sample from whole genome sequencing data
	Somatic-Enrichment - CNV calling of a somatic sample from targeted sequencing data
	Somatic-WGS - CNV calling of a somatic sample from whole genome sequencing data
	Tumor-normal-enrichment - CNV calling of a tumor/normal pair from targeted sequencing data
	SmallPedigree-WGS - CNV calling of a small pedigree from whole genome sequencing data

Options:
  -h, --help                 show this message and exit
  -v, --version              print version and exit




",MagdalenaZZ,https://github.com/Illumina/canvas/issues/99
MDU6SXNzdWUzNzExMzUwNjI=,Canvas Germline-WGS 1.38.0.1554+master asks for option '-p' in partition step,CLOSED,2018-10-17T15:26:00Z,2018-10-19T00:07:19Z,2018-10-19T00:07:19Z,"When I run Canvas Germline-WGS 1.38 today, I got the error message below:

2018-10-17T04:04:46+00:00,ERROR: Job 20-16656_S2_L002.partitioned failed with exit code 134. Job logs: 
	/Canvas/20-16656_S2_L002/Logging/20-16656_S2_L002.partitioned.stdout
	/Canvas/20-16656_S2_L002/Logging/20-16656_S2_L002.partitioned.stderr
Job error message:
Unhandled Exception: Illumina.Common.OptionException: Missing required value for option '-p'.

I did not have the problem with Canvas Germline-WGS 1.31.
Any suggestions?",liud2,https://github.com/Illumina/canvas/issues/100
MDU6SXNzdWUzNzgxODQ3Njg=,somatic  l can be run either with or without a matched normal control sample ? ,OPEN,2018-11-07T08:22:14Z,2018-11-12T18:28:16Z,,"In the paper, it said the latter workflow, I guess not pointing somatic, am I right, thanks a lot.
https://academic.oup.com/bioinformatics/article/32/15/2375/1743834 
![image](https://user-images.githubusercontent.com/25199946/48119094-4765bb80-e2a9-11e8-8e7f-7ee634e6f452.png)
",worker000000,https://github.com/Illumina/canvas/issues/101
MDU6SXNzdWUzNzgxOTAyNzc=,canvas weaker in somatic than cnvnator ?,OPEN,2018-11-07T08:40:29Z,2018-11-19T20:23:20Z,,"In the paper it showed cnvnator in germline,but no in somatic, does this imply that canvas weaker in somatic than cnvnator, thanks, I just want to know the truth, both authors are definitely respectable man.",worker000000,https://github.com/Illumina/canvas/issues/102
MDU6SXNzdWUzNzg1NDc1Nzk=,how to start Somatic-WGS?  UpdateEnvironmentMono is where,OPEN,2018-11-08T02:05:05Z,2018-11-22T11:09:13Z,,"Dear author,
I do not know how to find UpdateEnvironmentMono ?can you help me?
how to run these two steps
![image](https://user-images.githubusercontent.com/25199946/48173213-bb51a380-e33d-11e8-8a65-5acdc7c03b46.png)

",worker000000,https://github.com/Illumina/canvas/issues/103
MDU6SXNzdWUzODEwMjAyOTc=,bwa mem bams,OPEN,2018-11-15T06:35:43Z,2018-11-15T19:40:01Z,,"Hi: 
       Is the Canvas SmallPedigree-WGS applicable to  bwa MEM bams ? 
thanks.",BurceTu,https://github.com/Illumina/canvas/issues/104
MDU6SXNzdWUzODEyOTUwMDg=,Canvas for SE data?,OPEN,2018-11-15T18:55:45Z,2018-11-15T19:45:33Z,,"Hi!

Is it possible to run Canvas on single-end WGS reads? By default the results of SmallPedigree-WGS workflow are basically empty and the following error is produced:

```
2018-11-15T21:42:09+03:00,ERROR: Job CanvasPedigreeCaller failed with exit code 255. Job logs: 
	/home/fedor/Canvas/out/Logging/CanvasPedigreeCaller.stdout
	/home/fedor/Canvas/out/Logging/CanvasPedigreeCaller.stderr
Job error message:
2018-11-15T21:42:09+03:00,ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception: 
	Cannot calculate median of an empty SortedList.
System.Exception: Cannot calculate median of an empty SortedList.
   at Illumina.Common.SortedListExtensions.Median[T](SortedList`1 list, Func`3 average)
   at CanvasPedigreeCaller.SampleMetrics.GetSampleInfo(IReadOnlyList`1 segments, String ploidyBedPath, Int32 numberOfTrimmedBins, SampleId id) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\SampleMetrics.cs:line 38
   at CanvasPedigreeCaller.CanvasPedigreeCaller.CallVariants(List`1 variantFrequencyFiles, List`1 segmentFiles, IFileLocation outVcfFile, String ploidyBedPath, String referenceFolder, List`1 sampleNames, String commonCnvsBedPath, List`1 sampleTypes) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\CanvasPedigreeCaller.cs:line 86
   at CanvasPedigreeCaller.Program.<>c__DisplayClass2_0.<Run>b__12(IWorkDoer workDoer) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 190
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation loggingDir, Action`1 logCommand, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.ResourceManagement.WorkResourceManagerFactory.RunWithResourceManager(ILogger logger, ISettings settings, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.WorkDoerFactory.RunWithWorkDoer(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationTokenSource cancellationTokenSource, Action`1 function)
   at CanvasPedigreeCaller.Program.Run(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 192
   at CanvasPedigreeCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 39
2018-11-15T21:42:09+03:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job CanvasPedigreeCaller failed with exit code 255
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTask, Task`1 functionTask)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.RunSmallPedigreeCalling(List`1 partitionedPaths, SmallPedigreeCallset callsets)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.RunCheckpoint(ICheckpointRunner runner, String name, Action a)
   at Canvas.CanvasRunner.CallSampleInternal(SmallPedigreeCallset callset)
   at Canvas.CanvasRunner.CallPedigree(SmallPedigreeCallset callset)
   at Canvas.ModeLauncher.Launch()
```

It looks like SmallPedigree-WGS puts ""-p"" option into CanvasBin.dll command line which means ""paired-end"". I'll try to bypass CanvasBin checkpoint and run this step manually without ""-p"", but it would be nice to have a workflow option for SE reads, if the algorithm allows it.",fedkon,https://github.com/Illumina/canvas/issues/105
MDU6SXNzdWUzODMwNjEyOTA=,No output from sex chromosomes,CLOSED,2018-11-21T10:51:58Z,2018-11-30T16:09:08Z,2018-11-30T16:09:08Z,"Hi!

I'm a bit confused about my output. I'm getting CNV calls in all chromosomes except X & Y using my current pipeline as described here (both in CNV.vcf.gz CNV.CoverageAndVariantFrequency.txt):

[Issue 97](https://github.com/Illumina/canvas/issues/97)

I suspect that the problem is the vcfs im using for the --ploidy-vcf flag. I am currently using the ""placeholder"" vcf described in this issue (only changing chrY to Y etc.):

[Issue 89](https://github.com/Illumina/canvas/issues/89)

I am doing this because when I try to use the normal vcf (the same one I'm using for the --sample-b-allele-vcf flag) I get the following crash:

```
2018-11-21T11:49:34+01:00,ERROR: Job A2_SVs.recode.partitioned failed with exit code 134. Job logs:
        /tmp/canvas_on_sentieon/scripttest15/Logging/A2_SVs.recode.partitioned.stdout
        /tmp/canvas_on_sentieon/scripttest15/Logging/A2_SVs.recode.partitioned.stderr
Job error message:
Unhandled Exception: System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.ThrowHelper.ThrowKeyNotFoundException()
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at CanvasCommon.PloidyInfo.LoadPloidyFromVcfFile(String vcfPath, Int32 sampleIndex) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasCommon\PloidyInfo.cs:line 146
   at CanvasPartition.CanvasPartition.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPartition\CanvasPartition.cs:line 112
2018-11-21T11:49:34+01:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job A2_SVs.recode.partitioned failed with exit code 134
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.<RunSystemProcessCheckExitAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.<LaunchJobAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<<RunWithResources>b__11_1>d`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.InvokeCanvasPartition(CanvasCallset callset, IFileLocation cleanedPath, String canvasBedPath, IFileLocation canvasSnvPath, String ploidyVcfPath)
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.<CallSampleInternal>d__38.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.Launch()
```

Does the --ploidy-vcf need to be formatted in some special way like the GT flag be replaced by CN? Although i suspect that getting no calls in the sex chromosomes using the placeholder vcfs is not indeded behaviour either way.

Thankful for any assistance!",alvaralmstedt,https://github.com/Illumina/canvas/issues/106
MDU6SXNzdWUzODM5NjEzODM=,Is the  SmallPedigree-WGS README.md example out of date,OPEN,2018-11-24T05:39:11Z,2019-06-26T16:07:05Z,,"The example in the README.md

dotnet /CanvasDIR/Canvas.dll SmallPedigree-WGS --bam=/basespace/Projects/canvas/AppResults/bams/Files/father.bam --bam=/basespace/Projects/canvas/AppResults/bams/Files/mother.bam --bam=/basespace/Projects/canvas/AppResults/bams/Files/child1.bam --mother=mother --father=father --proband=child1 -r /basespace/Projects/canvas/AppResults/canvasdata/Files/kmer.fa -g /basespace/Projects/canvas/AppResults/canvasdata/Files/Homo_sapiens/UCSC/hg19/Sequence/WholeGenomeFasta --sample-b-allele-vcf /basespace/Projects/canvas/AppResults/snvvcf/Files/Pedigree.vcf.gz -f /basespace/Projects/canvas/AppResults/canvasdata/Files/filter13.bed -o /tmp/gHapMixDemo --ploidy-vcf=""/basespace/Projects/canvas/AppResults/snvvcf/Files/MultiSamplePloidy.vcf""

Seems out of date from the --help:

Mode-specific options:
  -b, --bam=VALUE1 VALUE2 VALUE3
                             bam [pedigree-member] [sample-name] Option can
                               be specified multiple times. (required)

                               bam: sample .bam file (required)

                               pedigree-member: Pedigree member type (either
                               proband, mother, father or other). Default is
                               other

Also -- is proband even an option? I've been using it like so:


dotnet /misc/vcgs/exome/cpipe-2.3-research/tools/canvas/1.39.0.1598/Canvas.dll SmallPedigree-WGS --bam=/path/to/FATHERID.bam father FATHERID --bam=/path/to/MOTHERID.bam mother MOTHERID --bam=/path/to/PROBANDID.bam proband PROBANDID.......(+otherargs)

but im getting

2018-11-24T16:36:08+11:00,Running checkpoint 01: Validate input
2018-11-24T16:36:08+11:00,ERROR: Error: found unexpected arguments '--proband=PROBANDID'

I was checking the source code in ModeParserTests.cs and couldn't see anything related to setting bamfile.FullName, ""proband"", ""SampleID""..

What am I doing wrong?",cvlvxi,https://github.com/Illumina/canvas/issues/107
MDU6SXNzdWUzODQxNDg0Mzg=,Running Canvas 1.39.0.1598+master with mono,CLOSED,2018-11-26T02:09:40Z,2018-11-27T21:46:55Z,2018-11-27T21:46:55Z,"Hey there,

Is mono still supported in the latest versions of Canvas (as per the documentation it says it is but this may be outdated)?

I""m getting the following error when trying to run mono/5.12.0.309 on a CentOS server with the Canvas.dll:

```
[username Canvas-1.39.0.1598+master_x64]$ mono Canvas.dll
Could not load signature of Canvas.CommandLineParsing.ModeParser`1[T]:Parse due to: Could not resolve type with token 01000061 (from typeref, class/assembly System.IO.TextWriter, System.Runtime.Extensions, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a) assembly:System.Runtime.Extensions, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a type:System.IO.TextWriter member:(null) signature:<none>
Could not load signature of Canvas.CommandLineParsing.IModeParser:Parse due to: Could not resolve type with token 01000061 (from typeref, class/assembly System.IO.TextWriter, System.Runtime.Extensions, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a) assembly:System.Runtime.Extensions, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a type:System.IO.TextWriter member:(null) signature:<none>

Unhandled Exception:
System.TypeLoadException: Could not set up parent class, due to: Generic type definition failed to init, due to: Could not resolve the signature of a virtual method assembly:/location/Canvas-1.39.0.1598+master_x64/Canvas.dll type:ModeParser`1 member:(null) signature:<none> assembly:/location/Canvas-1.39.0.1598+master_x64/Canvas.dll type:ModeParser`1 member:(null) signature:<none>
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not set up parent class, due to: Generic type definition failed to init, due to: Could not resolve the signature of a virtual method assembly:/location/Canvas-1.39.0.1598+master_x64/Canvas.dll type:ModeParser`1 member:(null) signature:<none> assembly:/location/Canvas-1.39.0.1598+master_x64/Canvas.dll type:ModeParser`1 member:(null) signature:<none>
```

Cheers.

",cvlvxi,https://github.com/Illumina/canvas/issues/108
MDU6SXNzdWUzOTAwNDQ2OTM=, System.Collections.Generic.KeyNotFoundException: The given key '*.bam' was not present in the dictionary.,OPEN,2018-12-12T03:00:04Z,2018-12-25T04:31:38Z,,"dear canvas support

I have run a canvas worksh like
dotnet $prefix/Canvas-1.39.0.1598+master_x64/Canvas.dll Germline-WGS --bam=FAM1201802.mkdup.bam --sample-b-allele-vcf=out.recode.vcf -r Genome/ref_1/ref/ref/Sequence/WholeGenomeFASTA/genome.fa -g Genome/ -o FAM1201802-cnv --sample-name=FAM1201802 --filter-bed=1.bed

but it turns out 
2018-12-12T10:53:03+08:00, 
2018-12-12T10:53:03+08:00,Running checkpoint 01: Validate input
2018-12-12T10:53:04+08:00,Running Canvas Germline-WGS 1.39.0.1598+master
2018-12-12T10:53:04+08:00,Command-line arguments: Germline-WGS --bam=FAM1201802.mkdup.bam --sample-b-allele-vcf=out.recode.vcf -r Genome/ref_1/ref/ref/Sequence/WholeGenomeFASTA/genome.fa -g Genome/ -o FAM1201802-cnv --sample-name=FAM1201802 --filter-bed=1.bed
2018-12-12T10:53:04+08:00,Checkpoint 01 Validate input complete. Elapsed time (hh/mm/ss): 00:00:00.3
2018-12-12T10:53:05+08:00,Normal Vcf path: /mnt/ilustre/centos7users/dna/canvas/out.recode.vcf
2018-12-12T10:53:05+08:00, 
2018-12-12T10:53:05+08:00,Running checkpoint 02: CanvasSNV
2018-12-12T10:53:05+08:00, 
2018-12-12T10:53:05+08:00,Running checkpoint 03: CanvasBin
Invoking 0 processor jobs...for sample FAM1201802
CanvasSNV start for sample FAM1201802
CanvasSNV complete for sample FAM1201802
2018-12-12T10:53:05+08:00,Begin converting '/mnt/ilustre/centos7users/dna/canvas/FAM1201802-cnv/TempCNV_FAM1201802/VFResultsFAM1201802.txt.gz.baf' to '/mnt/ilustre/centos7users/dna/canvas/FAM1201802-cnv/TempCNV_FAM1201802/ballele.bedgraph.gz'
2018-12-12T10:53:05+08:00,ERROR: Canvas workflow error: System.Collections.Generic.KeyNotFoundException: The given key '/mnt/ilustre/centos7users/dna/canvas/FAM1201802.mkdup.bam' was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Canvas.CanvasRunner.<>c__DisplayClass23_0.<BamToBinned>b__0(Int32 bamIdx, WorkResources resources, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTask, Task`1 functionTask)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at Canvas.CanvasRunner.BamToBinned(IDirectoryLocation tempFolder, Boolean isPairedEnd, List`1 sampleIds, String canvasReferencePath, String canvasBedPath, List`1 bamPaths, Int32 binSize, Dictionary`2 intermediateDataPathsByBam)
   at Canvas.CanvasRunner.InvokeCanvasBin35Mers(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyVcfPath)
   at Canvas.CanvasRunner.InvokeCanvasBin(CanvasCallset callset, String canvasReferencePath, String canvasBedPath, String ploidyVcfPath)
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.CallSampleInternal(CanvasCallset callset)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.Launch()
2018-12-12T10:53:05+08:00,Launching process for job tabix-index-tmp-ballele.bedgraph.gz.1:
bash -o pipefail -c "" /mnt/ilustre/centos7users/dna/.env/Canvas-1.39.0.1598+master_x64/tabix -p bed -f /mnt/ilustre/centos7users/dna/canvas/FAM1201802-cnv/TempCNV_FAM1201802/ballele.bedgraph.gz  ""
2018-12-12T10:53:06+08:00,Job tabix-index-tmp-ballele.bedgraph.gz.1 duration: 00:00:00.0
2018-12-12T10:53:06+08:00,Finished converting '/mnt/ilustre/centos7users/dna/canvas/FAM1201802-cnv/TempCNV_FAM1201802/VFResultsFAM1201802.txt.gz.baf' to '/mnt/ilustre/centos7users/dna/canvas/FAM1201802-cnv/TempCNV_FAM1201802/ballele.bedgraph.gz'. Elapsed time: 00:00:00.1
2018-12-12T10:53:06+08:00,Checkpoint 02 CanvasSNV complete. Elapsed time (hh/mm/ss): 00:00:00.4

I check the /mnt/ilustre/centos7users/dna/canvas/FAM1201802-cnv/TempCNV_FAM1201802/VFResultsFAM1201802.txt.gz file ,it's empty

but my vcf is
`#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	FAM1201802
sca1	161	sca1_161	C	T	333.75	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,2:2:6:1|1:161_C_T:90,6,0
sca1	168	sca1_168	T	A	333.75	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,2:2:6:1|1:161_C_T:90,6,0
sca1	170	sca1_170	A	G	333.75	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,2:2:6:1|1:161_C_T:90,6,0
sca1	176	sca1_176	G	A	243.87	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,2:2:6:1|1:161_C_T:90,6,0
sca1	195	sca1_195	A	T	199.02	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,2:2:6:1|1:195_A_T:90,6,0
sca1	198	sca1_198	A	G	199.02	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,2:2:6:1|1:195_A_T:90,6,0
sca1	489	sca1_489	T	A	918.21	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,7:7:21:1|1:472_TTCGATCATATAA_T:315,21,0
sca1	491	sca1_491	C	T	918.21	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,7:7:21:1|1:472_TTCGATCATATAA_T:315,21,0
sca1	540	sca1_540	G	A	1176.2	PASS	.	GT:AD:DP:GQ:PGT:PID:PL	1/1:0,11:11:36:1|1:540_G_A:534,36,0
`

How could I do?

thankyou!",huangl07,https://github.com/Illumina/canvas/issues/109
MDU6SXNzdWUzOTMzNzc2MDM=,Inconsistent library release,OPEN,2018-12-21T09:07:38Z,2019-01-02T18:51:25Z,,"Dear,

Currently the way to provides each canvas release imply to have multiple copy of the same library such as Isas.Framework.dll, same executable such as tabix.

This is error prone and do not follow standard packaging system see the [FHS](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)

Why is error prone ?
using your release archive we can see that for a same library different version are used !
```
$ find Canvas-1.39.0.1598+master_x64/ -name 'Isas.Framework.dll' | xargs sha1sum
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasBin/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasClean/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasDiploidCaller/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasNormalize/Isas.Framework.dll
15bbd898f28b02ac72de2a53a50a2a9ad78e61d9  Canvas-1.39.0.1598+master_x64/CanvasPartition/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasPedigreeCaller/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasSNV/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasSmooth/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/CanvasSomaticCaller/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/Isas.Framework.dll
15bbd898f28b02ac72de2a53a50a2a9ad78e61d9  Canvas-1.39.0.1598+master_x64/Tools/EvaluateCNV/Isas.Framework.dll
2822eddeaa941a6a6999b562517c3a35dfa1807c  Canvas-1.39.0.1598+master_x64/Tools/FlagUniqueKmers/Isas.Framework.dll
```

Same for tabix

```
find  Canvas-1.39.0.1598+master_x64/ -name 'tabix' | xargs sha1sum
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasBin/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasClean/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasDiploidCaller/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasNormalize/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasPartition/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasPedigreeCaller/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasSNV/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasSmooth/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/CanvasSomaticCaller/tabix
b22ffa6d00275110f0e4fa02e08eee8866547874  Canvas-1.39.0.1598+master_x64/Tools/EvaluateCNV/tabix
3d40aa36f63eb34802d5dcd4fd985d47cd2b0ed0  Canvas-1.39.0.1598+master_x64/tabix
```

And so on ...

You should provide a standard compliant archive like this:

```
.
├── bin
│   ├── canvas
│   ├── EvaluateCNV
│   └── FlagUniqueKmers
├── installation.log.xz
├── lib
│   ├── Accord.dll
│   ├── Accord.dll.config
│   ├── Accord.MachineLearning.dll
│   ├── Accord.Math.Core.dll
│   ├── Accord.Math.dll
│   ├── Accord.Statistics.dll
│   ├── BamMetricsWrapper.dll
│   ├── CanvasBin.deps.json
│   ├── CanvasBin.dll
│   ├── CanvasBin.dll.config
│   ├── CanvasBin.pdb
│   ├── CanvasBin.runtimeconfig.dev.json
│   ├── CanvasBin.runtimeconfig.json
│   ├── CanvasClean.deps.json
│   ├── CanvasClean.dll
│   ├── CanvasClean.dll.config
│   ├── CanvasClean.pdb
│   ├── CanvasClean.runtimeconfig.dev.json
│   ├── CanvasClean.runtimeconfig.json
│   ├── CanvasCommon.dll
│   ├── CanvasCommon.dll.config
│   ├── CanvasCommon.pdb
│   ├── Canvas.deps.json
│   ├── CanvasDiploidCaller.deps.json
│   ├── CanvasDiploidCaller.dll
│   ├── CanvasDiploidCaller.dll.config
│   ├── CanvasDiploidCaller.pdb
│   ├── CanvasDiploidCaller.runtimeconfig.dev.json
│   ├── CanvasDiploidCaller.runtimeconfig.json
│   ├── Canvas.dll
│   ├── Canvas.dll.config
│   ├── CanvasNormalize.deps.json
│   ├── CanvasNormalize.dll
│   ├── CanvasNormalize.dll.config
│   ├── CanvasNormalize.pdb
│   ├── CanvasNormalize.runtimeconfig.dev.json
│   ├── CanvasNormalize.runtimeconfig.json
│   ├── CanvasPartition.deps.json
│   ├── CanvasPartition.dll
│   ├── CanvasPartition.dll.config
│   ├── CanvasPartitionParameters.json
│   ├── CanvasPartition.pdb
│   ├── CanvasPartition.runtimeconfig.dev.json
│   ├── CanvasPartition.runtimeconfig.json
│   ├── Canvas.pdb
│   ├── CanvasPedigreeCaller.deps.json
│   ├── CanvasPedigreeCaller.dll
│   ├── CanvasPedigreeCaller.dll.config
│   ├── CanvasPedigreeCaller.pdb
│   ├── CanvasPedigreeCaller.runtimeconfig.dev.json
│   ├── CanvasPedigreeCaller.runtimeconfig.json
│   ├── Canvas.runtimeconfig.json
│   ├── CanvasSmooth.deps.json
│   ├── CanvasSmooth.dll
│   ├── CanvasSmooth.dll.config
│   ├── CanvasSmooth.pdb
│   ├── CanvasSmooth.runtimeconfig.dev.json
│   ├── CanvasSmooth.runtimeconfig.json
│   ├── CanvasSNV.deps.json
│   ├── CanvasSNV.dll
│   ├── CanvasSNV.dll.config
│   ├── CanvasSNV.pdb
│   ├── CanvasSNV.runtimeconfig.dev.json
│   ├── CanvasSNV.runtimeconfig.json
│   ├── CanvasSomaticCaller.deps.json
│   ├── CanvasSomaticCaller.dll
│   ├── CanvasSomaticCaller.dll.config
│   ├── CanvasSomaticCaller.pdb
│   ├── CanvasSomaticCaller.runtimeconfig.dev.json
│   ├── CanvasSomaticCaller.runtimeconfig.json
│   ├── ClassicBioinfoTools.dll
│   ├── Combinatorics.dll
│   ├── Combinatorics.pdb
│   ├── EvaluateCNV.deps.json
│   ├── EvaluateCNV.dll
│   ├── EvaluateCNV.dll.config
│   ├── EvaluateCNV.pdb
│   ├── EvaluateCNV.runtimeconfig.json
│   ├── FileCompression.dll
│   ├── FlagUniqueKmers.deps.json
│   ├── FlagUniqueKmers.dll
│   ├── FlagUniqueKmers.pdb
│   ├── FlagUniqueKmers.runtimeconfig.json
│   ├── Illumina.Common.dll
│   ├── Isas.Framework.dll
│   ├── Isas.Manifests.AmpliconManifest.dll
│   ├── Isas.Manifests.ForenSeqManifest.dll
│   ├── Isas.Manifests.NexteraManifest.dll
│   ├── Isas.Metrics.dll
│   ├── Isas.Ploidy.dll
│   ├── Isas.SequencingFiles.dll
│   ├── libFileCompression.so
│   ├── MathNet.Numerics.Core.dll
│   ├── Newtonsoft.Json.dll
│   ├── Nito.ArraySegments.dll
│   ├── PedigreeCallerParameters.json
│   ├── protobuf-net.dll
│   ├── QualityScoreParameters.json
│   ├── RnaAmpliconManifest.dll
│   └── SomaticCallerParameters.json
└── share
    └── doc
        └── COPYRIGHT.txt

```

To do this you could use this script in the future (once you have the same version see above):

```bash
DESTDIR='' # use for build stage see how a rpm or deb are builded
PREFIX=''  # final installation path could be ~/.local | /usr/local | /usr and so ...
INSTDIR=""${DESTDIR}/${PREFIX}""
mkdir -p ""${INSTDIR}""/{bin,lib,share}
find . -type f  \( -name 'tabix' -or -name 'tabix.exe' -or -name 'FlagUniqueKmers' -or -name 'EvaluateCNV' -or -name 'Canvas' -or -name 'bedGraphToBigWig'  \) -delete
find . \( -name '*.dll' -or -name '*.json' -or -name '*.pdb' -or -name '*.config' -or -name '*.so' \) | xargs -I{} install -m0644 {} ""${INSTDIR}""/lib

echo '#!/usr/bin/env bash
declare -r scriptpath=""$( readlink -f ""${BASH_SOURCE[0]}"" )""
declare -r bindir=""$(dirname  ""${scriptpath}"")""
declare -r libdir=${bindir/bin/lib}
export COMPlus_gcAllowVeryLargeObjects=1
dotnet ${libdir}/Canvas.dll ""$@""
' > ""${INSTDIR}""/bin/canvas

echo '#!/usr/bin/env bash
declare -r scriptpath=""$( readlink -f ""${BASH_SOURCE[0]}"" )""
declare -r bindir=""$(dirname  ""${scriptpath}"")""
declare -r libdir=${bindir/bin/lib}
dotnet  ${libdir}/FlagUniqueKmers.dll ""$@""
' > ""${INSTDIR}""/bin/FlagUniqueKmers

echo '#!/usr/bin/env bash
declare -r scriptpath=""$( readlink -f ""${BASH_SOURCE[0]}"" )""
declare -r bindir=""$(dirname  ""${scriptpath}"")""
declare -r libdir=${bindir/bin/lib}
export COMPlus_gcAllowVeryLargeObjects=1
dotnet  ${libdir}/EvaluateCNV.dll.dll ""$@""
' > ""${INSTDIR}""/bin/EvaluateCNV

chmod 0755 ""${INSTDIR}""/bin/{canvas,FlagUniqueKmers,EvaluateCNV}
find ""${INSTDIR}"" -name '*.so' | xargs chmod 0755
install -m0644 COPYRIGHT.txt ""${INSTDIR}""/share
```

Thanks",bioinfornatics,https://github.com/Illumina/canvas/issues/110
MDU6SXNzdWU0MDA0NTQxMzc=,Small Pedigree Workflow canvaserror: missing libpng,CLOSED,2019-01-17T20:40:41Z,2019-01-17T22:16:44Z,2019-01-17T22:16:29Z,"I am trying to run the smallpedigree-WGS workflow in CANVAS using four whole genomes from a family (father and children).  The CANVAS log ends with: Running checkpoint 06: Variant calling, Checkpoint 05 CanvasPartition complete..... Launching process for job CanvasPedigreeCaller: Job CanvasPedigreeCaller duration: 00:02:41.6.  However the CANVASError file shows: 

2019-01-16T23:53:24+00:00,ERROR: Job CanvasPedigreeCaller failed with exit code 255. Job logs: 
	Logging/CanvasPedigreeCaller.stdout
	Logging/CanvasPedigreeCaller.stderr
Job error log has more that 20 lines.Please consult the log for the full content.
First 35 lines:    --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Isas.ClassicBioinfoTools.KentUtils.BedGraphToBigWigConverter.Convert(IFileLocation sourceFile, GenomeMetadata genomeMetadata, IDirectoryLocation outputDirectory)
   at CanvasPedigreeCaller.Visualization.CoverageBigWigWriter.Write(IReadOnlyList`1 segments, IDirectoryLocation output, Double normalizationFactor) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Visualization\CoverageBigWigWriter.cs:line 37
   at CanvasPedigreeCaller.CanvasPedigreeCaller.CallVariants(List`1 variantFrequencyFiles, List`1 segmentFiles, IFileLocation outVcfFile, String ploidyBedPath, String referenceFolder, List`1 sampleNames, String commonCnvsBedPath, List`1 sampleTypes) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\CanvasPedigreeCaller.cs:line 148
   at CanvasPedigreeCaller.Program.<>c__DisplayClass2_0.<Run>b__12(IWorkDoer workDoer) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 191
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation loggingDir, Action`1 logCommand, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.ResourceManagement.WorkResourceManagerFactory.RunWithResourceManager(ILogger logger, ISettings settings, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.WorkDoerFactory.RunWithWorkDoer(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationTokenSource cancellationTokenSource, Action`1 function)
   at CanvasPedigreeCaller.Program.Run(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 193
   at CanvasPedigreeCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPedigreeCaller\Program.cs:line 39
---> (Inner Exception #0) Isas.Framework.WorkManagement.JobFailedException: Job bedGraphToBigWig-coverage.bedgraph.1 failed with exit code 127
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.ClassicBioinfoTools.KentUtils.BedGraphToBigWigConverter.<>c__DisplayClass6_0.<Convert>b__0(WorkResources resources, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTask, Task`1 functionTask)<---
2019-01-16T23:53:28+00:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job CanvasPedigreeCaller failed with exit code 255
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTask, Task`1 functionTask)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.RunSmallPedigreeCalling(List`1 partitionedPaths, SmallPedigreeCallset callsets)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.RunCheckpoint(ICheckpointRunner runner, String name, Action a)
   at Canvas.CanvasRunner.CallSampleInternal(SmallPedigreeCallset callset)
   at Canvas.CanvasRunner.CallPedigree(SmallPedigreeCallset callset)
   at Canvas.ModeLauncher.Launch()
I am really at a loss as to how to fix this error as I dont understand the error message.  Are you able to take a look and advise?  
These are my command line arguments:
Command-line arguments: SmallPedigree-WGS --bam=S1.bam --bam=S2.bam --bam=S3bam --bam=S4.bam --sample-b-allele-vcf=variants.vcf.gz -o SmallPedigree-WGS-results -r Sequence/WholeGenomeFasta/kmer.fa -g Sequence/WholeGenomeFasta/ -f Sequence/WholeGenomeFasta/filter13.bed

Any advice would be gratefully accepted.  I can see I have a multi sample CNV vcf.  Am I ok to use the CNV calls in this even if the PedigreeCaller has failed?

Thanks in advance for any help!

",clairepalles,https://github.com/Illumina/canvas/issues/111
MDU6SXNzdWU0MTkyNjA2OTg=,"Dear,",CLOSED,2019-03-11T01:30:55Z,2019-03-11T23:15:44Z,2019-03-11T23:15:44Z,,huynhnv2192,https://github.com/Illumina/canvas/issues/112
MDU6SXNzdWU0MTkyNjA2OTk=,calling CNV from whole exome sequencing data,CLOSED,2019-03-11T01:30:55Z,2019-03-11T23:16:58Z,2019-03-11T23:16:58Z,,huynhnv2192,https://github.com/Illumina/canvas/issues/113
MDU6SXNzdWU0MTk1OTA1Mzk=,Using canvas for specific case,CLOSED,2019-03-11T17:23:10Z,2019-03-11T23:18:43Z,2019-03-11T23:18:42Z,"Sorry
This is not your issue 

please help me

I have tumour and its derived model (organoid) from two patients, I want to know if there is any agreement between mutations of tumour and its derived model (organoid) but I don't have access to normal (matched or non matched samples). I want to call somatic copy numbers though. Could you please give me a hand in getting intuition to what to do in such situation? Can I still perform analysis without normal sample? If no can I use non matched normal samples in freezer ?

Thanks a lot in advance 
",beginner984,https://github.com/Illumina/canvas/issues/114
MDU6SXNzdWU0MTk5MzY2MTU=,Canvas installation ,CLOSED,2019-03-12T11:31:15Z,2019-03-12T19:54:54Z,2019-03-12T16:54:46Z,"Sorry I downloaded and uncompressed Canvas-1.39.0.1598+master_x64 but when I am typing 
```

[fi1d18@cyan01 ~]$ cd /temp/hgig/fi1d18/Canvas-1.39.0.1598+master_x64/
[fi1d18@cyan01 Canvas-1.39.0.1598+master_x64]$ Canvas.exe --help                      -bash: Canvas.exe: command not found
[fi1d18@cyan01 Canvas-1.39.0.1598+master_x64]$ Canvas.dll --help
-bash: ./Canvas.dll: Permission denied
[fi1d18@cyan01 Canvas-1.39.0.1598+master_x64]$
```
 ",beginner984,https://github.com/Illumina/canvas/issues/115
MDU6SXNzdWU0MjQxOTcxMTU=,"vcf contains >1 samples, name for a sample of interest must be provided",CLOSED,2019-03-22T12:58:01Z,2019-03-25T17:24:38Z,2019-03-22T17:10:51Z,"This is somewhat related to issue #81, but his / hers crash for a different reason.

My VCF is multi-sample. From what I can see here, there seems to be no option to name a sample of interest. Hence I suggest to rephrase the error message to say something like 'It only accepts a simple-sample VCF.'
https://github.com/Illumina/canvas/blob/ef2941aa4d6a2cf7ebf05458bc268c1c699c73db/Src/Canvas/CanvasSNV/SNVReviewer.cs#L94-L105",logust79,https://github.com/Illumina/canvas/issues/116
MDU6SXNzdWU0MzM5MzM5ODI=,CanvasSomaticCaller  Error,OPEN,2019-04-16T18:53:26Z,2019-04-16T19:39:20Z,,"Hello Canvas Users:

I'm interested in predicting CNVs on exome data using Somatic-Enrichment.  I'm running the latest tag of Canvas as follows:
`/path/to/centos7/dotnet-2.2.3/dotnet /path/to/Canvas-1.40.0.1613/Canvas.dll Somatic-Enrichment --bam ./treatment_exome.bam --manifest ./SureSelectManifest.txt --population-b-allele-vcf ./dbsnp.vcf --output ./output_dir/ --sample-name LibraryName --genome-folder . --reference ./genome.fa --filter-bed `./filter.bed`

My genome folder contains the indexed genome fasta and the GenomeSizes.xml files.  

The programs runs until it gets to the CanvasSomaticCaller/CanvasSomaticCaller.dll stage where it reports the error message:

`Unhandled` Exception: System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.Average(IEnumerable`1 source)
   at CanvasSomaticCaller.SomaticCaller.CallVariants(String inFile, String variantFrequencyFile, String outputVCFPath, String referenceFolder, String name, Nullable`1 localSDmetric, Nullable`1 evennessScore, CanvasSomaticClusteringMode clusteringMode) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\SomaticCaller.cs:line 392
   at CanvasSomaticCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSomaticCaller\Program.cs:line 196 Aborted (core dumped)`

This is the CanvasSomaticCaller command that produces the above error:
`/path/to/centos7/dotnet-2.2.3/dotnet` /path/to/Canvas-1.40.0.1613+master_x64/Canvas-1.40.0.1613/CanvasSomaticCaller/CanvasSomaticCaller.dll -v VFResultsLibraryName.txt.gz -i LibraryName.partitioned -o CNV.vcf.gz -b filter.bed -n LibraryName -e -d -r `/path/to/reference/directory/`

**I checked my input files and they're not empty...  I'm unable to look in the partitioned file as it's a binary file.**  

Any ideas? 

Thank you!",sichan778,https://github.com/Illumina/canvas/issues/117
MDU6SXNzdWU0MzYwNzg4ODU=,Demo evaluation needs correction,OPEN,2019-04-23T09:08:13Z,2019-04-24T18:00:10Z,,"In the demo's Evaluation section, the command:
```
zcat /tmp/gHapMixDemo/TempCNV_child1/CNV.vcf.gz | grep -v "":REF:"" > /tmp/gHapMixDemo/TempCNV_child1/CNV.vcf (remove REF calls)
/CanvasDIR/Tools/EvaluateCNV/EvaluateCNV.dll /ihart/BaseSpace/Projects/CanvasSPW/AppResults/simdata/Files/child1_truth.bed /tmp/gHapMixDemo/TempCNV_child1/CNV.vcf /CanvasDIR/Tools/EvaluateCNV/generic.cnaqc.excluded_regions.bed inheritedCNVs.txt 
```
would not run since the path to `generic.cnaqc.excluded_regions.bed` is wrong, and also for consistency, `CanvasSPW` should be renamed to `canvas`. And it's better to comment out the `(remove REF calls)` part. So in the end it would be something like this:
```
zcat /tmp/gHapMixDemo/TempCNV_child1/CNV.vcf.gz | grep -v "":REF:"" > /tmp/gHapMixDemo/TempCNV_child1/CNV.vcf #(remove REF calls)
/CanvasDIR/Tools/EvaluateCNV/EvaluateCNV.dll /tmp/BaseSpace/Projects/canvas/AppResults/simdata/Files/child1_truth.bed /tmp/gHapMixDemo/TempCNV_child1/CNV.vcf /tmp/BaseSpace/Projects/canvas/AppResults/simdata/Files/generic.cnaqc.excluded_regions.bed inheritedCNVs.txt 
```
But in the end it still crashes saying that I need to provide reference ploidy
```
...
2019-04-23T09:47:57+01:00,ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception:
	Error: Truth variant chr6:105256020-105271607 with no overlapping Canvas calls. Reference ploidy cannot be determined! Please provide reference ploidy via command line options
...
```
",logust79,https://github.com/Illumina/canvas/issues/118
MDU6SXNzdWU0MzY0MDIyMTg=,SmallPedigree-WGS System.ArgumentOutOfRangeException: Index was out of range.,OPEN,2019-04-23T21:39:17Z,2019-06-24T23:19:08Z,,"Hi - 

We encountered an error running canvas Germline WGS. The bam seems to be okay as both the strelka and Manta VCF both have data that has passed filter, and the ploidy file has been used multiple time without incident. (reference 1055 is GCHr37) Any help/advice would be greatly appreciated.

Cheers,
Curt

Calling parameters:
2019-04-23T12:42:58+00:00,Running Canvas Germline-WGS 1.39.0.1598+master
2019-04-23T12:42:58+00:00,Command-line arguments: Germline-WGS -b ../sorted1055.bam --sample-b-allele-vcf ../sift.vcf.gz -o canvasOut -r /mnt/data/refData/1055/1055.kmer.fa -g /mnt/data/refData/1055 -n default -f /mnt/data/refData/1055/filter13.bed --ploidy-vcf /mnt/data/refData/1055/female-ploidy.vcf

$ cat CanvasError.txt 
2019-04-23T13:17:04+00:00,ERROR: Job CNV.vcf.gz failed with exit code 134. Job logs: 
        /mnt/data/workDir/1156157/canvasRun/canvasOut/Logging/CNV.vcf.gz.stdout
        /mnt/data/workDir/1156157/canvasRun/canvasOut/Logging/CNV.vcf.gz.stderr
Job error message:
Unhandled Exception: System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at CanvasCommon.CanvasSegmentWriter.WriteVariants(IEnumerable`1 segmentsOfAllSamples, List`1 ploidies, GenomeMetadata genome, BgzipOrS
treamWriter writer, Nullable`1 denovoQualityThreshold) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasCommon\CanvasSegm
entWriter.cs:line 124
   at CanvasCommon.CanvasSegmentWriter.WriteSegments(String outVcfPath, List`1 segments, Nullable`1 diploidCoverage, String wholeGenomeFa
staDirectory, String sampleName, List`1 extraHeaders, PloidyInfo ploidy, Int32 qualityThreshold, Boolean isPedigreeInfoSupplied, Nullable
`1 denovoQualityThreshold, Nullable`1 sizeThreshold) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasCommon\CanvasSegmen
tWriter.cs:line 283
   at CanvasDiploidCaller.CanvasDiploidCaller.CallVariants(String variantFrequencyFile, String inFile, String outFile, String ploidyVcfPa
th, String referenceFolder, String sampleName, String truthDataPath) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasDip
loidCaller\CanvasDiploidCaller.cs:line 290
   at CanvasDiploidCaller.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasDiploidCaller\Prog
ram.cs:line 98
2019-04-23T13:17:04+00:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job CNV.vcf.gz failed with exit
 code 134
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Ac
tion`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Acti
on`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, 
Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher
)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkRes
ources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTas
k, Task`1 functionTask)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.RunGermlineCalling(IFileLocation partitionedPath, CanvasCallset callset, String ploidyVcfPath, IFileLocation ca
nvasSnvPath)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.<>c__DisplayClass0_0.<RunCheckpoint>b__0()
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint
)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Isas.Framework.Checkpointing.Legacy.LegacyCheckpointRunner.RunCheckpoint(ICheckpointRunner runner, String name, Action a)
   at Canvas.CanvasRunner.CallSampleInternal(CanvasCallset callset)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.Launch()",curtisjamison,https://github.com/Illumina/canvas/issues/119
MDU6SXNzdWU0MzczNjYxMDM=,Canvas cnv reference problems ?,CLOSED,2019-04-25T19:42:40Z,2019-04-29T21:12:13Z,2019-04-29T21:12:13Z,"trying to run Canvas CNV but unsure what a Canvas -ready reference file is
**-r, --reference=VALUE      Canvas-ready reference fasta file (required)**
Without a reference (NO -r supplied) I get:
 **Error: reference is a required option**  But when I supply a reference Fasta as in 
.... _-g ./reference/Homo_sapiens/UCSC/hg19/Sequence/WholeGenomeFasta -f ./reference/Homo_sapiens/UCSC/hg19/Sequence/WholeGenomeFasta/filter13.bed -r /projects/sbilobram_prj/reference/Homo_sapiens/UCSC/hg19/Sequence/WholeGenomeFasta/hg19.fa_

I get the following error:
2019-04-25T12:40:25-07:00,ERROR: Canvas workflow error: System.NullReferenceException: Object reference not set to an instance of an object.
   at Isas.SequencingFiles.ReferenceGenome.get_Species()
   at Isas.SequencingFiles.GenomeMetadata.Deserialize(TextReader reader, IDirectoryLocation genomeFastaFolder, IReferenceGenome referenceGenome)
   at Isas.SequencingFiles.GenomeMetadata.Deserialize(IFileLocation genomeSizeXml)
   at Canvas.TumorNormalWgsRunner.GetCallset()
   at Canvas.TumorNormalWgsRunner.Run(CanvasRunnerFactory runnerFactory)
   at Canvas.ModeLauncher.Launch()


",sbilobram,https://github.com/Illumina/canvas/issues/120
MDU6SXNzdWU0NTU2MDg2MzM=,Germline-WGS fails with binned failed,CLOSED,2019-06-13T08:39:11Z,2019-07-08T19:29:12Z,2019-07-08T19:29:12Z,"Hello,

I am getting this error when running the Germline-WGS mode of canvas, like this:

dotnet /software/Canvas-1.40.0.1613+master_x64/Canvas.dll Germline-WGS \
--bam /data/HCC1143_T/aligned.sorted.marked_duplicates.bam \
--sample-name HCC1143_T \
--output /ouput/HCC1143_T \
--reference /reference/hs37d5.fa \
--population-b-allele-vcf /reference/1000GENOMES-phase_3.SNV.PASS.header.vcf \
--genome-folder /canvas \
--filter-bed /canvas/filter.bed


The error says:

2019-06-09T17:39:51+02:00,ERROR: Job HCC1143_T_0.binned failed with exit code 137. Job logs: 
	/ouput/HCC1143_T/Logging/HCC1143_T_0.binned.stdout
	/ouput/HCC1143_T/Logging/HCC1143_T_0.binned.stderr


The file HCC1143_T_0.binned.stdout does not contain any error messages. The file HCC1143_T_0.binned.stderr is empty.

I was wondering if you could please advise me to avoid the error. I am wondering if the error has to do with the chromosome numbering as I don't have a '0' chromosome.

Thanks
Jorge
",jazberna1,https://github.com/Illumina/canvas/issues/121
MDU6SXNzdWU0NTkxMDQxMTg=, vcf header does not include CN1 ,CLOSED,2019-06-21T09:29:51Z,2019-06-27T12:13:53Z,2019-06-27T12:13:53Z,"Hello,

I have sucessfully run SmallPedigree-WGS. I have noticed the vcf header does not include CN1 as option for the ALT field.

Is this expected and I am just missinterpreting the output?
 
Many thanks
Jorge
",jazberna1,https://github.com/Illumina/canvas/issues/122
MDU6SXNzdWU0NjAxMzM3NDY=,Canvas 1.40 is looking for libpng12.so.0,OPEN,2019-06-24T23:05:31Z,2019-06-24T23:06:41Z,,"Latest version of Canvas crashed on my machine complaining that it requires libpng12.so.0.
Ubuntu 18.04+ does not ship with libpng12-0 anymore.
This should be an easy fix.

Meanwhile anyone can try installing it himself/herself.

https://packages.ubuntu.com/xenial/amd64/libpng12-0/download",osowiecki,https://github.com/Illumina/canvas/issues/123
MDU6SXNzdWU0NjAzNDcwOTc=,help to interpret CN value for calls with <DUP> alternative allele,CLOSED,2019-06-25T10:41:03Z,2019-06-25T18:34:41Z,2019-06-25T18:34:41Z,"Hello,

I was wondering I you could please help me to interpret CN value for calls with <DUP> alternative allele.

After running canvas I see vcf calls with <DUP> as the alternative allele, all also having './1' genotype, which I understand means the reference allele (one copy on one chromosome) and then and elevated number of copies in the other chromosome (the <DUP>). 

As the CN field gives the total copy number, can I assume that the number of duplications corresponding to <DUP> equals to CN - 1 ?

Thanks so much
Jorge",jazberna1,https://github.com/Illumina/canvas/issues/124
MDU6SXNzdWU0NjAzNTQzODA=,/canis_familiaris.vcf' should contain one genotypes column corresponding to sample,OPEN,2019-06-25T10:57:18Z,2019-06-25T20:38:02Z,,"I'm using a dog dbsnp file with identical format to files supplied by Canvas team.
How should I prepare my dbsnp file or ploidy.vcf for canvas to stop complaining about the missing genotype?

#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  CF_6942
X       4028    .       N       <CNV>   .       PASS    END=123869066   CN      1

########################################

'
Job error message: 
System.ArgumentException: File '/home/mobit/DOG/data/canis_familiaris.vcf' should contain one genotypes column corresponding to sample
 CF_6942
   at CanvasSNV.SNVReviewer.LoadVariants(String vcfPath, Boolean isSomatic) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas
\CanvasSNV\SNVReviewer.cs:line 88
   at CanvasSNV.SNVReviewer.Run() in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSNV\SNVReviewer.cs:line 63
   at CanvasSNV.Program.Run(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSNV\Program.cs:line 109
   at CanvasSNV.Program.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasSNV\Program.cs:line 26
2019-06-25T12:51:06+02:00,Launching process for job CanvasSNV-'CF_6942'-'24':
'
########################################

dbsnp.vcf looks like this : 

########################################

##fileformat=VCFv4.1
##fileDate=20180316
##source=ensembl;version=92;url=http://e92.ensembl.org/Canis_lupus_familiaris
##reference=ftp://ftp.ensembl.org/pub/release-92/fasta/Canis_lupus_familiaris/dna/
##INFO=<ID=dbSNP_151,Number=0,Type=Flag,Description=""Variants (including SNPs and indels) imported from dbSNP"">
##INFO=<ID=TSA,Number=1,Type=String,Description=""Type of sequence alteration. Child of term sequence_alteration as defined by the sequ
ence ontology project."">
##INFO=<ID=E_Cited,Number=0,Type=Flag,Description=""Cited.http://www.ensembl.org/info/docs/variation/data_description.html#evidence_sta
tus"">
##INFO=<ID=E_Multiple_observations,Number=0,Type=Flag,Description=""Multiple_observations.http://www.ensembl.org/info/docs/variation/da
ta_description.html#evidence_status"">
##INFO=<ID=E_Freq,Number=0,Type=Flag,Description=""Frequency.http://www.ensembl.org/info/docs/variation/data_description.html#evidence_
status"">
##INFO=<ID=E_Hapmap,Number=0,Type=Flag,Description=""HapMap.http://www.ensembl.org/info/docs/variation/data_description.html#evidence_s
tatus"">
##INFO=<ID=E_Phenotype_or_Disease,Number=0,Type=Flag,Description=""Phenotype_or_Disease.http://www.ensembl.org/info/docs/variation/data
_description.html#evidence_status"">
##INFO=<ID=E_ESP,Number=0,Type=Flag,Description=""ESP.http://www.ensembl.org/info/docs/variation/data_description.html#evidence_status""
>
##INFO=<ID=E_1000G,Number=0,Type=Flag,Description=""1000Genomes.http://www.ensembl.org/info/docs/variation/data_description.html#eviden
ce_status"">
##INFO=<ID=E_ExAC,Number=0,Type=Flag,Description=""ExAC.http://www.ensembl.org/info/docs/variation/data_description.html#evidence_statu
s"">
#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO
1       112     rs850979046     A       G       .       .       dbSNP_151;TSA=SNV
1       132     rs851217143     C       A       .       .       dbSNP_151;TSA=SNV
1       147     rs853028708     G       A       .       .       dbSNP_151;TSA=SNV
1       194     rs850921736     G       T       .       .       dbSNP_151;TSA=SNV
1       208     rs851402391     T       C       .       .       dbSNP_151;TSA=SNV
1       237     rs852954153     T       C       .       .       dbSNP_151;TSA=SNV
...

Full command : 

Canvas SmallPedigree-WGS -b ./bam/CF_6942.bam --sample-b-allele-vcf=./data/canis_familiaris.vcf -o ./CNV_TEST/CF_6942 -r ./data/kmers.fasta -g ./data/canFam3/ --filter-bed=./data/filter.bed --ploidy-vcf=./data/ploidy.vcf",osowiecki,https://github.com/Illumina/canvas/issues/125
MDU6SXNzdWU0NzIxMjQ0NDE=,Unable to download reference,CLOSED,2019-07-24T07:31:16Z,2019-07-24T23:25:11Z,2019-07-24T23:25:11Z,"Hi,

the link http://canvas-cnv-public.s3.amazonaws.com/ leads to an XML sheet, no references can be downloaded there.
Hence I constructed my own reference with hg38.
How to build the XML, it is not clear to me.
How to generate the md5 value?
Why is there a difference between ""knownBases"" and ""totalBases""?

Tank you for your help and kind regards,
Nicolas",nicokrez,https://github.com/Illumina/canvas/issues/126
MDU6SXNzdWU0NzI3NDQzNzE=,The specified vcf file () does not exist,CLOSED,2019-07-25T08:53:49Z,2019-08-21T12:53:43Z,2019-08-21T12:53:43Z,"Hi,

I could not find the answer to my problem in the other Issues.
My analysis is running against hg38, chromosomes are named like ""1"",""2"",""3"", ... and not ""chr1"", ""chr2"", ""chr3""... 
The naming is the same for all the reference files.
I get the following error:

`2019-07-25T10:16:11+02:00,ERROR: Job index.partitioned failed with exit code 134. Job logs: 
        /media/data/analysis/ERR233225/results/bwa/index_canvas/Logging/index.partitioned.stdout
        /media/data/analysis/ERR233225/results/bwa/index_canvas/Logging/index.partitioned.stderr
Job error message:
Unhandled Exception: System.IO.FileNotFoundException: The specified vcf file () does not exist.
   at Isas.SequencingFiles.Vcf.VcfReader.GetGzipReader(String vcfPath)
   at CanvasCommon.PloidyInfo.LoadPloidyFromVcfFileNoSampleId(String vcfPath) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasCommon\PloidyInfo.cs:line 115
   at CanvasPartition.CanvasPartition.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPartition\CanvasPartition.cs:line 114
2019-07-25T10:16:11+02:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job index.partitioned failed with exit code 134
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<RunWithResources>b__11_1[T](Task`1 resourceRequestTask, Task`1 functionTask)
   at Isas.Framework.WorkManagement.AsTaskExtensions.Await[T](Task`1 task)
   at Canvas.CanvasRunner.InvokeCanvasPartition(CanvasCallset callset, IFileLocation cleanedPath, String canvasBedPath, IFileLocation canvasSnvPath, String ploidyVcfPath)
   at Isas.Framework.Checkpointing.Internals.SerializingCheckpointRunner.<>c__DisplayClass8_0`1.<RunCheckpoint>b__0(Checkpoint checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CanvasRunner.CallSampleInternal(CanvasCallset callset)
   at Canvas.CanvasRunner.CallSample(CanvasCallset callset)
   at Canvas.ModeLauncher.Launch()
`

While searching for a reason, I found that some files are emtpy, only a header is present.
Here is one example ""TempCNV_index/3-index.SNV.txt.gz"", all of the file types have only a header. 

I ran the command to create these files:

`canvas/Canvas-1.40.0.1613+master_x64/CanvasSNV/CanvasSNV.dll  -c 3 -v /media/data/analysis/ERR233225/results/gatk/index.vcf -b /media/data/analysis/ERR233225/results/bwa/index_dedup.bam -o /media/data/analysis/ERR233225/results/bwa/index_canvas/TempCNV_index/3-index.SNV.txt.gz
>>>Command-line arguments:
-c 3 -v /media/data/analysis/ERR233225/results/gatk/index.vcf -b /media/data/analysis/ERR233225/results/bwa/index_dedup.bam -o /media/data/analysis/ERR233225/results/bwa/index_canvas/TempCNV_index/3-index.SNV.txt.gz 
7/25/19 10:38:22 AM Loading variants of interest from /media/data/analysis/ERR233225/results/gatk/index.vcf
Retained 0 variants, out of 243654 records for 3
7/25/19 10:38:29 AM Looping over bam records from /media/data/analysis/ERR233225/results/bwa/index_dedup.bam
Jump to refid 2 3
Looped over 2 bam records in all
7/25/19 10:38:29 AM Results written to /media/data/analysis/ERR233225/results/bwa/index_canvas/TempCNV_index/3-index.SNV.txt.gz
7/25/19 10:38:29 AM Results written to /media/data/analysis/ERR233225/results/bwa/index_canvas/TempCNV_index/3-index.SNV.txt.gz.baf`

I think the problems might be related to the messages:
**Retained 0 variants, out of 243654 records for 3**
and 
**Looped over 2 bam records in all**

Can anyone help me to overcome the problem?

Kind regards,
Nicolas

",nicokrez,https://github.com/Illumina/canvas/issues/127
MDU6SXNzdWU0ODEwNjM2MTE=,"System.ApplicationException: ERROR: Expected to read 27029 bytes from the block header, but only read 20537 bytes.",CLOSED,2019-08-15T09:10:56Z,2019-09-12T02:39:09Z,2019-09-12T02:39:09Z,"Hi,

Below is my command for canvas:
mono $canvas/Canvas.exe Somatic-WGS --bam input.bam --b-allele-vcf $ref/canvas/dbsnp.vcf --exclude-non-het-b-allele-sites -n V300017817_L3-566 -o ./ -r $ref/canvas/kmer.fa -g $ref/canvas -f $ref/canvas/filter13.bed

My input.bam is mapping to GRCh38 with bwa mem and removing duplicates using picard. All reference files are downloaded from S3.
Canvas version is v1.11.0. I tried canvas 1.40.0. However, it gave me an error ""The specified vcf file () does not exist"" which was mentioned in #127 . That's why I turn to use v1.11.0 

Log and error files are attached:
[CanvasLog.txt](https://github.com/Illumina/canvas/files/3504906/CanvasLog.txt)
[CanvasError.txt](https://github.com/Illumina/canvas/files/3504907/CanvasError.txt)
[CanvasSNV-V300017817_L3-566-chr11.stderr.txt](https://github.com/Illumina/canvas/files/3504908/CanvasSNV-V300017817_L3-566-chr11.stderr.txt)

Does that mean there is something wrong with my bam file? If so, any suggestions for it? Thanks for help.
",xxxue96,https://github.com/Illumina/canvas/issues/128
MDU6SXNzdWU0ODMyNTc3ODU=,filter13 bed file not found error,CLOSED,2019-08-21T07:55:09Z,2019-08-21T16:15:35Z,2019-08-21T16:15:35Z,"Hello,

I am trying to download the filter13 bed file for GRCh37 but get this error:

```
wget http://canvas-cnv-public.s3.amazonaws.com/GRCh37/WholeGenomeFasta/GRCh37/filter13.bed
--2019-08-21 03:46:09--  http://canvas-cnv-public.s3.amazonaws.com/GRCh37/WholeGenomeFasta/GRCh37/filter13.bed
Resolving canvas-cnv-public.s3.amazonaws.com (canvas-cnv-public.s3.amazonaws.com)... 52.216.104.235
Connecting to canvas-cnv-public.s3.amazonaws.com (canvas-cnv-public.s3.amazonaws.com)|52.216.104.235|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2019-08-21 03:46:09 ERROR 404: Not Found.
```
Has the file been moved? Is there another way to fetch it. Note, I want to run Canvas in Germline-WGS mode. 

Thank you
Asma",asmariyaz23,https://github.com/Illumina/canvas/issues/129
MDU6SXNzdWU0ODc1NjE2NTU=,Include linkes to publications in the README,CLOSED,2019-08-30T16:06:08Z,2019-09-03T17:59:27Z,2019-09-03T17:59:26Z,"It would be really helpful for new users if the README included links to key publications for Canvas.  There appear to be several, but at least the following two would be nice:

1. The original paper: https://www.ncbi.nlm.nih.gov/pubmed/27153601
2. Canvas in the Illumina clinical lab: https://www.ncbi.nlm.nih.gov/pubmed/30293986",tfenne,https://github.com/Illumina/canvas/issues/130
MDU6SXNzdWU0ODc5NzgyMjk=,Germline-WGS:ERROR: Either option sample-b-allele-vcf or option population-b-allele-vcf must be specified,CLOSED,2019-09-02T03:36:07Z,2019-09-03T18:00:24Z,2019-09-03T18:00:24Z,"hi,
I am running:

Canvas Germline-WGS --bam bam/iw163.bam --sample-name 163 --output out --reference hg19/ucsc.hg19.fasta --population-b-allele-vcf dbsnp.vcf --genome-folder hg19/ --filter-bed filter13.bed
2019-09-02T03:25:36+00:00,
2019-09-02T03:25:36+00:00,Running checkpoint 01: Validate input
2019-09-02T03:25:36+00:00,ERROR: Either option sample-b-allele-vcf or option population-b-allele-vcf must be specified
2019-09-02T03:25:36+00:00,ERROR:
2019-09-02T03:25:36+00:00,ERROR: Canvas 1.39.0.1598+master Copyright © Illumina 2018

Any idea please ? 
Thanks a lot in advance.
Best,
--ZX",zhaoxia-genedock,https://github.com/Illumina/canvas/issues/131
MDU6SXNzdWU1MDQxNDc1NjY=,Commandline parsing error,CLOSED,2019-10-08T16:25:46Z,2019-10-08T21:06:59Z,2019-10-08T21:06:59Z,"Hi,

I've tried running the following command:

```bash
dotnet ~/Code/Canvas-1.40.0.1613+master_x64/Canvas.dll SmallPedigree-WGS -b Processed/bam/P11-A11_trim_mCtoT_md.bam --proband=Processed/bam/P11-A11_trim_mCtoT_md.bam --population-b-allele-vcf=Data/canvas_files/dbsnp.vcf --reference=Data/canvas_files/genome.fa --genome-folder=Data/canvas_files --filter-bed=Data/canvas_files/filter13.bed --output=Processed/canvas/
```

but whatever I do, I get this error:

```
2019-10-08T17:22:14+01:00, 
2019-10-08T17:22:14+01:00,Running checkpoint 01: Validate input
2019-10-08T17:22:14+01:00,ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception: 
        Type specified in JSON 'CanvasCommon.CommandLineParsing.OptionProcessing.FailedParsingResult`1[[Canvas.CommandLineParsing.GermlineWgsInput, Canvas, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null]], CanvasCommon, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null' is not compatible with 'CanvasCommon.CommandLineParsing.OptionProcessing.IParsingResult`1[[Canvas.CommandLineParsing.SmallPedigreeInput, Canvas, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null]], CanvasCommon, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null'. Path '$type', line 2, position 151.
Newtonsoft.Json.JsonSerializationException: Type specified in JSON 'CanvasCommon.CommandLineParsing.OptionProcessing.FailedParsingResult`1[[Canvas.CommandLineParsing.GermlineWgsInput, Canvas, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null]], CanvasCommon, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null' is not compatible with 'CanvasCommon.CommandLineParsing.OptionProcessing.IParsingResult`1[[Canvas.CommandLineParsing.SmallPedigreeInput, Canvas, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null]], CanvasCommon, Version=1.40.0.1613, Culture=neutral, PublicKeyToken=null'. Path '$type', line 2, position 151.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ResolveTypeName(JsonReader reader, Type& objectType, JsonContract& contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, String qualifiedTypeName)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadMetadataProperties(JsonReader reader, Type& objectType, JsonContract& contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue, Object& newValue, String& id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value, JsonSerializerSettings settings)
   at Isas.Framework.Checkpointing.Internals.CheckpointJsonSerializer.Deserialize[T](IFileLocation path)
   at Isas.Framework.Checkpointing.Internals.CheckpointJsonSerializer.Load[T](String checkpoint)
   at Isas.Framework.Checkpointing.Internals.CoreCheckpointRunner.RunCheckpoint[TResult](String name, Func`2 run)
   at Canvas.CommandLineParsing.ModeParser`1.Parse(MainParser main, ILogger logger, ISettings settings, ICheckpointRunner checkpointRunner, IWorkDoer workDoer, String[] args, TextWriter standardWriter, TextWriter errorWriter)
   at Canvas.CommandLineParsing.MainParser.<>c__DisplayClass20_2.<Run>b__2(ICheckpointRunner checkpointer)
   at Isas.Framework.Checkpointing.CheckpointerFactory.<>c__DisplayClass1_1.<RunWithCheckpointer>b__1(CheckpointManager checkpointManager)
   at Isas.Framework.Utilities.IArgumentSupplierExtensions.<>c__DisplayClass0_0`2.<SupplyArgument>b__1(TFill arg)
   at Isas.Framework.Checkpointing.Internals.CheckpointManagerFactory.<>c__DisplayClass4_0`1.<SupplyArgument>b__0()
   at Isas.Framework.Utilities.IArgumentSupplierExtensions.<>c__DisplayClass0_0`2.<SupplyArgument>b__0()
   at Isas.Framework.Utilities.IArgumentSupplierExtensions.<>c__DisplayClass0_0`2.<SupplyArgument>b__1(TFill arg)
   at Isas.Framework.Utilities.TaskTrackerFactory.<>c__DisplayClass2_0`1.<SupplyArgument>b__0()
   at Isas.Framework.Utilities.IArgumentSupplierExtensions.<>c__DisplayClass0_0`2.<SupplyArgument>b__0()
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation loggingDir, Action`1 logCommand, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.JobLaunching.JobLauncherFactory.RunWithJobLauncher(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.ResourceManagement.WorkResourceManagerFactory.RunWithResourceManager(ILogger logger, ISettings settings, CancellationToken cancellationToken, Action`1 function)
   at Isas.Framework.WorkManagement.WorkDoerFactory.RunWithWorkDoer(ILogger logger, ISettings settings, IDirectoryLocation analysisFolder, CancellationTokenSource cancellationTokenSource, Action`1 function)
   at Isas.Framework.FrameworkFactory.IsasFrameworkFactory.RunWithLogger(IFileLocation workflowLog, IFileLocation workflowError, Action`1 function)
   at Canvas.CommandLineParsing.MainParser.Run(String[] args, TextWriter standardOutput, TextWriter standardError)
   at Canvas.Program.Main(String[] args)
```

Any idea what I'm doing wrong? This is running on a fairly old Scientific Linux 6 cluster.",DaGaMs,https://github.com/Illumina/canvas/issues/132
MDU6SXNzdWU1MTM0MjE0OTc=,Canvas:REF,CLOSED,2019-10-28T16:38:53Z,2019-10-29T11:44:38Z,2019-10-29T11:44:37Z,"Dear Canvas team, 

I have multiple ""structural"" VCFs made up of Manta and Canvas calls merged into a per patient VCF. Looking at the files the IDs are made up of MantaDEL, Canvas:GAIN etc which make sense. However, there are a few Canvas:REF calls made and I was unsure what these meant? I wasn't too clear from the notation at the end of your readme. 

Many thanks for your help 

Omid ",oalavijeh,https://github.com/Illumina/canvas/issues/133
MDU6SXNzdWU1MTcwMjg1Nzk=,ERROR: Exception caught in WorkDoerFactory,OPEN,2019-11-04T09:15:52Z,2019-11-08T00:31:25Z,,"Hi Team,

I am getting error in running Canvas germline caller.

ERROR:
ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception:
        One or more errors occurred. (One or more errors occurred. (Job tabix-index-tmp-ballele.bedgraph.gz.1 failed with exit code 139))

cmd: 
/home/ec2-user/dotnet/dotnet  /home/ec2-user/data/Canvas-1.40.0.1613+master_x64/Canvas.dll  SmallPedigree-WGS -b  L2.sorted.rmdup.bam   --sample-b-allele-vcf L2.HC.vcf   -n MSC --ploidy-vcf canvas_ploidy.vcf  -o MSC_cnv -r /home/ec2-user/data/genome/hg19/hg38.fa -g /home/ec2-user/data/genome/hg19/ -f exclude_intervals.bed

Kindly help me to fix the bug.

thanks a lot
",ssri28,https://github.com/Illumina/canvas/issues/134
MDU6SXNzdWU1MjU4OTU0OTQ=,Canvas vcf to plink.cnv output,CLOSED,2019-11-20T15:56:02Z,2019-11-28T17:29:04Z,2019-11-28T17:29:04Z,"Dear Canvas team, 

Is there an inbuilt method of parsing the vcf output from Canvas into the plink .cnv output (shown below)

     FID    IID   CHR       BP1       BP2  TYPE   SCORE  SITE
     P1     P1      4  71338469  71459318     1      27     0
     P1     P1      5  31250352  32213542     1    34.2     0
     P1     P1      7  53205351  53481230     3    18.2     0
     P2     P2     11  86736484  87074601     1      22     0  
     P2     P2     14  47817280  47930190     4    55.1     0

Many thanks",oalavijeh,https://github.com/Illumina/canvas/issues/135
MDU6SXNzdWU1NDIzNjA2MDg=,ERROR: An attempt was made to load two reference sequences with the same exact names (1),OPEN,2019-12-25T16:01:49Z,2019-12-25T16:15:20Z,,"dotnet /media/2/CORN/CreateGenomeSizeFile_5.2.10.49/CreateGenomeSizeFile.dll -g /media/2/CORN/data/zea_mays
/Sequence/WholeGenomeFasta/ -s 'Zea mays (B73_RefGen_v4)' -o /media/2/CORN/data/Canvas/O/
---------------------------------------------------------------------------
CreateGenomeSizeFile                            Copyright (c) Illumina 2019
https://github.com/Illumina/Pisces                                5.2.10.49
---------------------------------------------------------------------------

12/25/19 4:54 PM 1  ************* Starting **************
12/25/19 4:54 PM 1  Version:  5.2.10.49.  
12/25/19 4:54 PM 1  Command-line arguments: .
12/25/19 4:54 PM 1  ""-g /media/2/CORN/data/zea_mays/Sequence/WholeGenomeFasta/ -s Zea mays (B73_RefGen_v4) -o /media/2/CORN/data/Canvas/O/"".
>>> Multiple FASTA files -> require import!
Preparing GenomeSize.xml for folder /media/2/CORN/data/Canvas/O/...
12/25/19 4:55 PM 1  Exception reported:   
System.ArgumentException: An attempt was made to load two reference sequences with the same exact names (1)
   at Common.IO.Sequencing.GenomeMetadata.AddReferenceSequence(String name, Int64 length, String fastaPath, FastaHeaderMetadata header, HashSet`1& re
ferenceNames, Int64 knownBaseLength)
   at Common.IO.Sequencing.GenomeMetadata.ImportFromFastaFiles(String inputFastaDirectory, String outputDirectory)
   at CreateGenomeSizeFile.Program.ProgramExecution()
   at CommandLine.Application.BaseApplication`1.Execute().

ERROR: An attempt was made to load two reference sequences with the same exact names (1)

Stack trace:
   at Common.IO.Sequencing.GenomeMetadata.AddReferenceSequence(String name, Int64 length, String fastaPath, FastaHeaderMetadata header, HashSet`1& re
ferenceNames, Int64 knownBaseLength)
   at Common.IO.Sequencing.GenomeMetadata.ImportFromFastaFiles(String inputFastaDirectory, String outputDirectory)
   at CreateGenomeSizeFile.Program.ProgramExecution()
   at CommandLine.Application.BaseApplication`1.Execute()
12/25/19 4:55 PM 1  ******************** Ending *********************


What triggers this error?
Removed spaces in chromosome names and it moved forward. Is this it?",osowiecki,https://github.com/Illumina/canvas/issues/136
MDU6SXNzdWU1OTExNzI1MTY=,System.ComponentModel.Win32Exception (0x80004005):,OPEN,2020-03-31T14:49:03Z,2020-04-01T03:01:26Z,,"Hi Team,
I am getting error while running Canvas 

""""""
System.ComponentModel.Win32Exception (0x80004005): No such file or directory
   at Interop.Sys.ForkAndExecProcess(String filename, String[] argv, String[] envp, String cwd, Boolean redirectStdin, Boolean redirectStdout, Boolean redirectStderr, Int32& lpChildPid, Int32& stdinFd, Int32& stdoutFd, Int32& stderrFd)
   at System.Diagnostics.Process.StartCore(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start()
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.<RunProcessAsyncWithExitCode>d__8.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.<RunSystemProcessCheckExitAsync>d__7.MoveNext()
""""""
Commandline:
/home/ec2-user/data/Canvas-1.40.0.1613+master_x64/Canvas.dll SmallPedigree-WGS -b ES_MSC_HM2FCDSXX_L2.sorted.rmdup.bam --sample-b-allele-vcf ES_MSC_HM2FCDSXX_L2.HC.vcf --ploidy-vcf canvas_ploidy.vcf -o ES_MSC_cnv_2 -r /home/ec2-user/data/genome/hg19/hg38.fa -g /home/ec2-user/data/genome/hg19/ -f exclude_intervals.bed

I have attached the error log file and canvas log file
[CanvasError.txt](https://github.com/Illumina/canvas/files/4409824/CanvasError.txt)
[CanvasLog.txt](https://github.com/Illumina/canvas/files/4409825/CanvasLog.txt)

",ssri28,https://github.com/Illumina/canvas/issues/137
MDU6SXNzdWU2MDQ0NDIwMTc=,"Unexpected exception ""The specified vcf file () does not exist."" when running Germline-WGS mode on Linux",OPEN,2020-04-22T04:20:29Z,2020-04-22T04:20:29Z,,"I tried to run Germline-WGS mode on Linux but got unexpected exception ""The specified vcf file () does not exist."" I downloaded the dbsnp.vcf from the software website.

My command
==========
/software/dotnet/dotnet /software/canvas/Canvas-1.40.0.1613+master_x64/Canvas.dll Germline-WGS --bam=/project/BCAPrenatal/12F0839/Aligned/Projects/default/default/sorted.bam --population-b-allele-vcf=/software/canvas/Canvas-1.40.0.1613+master_x64/data/hg19/dbsnp.vcf --sample-name=12F0839 -r /software/canvas/Canvas-1.40.0.1613+master_x64/data/hg19/kmer.fa -g /software/canvas/Canvas-1.40.0.1613+master_x64/data/hg19 -f /software/canvas/Canvas-1.40.0.1613+master_x64/data/hg19/filter13.bed -o /project/test/canvas/output

CanvasError.txt
================
2020-04-22T11:38:22+08:00,ERROR: Job 12F0839.partitioned failed with exit code 134. Job logs:
        /project/test/canvas/output/Logging/12F0839.partitioned.stdout
        /project/test/canvas/output/Logging/12F0839.partitioned.stderr
Job error message:
Unhandled Exception: System.IO.FileNotFoundException: The specified vcf file () does not exist.
   at Isas.SequencingFiles.Vcf.VcfReader.GetGzipReader(String vcfPath)
   at CanvasCommon.PloidyInfo.LoadPloidyFromVcfFileNoSampleId(String vcfPath) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasCommon\PloidyInfo.cs:line 115
   at CanvasPartition.CanvasPartition.Main(String[] args) in D:\TeamCity\buildAgent\work\a29a190a11771d97\Src\Canvas\CanvasPartition\CanvasPartition.cs:line 114
2020-04-22T11:38:23+08:00,ERROR: Canvas workflow error: Isas.Framework.WorkManagement.JobFailedException: Job 12F0839.partitioned failed with exit code 134
   at Isas.Framework.WorkManagement.JobLaunching.BasicJobLauncher.RunSystemProcessCheckExitAsync(JobInfo job, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.JobLaunching.RuntimeTrackingJobLauncher.LaunchJobAsync(JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IJobLauncherExtensions.LaunchJob(IJobLauncher jobLauncher, JobInfo jobInfo, Action`1 stdoutCallback, Action`1 stderrCallback)
   at Isas.Framework.WorkManagement.IWorkDoerJobExtensions.<>c__DisplayClass0_0`1.<DoWork>b__0(WorkResources sr, IJobLauncher jobLauncher)
   at Isas.Framework.WorkManagement.ResourceManagement.ThreadedWorkResourceManager.<>c__DisplayClass11_0`1.<RunWithResources>b__3(WorkResources resources)
--- End of stack trace from previous location where exception was thrown ---
",mullinyu,https://github.com/Illumina/canvas/issues/138
MDU6SXNzdWU2MDYxODQyMjU=,Amazon bucket for reference files not available,CLOSED,2020-04-24T09:44:08Z,2020-04-24T13:35:01Z,2020-04-24T13:35:01Z,"Hello, 

I am trying to use the canvas variant caller for WGS workflow but i am unable to download the required reference files from Amazon bucket as it seems to be not available.  
http://canvas-cnv-public.s3.amazonaws.com/

Could you please take a look?

In addition, i have question regarding the reference files: I have a reference fasta file and want to create my own files that i can use for running Canvas. For example i created a GenomeSize.xml file which looks like this:

```
chr1    248956422
chr10   133797422
chr11   135086622
chr12   133275309
chr13   114364328
chr14   107043718
```

I am wondering if this work? if not, can you please share some information on how to generate a GenomeSize.xml that can be used for the specific genome.fa that we might have?

Thank you very much!",jatintalwar,https://github.com/Illumina/canvas/issues/139
MDU6SXNzdWU2MDgxMzkyOTg=,bedGraphToBigWig sort error,OPEN,2020-04-28T08:50:24Z,2020-04-28T08:52:57Z,,"Hi,

I am getting the following error:

2020-04-28T10:42:37+02:00,ERROR: Job bedGraphToBigWig-coverage.bedgraph.1 failed with exit code 255. Job logs: 
	/ngs-data-sas/dev/bitools/bivip/bivipdecker/canvas_results/CanvasPedigreeCaller/Logging/bedGraphToBigWig-coverage.bedgraph.1.stdout
	/ngs-data-sas/dev/bitools/bivip/bivipdecker/canvas_results/CanvasPedigreeCaller/Logging/bedGraphToBigWig-coverage.bedgraph.1.stderr
Job error message:
/ngs-data-sas/dev/bitools/bivip/bivipdecker/canvas_results/VisualizationTempTestSample/coverage.bedgraph is not case-sensitive sorted at line 1692856.  Please use ""sort -k1,1 -k2,2n"" with LC_COLLATE=C,  or bedSort and try again.
2020-04-28T10:42:37+02:00,ERROR: Exception caught in WorkDoerFactory. Cancelling all jobs. Exception: 
	One or more errors occurred. (Job bedGraphToBigWig-coverage.bedgraph.1 failed with exit code 255)

I am using dotnet v2.2.207, the latest version of canvas in SmallPedigree-WGS mode and I updated bedGraphToBigWig to v2.8.

Thank you very much for your help.

Kind regards
Chris
",ChrDec,https://github.com/Illumina/canvas/issues/140
