id,title,state,created_at,updated_at,closed_at,body,user,url
MDU6SXNzdWU4MzI2ODA3OTQ=,Bug with last version of python2.7,OPEN,2021-03-16T11:08:46Z,2021-03-16T17:26:15Z,,"Hi,

I've tried to test your soft but have an error during process. Only *_stats.tab  are created at the end of process. 

I install pymasc via pip install.

Here the command I used:
pymasc -p 10 -e * -i I -n test2 -o test2masc processed_data/ce11/NGS/ChIPseq/bam/H3k4me1_WThexCtrl_rep1.bwa_aln.sort.bam


and logs:

[2021-03-16 11:51:30,003 |     INFO] PyMaSC.pymasc : PyMaSC version 0.3.2 with Python2.7.18
[2021-03-16 11:51:30,004 |     INFO] PyMaSC.pymasc : Make output directory: test2masc
[2021-03-16 11:51:30,103 |     INFO] PyMaSC.pymasc : Check read length: Get median from read length distribution
[2021-03-16 11:51:30,103 |     INFO] PyMaSC.handler.masc : Check read length... : processed_data/ce11/NGS/ChIPseq/bam/H3k4me1_WThexCtrl_rep1.bwa_aln.sort.bam
[2021-03-16 11:52:47,362 |     INFO] PyMaSC.core.readlen : Scan 6,336,378 reads, 1,038,711 reads were unmapped and 4,775,493 reads >= MAPQ 1.
[2021-03-16 11:52:47,362 |     INFO] PyMaSC.core.readlen : 6,336,378 reads were paired: 3,168,189 reads were 1st and 3,168,189 reads were last segment.
[2021-03-16 11:52:47,362 |     INFO] PyMaSC.core.readlen : Note that only 1st reads in the templates will be used for calculation.
[2021-03-16 11:52:47,362 |     INFO] PyMaSC.core.readlen : Estimated read length = 150
[2021-03-16 11:52:47,362 |     INFO] PyMaSC.pymasc : Calculate cross-correlation between 0 to 1000 base shiftwith reads MAOQ >= 1
[2021-03-16 11:52:47,362 |     INFO] PyMaSC.pymasc : Process processed_data/ce11/NGS/ChIPseq/bam/H3k4me1_WThexCtrl_rep1.bwa_aln.sort.bam
[2021-03-16 11:52:47,398 |     INFO] PyMaSC.bacore.mscc : Loading II reads to bit array...
[2021-03-16 11:52:47,398 |     INFO] PyMaSC.bacore.mscc : Loading III reads to bit array...
[2021-03-16 11:52:47,398 |     INFO] PyMaSC.bacore.mscc : Loading IV reads to bit array...
[2021-03-16 11:52:47,399 |     INFO] PyMaSC.bacore.mscc : Loading V reads to bit array...
[2021-03-16 11:52:47,399 |     INFO] PyMaSC.bacore.mscc : Loading MtDNA reads to bit array...
[2021-03-16 11:52:47,400 |     INFO] PyMaSC.bacore.mscc : Loading X reads to bit array...
[2021-03-16 11:52:47,400 |     INFO] PyMaSC.bacore.mscc : Loading I reads to bit array...
[2021-03-16 11:52:47,742 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for MtDNA...
[2021-03-16 11:52:49,955 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for II...
[2021-03-16 11:52:50,131 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for IV...
[2021-03-16 11:52:50,200 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for III...
[2021-03-16 11:52:50,252 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for X...
[2021-03-16 11:52:50,453 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for I...
[2021-03-16 11:52:50,564 |     INFO] PyMaSC.bacore.mscc : Calculate cross-correlation for V...
[2021-03-16 11:52:54,707 |  WARNING] PyMaSC.handler.result : Whole genome Forward/Reverse read count imbalance.
[2021-03-16 11:52:54,707 |  WARNING] PyMaSC.handler.result : +/- = 998928 / 1003500, Chi-squared test p-val = 0.0223354912445 <= 0.05
[2021-03-16 11:52:54,877 |     INFO] PyMaSC.output.stats : Output 'test2masc/test2_stats.tab'
[2021-03-16 11:52:54,878 |     INFO] PyMaSC.output.table : Output 'test2masc/test2_nreads.tab'
Traceback (most recent call last):
  File ""/nfs/work/gen2i/technique/tools/bin/pymasc"", line 8, in <module>
    sys.exit(main())
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/__init__.py"", line 20, in _inner
    main_func()
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/pymasc.py"", line 98, in main
    output_results(args, output_basename, result_handler)
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/pymasc.py"", line 189, in output_results
    output_nreads_table(output_basename, result_handler)
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/utils/output.py"", line 10, in _io_func
    return func(*args, **kwargs)
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/output/table.py"", line 179, in output_nreads_table
    with NReadsIO(outfile, 'w') as tab:
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/output/table.py"", line 36, in __enter__
    self.open()
  File ""/nfs/work/gen2i/technique/tools/lib/python2.7/site-packages/PyMaSC/output/table.py"", line 33, in open
    self.fp = open(self.path, self.mode, newline='')
TypeError: 'newline' is an invalid keyword argument for this function


I will try with python 3.9.2 version but I'm waiting for the admin of HPC I use to install a devel lib to be able to correctly compile python.


Many thanks,
cheers",lelouar,https://github.com/ronin-gw/PyMaSC/issues/11
I_kwDOBdfbPM6Do2YU,Bug when there is not display installed on the server,CLOSED,2024-03-26T15:06:44Z,2024-05-02T09:43:01Z,2024-05-02T09:43:01Z,"Traceback (most recent call last):
  File ""/nfs/work/gen2i/technique/tools/bin/pymasc"", line 33, in <module>
    sys.exit(load_entry_point('PyMaSC==0.3.2', 'console_scripts', 'pymasc')())
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/PyMaSC/__init__.py"", line 20, in _inner
    main_func()
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/PyMaSC/pymasc.py"", line 98, in main
    output_results(args, output_basename, result_handler)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/PyMaSC/pymasc.py"", line 201, in output_results
    plot_figures(plotfile_path, result_handler)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/PyMaSC/utils/output.py"", line 10, in _io_func
    return func(*args, **kwargs)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/PyMaSC/output/figure.py"", line 34, in plot_figures
    plot_naive_cc(ccr, name)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/PyMaSC/output/figure.py"", line 92, in plot_naive_cc
    plt.title(title)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/pyplot.py"", line 3108, in title
    return gca().set_title(
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/pyplot.py"", line 2368, in gca
    return gcf().gca(**kwargs)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/pyplot.py"", line 747, in gcf
    return figure()
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/pyplot.py"", line 693, in figure
    **kwargs)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/pyplot.py"", line 315, in new_figure_manager
    return _backend_mod.new_figure_manager(*args, **kwargs)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/backend_bases.py"", line 3494, in new_figure_manager
    return cls.new_figure_manager_given_figure(num, fig)
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"", line 885, in new_figure_manager_given_figure
    window = tk.Tk(className=""matplotlib"")
  File ""/nfs/work/gen2i/technique/tools/lib/python3.7/tkinter/__init__.py"", line 2023, in __init__
    self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)
_tkinter.TclError: couldn't connect to display ""unix10.30.250.252:25.0""




is it possible to skip this when server has not X server installed ?

thx :)",lelouar,https://github.com/ronin-gw/PyMaSC/issues/12
