id,title,state,created_at,updated_at,closed_at,body,user,url
MDU6SXNzdWU1OTAyMjA3NDg=,Use kraken2 as an alternative to bowtie2 to extract viral reads,CLOSED,2020-03-30T11:39:01Z,2020-03-31T14:32:08Z,2020-03-31T14:32:07Z,"I'm going to be working on polyA selected RNA-seq from people with COVID19 and plan to use the Kraken2 indexes generated here: https://genexa.ch/sars2-bioinformatics-resources/

Would like to see optionally pulling viral reads direct from mixed samples.",ameynert,https://github.com/nf-core/viralrecon/issues/1
MDU6SXNzdWU1OTAyMzE3NDg=,Input data format,CLOSED,2020-03-30T11:57:13Z,2020-03-31T14:33:08Z,2020-03-31T14:33:08Z,"We will need to decide on a flexible input format for the pipeline. I implemented something similar for the nf-core/covid19 pipeline, however this pipeline will only cater for Illumina data at the moment:

```bash
sample,fastq_1,fastq_2
SRR10903401,SRR10903401_S1_L003_R1_001.fastq.gz,SRR10903401_S1_L003_R2_001.fastq.gz
SRR10948474,SRR10948474_S1_L002_R1_001.fastq.gz,SRR10948474_S1_L002_R2_001.fastq.gz
SRR10948474,SRR10948474_S1_L005_R1_001.fastq.gz,SRR10948474_S1_L005_R2_001.fastq.gz
SRR10903402,SRR10903402_S1_L002_R1_001.fastq.gz,
SRR10903402,SRR10903402_S1_L005_R1_001.fastq.gz,
SRR10948550,,
``` 

A final design file may look something like the one above. `SRR10903401` was only sequenced once in Illumina PE format, `SRR10948474` was sequenced twice in Illumina PE format, `SRR10903402` was sequenced twice in Illumina SE format and `SRR10948550` is an SRA id we can use to obtain the data using either the `fromSRA` function in NF or via [SRA Explorer](https://sra-explorer.info/).

This caters for the same sample being sequenced on multiple lanes/runs and it allows for the auto-detection of Illumina data in order to process paired-end and single-end data together. We could also extend the samplesheet format to cater for other options in the future.",drpatelh,https://github.com/nf-core/viralrecon/issues/2
MDU6SXNzdWU1OTAyNDU2OTQ=,Reference genomes and databases,CLOSED,2020-03-30T12:19:18Z,2020-04-10T09:33:57Z,2020-04-10T09:33:56Z,"
We will need to provide a mechanism by which users can automatically obtain the reference genomes and databases that are specific to this pipeline. It is likely that we will need the host reference as well as the viral reference sequence available. The host reference will already be available in [`igenomes.config`](https://github.com/nf-core/viralrecon/blob/dev/conf/igenomes.config) but we will need to figure out a way of uploading the viral (in this case COVID-19) sequence somewhere so it can just be pulled if not provided by the user. Once we have finalised the files/indices required for the pipeline maybe we can upload this all to AWS iGenomes?",drpatelh,https://github.com/nf-core/viralrecon/issues/3
MDU6SXNzdWU1OTAyNTQ1ODE=,Full-sized dataset,CLOSED,2020-03-30T12:34:21Z,2020-04-07T10:54:39Z,2020-04-07T10:54:39Z,"We will need to obtain a full-sized dataset to test the pipeline from end-to-end. We can just add a `test_full.config` like I have done here for the `atacseq` pipeline:
https://github.com/nf-core/atacseq/blob/dev/conf/test_full.config

This means we can also use the same config for the automated AWS tests that will be carried out before the pipeline is released.",drpatelh,https://github.com/nf-core/viralrecon/issues/4
MDU6SXNzdWU1OTAyNTYzODQ=,Minimal test dataset,CLOSED,2020-03-30T12:37:10Z,2020-04-07T09:36:13Z,2020-04-07T09:36:13Z,"Much like https://github.com/nf-core/viralrecon/issues/4 but this dataset has to be uploaded to nf-core/test-datasets so we can use GitHub Actions CI to perform an end-to-end test of the pipeline for all PRs.

Maybe we can use some of the data @thanhleviet added here for now and then refine as required:
https://github.com/nf-core/test-datasets/tree/covid19

I have created a branch called `viralrecon` thats an exact copy of `covid19` above:
https://github.com/nf-core/test-datasets/tree/viralrecon",drpatelh,https://github.com/nf-core/viralrecon/issues/5
MDU6SXNzdWU1OTAyNjcxNjY=,Pull data directly fromSRA,CLOSED,2020-03-30T12:54:18Z,2020-04-14T22:25:56Z,2020-04-09T16:08:34Z,"Given that most of the raw data for this pipeline will be available in publicly available databases such as SRA it would be nice if we can implement functionality to download and process this automatically if SRA ids are provided. I generally recommend that the files are downloaded beforehand to avoid the pipeline crashing during the download. However, I think there may be a good enough case to automate this here or to write a separate script that downloads and checks the data for users before they plug it into the pipeline. I am not fully aware of the complexities when using `fastq-dump`, however maybe we can discuss this here?

Nextflow also has a `fromSRA()` function that we could use?",drpatelh,https://github.com/nf-core/viralrecon/issues/6
MDU6SXNzdWU1OTAzOTQwNDQ=,Create full conda environment,CLOSED,2020-03-30T15:44:34Z,2020-04-01T13:01:51Z,2020-04-01T08:53:42Z,"We have two separated environments in the two pipelines we have developed, we need to merge them and check that it works.
",saramonzon,https://github.com/nf-core/viralrecon/issues/8
MDU6SXNzdWU1OTA0MTMxNjY=,Generate improved report QC,CLOSED,2020-03-30T16:10:34Z,2020-05-28T11:16:53Z,2020-05-28T11:16:53Z,"We create this type of report for researchers, this way they can see at a glance how the experiment worked:

sample | host | Virus sequence | total reads | reads host | % reads host | reads virus | %reads virus | unmapped reads | % unmaped reads | mean DP   coverage virus | Coverage > 5x   (%) | NumVariantsTrimIVAR | %Nswithoutprimers
-- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | --
201397 | human | NC_045512,2 | 2365486 | 23052 | 0,97% | 2335037 | 98,71% | 7397 | 0,3127053 | 15289,14611 | 0,985386 | 5 | 2.50
201493 | human | NC_045512,2 | 2077038 | 22299 | 1,07% | 2049058 | 98,65% | 5681 | 0,2735145 | 13671,11417 | 0,997024 | 6 | 0.32
201495 | human | NC_045512,2 | 1983106 | 14431 | 0,73% | 1963048 | 98,99% | 5627 | 0,28374681 | 14110,63539 | 0,997893 | 7 | 0.33
201575 | human | NC_045512,2 | 2092372 | 4073 | 0,19% | 2080486 | 99,43% | 7813 | 0,37340396 | 14861,83768 | 0,998763 | 7 | 0.34
201602 | human | NC_045512,2 | 1821320 | 92766 | 5,09% | 1730140 | 94,99% | -1586 | -0,0870797 | 11835,88687 | 0,992308 | 6 | 2.27
201607 | human | NC_045512,2 | 2531506 | 23880 | 0,94% | 2499503 | 98,74% | 8123 | 0,32087619 | 18076,30037 | 0,997458 | 7 | 0.49
201617 | human | NC_045512,2 | 2232766 | 10799 | 0,48% | 2212565 | 99,10% | 9402 | 0,42109204 | 16235,09561 | 0,99786 | 3 | 0.32
201706 | human | NC_045512,2 | 2642668 | 6370 | 0,24% | 2628133 | 99,45% | 8165 | 0,30896806 | 18056,17594 | 0,998763 | 6 | 0.24
201709 | human | NC_045512,2 | 1690968 | 13871 | 0,82% | 1673082 | 98,94% | 4015 | 0,23743796 | 11272,06076 | 0,998595 | 5 | 0.64
201738 | human | NC_045512,2 | 2723604 | 3457 | 0,13% | 2708670 | 99,45% | 11477 | 0,42139019 | 18263,53416 | 0,998763 | 2 | 0.32
202050 | human | NC_045512,2 | 1366142 | 467391 | 34,21% | 898349 | 65,76% | 402 | 0,02942593 | 5552,181253 | 0,95268 | 5 | 10.35
202052 | human | NC_045512,2 | 558458 | 238928 | 42,78% | 167130 | 29,93% | 152400 | 27,2894291 | 913,072902 | 0,946494 | 4 | 14.17

Also we have worked in some graphs for the amplicon experiment in order to see how homogeneus the depht of coverage is among amplicons (using bedtools coverage), but a lot of improvement can be done here. And including it as custom content in multiQC is a plus!!
![image](https://user-images.githubusercontent.com/3480206/77935266-81c26500-72b1-11ea-94b6-54075bf635d4.png)
![image](https://user-images.githubusercontent.com/3480206/77935376-a28aba80-72b1-11ea-8688-c048069f3c8e.png)
",saramonzon,https://github.com/nf-core/viralrecon/issues/9
MDU6SXNzdWU1OTA0OTAxNjk=,Update Code of Conduct from nf-core template,CLOSED,2020-03-30T18:12:56Z,2020-05-21T14:40:43Z,2020-05-21T14:22:39Z,Depends on https://github.com/nf-core/tools/issues/598,heuermh,https://github.com/nf-core/viralrecon/issues/10
MDU6SXNzdWU1OTA4MDI0ODc=,Pipeline output documentation,CLOSED,2020-03-31T05:18:04Z,2020-05-21T14:20:49Z,2020-05-21T14:20:49Z,"We will need to properly document/explain all of the outputs generated by the pipeline along with some nice plots and figures:
https://github.com/nf-core/atacseq/blob/dev/docs/output.md
",drpatelh,https://github.com/nf-core/viralrecon/issues/12
MDU6SXNzdWU1OTA4MTM3ODI=,Pipeline summary,CLOSED,2020-03-31T05:45:48Z,2020-04-16T15:17:42Z,2020-04-16T15:17:42Z,Add pipeline summary to `README.md`. See https://github.com/nf-core/atacseq#pipeline-summary,drpatelh,https://github.com/nf-core/viralrecon/issues/13
MDU6SXNzdWU1OTA4NDU5NTE=,Tool citations,CLOSED,2020-03-31T06:54:43Z,2020-04-16T15:00:11Z,2020-04-16T15:00:11Z,"Would be good to cite all of the software used in the pipeline in a separate file like here:
https://github.com/nf-core/atacseq/blob/master/CITATIONS.md

Some of the tool citations can be pinched directly from there.",drpatelh,https://github.com/nf-core/viralrecon/issues/14
MDU6SXNzdWU1OTM2MDg2MjE=,Unicycler SPAdes tput: No value for $TERM and no -T specified on AWS EC2,CLOSED,2020-04-03T19:59:19Z,2020-04-08T15:43:46Z,2020-04-08T15:43:46Z,"When I run on AWS EC2, spades via unicycler throws an error about `$TERM`, seems a silly thing to fail on
```
...
Error executing process > 'UNICYCLER (SRR11241255_T2)'

Caused by:
  Process `UNICYCLER (SRR11241255_T2)` terminated with an error exit status (1)

Command executed:

  unicycler \
      --threads 2 \
      -s SRR11241255_T2.viral.fastq.gz \
      --out ./
  mv assembly.fasta SRR11241255_T2.assembly.fasta

Command exit status:
  1

Command output:

  Command: /opt/conda/envs/nf-core-viralrecon-1.0dev/bin/unicycler --threads 2 -s SRR11241255_T2.viral.fastq.gz --out ./

  Unicycler version: v0.4.7
  Using 2 threads

  The output directory already exists and files may be reused or overwritten:
    /home/ec2-user/viralrecon/work/09/88015a408ee1b4b01fa8e1aa42df79

  Dependencies:
    Program         Version           Status
    spades.py       3.14.0            good
    racon                             not used
    makeblastdb     2.9.0+            good
    tblastn         2.9.0+            good
    bowtie2-build   2.3.5.1           good
    bowtie2         2.3.5.1           good
    samtools        1.9               good
    java            11.0.1-internal   good
    pilon           1.23              good
    bcftools                          not used


  SPAdes read error correction (2020-04-03 19:52:23)
      Unicycler uses the SPAdes read error correction module to reduce the number
  of errors in the short read before SPAdes assembly. This can make the assembly
  faster and simplify the assembly graph structure.

  Command: /opt/conda/envs/nf-core-viralrecon-1.0dev/bin/spades.py -s SRR11241255_T2.viral.fastq.gz -o spades_assembly/read_correction --threads 2 --only-error-correction

  Corrected reads:
    spades_assembly/corrected_u.fastq.gz


  Choosing k-mer range for assembly (2020-04-03 19:52:28)
      Unicycler chooses a k-mer range for SPAdes based on the length of the input
  reads. It uses a wide range of many k-mer sizes to maximise the chance of
  finding an ideal assembly.

  SPAdes maximum k-mer: 127
  Median read length: 108
  K-mer range: 21, 37, 51, 61, 71, 79, 87, 93, 99, 103


  SPAdes assemblies (2020-04-03 19:52:28)
      Unicycler now uses SPAdes to assemble the short reads. It scores the
  assembly graph for each k-mer using the number of contigs (fewer is better) and
  the number of dead ends (fewer is better). The score function is 1/(c*(d+2)),
  where c is the contig count and d is the dead end count.

Command error:
  tput: No value for $TERM and no -T specified
  tput: No value for $TERM and no -T specified
  tput: No value for $TERM and no -T specified
  Error: SPAdes failed to produce assemblies. See spades_assembly/assembly/spades.log for more info.
```

```
[ec2-user@ip-... viralrecon]$ env | grep TERM
TERM=xterm-256color
```",heuermh,https://github.com/nf-core/viralrecon/issues/26
MDU6SXNzdWU1OTYwNDE2MDg=,Conda packages issue with MacOsX,CLOSED,2020-04-07T17:44:02Z,2020-04-10T09:36:11Z,2020-04-10T09:36:11Z,"Some packages are not available in MacOsX version

_bioconda::sra-tools=2.10.3_ the version available for MacOsX is _bioconda::sra-tools=2.10.1_ 

_wkhtmltopdf=0.12.4_ is not available on MacOsX neither


I dont know if it can be ""downgraded"" or trigger a WARN/INFO notification asking to use Docker/Singularity

** Conda version:  4.8.2 **",edgano,https://github.com/nf-core/viralrecon/issues/31
MDU6SXNzdWU1OTYxMjA5ODk=,Create small host kraken 2 DB for testing,CLOSED,2020-04-07T20:07:41Z,2020-04-08T14:46:48Z,2020-04-08T14:46:48Z,"Related to #5 to perform end-to-end test of the pipeline on GitHub Actions CI, we need to create a  `kraken2` small host DBs and upload it to nf-core/test-datasets.  The suggested idea is to generate the DB using human `chr22`.


",JoseEspinosa,https://github.com/nf-core/viralrecon/issues/33
MDU6SXNzdWU1OTc3OTIwNTQ=,Add full IVar processing steps for amplicon data,CLOSED,2020-04-10T09:21:53Z,2020-04-16T15:17:57Z,2020-04-16T15:17:57Z,"It makes sense to implement the extensive functionality offered by `IVar` to get from aligned BAM to consensus sequence. `Varscan 2` and `BCFTools` can still be used for metagenomics data too. We are currently only using it to trim primer sequences so would need to add the other commands as described in the [MANUAL](https://github.com/andersen-lab/ivar/blob/master/docs/MANUAL.md).

Also, need to make sure that the parameters we use are applicable to Illumina data too.",drpatelh,https://github.com/nf-core/viralrecon/issues/42
MDU6SXNzdWU1OTgyNjA0NzE=,Are GFA outputs from de novo assembly useful?,CLOSED,2020-04-11T12:53:52Z,2020-04-19T09:46:52Z,2020-04-19T09:46:52Z,"Created this issue mostly to address this TODO item
[`// TODO nf-core: Rename and output gfa files too?`](https://github.com/nf-core/viralrecon/blob/dev/main.nf#L1381)",heuermh,https://github.com/nf-core/viralrecon/issues/46
MDU6SXNzdWU1OTg0OTQ0NjA=,"apparent 94bp deletion at moderate frequency in ""sample1""",CLOSED,2020-04-12T14:14:47Z,2021-04-27T13:15:44Z,2021-04-27T13:15:44Z,"Referring to the [data posted on zenodo](https://zenodo.org/record/3735111).

I ran this assembly process:

```
cat sample1_R1.fastq.gz sample1_R2.fastq.gz | pigz >sample1.fastq.gz
minia -kmer-size 47 -abundance-min 20 -in sample1.fastq.gz -out sample1.k47.a20
```

Using minimap2 I could see an apparent deletion vs. the reference from this assembly. I made a VCF to describe this by generating a variation graph from the assembly and the reference and using vg deconstruct:

```
cat sample1.k47.a20.contigs.fa ../NC_045512.fa >seqs.fa
minimap2 -w 1 -c -x asm20 ../NC_045512.fa sample1.k47.a20.contigs.fa >seqs.paf
seqwish -s seqs.fa -p seqs.paf -g sample1_vs_ref_k47.a20.gfa
vg convert -x -g sample1_vs_ref_k47.a20.gfa >sample1_vs_ref_k47.a20.xg
vg deconstruct -p NC_045512 sample1_vs_ref_k47.a20.xg
```

Yielding this VCF:

```
##fileformat=VCFv4.2
##contig=<ID=NC_045512,length=29903>
#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT
NC_045512       75      .       CTT     CAAAC   23    . .
NC_045512       241     .       C       T       23    . .
NC_045512       14408   .       C       T       23    . .
NC_045512       11719   .       G       A       23    . .
NC_045512       23403   .       A       G       23    . .
NC_045512       3037    .       C       T       23    . .
NC_045512       23814   .       ATCTTTTGTTGCAATATGGCAGTTTTTGTACACAATTAAACCGTGCTTTAACTGGAATAGCTGTTGAACAAGACAAAAACACCCAAGAAGTTTTTGC       ACA     23      .       .
NC_045512       20268   .       A       G       23    . .
NC_045512       23912   .       C       A       23    . .
NC_045512       23919   .       A       C       23    . .
NC_045512       23916   .       TC      GA      23    . .
```

To investigate, I aligned (with `bwa mem`, default parameters) the read set against this assembly and against the reference NC_045512 sequence. From IGV, I was able to observe that reads match both the reference and deletion allele at this locus.

First, reads against the k47 minia assembly, with the NC_045512 reference at bottom to indicate the precise indel location:

![Screenshot from 2020-04-12 15-32-19](https://user-images.githubusercontent.com/145425/79070629-6efb5780-7cd7-11ea-874b-9440db33c9af.png)

We see some reads mapping across the locus, and some stopping on either side. For some reason, I couldn't find any reads with the same allele as the reference. I think something in the default parameters may be preventing long indels from being detected directly with bwa mem.

Now, inverting things and using NC_045512 as the reference, with the k47 minia assembly at bottom:

![Screenshot from 2020-04-12 15-50-56](https://user-images.githubusercontent.com/145425/79070729-efba5380-7cd7-11ea-912b-6702fb8168b2.png)

Many alignments to the left of the allele show a softclip. Here I'm enabling the display of these sequences:

![Screenshot from 2020-04-12 15-51-46](https://user-images.githubusercontent.com/145425/79070738-05c81400-7cd8-11ea-951c-d05baddb781b.png)

We can see that the sequence matches the other side of the deletion.

In both cases, it's clear that there are reference-matching reads, although at a lower frequency. There seem to be several things happening here, not just the single deletion that's detected. I'm happy to believe that these are all PCR artifacts, until proven otherwise. It's worth noting that a fraction of the reads do directly support at least one of these possible alleles, without error.

What is going on here?

(I don't see this in the other sample, so I don't think it's directly related to the PCR primer set. I'm assuming that was the same.)",ekg,https://github.com/nf-core/viralrecon/issues/47
MDU6SXNzdWU2MDE4MzAzMzQ=,Auto-detect multiple runs of the same sample on SRA,CLOSED,2020-04-17T09:23:58Z,2020-04-23T09:53:56Z,2020-04-23T09:53:56Z,"The pipeline currently performs the analysis for these separately but it would be good if we can aggregate these by some sort of SRA id so that they are merged at some point in the pipeline. The functionality to do this would have to be added to this script:
https://github.com/nf-core/viralrecon/blob/dev/bin/check_samplesheet.py

e.g. searching for `SRR390277` returns these two SRA entries:

```bash
GSM847774: Kc167_Sin3A_ChIPSeq_1 and 2	SRR390277	Illumina Genome Analyzer	10386	15 Dec 2011
GSM847774: Kc167_Sin3A_ChIPSeq_1 and 2	SRR390278	Illumina Genome Analyzer	7910	15 Dec 2011
```",drpatelh,https://github.com/nf-core/viralrecon/issues/56
MDU6SXNzdWU2MDI2NTEyMzk=,Adjust resource requirements for processes to sensible defaults,CLOSED,2020-04-19T07:59:37Z,2021-04-27T12:49:48Z,2021-04-27T12:49:47Z,"
The `label` for each process may or may not have been guestimated for each process. Would be good to test the pipeline on a largeish dataset so we can set sensible defaults. For example, I have uploaded the NF reports here after running `-profile test_full`.

[execution_trace.txt](https://github.com/nf-core/viralrecon/files/4498518/execution_trace.txt)
[execution_timeline.html.txt](https://github.com/nf-core/viralrecon/files/4498521/execution_timeline.html.txt)
[execution_report.html.txt](https://github.com/nf-core/viralrecon/files/4498540/execution_report.html.txt)

PS: Sorry added a `.txt` extension to the `html` files because GitHub doesnt like them.


",drpatelh,https://github.com/nf-core/viralrecon/issues/61
MDU6SXNzdWU2MDQwNzcyMTI=,Efforts to build an MSA of viral genomes,CLOSED,2020-04-21T15:12:16Z,2021-04-27T12:56:02Z,2021-04-27T12:56:02Z,"Hi @viralcon people,
I stumbled upon https://www.biorxiv.org/content/10.1101/2020.04.20.052068v1 and it's code https://github.com/niemasd/ViralMSA. I thought this might be interesting for you. Taking a look at the Python script, it would be ideally suited to port it to a Nextflow pipeline.",subwaystation,https://github.com/nf-core/viralrecon/issues/66
MDU6SXNzdWU2MDQ1MzQ0OTE=,Difficulties getting the pipeline run ,CLOSED,2020-04-22T07:48:37Z,2020-04-23T09:57:58Z,2020-04-23T09:56:54Z,"Hi guys! 

We will be sequencing several hundred virus strains, and I am looking for a pipeline to do de-novo assembly and variant calling. 

Since I have been working with nfcore @drpatelh in the past, I would like to try out this pipeline. The error message, I am currently getting is: 

```
Error executing process > 'MINIA (L50982_v1_S1_ampfree)'

Caused by:
  Process `MINIA (L50982_v1_S1_ampfree)` terminated with an error exit status (1)

Command executed:

  echo ""L50982_v1_S1_ampfree.viral_1.fastq.gz
  L50982_v1_S1_ampfree.viral_2.fastq.gz"" > input_files.txt
      minia \
          -kmer-size 31 \
          -abundance-min 20 \
          -nb-cores 6 \
          -in input_files.txt \
          -out L50982_v1_S1_ampfree.k31.a20
      mv L50982_v1_S1_ampfree.k31.a20.contigs.fa L50982_v1_S1_ampfree.k31.scaffolds.fa

Command exit status:
  1
```
and further down in the .command.log: 
```
  EXCEPTION: error opening file: L50982_v1_S1_ampfree.k31.a20.contigs.fa (No such file or directory)
```

The way I run the pipeline, is: 
```
nextflow run nf-core/viralrecon --input $base/samplesheet.S1S2.csv --protocol 'amplicon' --amplicon_bed $ampliconBed --amplicon_fasta $ampliconFasta --genome 'MN908947.3' --igenomes_ignore --kraken2_db $kraken2Db --outdir $base -with-singularity $base/viralrecon_dev.sif -c dcgc.config -r dev
```

Would you be able to help me out? 
Best wishes
Katrin ",ktrns,https://github.com/nf-core/viralrecon/issues/67
MDU6SXNzdWU2MTYyMjk3NzI=,duplicated variants in iVar path,CLOSED,2020-05-11T22:30:20Z,2020-05-12T15:08:30Z,2020-05-12T14:49:44Z,"The vcf from iVar has lines that are 100% repeated. I noticed this happens when there are overlapping features on the GFF provided. Is this normal?

If you look at the tsv files you see the difference. Here is one example for the `-profile test `run of virarecon:
```

REGION  POS     REF     ALT     REF_DP  REF_RV  REF_QUAL        ALT_DP  ALT_RV  ALT_QUAL        ALT_FREQ        TOTAL_DP        PVAL    PASS    GFF_FEATURE     REF_CODON       REF_AA  ALT_CODON
       ALT_AA

NC_045512.2     3037    C       T       0       0       0       35      7       51      1       35      1.78275e-20     TRUE    cds-YP_009724389.1      TTC     F       TTT     F
NC_045512.2     3037    C       T       0       0       0       35      7       51      1       35      1.78275e-20     TRUE    cds-YP_009725295.1      TTC     F       TTT     F
```


The only difference is the ""GFF-FEATURE"" field that is not present in the .vcf file.

The same behaviour is seen in the snpeff .vcf

[SAMPLE1_PE.tsv.txt](https://github.com/nf-core/viralrecon/files/4612400/SAMPLE1_PE.tsv.txt)

",jcurado-flomics,https://github.com/nf-core/viralrecon/issues/95
MDU6SXNzdWU2MjAyNjEzMTI=,Data download from ENA/SRA before the main pipeline execution,CLOSED,2020-05-18T14:35:14Z,2020-05-28T12:11:15Z,2020-05-20T11:30:06Z,"Hi!
I'm running viralrecon pipeline for a dataset that has to be downloaded from ENA/SRA before the pipeline runs, but it fails. 
This is the error:

![image](https://user-images.githubusercontent.com/5921257/82224932-c74ff580-9924-11ea-81d2-a4a17366beb6.png)

This is the command:
```bash
nextflow run nf-core/viralrecon -r dev --input <path_to>/SRR11140744_metagenomic_sample_sheet.csv --fasta <path_to>/GCF_009858895.2_ASM985889v3_genomic.200409.fna.gz --gff <path_to>/GCF_009858895.2_ASM985889v3_genomic.200409.gff.gz -profile singularity --outdir <path_to_outputdir>   --max_cpus 5 --max_memory '16.GB'
```

And this is the sample sheet:
```bash
sample,fastq_1,fastq_2
SRR11140744,,
```

It seems that the command
`md5sum -c SRX7777166_T1_1.fastq.gz.md5`
is not working, since there is nothing to check.


Thanks,
Javier
",jpflorido,https://github.com/nf-core/viralrecon/issues/101
MDU6SXNzdWU2MjY0NDUzOTg=,"Addition of ""save_mapped_reads_only"" parameter",CLOSED,2020-05-28T11:48:31Z,2020-05-29T13:19:14Z,2020-05-29T13:19:14Z,"For metagenomic samples, exclude unmapped reads from final output BAM file.",ameynert,https://github.com/nf-core/viralrecon/issues/107
MDU6SXNzdWU2MzAxNzA5MDg=,Per-amplicon coverage plot,CLOSED,2020-06-03T17:08:46Z,2020-06-17T16:35:33Z,2020-06-17T16:35:32Z,"It would be nice to be able to generate per-amplicon coverage plots when using `--protocol amplicon` in order to assess dropouts/primers that suffer from poor coverage e.g.

![image (1)](https://user-images.githubusercontent.com/23529759/83666227-831b5100-a5c4-11ea-9afb-4219e526aabf.png)

![image (2)](https://user-images.githubusercontent.com/23529759/83666427-da212600-a5c4-11ea-88d7-990335004e0a.png)

The read count per primer sequence is already printed to the log files created by `ivar trim`:

```
Found 196 primers in BED file

Number of references in file: 1
NC_045512.2
Using Region: NC_045512.2

Found 2372934 mapped reads
Found 0 unmapped reads
Sorted By Coordinate
-------
Processed 10% reads ...
Processed 20% reads ...
Processed 30% reads ...
Processed 40% reads ...
Processed 50% reads ...
Processed 60% reads ...
Processed 70% reads ...
Processed 80% reads ...
Processed 90% reads ...
Processed 100% reads ...

-------
Results:
Primer Name     Read Count
nCoV-2019_1_LEFT        11671
nCoV-2019_1_RIGHT       11316
nCoV-2019_2_LEFT        5256
nCoV-2019_2_RIGHT       4912
nCoV-2019_3_LEFT        36850
nCoV-2019_3_RIGHT       36308
nCoV-2019_4_LEFT        33741
....
....
```

 @gkarthik would it be sensible to use this information to create these plots? If not, any help, tips or even scripts would be really useful. Thank you!",drpatelh,https://github.com/nf-core/viralrecon/issues/112
MDU6SXNzdWU2MzExNTMzMjM=,Modifying the host genome for Kraken2,CLOSED,2020-06-04T21:16:30Z,2022-02-10T00:43:20Z,2021-04-27T12:53:12Z,"Hi there,

A hearty hello from the Serratus project!

https://github.com/ababaian/serratus/

We are keen to work with you guys to integrate viralrecon into our effort to isolate as many distantly-related Coronaviruses as possible.

I'm the resident Kraken2 enthusiast there. Two questions:

* What is the ""base"" Kraken2 DB used by default? Which genomes?
* How do you provide alternate host genomes to Kraken2 in viralrecon? The docs weren't clear.
* Is it easy to configure the pipeline to save the raw Kraken2 output files?

Thanks!",taltman,https://github.com/nf-core/viralrecon/issues/113
MDU6SXNzdWU2MzIyMDM0NzU=,Speed-up SRA/ENA downloads with Aspera ascp ,CLOSED,2020-06-06T04:46:06Z,2020-12-17T18:17:01Z,2020-06-06T11:27:09Z,"Current handling of SRA/ENA downloads is already robust and multi-tiered. 
It could be further improved if primary mode of download used https://en.wikipedia.org/wiki/Fast_and_Secure_Protocol.

Since `bin/fetch_sra_runinfo.py` already returns available fasp urls the first download attempt could be ascp, with FTP then `parallel-fastq-dump` as fallback. 

Although Aspera CLI is proprietary software, it appears that the client comes with a free license.

According to [official documentation for an earlier version](http://download.asperasoft.com/download/docs/cli/3.7.2/user_linux/pdf2/Aspera_CLI_Guide_3.7.2_Linux.pdf):

> **Required Aspera Licenses**
> • The Aspera CLI requires a Connect-enabled license on the transfer server. For detailed information on your transfer server's license file, see the Aspera Connect Server Admin Guide .
> • The Aspera CLI package includes a free client license. It or another valid aspera-license file must be present in the Aspera CLI installation directory

Full license text can be found in the [official container](https://hub.docker.com/r/ibmcom/aspera-cli/) under [`/home/aspera/.aspera/cli/docs/LI_LA_non_ibm_license_en`](https://github.com/nf-core/viralrecon/files/4739348/LI_LA_non_ibm_license_en.txt)

According to more recent documents, license information is obtained as follows:

```
docker run --rm  -it ibmcom/aspera-cli ascp  --version 
IBM Aspera CLI version 3.9.1.1401.be67d47
ascp version 3.9.1.167862
Operating System: Linux
FIPS 140-2-validated crypto ready to configure
AES-NI Supported
License max rate=(unlimited), account no.=1, license no.=1
```

Related notes:
https://github.com/unlhcc/hcc-conda-recipes/issues/8

Edit: potential reason for **not** going with aspera https://github.com/ncbi/sra-tools/issues/304#issuecomment-639978013",rsuchecki,https://github.com/nf-core/viralrecon/issues/115
MDU6SXNzdWU2NDE4MTU2ODA=,IGV batch screenshots,CLOSED,2020-06-19T08:57:16Z,2021-05-09T17:54:41Z,2021-05-09T17:54:41Z,Be good if we can output IGV screenshots for variants without having to load the BAM files. It can take ages to load these relative to the viral genome due to the high depth. I havent tried it before but would be worth looking into. See [here](http://software.broadinstitute.org/software/igv/automation) for some docs.,drpatelh,https://github.com/nf-core/viralrecon/issues/121
MDU6SXNzdWU2NDE4MTkzNzg=,Single SPAdes command to rule them all,CLOSED,2020-06-19T09:03:10Z,2021-02-20T09:30:13Z,2021-02-20T09:30:12Z,"At the moment we have separate processes that run `SPAdes` and `MetaSPAdes`, however, given that the latter can just be invoked by using the standard `spades.py` command with the addition of `--meta`  it would be nicer if instead we have a single process for `SPAdes` and let the user decide which program to use e.g. `--spades_assembler metaspades`. We would have to validate these options internally to make sure the correct assembler is provided. Also, this would tie in quite nicely with the option to choose for example the specialist coronaSPAdes assembler where appropriate. 

We will have to be careful with this though because the inputs and  outputs may change dependng on the assembler that is used. Would need to run them all to test things are working as expected and that we are staging the correct files.

We could also have a `--spades_hmm` parameter to provide custom HMM models specific to the virus being investigated.
",drpatelh,https://github.com/nf-core/viralrecon/issues/122
MDU6SXNzdWU2NDE4MTk3MDQ=,Single SPAdes command to rule them all,CLOSED,2020-06-19T09:03:42Z,2020-06-19T09:05:53Z,2020-06-19T09:05:53Z,"At the moment we have separate processes that run `SPAdes` and `MetaSPAdes`, however, given that the latter can just be invoked by using the standard `spades.py` command with the addition of `--meta`  it would be nicer if instead we have a single process for `SPAdes` and let the user decide which program to use e.g. `--spades_assembler metaspades`. We would have to validate these options internally to make sure the correct assembler is provided. Also, this would tie in quite nicely with the option to choose for example the specialist coronaSPAdes assembler where appropriate. 

We will have to be careful with this though because the inputs and  outputs may change dependng on the assembler that is used. Would need to run them all to test things are working as expected and that we are staging the correct files.

We could also have a `--spades_hmm` parameter to provide custom HMM models specific to the virus being investigated.
",drpatelh,https://github.com/nf-core/viralrecon/issues/123
MDU6SXNzdWU2NDE4MzY4NTI=,Intersect variants across callers,CLOSED,2020-06-19T09:31:21Z,2020-06-19T12:18:56Z,2020-06-19T12:18:56Z,"
Would be good to do this to see how consistently we are calling the same variants and possibly as a way to prioritise which variants to look at. Should be quite straightforward to do this with the command:

```bash
bcftools isec --nfiles +2 <VCF_FILES>
```

Where `--nfiles +2` indicates that the variant must be called by at least 2 callers to be included in the output file. We will have to be careful how we pick that number because that will change if the number of callers is changed with the `--callers` parameter. ",drpatelh,https://github.com/nf-core/viralrecon/issues/124
MDU6SXNzdWU3NDQ1MjE1NDA=,Problem masking the consensus sequence,CLOSED,2020-11-17T08:26:47Z,2021-04-27T13:16:04Z,2021-04-27T13:16:04Z,"Dear all, 

With our latest batch of data, I was running into several problems. 

I am running this: 
```
nextflow run nf-core/viralrecon --input $base/samples.csv --protocol 'amplicon' --amplicon_bed $base/primer/Eden_primers.bed --amplicon_fasta $base/primer/Eden_primers.fa --genome 'MN908947.3' --skip_assembly  --outdir $base/results -profile singularity -c dcgc.config -r 1.1.0
```

I am getting this log:
```
Caused by:
  Process `BCFTOOLS_CONSENSUS (Lib1)` terminated with an error exit status (2)

Command executed:

  cat MN908947_nCoV_2019_Wuhan.fa | bcftools consensus Lib1.vcf.gz > Lib1.consensus.fa
  
  bedtools genomecov \
      -bga \
      -ibam Lib1.trim.mkD.sorted.bam \
      -g MN908947_nCoV_2019_Wuhan.fa \
      | awk '$4 < 10' | bedtools merge > Lib1.mask.bed
  
  bedtools maskfasta \
      -fi Lib1.consensus.fa \
      -bed Lib1.mask.bed \
      -fo Lib1.consensus.masked.fa
  sed -i 's/MN908947_nCoV_2019_Wuhan/Lib1/g' Lib1.consensus.masked.fa
  header=$(head -n1 Lib1.consensus.masked.fa | sed 's/>//g')
  sed -i ""s/${header}/Lib1/g"" Lib1.consensus.masked.fa
  
  plot_base_density.r --fasta_files Lib1.consensus.masked.fa --prefixes Lib1 --output_dir ./
```

Going into the respective `work` directory causing the issue, I can find this: 
1. The link `Lib1.vcf.gz` is broken. The directory it is linking to, contains `Lib1.vcf`, but not `Lib1.vcf.gz`. 
2. `.command.err` shows:
```
terminate called after throwing an instance of 'std::out_of_range'
  what():  basic_string::replace: __pos (which is 29902) > this->size() (which is 29899)
<ourpath>/nfcore/work/73/cf65520a401d66d99182767d1315e4/.command.sh: line 13:  2759 Aborted                 (core dumped) bedtools maskfasta -fi Lib1.consensus.fa -bed Lib1.mask.bed -fo Lib1.consensus.masked.fa
SIGABRT: abort
```
2a. `cat Lib1.mask.bed`
MN908947.3	0	39
MN908947.3	4442	6299
MN908947.3	15230	18918
MN908947.3	29847	29869
MN908947.3	29902	29903

2b. `cat Lib1.consensus.fa.fai`
MN908947.3	29899	12	60	61

After digging a bit, I see that the problem is this. The first command might generate a consensus that is different in length to the original genome due to indels (this has happened in our case). The second command tries to mask the consensus based on coordinates that come from the original genome. Now that the length of the consensus is shorter, there is a clash. 

Would you be able to fix this one? 

Many thanks in advance
Katrin ",ktrns,https://github.com/nf-core/viralrecon/issues/138
MDU6SXNzdWU3NTI3MDI0MzE=,Unknown method invocation `toBytes` on String type,CLOSED,2020-11-28T15:52:45Z,2020-11-30T19:23:28Z,2020-11-30T19:23:28Z,"```
$ nextflow run main.nf -profile test,docker
...
[b2/a44cc7] process > output_documentation                                           [100%] 1 of 1 ✔
Unknown method invocation `toBytes` on String type -- Did you mean?
  getBytes

 -- Check script 'main.nf' at line: 3457 or see '.nextflow.log' file for more details
```",heuermh,https://github.com/nf-core/viralrecon/issues/142
MDU6SXNzdWU3NTI3MDM4MDk=,PICARD_MARKDUPLICATES terminated with an error exit status (137),CLOSED,2020-11-28T15:59:42Z,2020-11-30T22:21:26Z,2020-11-30T22:21:26Z,"picard MarkDuplicates fails to complete when run via Docker on OSX with Nextflow 20.07.1 (works ok when run via Docker on linux with Nextflow 20.10.0)
```
$ nextflow run main.nf -profile test,docker
...
Error executing process > 'PICARD_MARKDUPLICATES (SAMPLE1_PE)'

Caused by:
  Process `PICARD_MARKDUPLICATES (SAMPLE1_PE)` terminated with an error exit status (137)

Command executed:

  picard -Xmx6g MarkDuplicates \
      INPUT=SAMPLE1_PE.trim.sorted.bam \
      OUTPUT=SAMPLE1_PE.trim.mkD.sorted.bam \
      ASSUME_SORTED=true \
      REMOVE_DUPLICATES=false \
      METRICS_FILE=SAMPLE1_PE.trim.mkD.MarkDuplicates.metrics.txt \
      VALIDATION_STRINGENCY=LENIENT \
      TMP_DIR=tmp
  samtools index SAMPLE1_PE.trim.mkD.sorted.bam
  samtools idxstats SAMPLE1_PE.trim.mkD.sorted.bam > SAMPLE1_PE.trim.mkD.sorted.bam.idxstats
  samtools flagstat SAMPLE1_PE.trim.mkD.sorted.bam > SAMPLE1_PE.trim.mkD.sorted.bam.flagstat
  samtools stats SAMPLE1_PE.trim.mkD.sorted.bam > SAMPLE1_PE.trim.mkD.sorted.bam.stats

Command exit status:
  137

Command output:
  (empty)

Command error:
  /opt/conda/envs/nf-core-viralrecon-1.2.0dev/bin/picard: line 5: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8): No such file or directory
  INFO	2020-11-28 02:05:00	MarkDuplicates

  ********** NOTE: Picard's command line syntax is changing.
  **********
  ********** For more information, please see:
  ********** https://github.com/broadinstitute/picard/wiki/Command-Line-Syntax-Transition-For-Users-(Pre-Transition)
  **********
  ********** The command line looks like this in the new syntax:
  **********
  **********    MarkDuplicates -INPUT SAMPLE1_PE.trim.sorted.bam -OUTPUT SAMPLE1_PE.trim.mkD.sorted.bam -ASSUME_SORTED true -REMOVE_DUPLICATES false -METRICS_FILE SAMPLE1_PE.trim.mkD.MarkDuplicates.metrics.txt -VALIDATION_STRINGENCY LENIENT -TMP_DIR tmp
  **********


  02:05:02.118 INFO  NativeLibraryLoader - Loading libgkl_compression.so from jar:file:/opt/conda/envs/nf-core-viralrecon-1.2.0dev/share/picard-2.23.8-0/picard.jar!/com/intel/gkl/native/libgkl_compression.so
  [Sat Nov 28 02:05:02 UTC 2020] MarkDuplicates INPUT=[SAMPLE1_PE.trim.sorted.bam] OUTPUT=SAMPLE1_PE.trim.mkD.sorted.bam METRICS_FILE=SAMPLE1_PE.trim.mkD.MarkDuplicates.metrics.txt REMOVE_DUPLICATES=false ASSUME_SORTED=true TMP_DIR=[tmp] VALIDATION_STRINGENCY=LENIENT    MAX_SEQUENCES_FOR_DISK_READ_ENDS_MAP=50000 MAX_FILE_HANDLES_FOR_READ_ENDS_MAP=8000 SORTING_COLLECTION_SIZE_RATIO=0.25 TAG_DUPLICATE_SET_MEMBERS=false REMOVE_SEQUENCING_DUPLICATES=false TAGGING_POLICY=DontTag CLEAR_DT=true DUPLEX_UMI=false ADD_PG_TAG_TO_READS=true DUPLICATE_SCORING_STRATEGY=SUM_OF_BASE_QUALITIES PROGRAM_RECORD_ID=MarkDuplicates PROGRAM_GROUP_NAME=MarkDuplicates READ_NAME_REGEX=<optimized capture of last three ':' separated fields as numeric values> OPTICAL_DUPLICATE_PIXEL_DISTANCE=100 MAX_OPTICAL_DUPLICATE_SET_SIZE=300000 VERBOSITY=INFO QUIET=false COMPRESSION_LEVEL=5 MAX_RECORDS_IN_RAM=500000 CREATE_INDEX=false CREATE_MD5_FILE=false GA4GH_CLIENT_SECRETS=client_secrets.json USE_JDK_DEFLATER=false USE_JDK_INFLATER=false
  [Sat Nov 28 02:05:02 UTC 2020] Executing as ?@b9dd687cc9bb on Linux 5.4.39-linuxkit amd64; OpenJDK 64-Bit Server VM 11.0.8-internal+0-adhoc..src; Deflater: Intel; Inflater: Intel; Provider GCS is not available; Picard version: 2.23.8
  INFO	2020-11-28 02:05:02	MarkDuplicates	Start of doWork freeMemory: 15153616; totalMemory: 20971520; maxMemory: 6442450944
  INFO	2020-11-28 02:05:02	MarkDuplicates	Reading input file and constructing read end information.
  INFO	2020-11-28 02:05:02	MarkDuplicates	Will retain up to 23342213 data points before spilling to disk.
  INFO	2020-11-28 02:05:06	MarkDuplicates	Read 48022 records. 10 pairs never matched.
  INFO	2020-11-28 02:05:06	MarkDuplicates	After buildSortedReadEndLists freeMemory: 150983072; totalMemory: 351272960; maxMemory: 6442450944
  INFO	2020-11-28 02:05:06	MarkDuplicates	Will retain up to 201326592 duplicate indices before spilling to disk.
  INFO	2020-11-28 02:05:12	MarkDuplicates	Traversing read pair information and detecting duplicates.
  INFO	2020-11-28 02:05:16	MarkDuplicates	Traversing fragment information and detecting duplicates.
  INFO	2020-11-28 02:05:16	MarkDuplicates	Sorting list of duplicate records.
  INFO	2020-11-28 02:05:17	MarkDuplicates	After generateDuplicateIndexes freeMemory: 1081872920; totalMemory: 2700083200; maxMemory: 6442450944
  INFO	2020-11-28 02:05:17	MarkDuplicates	Marking 39544 records as duplicates.
  INFO	2020-11-28 02:05:17	MarkDuplicates	Found 8 optical duplicate clusters.
  INFO	2020-11-28 02:05:17	MarkDuplicates	Reads are assumed to be ordered by: coordinate
  /opt/conda/envs/nf-core-viralrecon-1.2.0dev/bin/picard: line 66:    55 Killed                  /opt/conda/envs/nf-core-viralrecon-1.2.0dev/bin/java -Xmx6g -jar /opt/conda/envs/nf-core-viralrecon-1.2.0dev/share/picard-2.23.8-0/picard.jar MarkDuplicates ""INPUT=SAMPLE1_PE.trim.sorted.bam"" ""OUTPUT=SAMPLE1_PE.trim.mkD.sorted.bam"" ""ASSUME_SORTED=true"" ""REMOVE_DUPLICATES=false"" ""METRICS_FILE=SAMPLE1_PE.trim.mkD.MarkDuplicates.metrics.txt"" ""VALIDATION_STRINGENCY=LENIENT"" ""TMP_DIR=tmp""
```",heuermh,https://github.com/nf-core/viralrecon/issues/143
MDU6SXNzdWU3ODMxOTIxOTM=,Modules required for DSL 2 implementation of pipeline,CLOSED,2021-01-11T09:04:49Z,2021-05-12T20:08:38Z,2021-04-27T12:46:28Z,"- [x] fastp
- [x] bowtie2 index
- [x] bowtie2 align
- [x] snpeff 
- [x] snpsift extractFields
- [x] samtools view
- [x] samtools mpileup
- [x] samtools faidx
- [x] ivar trim
- [x] picard collectwgsmetrics
- [x] mosdepth
- [x] varscan mpileup2cns
- [x] bcftools stats
- [x] bcftools filter
- [x] tabix
- [x] bedtools genomecov
- [x] bedtools maskfasta
- [x] quast
- [x] ivar variants
- [x] ivar consensus 
- [x] bcftools mpileup
- [x] bcftools isec
- [x] bcftools concat
- [x] [blast?] makeblastdb
- [x] kraken2-build
- [x] cutadapt
- [x] spades
- [x] blast blastn
- [x] abacas
- [x] plasmidID
- [x] minimap2 (assigned @heuermh [#149](https://github.com/nf-core/modules/pull/149))
- [x] seqwish (assigned @heuermh [#221](https://github.com/nf-core/modules/pull/221))
- [x] vg view (deprecated)
- [x] vg convert (deprecated)
- [x] vg snarls (deprecated)
- [x] vg deconstruct (deprecated)
- [x] minia
- [x] bandage image
- [x] unicycler 
- [x] pangolin
- [x]  [nextclade](https://github.com/nextstrain/nextclade)",JoseEspinosa,https://github.com/nf-core/viralrecon/issues/149
MDU6SXNzdWU3OTcwMzg2ODg=,viralrecon gets stuck on FASTQC jobs,CLOSED,2021-01-29T17:00:25Z,2021-02-05T17:24:24Z,2021-02-05T17:24:24Z,"I try to run viralrecon for 86 samples. It seems the pipeline gets stuck and I cannot figure out why. I did run the pipeline on my local machine (14 cores, 128 GB memory) with standard configuration like this:

```bash
nextflow run nf-core/viralrecon --input /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//samples.csv --protocol amplicon --amplicon_bed /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//../primer/Eden_processed/Eden_primers.bed --amplicon_fasta /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//../primer/Eden_processed/Eden_primers.fa --genome MN908947.3 --skip_assembly --outdir /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//results -profile singularity -with-singularity /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//singularity.dev.961b10463ae1.sif -r e49cee2
```

it starts to run, but then it gets stuck without an error and just seems to hang. There is no CPU usage according to `htop`. When I run the pipeline on our cluster, distributing jobs with SGE, I get a similar issue. First, I thought it is SGE, but now that the pipeline also gets stuck on my local machine. Getting stuck means, there is no new entry in the log for 1.5 hours now. From the log, I can see that the last jobs were FASTQC jobs. What can I do, do you need more infos? I attach the log.

<details><summary>`.nextflow.log`</summary>
<p>

```
Jan-29 16:04:40.079 [main] DEBUG nextflow.cli.Launcher - $> nextflow run nf-core/viralrecon --input /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//samples.csv --protocol amplicon --amplicon_bed /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//../primer/Eden_processed/Eden_primers.bed --amplicon_fasta /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//../primer/Eden_processed/Eden_primers.fa --genome MN908947.3 --skip_assembly --outdir /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//results -profile singularity -with-singularity /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//singularity.dev.961b10463ae1.sif -r e49cee2
Jan-29 16:04:40.130 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 20.10.0
Jan-29 16:04:40.824 [main] DEBUG nextflow.scm.AssetManager - Git config: /home/crtd_bioinf/fabirost/.nextflow/assets/nf-core/viralrecon/.git/config; branch: master; remote: origin; url: https://github.com/nf-core/viralrecon.git
Jan-29 16:04:40.835 [main] DEBUG nextflow.scm.AssetManager - Git config: /home/crtd_bioinf/fabirost/.nextflow/assets/nf-core/viralrecon/.git/config; branch: master; remote: origin; url: https://github.com/nf-core/viralrecon.git
Jan-29 16:04:41.024 [main] INFO  nextflow.cli.CmdRun - Launching `nf-core/viralrecon` [condescending_volhard] - revision: e49cee2f15dce2e9993736d16f08b1f9d808e292
Jan-29 16:04:41.596 [main] DEBUG nextflow.scm.AssetManager - WARN: Cannot find any Git revision matching: null; ls-remote: [Ref[refs/pull/104/head=e21a9d69c8a80c902e8ed67ead97269ae040daa8], Ref[refs/pull/71/head=de556ff67b80ef002b437391fe3e8ae86ddfcca7], Ref[refs/pull/85/head=cea8613b4a939db7dc36fb639b0b05de07a9aaed], Ref[refs/tags/1.0.0=7422b0d353b1a295fb7cda47f2f7750c3bd890d1], Ref[refs/pull/69/head=b6e20251447dff08ea213605f4bfe554b17a0ab4], Ref[refs/pull/40/head=658104370a3aab1bde5e176750a1ae15687a0b89], Ref[refs/pull/24/head=b77d015ce4720e7447ee6c50fcca8758d16a173e], Ref[refs/pull/135/head=778693daee7a476c8cc9ed1b703bd0e801d42016], Ref[refs/pull/55/head=3bfc2ba5239baa54260a95f031523f4e212451f6], Ref[refs/heads/dsl2=c8f708819bede4b1c8f3840c6355c22b03e6d0e9], Ref[refs/pull/23/head=a87af4acb8a3afe26175da6feeb4c5ca28b3b436], Ref[refs/pull/148/head=9ba237e45aef44056dfd137caf33782252b8c9b2], Ref[refs/pull/120/head=4461c408701db0ba78264092632e45c93f83ba4c], Ref[refs/pull/103/head=372de46851a76d35c038fdf4a80d1207f71de073], Ref[refs/pull/68/head=487df0392fa1579abb9842d33111ebcc6e223d66], Ref[refs/pull/70/head=fb6596249daf33376ca148c6b06a9f2ebb50af8d], Ref[refs/pull/118/head=fb552abe4143334b8b6131028e029a6d9271202a], Ref[refs/pull/150/head=74e32eeb8efa98fea152899ae9e5f43f0aefe087], Ref[refs/pull/38/head=6030094912cb345c1b16584a713c0b94595003e0], Ref[refs/pull/134/head=abcd646b49cd7bccc8e8c4ddf164782731e1eb56], Ref[refs/pull/54/head=4c4103b9fda02bf60c8f77e424ab11d0b783e43e], Ref[refs/pull/99/head=6756a4e3a518e2cac416550168a6b89c57975785], Ref[refs/pull/98/head=afc1fd67c633482675226db3906f9e0ed93ab56f], Ref[refs/pull/84/head=52db59ea24b462f0760896bdeb2f743c85a8b781], Ref[refs/pull/11/head=886c2f681f33e75858deb6e9d1c914fdb299c035], Ref[refs/pull/39/head=0b12a3e4f87ca8f0f83fbde0737466268e15785c], Ref[refs/pull/87/head=d3c56f47a3a51a50a526590901e3f1bfe3db6049], Ref[refs/pull/116/head=e1134ed88cec082d6f7373ba96bfc4e0ecc412bc], Ref[refs/pull/119/head=43c9d78884774bfe5e419014c38cf1e8b31c6710], Ref[refs/pull/41/head=4853f86c0869171b16a53b767401a5a341167e53], Ref[refs/pull/36/head=3eaeb42a7b15701ec7107498e5cdd5866325143c], Ref[refs/pull/52/head=9e511349d7e899310a41fa9b46269571e39034f5], Ref[refs/pull/22/head=a580cfaa886907f4cda826088a15cc8241a99c31], Ref[refs/pull/102/head=1b93695f72a814764cc7dbf74d6a47855042b87a], Ref[refs/pull/25/head=6ebfb8a9d9c42dc06827211f6ef576bdee232efa], Ref[refs/pull/105/head=9a46ba7d317c00e23bdfb889dd1298c33171c99c], Ref[refs/pull/146/head=90079b0fa5d37ffd551c4a9a18cba4f9860a017b], Ref[refs/pull/49/head=fee3c68ef7053fc9bd79a11937320abd056f0948], Ref[refs/pull/88/head=00816d0ec217c4adc2fa38ea07ef882d4dd1c822], Ref[refs/tags/1.1.0=75a2f9763e9b4c1aa20ad342ae3ce148c33cc65a], Ref[refs/pull/140/head=2898d227ba61e2920fc4cc36ed6e5cd14064b7f7], Ref[refs/pull/60/head=eaab9880c914ea28d55f9077005808b9034a60ab], Ref[refs/pull/18/head=23ef7e0cacaa1726777c2a00dd7d138948f99fe8], Ref[refs/pull/82/head=7f8c7988f95c339debce2b3570df0f399fc230e0], Ref[refs/pull/21/head=4a485b793c961d148fae1bbf7f202b49a28307a3], Ref[refs/pull/65/head=3d6512ac4e109958c5fbf719ccbbd14ed9004017], Ref[refs/pull/27/head=775379f647f9e2e41a0dee869dd31d9fef06a9df], Ref[refs/pull/145/head=1ca31f1e8fec66a159e9442c45ccd926d265844e], Ref[refs/pull/43/head=2e5a2b4772239651bd292cbdd1d21fc69c4d1caa], Ref[refs/pull/129/head=7b38fe2439f97927093452232263123e71368d44], Ref[refs/pull/59/head=046d91a78b5c112a93ed7ef7d185c18a19bea8b9], Ref[refs/pull/139/head=60cd93051c5de0af9f79886e48d7c96c6b4ae199], Ref[refs/pull/53/head=ac36d1fcf11674ab8ccf8b77a7bfb414614b9cad], Ref[refs/pull/111/head=69326f97b1c1d1b8733a0df573cb1f3eff907e6d], Ref[refs/pull/136/head=7002a5eb6f481075cf577e7898212bf01144e2f9], Ref[refs/pull/130/head=b0229bbbc6eda0614aa40269a3f06b4edf78c360], Ref[refs/pull/117/head=acfc523f35cb9174c383b01cede82a14c8818688], Ref[refs/pull/133/head=52a1e50ff57cf2295e2de9b425f73f276f20bade], Ref[refs/pull/37/head=55c2a56f7101f4d9bc74fa91cbc6bf9fd81527e2], Ref[refs/pull/114/head=d0e3e179d14b95eb8a1b08c3edcea5012e741206], Ref[refs/pull/34/head=dad04235f8b75dabd385a2e2476a895629549d98], Ref[refs/pull/50/head=fc6eb38364aa85181defa21fb32ba9c56b87bd80], Ref[refs/pull/72/head=3c810f848c21ca58d69aa31b0cecb68889cecebd], Ref[refs/pull/97/head=c6682e57fd58b9ed743e388999c393f2cdaccd78], Ref[refs/pull/78/head=7c38d49a99fd897ac473995c29876c5579e1722d], Ref[refs/pull/91/head=b0f9b52f9d17ba097a518b4dd01e25da52c6159a], Ref[refs/pull/75/head=f9b4b596671b2325011c42734b14239027d62c1d], Ref[refs/pull/94/head=f7004dd083f523674b0b5b7b3d98176b8887b43e], Ref[refs/pull/32/head=cb10b45cadedd90d5da6460704d5cd5f15764c01], Ref[refs/pull/77/head=ed2511444ce83e7924e9fd91584c268251bb2e31], Ref[refs/pull/63/head=4f56a2b91f580fc4f1ff4ff9510bd675b1d512b0], Ref[refs/pull/29/head=634bf562df7712e80ffa57839263273a53b3ae6b], Ref[refs/pull/16/head=79005a50623da53a812584537ee081744631dbe2], Ref[refs/pull/93/head=a495c1c40bd21085c21247ad812e51bcbb90088f], Ref[refs/pull/76/head=8b7285dbb0baa5ee300a43500dbeff782b284134], Ref[refs/pull/15/head=f899da38519e283a12df70fa6f20efd0a851f053], Ref[refs/pull/126/head=13331866195d9b0cc0aee95fc0df881965be7ef3], Ref[refs/pull/62/head=edb5bd0b6f40ac15432d5d234293d39334fd347f], Ref[refs/pull/92/head=ecc1fdcf1dade61baa2f65c2904f88457aa54054], Ref[refs/pull/28/head=c83b9a771430ed9c793e78f4507b6ba50858950b], Ref[refs/pull/81/head=9b4444fc1bb6ea038245dcb57db55ff96161d977], Ref[refs/pull/79/head=d9ad5b9c6f6ee7e1c2e62c36d8df2ef13eecffc1], Ref[refs/pull/44/head=a6524572ebfc9a9b73b1c207d7b56f3c0c37a411], Ref[refs/pull/110/head=9ea4c1a52a0b55beb8fda28d9d5d318c7909a99c], Ref[refs/pull/7/head=053508707e945f883dd611cb6eab89be73f77f56], Ref[refs/pull/127/head=0a7325e0a42b5f06afcb622c74962a3899157eca], Ref[refs/pull/108/head=2622959ec0ca9753ccf35fb57fa38d12a688a4f2], Ref[refs/pull/30/head=8940416aacf0648eeef5fd083cc7cc333d266be4], Ref[refs/pull/17/head=747296441fb64b4bd1137fd8d93f08f91572f90b], Ref[refs/pull/74/head=72d240b1e367193672c4e8914ffd7d51c93fa39b], Ref[HEAD=75a2f9763e9b4c1aa20ad342ae3ce148c33cc65a], Ref[refs/pull/35/head=3781ff8ee824eb0c63644145a48e45221e22de9a], Ref[refs/pull/132/head=5b355cd205b4fa66a6658500d3080481d02bc736], Ref[refs/pull/90/head=b2eef6ca9038df66be27c985372ca1125fc3d8a7], Ref[refs/pull/58/head=5d42f5891d40e249a27a5cc1dcff8e9c13ce78af], Ref[refs/pull/131/head=30db7f95649e6e4f309067f3acb15b86c4499c6d], Ref[refs/pull/20/head=5c7bd7013a253a9785b346f65cf9bfc898da48f6], Ref[refs/pull/137/head=ee5b7b7a47ddabc6b44ef203ce13599ed3e42079], Ref[refs/pull/51/head=6cc01895b3db2901ac33dad5ae2317664467ae35], Ref[refs/pull/19/head=29d89516b218140ce2a5ed4f04c7898d436fc390], Ref[refs/pull/100/head=85f13dd3df92feec87fbe5b367715bb53743067c], Ref[refs/pull/73/head=d07af1ccde076f7010330c1fdd7d60a7b4c6f5be], Ref[refs/pull/96/head=2d5cdb3d8234e7f11c079fe57d8b131010423aae], Ref[refs/pull/57/head=d72c512df8fd38215b8c9bc259a2b97373536ad0], Ref[refs/pull/125/head=c9d40fb3c3f0bf413d593d43c6483f0eca234249], Ref[refs/pull/128/head=eca1bdcdaed5aefaf74402c858a45dc1ba4d123a], Ref[refs/pull/64/head=f27a55065c359cc6f19c4ea8bd7b6d93375a8141], Ref[refs/pull/48/head=e0474ce0f9f7c198f5e49070536b76c70e4b2e0b], Ref[refs/pull/45/head=0687ec1ef98f3ae80c147329c193338d79f537d6], Ref[refs/pull/106/head=160438169ebb0e488fd75f4706dc6fb66888cd7f], Ref[refs/pull/109/head=a5c12fcbbe4ead170ccd13d54b2038406757f271], Ref[refs/heads/TEMPLATE=1ca31f1e8fec66a159e9442c45ccd926d265844e], Ref[refs/heads/dev=e49cee2f15dce2e9993736d16f08b1f9d808e292], Ref[refs/pull/83/head=d9589698b6189d60f996fc722d566f84c28215c2], Ref[refs/pull/86/head=5ac0f286bc4acf243ba7ea53a665fe24ab02f85b], Ref[refs/pull/141/head=052e9a8cdaa1260a6007571b97acc855b7513086], Ref[refs/pull/131/merge=103c74d77174b79e1060b5757209a016c1e26aa6], Ref[refs/heads/master=75a2f9763e9b4c1aa20ad342ae3ce148c33cc65a], Ref[refs/pull/80/head=80a8eb55a94c26d7c488cf0290ff3dc904c3c42d], Ref[refs/pull/89/head=397f25529d0ca506666c88d74a5382fcbbbb481e], Ref[refs/pull/144/head=b006a4187540d86a80981d28c364779ffb2c4aeb], Ref[refs/pull/147/head=80b17e725ec72e03ee63be69187b0f2feb7e8ada]]
Jan-29 16:04:41.629 [main] DEBUG nextflow.config.ConfigBuilder - Found config base: /home/crtd_bioinf/fabirost/.nextflow/assets/nf-core/viralrecon/nextflow.config
Jan-29 16:04:41.630 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/crtd_bioinf/fabirost/.nextflow/assets/nf-core/viralrecon/nextflow.config
Jan-29 16:04:41.640 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `singularity`
Jan-29 16:04:42.104 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [cfc_dev, test_sispa, denbi_qbic, bi, genotoul, bigpurple, uppmax, abims, imperial_mb, docker, gis, utd_ganymede, mpcdf, conda, test_full_sispa, singularity, icr_davros, munin, prince, podman, test_sra, czbiohub_aws, hebbe, cfc, uzh, ccga_med, debug, test, genouest, cbe, ebc, ccga_dx, crick, google, kraken, phoenix, seg_globe, shh, awsbatch, pasteur, uct_hpc, imperial, test_full, binac]
Jan-29 16:04:42.116 [main] DEBUG nextflow.config.ConfigBuilder - Enabling execution in Singularity container as requested by cli option `-with-singularity null`
Jan-29 16:04:42.154 [main] DEBUG nextflow.Session - Session uuid: d50953bf-81a8-400d-bca1-9b94a03c8b75
Jan-29 16:04:42.154 [main] DEBUG nextflow.Session - Run name: condescending_volhard
Jan-29 16:04:42.155 [main] DEBUG nextflow.Session - Executor pool size: 28
Jan-29 16:04:42.172 [main] DEBUG nextflow.cli.CmdRun -
  Version: 20.10.0 build 5430
  Created: 01-11-2020 15:14 UTC (16:14 CEST)
  System: Linux 5.4.0-58-generic
  Runtime: Groovy 3.0.5 on OpenJDK 64-Bit Server VM 11.0.8-internal+0-adhoc..src
  Encoding: UTF-8 (UTF-8)
  Process: 3558564@cbioinfws1 [127.0.1.1]
  CPUs: 28 - Mem: 125.5 GB (47.1 GB) - Swap: 14 GB (13.9 GB)
Jan-29 16:04:42.187 [main] DEBUG nextflow.Session - Work-dir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work [zfs]
Jan-29 16:04:42.230 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Jan-29 16:04:42.234 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Jan-29 16:04:42.408 [main] DEBUG nextflow.Session - Session start invoked
Jan-29 16:04:42.411 [main] DEBUG nextflow.trace.TraceFileObserver - Flow starting -- trace file: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/results/pipeline_info/execution_trace.txt
Jan-29 16:04:45.536 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jan-29 16:04:45.543 [main] DEBUG nextflow.Session - Workflow process names [dsl1]: MOSDEPTH_GENOME, UNICYCLER_PLASMIDID, UNICYCLER_SNPEFF, MINIA_BLAST, output_documentation, UNICYCLER_VG, IVAR_CONSENSUS, SORT_BAM, FASTP, SRA_FASTQ_FTP, UNICYCLER_ABACAS, PICARD_MARKDUPLICATES, MINIA, VARSCAN2, BCFTOOLS_CONSENSUS, CAT_FASTQ, METASPADES_SNPEFF, GUNZIP_GFF, SPADES_VG, UNICYCLER_QUAST, PICARD_METRICS, KRAKEN2, SPADES_PLASMIDID, METASPADES_QUAST, BCFTOOLS_VARIANTS, BCFTOOLS_SNPEFF, MAKE_BLAST_DB, MOSDEPTH_AMPLICON, METASPADES, IVAR_VARIANTS, FASTQC, BOWTIE2_INDEX, SPADES, METASPADES_VG, SPADES_ABACAS, METASPADES_PLASMIDID, SPADES_SNPEFF, UNICYCLER, MULTIQC, CUTADAPT, KRAKEN2_BUILD, IVAR_TRIM, IVAR_QUAST, UNICYCLER_BLAST, VARSCAN2_QUAST, METASPADES_ABACAS, MINIA_VG, MINIA_ABACAS, get_software_versions, SPADES_BLAST, MINIA_SNPEFF, SPADES_QUAST, MAKE_SNPEFF_DB, BCFTOOLS_QUAST, SAMTOOLS_MPILEUP, GUNZIP_FASTA, METASPADES_BLAST, BCFTOOLS_ISEC, VARSCAN2_SNPEFF, MINIA_QUAST, UNTAR_KRAKEN2_DB, MOSDEPTH_AMPLICON_PLOT, SRA_FASTQ_DUMP, MINIA_PLASMIDID, BOWTIE2, IVAR_SNPEFF, CHECK_SAMPLESHEET, VARSCAN2_CONSENSUS
Jan-29 16:04:45.772 [main] INFO  nextflow.Nextflow - ----------------------------------------------------
                                        ,--./,-.
        ___     __   __   __   ___     /,-._.--~'
  |\ | |__  __ /  ` /  \ |__) |__         }  {
  | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                        `._,._,'
  nf-core/viralrecon v1.2.0dev
----------------------------------------------------

Jan-29 16:04:45.775 [main] INFO  nextflow.Nextflow - Run Name              : condescending_volhard
Samplesheet           : /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//samples.csv
Protocol              : amplicon
Amplicon Fasta File   : /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//../primer/Eden_processed/Eden_primers.fa
Amplicon BED File     : /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//../primer/Eden_processed/Eden_primers.bed
Amplicon Left Suffix  : _LEFT
Amplicon Right Suffix : _RIGHT
Viral Genome          : MN908947.3
Viral Fasta File      : https://raw.githubusercontent.com/nf-core/test-datasets/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.fna.gz
Viral GFF             : https://raw.githubusercontent.com/nf-core/test-datasets/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz
Fastp Mean Qual       : 30
Fastp Qual Phred      : 30
Fastp Unqual % Limit  : 10
Fastp Min Trim Length : 50
Variant Calling Tools : varscan2,ivar,bcftools
Min Mapped Reads      : 1000
iVar Trim Min Len     : 20
iVar Trim Min Qual    : 20
iVar Trim Window      : 4
Mpileup Depth         : 0
Min Base Quality      : 20
Min Read Depth        : 10
Min Allele Freq       : 0.25
Max Allele Freq       : 0.75
Varscan2 Strand Filter: Yes
Skip Kraken2          : Yes
Skip Assembly         : Yes
Max Resources         : 128.GB memory, 16 cpus, 240.h time per job
Container             : singularity - /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//singularity.dev.961b10463ae1.sif
Output dir            : /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore//results
Publish dir mode      : copy
Launch dir            : /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore
Working dir           : /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work
Script dir            : /home/crtd_bioinf/fabirost/.nextflow/assets/nf-core/viralrecon
User                  : fabirost
Config Profile        : singularity
Jan-29 16:04:45.775 [main] INFO  nextflow.Nextflow - ----------------------------------------------------
Jan-29 16:04:45.814 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_retry` matches label `error_retry` for process with name GUNZIP_FASTA
Jan-29 16:04:45.816 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:45.816 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:45.820 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Jan-29 16:04:45.824 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=28; memory=125.5 GB; capacity=28; pollInterval=100ms; dumpInterval=5m
Jan-29 16:04:46.130 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_retry` matches label `error_retry` for process with name GUNZIP_GFF
Jan-29 16:04:46.132 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.132 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.137 [Actor Thread 3] DEBUG n.util.BlockingThreadExecutorFactory - Thread pool name=FileTransfer; maxThreads=84; maxQueueSize=252; keepAlive=1m
Jan-29 16:04:46.148 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.148 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.148 [FileTransfer-thread-1] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/nf-core/test-datasets/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.fna.gz to work dir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/stage/d4/6f01f2da9b3e9df329929a24dab4e4/GCA_009858895.3_ASM985889v3_genomic.200409.fna.gz
Jan-29 16:04:46.216 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SRA_FASTQ_FTP
Jan-29 16:04:46.217 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_retry` matches label `error_retry` for process with name SRA_FASTQ_FTP
Jan-29 16:04:46.217 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.217 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.227 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SRA_FASTQ_DUMP
Jan-29 16:04:46.227 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_retry` matches label `error_retry` for process with name SRA_FASTQ_DUMP
Jan-29 16:04:46.228 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.228 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.244 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.244 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.249 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name FASTQC
Jan-29 16:04:46.250 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.250 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.255 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name FASTP
Jan-29 16:04:46.255 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.255 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.261 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BOWTIE2_INDEX
Jan-29 16:04:46.261 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.261 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.265 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_low` matches label `process_low` for process with name MAKE_SNPEFF_DB
Jan-29 16:04:46.266 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.266 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.276 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BOWTIE2
Jan-29 16:04:46.277 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.277 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.283 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SORT_BAM
Jan-29 16:04:46.284 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.284 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.292 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name IVAR_TRIM
Jan-29 16:04:46.292 [FileTransfer-thread-2] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/nf-core/test-datasets/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz to work dir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/stage/65/d4783068a1abebd25f22a3dc83edcd/GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz
Jan-29 16:04:46.292 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.292 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.297 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name PICARD_MARKDUPLICATES
Jan-29 16:04:46.298 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.298 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.303 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name PICARD_METRICS
Jan-29 16:04:46.303 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.303 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.307 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.307 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MOSDEPTH_GENOME
Jan-29 16:04:46.308 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.308 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.310 [Task submitter] INFO  nextflow.Session - [02/05e8a9] Submitted process > CHECK_SAMPLESHEET (samples.csv)
Jan-29 16:04:46.314 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MOSDEPTH_AMPLICON
Jan-29 16:04:46.314 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.314 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.321 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MOSDEPTH_AMPLICON_PLOT
Jan-29 16:04:46.321 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.321 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.324 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SAMTOOLS_MPILEUP
Jan-29 16:04:46.325 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.325 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.329 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name VARSCAN2
Jan-29 16:04:46.330 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.330 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.336 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.336 [Task submitter] INFO  nextflow.Session - [0e/cd6472] Submitted process > GUNZIP_FASTA
Jan-29 16:04:46.339 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name VARSCAN2_CONSENSUS
Jan-29 16:04:46.340 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.340 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.346 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name VARSCAN2_SNPEFF
Jan-29 16:04:46.346 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.346 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.351 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name VARSCAN2_QUAST
Jan-29 16:04:46.351 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.352 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.358 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name IVAR_VARIANTS
Jan-29 16:04:46.358 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.358 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.364 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name IVAR_CONSENSUS
Jan-29 16:04:46.364 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.364 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.368 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name IVAR_SNPEFF
Jan-29 16:04:46.368 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.368 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.372 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name IVAR_QUAST
Jan-29 16:04:46.373 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.373 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.376 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BCFTOOLS_VARIANTS
Jan-29 16:04:46.376 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.376 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.381 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BCFTOOLS_CONSENSUS
Jan-29 16:04:46.381 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.381 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.384 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BCFTOOLS_SNPEFF
Jan-29 16:04:46.385 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.385 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.388 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BCFTOOLS_QUAST
Jan-29 16:04:46.388 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.388 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.393 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name BCFTOOLS_ISEC
Jan-29 16:04:46.393 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name BCFTOOLS_ISEC
Jan-29 16:04:46.393 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.393 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.396 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MAKE_BLAST_DB
Jan-29 16:04:46.396 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.396 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.398 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.400 [Task submitter] INFO  nextflow.Session - [e1/00bc46] Submitted process > GUNZIP_GFF
Jan-29 16:04:46.401 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_high` matches label `process_high` for process with name SPADES
Jan-29 16:04:46.401 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES
Jan-29 16:04:46.402 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.402 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.405 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SPADES_BLAST
Jan-29 16:04:46.405 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES_BLAST
Jan-29 16:04:46.406 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.406 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.409 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SPADES_ABACAS
Jan-29 16:04:46.409 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES_ABACAS
Jan-29 16:04:46.409 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.409 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.413 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SPADES_PLASMIDID
Jan-29 16:04:46.413 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES_PLASMIDID
Jan-29 16:04:46.413 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.413 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.418 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SPADES_QUAST
Jan-29 16:04:46.418 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES_QUAST
Jan-29 16:04:46.418 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.418 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.423 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SPADES_VG
Jan-29 16:04:46.423 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES_VG
Jan-29 16:04:46.423 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.423 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.426 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name SPADES_SNPEFF
Jan-29 16:04:46.427 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name SPADES_SNPEFF
Jan-29 16:04:46.427 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.427 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.430 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_high` matches label `process_high` for process with name METASPADES
Jan-29 16:04:46.431 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES
Jan-29 16:04:46.431 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.431 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.434 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name METASPADES_BLAST
Jan-29 16:04:46.434 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES_BLAST
Jan-29 16:04:46.434 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.434 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.438 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name METASPADES_ABACAS
Jan-29 16:04:46.438 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES_ABACAS
Jan-29 16:04:46.438 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.438 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.442 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name METASPADES_PLASMIDID
Jan-29 16:04:46.442 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES_PLASMIDID
Jan-29 16:04:46.443 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.443 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.446 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name METASPADES_QUAST
Jan-29 16:04:46.446 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES_QUAST
Jan-29 16:04:46.447 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.447 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.451 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name METASPADES_VG
Jan-29 16:04:46.451 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES_VG
Jan-29 16:04:46.451 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.451 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.454 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name METASPADES_SNPEFF
Jan-29 16:04:46.455 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name METASPADES_SNPEFF
Jan-29 16:04:46.455 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.455 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.458 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_high` matches label `process_high` for process with name UNICYCLER
Jan-29 16:04:46.458 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER
Jan-29 16:04:46.458 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.458 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.462 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name UNICYCLER_BLAST
Jan-29 16:04:46.462 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER_BLAST
Jan-29 16:04:46.463 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.463 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.467 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name UNICYCLER_ABACAS
Jan-29 16:04:46.468 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER_ABACAS
Jan-29 16:04:46.468 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.468 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.472 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name UNICYCLER_PLASMIDID
Jan-29 16:04:46.473 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER_PLASMIDID
Jan-29 16:04:46.473 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.473 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.476 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name UNICYCLER_QUAST
Jan-29 16:04:46.477 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER_QUAST
Jan-29 16:04:46.477 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.477 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.481 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name UNICYCLER_VG
Jan-29 16:04:46.481 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER_VG
Jan-29 16:04:46.481 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.481 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.485 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name UNICYCLER_SNPEFF
Jan-29 16:04:46.485 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name UNICYCLER_SNPEFF
Jan-29 16:04:46.485 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.485 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.489 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_high` matches label `process_high` for process with name MINIA
Jan-29 16:04:46.489 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA
Jan-29 16:04:46.489 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.489 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.493 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MINIA_BLAST
Jan-29 16:04:46.493 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA_BLAST
Jan-29 16:04:46.493 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.493 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.496 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MINIA_ABACAS
Jan-29 16:04:46.496 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA_ABACAS
Jan-29 16:04:46.496 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.496 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.500 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MINIA_PLASMIDID
Jan-29 16:04:46.500 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA_PLASMIDID
Jan-29 16:04:46.500 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.500 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.503 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MINIA_QUAST
Jan-29 16:04:46.504 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA_QUAST
Jan-29 16:04:46.504 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.504 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.507 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MINIA_VG
Jan-29 16:04:46.507 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA_VG
Jan-29 16:04:46.508 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.508 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.511 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MINIA_SNPEFF
Jan-29 16:04:46.511 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:error_ignore` matches label `error_ignore` for process with name MINIA_SNPEFF
Jan-29 16:04:46.511 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.511 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.524 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:get_software_versions` matches process get_software_versions
Jan-29 16:04:46.524 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.524 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.555 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.555 [Task submitter] INFO  nextflow.Session - [99/ab7350] Submitted process > get_software_versions
Jan-29 16:04:46.586 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:process_medium` matches label `process_medium` for process with name MULTIQC
Jan-29 16:04:46.587 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.587 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.597 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jan-29 16:04:46.598 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jan-29 16:04:46.602 [main] DEBUG nextflow.script.ScriptRunner - > Await termination
Jan-29 16:04:46.602 [main] DEBUG nextflow.Session - Session await
Jan-29 16:04:46.611 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.613 [Task submitter] INFO  nextflow.Session - [3f/dfd1ac] Submitted process > output_documentation
Jan-29 16:04:46.702 [Actor Thread 4] DEBUG nextflow.sort.BigSort - Sort completed -- entries: 1; slices: 1; internal sort time: 0.001 s; external sort time: 0.011 s; total time: 0.012 s
Jan-29 16:04:46.713 [Actor Thread 4] DEBUG nextflow.file.FileCollector - Saved collect-files list to: /tmp/8318f1e9fe9f83c0c4c05c6503d98304.collect-file
Jan-29 16:04:46.719 [Actor Thread 4] DEBUG nextflow.file.FileCollector - Deleting file collector temp dir: /tmp/nxf-14007747180325198031
Jan-29 16:04:46.776 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: GUNZIP_FASTA; status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/0e/cd64726e576234d6afd243e60470a4]
Jan-29 16:04:46.813 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.813 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: GUNZIP_GFF; status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/e1/00bc46cbdd23a0a62eeddc73ee8b94]
Jan-29 16:04:46.813 [Task submitter] INFO  nextflow.Session - [2b/435f49] Submitted process > BOWTIE2_INDEX (GCA_009858895.3_ASM985889v3_genomic.200409.fna)
Jan-29 16:04:46.829 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:46.829 [Task submitter] INFO  nextflow.Session - [22/49fc18] Submitted process > MAKE_SNPEFF_DB (GCA_009858895.3_ASM985889v3_genomic.200409.fa)
Jan-29 16:04:46.854 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 3; name: CHECK_SAMPLESHEET (samples.csv); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/02/05e8a99959b4753cc597633450f804]
Jan-29 16:04:46.856 [Task monitor] DEBUG nextflow.processor.TaskProcessor - Process `CHECK_SAMPLESHEET (samples.csv)` is unable to find [UnixPath]: `/home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/02/05e8a99959b4753cc597633450f804/sra_run_info.tsv` (pattern: `sra_run_info.tsv`)
Jan-29 16:04:46.942 [Task monitor] DEBUG nextflow.processor.TaskProcessor - Process CHECK_SAMPLESHEET > Skipping output binding because one or more optional files are missing: fileoutparam<1>
Jan-29 16:04:47.261 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.261 [Task submitter] INFO  nextflow.Session - [9d/c9edcd] Submitted process > CAT_FASTQ (L66086_EdenPool_Covid-DD-VIR-00218)
Jan-29 16:04:47.368 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.368 [Task submitter] INFO  nextflow.Session - [c9/38ae42] Submitted process > CAT_FASTQ (L66089_EdenPool_Covid-DD-VIR-00225)
Jan-29 16:04:47.372 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.372 [Task submitter] INFO  nextflow.Session - [23/47d98a] Submitted process > CAT_FASTQ (L66099_EdenPool_Covid-DD-VIR-00243)
Jan-29 16:04:47.377 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.378 [Task submitter] INFO  nextflow.Session - [b6/c5cc2e] Submitted process > CAT_FASTQ (L66075_EdenPool_Covid-DD-VIR-00203)
Jan-29 16:04:47.382 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.383 [Task submitter] INFO  nextflow.Session - [10/4619d2] Submitted process > CAT_FASTQ (L66084_EdenPool_Covid-DD-VIR-00213)
Jan-29 16:04:47.388 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.389 [Task submitter] INFO  nextflow.Session - [7b/ee6817] Submitted process > CAT_FASTQ (L66080_EdenPool_Covid-DD-VIR-00209)
Jan-29 16:04:47.394 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.394 [Task submitter] INFO  nextflow.Session - [53/5de058] Submitted process > CAT_FASTQ (L66083_EdenPool_Covid-DD-VIR-00212)
Jan-29 16:04:47.481 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 7; name: BOWTIE2_INDEX (GCA_009858895.3_ASM985889v3_genomic.200409.fna); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/2b/435f49b16c5b5dcc5d9a8ca1dfd157]
Jan-29 16:04:47.488 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.489 [Task submitter] INFO  nextflow.Session - [dd/794e12] Submitted process > CAT_FASTQ (L66093_EdenPool_Covid-DD-VIR-00235)
Jan-29 16:04:47.495 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.495 [Task submitter] INFO  nextflow.Session - [d2/0ab361] Submitted process > CAT_FASTQ (L66091_EdenPool_Covid-DD-VIR-00229)
Jan-29 16:04:47.498 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.499 [Task submitter] INFO  nextflow.Session - [5b/808949] Submitted process > CAT_FASTQ (L66082_EdenPool_Covid-DD-VIR-00211)
Jan-29 16:04:47.503 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.505 [Task submitter] INFO  nextflow.Session - [0f/a9d31b] Submitted process > CAT_FASTQ (L66100_EdenPool_Covid-DD-VIR-00244)
Jan-29 16:04:47.509 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.509 [Task submitter] INFO  nextflow.Session - [91/da743d] Submitted process > CAT_FASTQ (L66095_EdenPool_Covid-DD-VIR-00237)
Jan-29 16:04:47.513 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.513 [Task submitter] INFO  nextflow.Session - [81/4f7d3a] Submitted process > CAT_FASTQ (L66078_EdenPool_Covid-DD-VIR-00207)
Jan-29 16:04:47.578 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 5; name: output_documentation; status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/3f/dfd1ac62f7ef2fb814e8b064d80f69]
Jan-29 16:04:47.582 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.583 [Task submitter] INFO  nextflow.Session - [fc/9de7d1] Submitted process > CAT_FASTQ (L66088_EdenPool_Covid-DD-VIR-00221)
Jan-29 16:04:47.628 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 21; name: CAT_FASTQ (L66086_EdenPool_Covid-DD-VIR-00218); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9d/c9edcdd2549682ed2c4b8e90962be0]
Jan-29 16:04:47.633 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:47.633 [Task submitter] INFO  nextflow.Session - [35/b68bc5] Submitted process > CAT_FASTQ (L66090_EdenPool_Covid-DD-VIR-00226)
Jan-29 16:04:48.048 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 34; name: CAT_FASTQ (L66099_EdenPool_Covid-DD-VIR-00243); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/23/47d98a6a017a12cec1f39351ec4f4e]
Jan-29 16:04:48.052 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.052 [Task submitter] INFO  nextflow.Session - [21/f7ef2c] Submitted process > CAT_FASTQ (L66094_EdenPool_Covid-DD-VIR-00236)
Jan-29 16:04:48.089 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 15; name: CAT_FASTQ (L66080_EdenPool_Covid-DD-VIR-00209); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/7b/ee681796965d59b6601a420e6b9705]
Jan-29 16:04:48.093 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.101 [Task submitter] INFO  nextflow.Session - [8c/eb1e12] Submitted process > CAT_FASTQ (L66097_EdenPool_Covid-DD-VIR-00240)
Jan-29 16:04:48.169 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 24; name: CAT_FASTQ (L66089_EdenPool_Covid-DD-VIR-00225); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/c9/38ae42802f24319657933d43c11a88]
Jan-29 16:04:48.172 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.173 [Task submitter] INFO  nextflow.Session - [15/592959] Submitted process > CAT_FASTQ (L66077_EdenPool_Covid-DD-VIR-00206)
Jan-29 16:04:48.175 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 10; name: CAT_FASTQ (L66075_EdenPool_Covid-DD-VIR-00203); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b6/c5cc2eaa84bde00df51f2b9defdaaf]
Jan-29 16:04:48.180 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.180 [Task submitter] INFO  nextflow.Session - [96/91d0cf] Submitted process > CAT_FASTQ (L66076_EdenPool_Covid-DD-VIR-00205)
Jan-29 16:04:48.209 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 20; name: CAT_FASTQ (L66084_EdenPool_Covid-DD-VIR-00213); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/10/4619d25993a419d6bf78914274350b]
Jan-29 16:04:48.216 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 18; name: CAT_FASTQ (L66083_EdenPool_Covid-DD-VIR-00212); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/53/5de058b8baff74a31723f581bac17f]
Jan-29 16:04:48.217 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.218 [Task submitter] INFO  nextflow.Session - [9a/86c686] Submitted process > CAT_FASTQ (L66098_EdenPool_Covid-DD-VIR-00241)
Jan-29 16:04:48.227 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.227 [Task submitter] INFO  nextflow.Session - [9c/76507b] Submitted process > CAT_FASTQ (L66079_EdenPool_Covid-DD-VIR-00208)
Jan-29 16:04:48.329 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 28; name: CAT_FASTQ (L66093_EdenPool_Covid-DD-VIR-00235); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/dd/794e1280831b70961b7616298e8de4]
Jan-29 16:04:48.332 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.332 [Task submitter] INFO  nextflow.Session - [38/1fbe20] Submitted process > CAT_FASTQ (L66081_EdenPool_Covid-DD-VIR-00210)
Jan-29 16:04:48.417 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 26; name: CAT_FASTQ (L66091_EdenPool_Covid-DD-VIR-00229); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/d2/0ab3613df6a009215572ea4b8bf876]
Jan-29 16:04:48.423 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.424 [Task submitter] INFO  nextflow.Session - [e5/7db6cd] Submitted process > CAT_FASTQ (L66092_EdenPool_Covid-DD-VIR-00231)
Jan-29 16:04:48.516 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 17; name: CAT_FASTQ (L66082_EdenPool_Covid-DD-VIR-00211); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/5b/80894983db70c8227739ee8f242635]
Jan-29 16:04:48.519 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.519 [Task submitter] INFO  nextflow.Session - [81/23ed74] Submitted process > CAT_FASTQ (L66074_EdenPool_Covid-DD-VIR-00201)
Jan-29 16:04:48.730 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 30; name: CAT_FASTQ (L66095_EdenPool_Covid-DD-VIR-00237); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/91/da743ddc120f3302595b241ec606a4]
Jan-29 16:04:48.732 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.732 [Task submitter] INFO  nextflow.Session - [a4/5d0aa3] Submitted process > CAT_FASTQ (L66101_EdenPool_Covid-DD-VIR-00245)
Jan-29 16:04:48.806 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 35; name: CAT_FASTQ (L66100_EdenPool_Covid-DD-VIR-00244); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/0f/a9d31b11a58ba6896acfcfbf2083d8]
Jan-29 16:04:48.811 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.811 [Task submitter] INFO  nextflow.Session - [b0/e41d54] Submitted process > CAT_FASTQ (L66087_EdenPool_Covid-DD-VIR-00219)
Jan-29 16:04:48.814 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 13; name: CAT_FASTQ (L66078_EdenPool_Covid-DD-VIR-00207); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/81/4f7d3ab01d35df8434dede990722c9]
Jan-29 16:04:48.820 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.820 [Task submitter] INFO  nextflow.Session - [24/b4bee7] Submitted process > CAT_FASTQ (L66085_EdenPool_Covid-DD-VIR-00215)
Jan-29 16:04:48.824 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 25; name: CAT_FASTQ (L66090_EdenPool_Covid-DD-VIR-00226); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/35/b68bc5ca082cac0a2dfeb834217ea3]
Jan-29 16:04:48.828 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.828 [Task submitter] INFO  nextflow.Session - [19/8f7b2e] Submitted process > CAT_FASTQ (L66144_EdenPool_cDNA_S41_20201227-787782_01_A06)
Jan-29 16:04:48.832 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 29; name: CAT_FASTQ (L66094_EdenPool_Covid-DD-VIR-00236); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/21/f7ef2cc87ae61f24496d13329203b5]
Jan-29 16:04:48.839 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.839 [Task submitter] INFO  nextflow.Session - [97/1600e2] Submitted process > CAT_FASTQ (L66145_EdenPool_cDNA_S42_20201227-787343_01_B06)
Jan-29 16:04:48.906 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 8; name: MAKE_SNPEFF_DB (GCA_009858895.3_ASM985889v3_genomic.200409.fa); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/22/49fc18a973328f28a8ba8c964c0f62]
Jan-29 16:04:48.912 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 22; name: CAT_FASTQ (L66088_EdenPool_Covid-DD-VIR-00221); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/fc/9de7d19fa9899b1018ed7f9c130d08]
Jan-29 16:04:48.913 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.914 [Task submitter] INFO  nextflow.Session - [ac/a64d0e] Submitted process > CAT_FASTQ (L66096_EdenPool_Covid-DD-VIR-00238)
Jan-29 16:04:48.921 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.921 [Task submitter] INFO  nextflow.Session - [e2/db0d35] Submitted process > CAT_FASTQ (L66102_EdenPool_Covid-DD-VIR-00246)
Jan-29 16:04:48.927 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.927 [Task submitter] INFO  nextflow.Session - [98/f973c4] Submitted process > CAT_FASTQ (L66104_EdenPool_cDNA_S1_20210108-799934_01_A01)
Jan-29 16:04:48.969 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 32; name: CAT_FASTQ (L66097_EdenPool_Covid-DD-VIR-00240); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/8c/eb1e125072237010566b835ef69cf8]
Jan-29 16:04:48.975 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:48.975 [Task submitter] INFO  nextflow.Session - [3a/4085ea] Submitted process > CAT_FASTQ (L66105_EdenPool_cDNA_S2_20210106-797126_01_B01)
Jan-29 16:04:49.170 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 12; name: CAT_FASTQ (L66077_EdenPool_Covid-DD-VIR-00206); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/15/592959d487540f1fcfc692d9df55e9]
Jan-29 16:04:49.174 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.174 [Task submitter] INFO  nextflow.Session - [38/92454e] Submitted process > CAT_FASTQ (L66106_EdenPool_cDNA_S3_20210104-793515_01_C01)
Jan-29 16:04:49.181 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 11; name: CAT_FASTQ (L66076_EdenPool_Covid-DD-VIR-00205); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/96/91d0cf4dde4d86b574f632b32d9d16]
Jan-29 16:04:49.185 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.185 [Task submitter] INFO  nextflow.Session - [13/473b1a] Submitted process > CAT_FASTQ (L66107_EdenPool_cDNA_S4_20210110-721656_01_D01)
Jan-29 16:04:49.308 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 14; name: CAT_FASTQ (L66079_EdenPool_Covid-DD-VIR-00208); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9c/76507b682b4350379f34c3fed7195d]
Jan-29 16:04:49.311 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.311 [Task submitter] INFO  nextflow.Session - [c9/699aeb] Submitted process > CAT_FASTQ (L66108_EdenPool_cDNA_S5_20210109-721159_01_E01)
Jan-29 16:04:49.341 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 33; name: CAT_FASTQ (L66098_EdenPool_Covid-DD-VIR-00241); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9a/86c6865743e7dc7b5f3ea393164f62]
Jan-29 16:04:49.343 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.343 [Task submitter] INFO  nextflow.Session - [6c/486b0a] Submitted process > CAT_FASTQ (L66109_EdenPool_cDNA_S6_20210108-720624_01_F01)
Jan-29 16:04:49.349 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 16; name: CAT_FASTQ (L66081_EdenPool_Covid-DD-VIR-00210); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/38/1fbe2088e24fcf2d8d71bcb4216027]
Jan-29 16:04:49.356 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.356 [Task submitter] INFO  nextflow.Session - [ee/e1ae84] Submitted process > CAT_FASTQ (L66110_EdenPool_cDNA_S7_20210108-720770_01_G01)
Jan-29 16:04:49.523 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 27; name: CAT_FASTQ (L66092_EdenPool_Covid-DD-VIR-00231); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/e5/7db6cd3ae948f35c8426a4892d9b19]
Jan-29 16:04:49.526 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.526 [Task submitter] INFO  nextflow.Session - [6c/67207e] Submitted process > CAT_FASTQ (L66111_EdenPool_cDNA_S8_20210108-720048_01_H01)
Jan-29 16:04:49.530 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 9; name: CAT_FASTQ (L66074_EdenPool_Covid-DD-VIR-00201); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/81/23ed7411e836ceb3f47e131a72f506]
Jan-29 16:04:49.538 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 36; name: CAT_FASTQ (L66101_EdenPool_Covid-DD-VIR-00245); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/a4/5d0aa31e8e2a2a1c41d55d325eb433]
Jan-29 16:04:49.541 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.541 [Task submitter] INFO  nextflow.Session - [4f/5893ff] Submitted process > CAT_FASTQ (L66112_EdenPool_cDNA_S9_20210108-720344_01_A02)
Jan-29 16:04:49.545 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.545 [Task submitter] INFO  nextflow.Session - [09/68b04a] Submitted process > CAT_FASTQ (L66113_EdenPool_cDNA_S10_20210107-798696_01_B02)
Jan-29 16:04:49.597 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 23; name: CAT_FASTQ (L66087_EdenPool_Covid-DD-VIR-00219); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b0/e41d544e0ae93b3b1a13948a0fa86c]
Jan-29 16:04:49.600 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.600 [Task submitter] INFO  nextflow.Session - [03/d660b8] Submitted process > CAT_FASTQ (L66114_EdenPool_cDNA_S11_20210106-797945_01_C02)
Jan-29 16:04:49.684 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 79; name: CAT_FASTQ (L66145_EdenPool_cDNA_S42_20201227-787343_01_B06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/97/1600e2676fd9a3bd5bd5c78bf8e2ca]
Jan-29 16:04:49.690 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.691 [Task submitter] INFO  nextflow.Session - [41/56446c] Submitted process > CAT_FASTQ (L66115_EdenPool_cDNA_S12_20210106-797963_01_D02)
Jan-29 16:04:49.764 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 19; name: CAT_FASTQ (L66085_EdenPool_Covid-DD-VIR-00215); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/24/b4bee76330bb6c1266aec7a46cb40d]
Jan-29 16:04:49.768 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.769 [Task submitter] INFO  nextflow.Session - [fe/7bfe33] Submitted process > CAT_FASTQ (L66116_EdenPool_cDNA_S13_20210108-720393_01_E02)
Jan-29 16:04:49.816 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 78; name: CAT_FASTQ (L66144_EdenPool_cDNA_S41_20201227-787782_01_A06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/19/8f7b2e585d49d0d23342cc1da5ad71]
Jan-29 16:04:49.820 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.820 [Task submitter] INFO  nextflow.Session - [80/b9b465] Submitted process > CAT_FASTQ (L66117_EdenPool_cDNA_S14_20210104-795197_01_F02)
Jan-29 16:04:49.821 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 31; name: CAT_FASTQ (L66096_EdenPool_Covid-DD-VIR-00238); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/ac/a64d0e124058f4106ca369069c6f3d]
Jan-29 16:04:49.828 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.828 [Task submitter] INFO  nextflow.Session - [2e/e8da82] Submitted process > CAT_FASTQ (L66118_EdenPool_cDNA_S15_20210104-794211_01_G02)
Jan-29 16:04:49.861 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 37; name: CAT_FASTQ (L66102_EdenPool_Covid-DD-VIR-00246); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/e2/db0d35b8d6a044b4960e78d7ee7d77]
Jan-29 16:04:49.865 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.865 [Task submitter] INFO  nextflow.Session - [fa/684ec6] Submitted process > CAT_FASTQ (L66119_EdenPool_cDNA_S16_20210104-794508_01_H02)
Jan-29 16:04:49.976 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 38; name: CAT_FASTQ (L66104_EdenPool_cDNA_S1_20210108-799934_01_A01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/98/f973c416041bf56ec445e28726a069]
Jan-29 16:04:49.979 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:49.979 [Task submitter] INFO  nextflow.Session - [07/869e09] Submitted process > CAT_FASTQ (L66120_EdenPool_cDNA_S17_20210105-796034_01_A03)
Jan-29 16:04:50.076 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 39; name: CAT_FASTQ (L66105_EdenPool_cDNA_S2_20210106-797126_01_B01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/3a/4085ea0836ae79dfe1c111c2e8d755]
Jan-29 16:04:50.080 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.080 [Task submitter] INFO  nextflow.Session - [3f/d866ed] Submitted process > CAT_FASTQ (L66121_EdenPool_cDNA_S18_20210105-796550_01_B03)
Jan-29 16:04:50.120 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 40; name: CAT_FASTQ (L66106_EdenPool_cDNA_S3_20210104-793515_01_C01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/38/92454ea4b5231b19b684b3921d9c9b]
Jan-29 16:04:50.123 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.123 [Task submitter] INFO  nextflow.Session - [6c/d366b6] Submitted process > CAT_FASTQ (L66122_EdenPool_cDNA_S19_20210106-797851_01_C03)
Jan-29 16:04:50.126 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 41; name: CAT_FASTQ (L66107_EdenPool_cDNA_S4_20210110-721656_01_D01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/13/473b1aed59cb54dc087c438fcb6dfb]
Jan-29 16:04:50.128 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.128 [Task submitter] INFO  nextflow.Session - [14/24e7bd] Submitted process > CAT_FASTQ (L66123_EdenPool_cDNA_S20_20210103-793929_01_D03)
Jan-29 16:04:50.164 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 43; name: CAT_FASTQ (L66109_EdenPool_cDNA_S6_20210108-720624_01_F01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/6c/486b0aff6c030480268baaf8fe9f5f]
Jan-29 16:04:50.166 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.167 [Task submitter] INFO  nextflow.Session - [c0/43a774] Submitted process > CAT_FASTQ (L66124_EdenPool_cDNA_S21_20210103-793393_01_E03)
Jan-29 16:04:50.197 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 42; name: CAT_FASTQ (L66108_EdenPool_cDNA_S5_20210109-721159_01_E01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/c9/699aeb8603c2812b655bd57ff95c49]
Jan-29 16:04:50.200 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.200 [Task submitter] INFO  nextflow.Session - [9d/5e0847] Submitted process > CAT_FASTQ (L66125_EdenPool_cDNA_S22_20210103-793390_01_F03)
Jan-29 16:04:50.337 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 44; name: CAT_FASTQ (L66110_EdenPool_cDNA_S7_20210108-720770_01_G01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/ee/e1ae8489bd48a0e79b3e2843e15c91]
Jan-29 16:04:50.341 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.341 [Task submitter] INFO  nextflow.Session - [b1/be8b52] Submitted process > CAT_FASTQ (L66126_EdenPool_cDNA_S23_20210103-793439_01_G03)
Jan-29 16:04:50.452 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 46; name: CAT_FASTQ (L66112_EdenPool_cDNA_S9_20210108-720344_01_A02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/4f/5893ff34ca2604897a89b20918db9c]
Jan-29 16:04:50.454 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.454 [Task submitter] INFO  nextflow.Session - [17/071bea] Submitted process > CAT_FASTQ (L66127_EdenPool_cDNA_S24_20210102-792782_01_H03)
Jan-29 16:04:50.484 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 45; name: CAT_FASTQ (L66111_EdenPool_cDNA_S8_20210108-720048_01_H01); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/6c/67207e44eac9f050eb8e70be1f6054]
Jan-29 16:04:50.487 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.487 [Task submitter] INFO  nextflow.Session - [b2/91340c] Submitted process > CAT_FASTQ (L66128_EdenPool_cDNA_S25_20210101-792223_01_A04)
Jan-29 16:04:50.580 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 47; name: CAT_FASTQ (L66113_EdenPool_cDNA_S10_20210107-798696_01_B02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/09/68b04ae1b388bc18c01a823327eaed]
Jan-29 16:04:50.584 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.585 [Task submitter] INFO  nextflow.Session - [76/c8f1e9] Submitted process > CAT_FASTQ (L66129_EdenPool_cDNA_S26_20201230-791215_01_B04)
Jan-29 16:04:50.586 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 48; name: CAT_FASTQ (L66114_EdenPool_cDNA_S11_20210106-797945_01_C02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/03/d660b80221c6dcbe01ed75b36bf501]
Jan-29 16:04:50.590 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.590 [Task submitter] INFO  nextflow.Session - [bb/a4b504] Submitted process > CAT_FASTQ (L66130_EdenPool_cDNA_S27_20201230-790456_01_C04)
Jan-29 16:04:50.608 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 49; name: CAT_FASTQ (L66115_EdenPool_cDNA_S12_20210106-797963_01_D02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/41/56446c28275b4e533aa15d00c3b587]
Jan-29 16:04:50.611 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.611 [Task submitter] INFO  nextflow.Session - [06/777eeb] Submitted process > CAT_FASTQ (L66131_EdenPool_cDNA_S28_20201230-790289_01_D04)
Jan-29 16:04:50.770 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 52; name: CAT_FASTQ (L66118_EdenPool_cDNA_S15_20210104-794211_01_G02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/2e/e8da822dda73c481c282b570bd1472]
Jan-29 16:04:50.773 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.773 [Task submitter] INFO  nextflow.Session - [09/d9e151] Submitted process > CAT_FASTQ (L66132_EdenPool_cDNA_S29_20201230-790328_01_E04)
Jan-29 16:04:50.804 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 50; name: CAT_FASTQ (L66116_EdenPool_cDNA_S13_20210108-720393_01_E02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/fe/7bfe333ce9dc422811ebb230642f8d]
Jan-29 16:04:50.808 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.808 [Task submitter] INFO  nextflow.Session - [34/fb6bae] Submitted process > CAT_FASTQ (L66133_EdenPool_cDNA_S30_20201230-790469_01_F04)
Jan-29 16:04:50.810 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 53; name: CAT_FASTQ (L66119_EdenPool_cDNA_S16_20210104-794508_01_H02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/fa/684ec6e9967ecdc9c8842ad4d7d37a]
Jan-29 16:04:50.816 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.816 [Task submitter] INFO  nextflow.Session - [72/0b7b4a] Submitted process > CAT_FASTQ (L66134_EdenPool_cDNA_S31_20201230-790388_01_G04)
Jan-29 16:04:50.968 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 51; name: CAT_FASTQ (L66117_EdenPool_cDNA_S14_20210104-795197_01_F02); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/80/b9b46584d249056903b64f468881ce]
Jan-29 16:04:50.972 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:50.972 [Task submitter] INFO  nextflow.Session - [f4/662279] Submitted process > CAT_FASTQ (L66135_EdenPool_cDNA_S32_20201230-790275_01_H04)
Jan-29 16:04:50.996 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 54; name: CAT_FASTQ (L66120_EdenPool_cDNA_S17_20210105-796034_01_A03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/07/869e091f43a5b4c0bbba297fe0eb0f]
Jan-29 16:04:51.001 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.001 [Task submitter] INFO  nextflow.Session - [a0/7746cd] Submitted process > CAT_FASTQ (L66136_EdenPool_cDNA_S33_20201230-791165_01_A05)
Jan-29 16:04:51.121 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 55; name: CAT_FASTQ (L66121_EdenPool_cDNA_S18_20210105-796550_01_B03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/3f/d866ed926d80550ae0e50ea5eec4fe]
Jan-29 16:04:51.125 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.125 [Task submitter] INFO  nextflow.Session - [d1/43fc04] Submitted process > CAT_FASTQ (L66137_EdenPool_cDNA_S34_20201229-789657_01_B05)
Jan-29 16:04:51.288 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 56; name: CAT_FASTQ (L66122_EdenPool_cDNA_S19_20210106-797851_01_C03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/6c/d366b6ff4aca91634251e9d5b294cb]
Jan-29 16:04:51.291 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.291 [Task submitter] INFO  nextflow.Session - [3c/d49ad1] Submitted process > CAT_FASTQ (L66138_EdenPool_cDNA_S35_20201228-788665_01_C05)
Jan-29 16:04:51.344 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 58; name: CAT_FASTQ (L66124_EdenPool_cDNA_S21_20210103-793393_01_E03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/c0/43a774ac84a96f18f39f465c19749e]
Jan-29 16:04:51.346 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.346 [Task submitter] INFO  nextflow.Session - [e1/b63762] Submitted process > CAT_FASTQ (L66139_EdenPool_cDNA_S36_20201228-788797_01_D05)
Jan-29 16:04:51.388 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 57; name: CAT_FASTQ (L66123_EdenPool_cDNA_S20_20210103-793929_01_D03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/14/24e7bdb4a1991f4a6bff51aa8edc0c]
Jan-29 16:04:51.390 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.390 [Task submitter] INFO  nextflow.Session - [12/424e0e] Submitted process > CAT_FASTQ (L66140_EdenPool_cDNA_S37_20201228-788712_01_E05)
Jan-29 16:04:51.421 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 59; name: CAT_FASTQ (L66125_EdenPool_cDNA_S22_20210103-793390_01_F03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9d/5e08477bbf93045cdfa858ee58bed9]
Jan-29 16:04:51.423 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.423 [Task submitter] INFO  nextflow.Session - [4a/5590a4] Submitted process > CAT_FASTQ (L66141_EdenPool_cDNA_S38_20201228-788358_01_F05)
Jan-29 16:04:51.500 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 60; name: CAT_FASTQ (L66126_EdenPool_cDNA_S23_20210103-793439_01_G03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b1/be8b52e7592f8c89c2f47f97c0b1c6]
Jan-29 16:04:51.505 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.505 [Task submitter] INFO  nextflow.Session - [ac/90e40a] Submitted process > CAT_FASTQ (L66142_EdenPool_cDNA_S39_20201228-788063_01_G05)
Jan-29 16:04:51.529 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 63; name: CAT_FASTQ (L66129_EdenPool_cDNA_S26_20201230-791215_01_B04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/76/c8f1e96eacc74e74a336836b7b5e72]
Jan-29 16:04:51.533 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.533 [Task submitter] INFO  nextflow.Session - [4d/c43fd3] Submitted process > CAT_FASTQ (L66143_EdenPool_cDNA_S40_20201228-787781_01_H05)
Jan-29 16:04:51.612 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 61; name: CAT_FASTQ (L66127_EdenPool_cDNA_S24_20210102-792782_01_H03); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/17/071beac07e8ed046765cdfac48ec11]
Jan-29 16:04:51.614 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.614 [Task submitter] INFO  nextflow.Session - [79/3c3b41] Submitted process > CAT_FASTQ (L66146_EdenPool_cDNA_S43_20201227-787460_01_C06)
Jan-29 16:04:51.618 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 62; name: CAT_FASTQ (L66128_EdenPool_cDNA_S25_20210101-792223_01_A04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b2/91340cba5bc697ecf038adcf64c94f]
Jan-29 16:04:51.625 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.625 [Task submitter] INFO  nextflow.Session - [ea/13c5cd] Submitted process > CAT_FASTQ (L66147_EdenPool_cDNA_S44_20201226-787053_01_D06)
Jan-29 16:04:51.712 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 64; name: CAT_FASTQ (L66130_EdenPool_cDNA_S27_20201230-790456_01_C04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/bb/a4b50431fd7e3b4495b3dc4484ff2d]
Jan-29 16:04:51.715 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.715 [Task submitter] INFO  nextflow.Session - [e6/d017db] Submitted process > CAT_FASTQ (L66148_EdenPool_cDNA_S45_20210103-793417_01_E06)
Jan-29 16:04:51.897 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 65; name: CAT_FASTQ (L66131_EdenPool_cDNA_S28_20201230-790289_01_D04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/06/777eebea303557608d93be7ce982fa]
Jan-29 16:04:51.900 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.900 [Task submitter] INFO  nextflow.Session - [9c/1344e9] Submitted process > CAT_FASTQ (L66149_EdenPool_cDNA_S46_20210103-793617_01_F06)
Jan-29 16:04:51.948 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 67; name: CAT_FASTQ (L66133_EdenPool_cDNA_S30_20201230-790469_01_F04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/34/fb6baec0289e0b3725045a248600a9]
Jan-29 16:04:51.950 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:51.950 [Task submitter] INFO  nextflow.Session - [f8/bba5f8] Submitted process > CAT_FASTQ (L66150_EdenPool_cDNA_S47_20210103-793411_01_G06)
Jan-29 16:04:52.061 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 68; name: CAT_FASTQ (L66134_EdenPool_cDNA_S31_20201230-790388_01_G04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/72/0b7b4a90309edcb1c0194e38a8fcc3]
Jan-29 16:04:52.065 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.065 [Task submitter] INFO  nextflow.Session - [d4/cd8a88] Submitted process > CAT_FASTQ (L66151_EdenPool_cDNA_S48_20210103-792272_01_H06)
Jan-29 16:04:52.068 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 69; name: CAT_FASTQ (L66135_EdenPool_cDNA_S32_20201230-790275_01_H04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/f4/662279be13bc1ef173978f609794e5]
Jan-29 16:04:52.073 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.073 [Task submitter] INFO  nextflow.Session - [cf/1f2fc8] Submitted process > CAT_FASTQ (L66152_EdenPool_Covid-DD-VIR-00103)
Jan-29 16:04:52.089 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 4; name: get_software_versions; status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/99/ab7350c18e31255310114459b124bb]
Jan-29 16:04:52.093 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 66; name: CAT_FASTQ (L66132_EdenPool_cDNA_S29_20201230-790328_01_E04); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/09/d9e15114e1459fa14a46ef7fc7eaed]
Jan-29 16:04:52.093 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.093 [Task submitter] INFO  nextflow.Session - [33/aa3b31] Submitted process > CAT_FASTQ (L66153_EdenPool_FH_0152)
Jan-29 16:04:52.098 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 70; name: CAT_FASTQ (L66136_EdenPool_cDNA_S33_20201230-791165_01_A05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/a0/7746cda21070cfeb6fed4e05353473]
Jan-29 16:04:52.098 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.098 [Task submitter] INFO  nextflow.Session - [9f/d91a4c] Submitted process > CAT_FASTQ (L66154_EdenPool_FH_0170)
Jan-29 16:04:52.105 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.105 [Task submitter] INFO  nextflow.Session - [d7/2d078d] Submitted process > CAT_FASTQ (L66155_EdenPool_FH_0455)
Jan-29 16:04:52.253 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 72; name: CAT_FASTQ (L66138_EdenPool_cDNA_S35_20201228-788665_01_C05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/3c/d49ad142687482d29992645cb56a0e]
Jan-29 16:04:52.257 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.257 [Task submitter] INFO  nextflow.Session - [8e/5a9863] Submitted process > CAT_FASTQ (L66156_EdenPool_FH_0769)
Jan-29 16:04:52.337 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 71; name: CAT_FASTQ (L66137_EdenPool_cDNA_S34_20201229-789657_01_B05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/d1/43fc04b80fe00fcfe25cc33dd805b8]
Jan-29 16:04:52.340 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.341 [Task submitter] INFO  nextflow.Session - [75/ac8598] Submitted process > CAT_FASTQ (L66157_EdenPool_FH_0770)
Jan-29 16:04:52.488 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 73; name: CAT_FASTQ (L66139_EdenPool_cDNA_S36_20201228-788797_01_D05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/e1/b63762e4f4dc53e2f9f43ef97424a4]
Jan-29 16:04:52.493 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.494 [Task submitter] INFO  nextflow.Session - [50/474db9] Submitted process > CAT_FASTQ (L66158_EdenPool_FH_0790)
Jan-29 16:04:52.620 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 75; name: CAT_FASTQ (L66141_EdenPool_cDNA_S38_20201228-788358_01_F05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/4a/5590a4395b3018a9c04538ca18c2f9]
Jan-29 16:04:52.625 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.626 [Task submitter] INFO  nextflow.Session - [79/851e6d] Submitted process > CAT_FASTQ (L66159_EdenPool_Covid-DD-VIR-00247)
Jan-29 16:04:52.626 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 76; name: CAT_FASTQ (L66142_EdenPool_cDNA_S39_20201228-788063_01_G05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/ac/90e40a1f35178f1e802356616f0917]
Jan-29 16:04:52.721 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 74; name: CAT_FASTQ (L66140_EdenPool_cDNA_S37_20201228-788712_01_E05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/12/424e0effc8a49be5aac16864a66e3d]
Jan-29 16:04:52.769 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 77; name: CAT_FASTQ (L66143_EdenPool_cDNA_S40_20201228-787781_01_H05); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/4d/c43fd32e0f2f749fd4b01ce15aa6f2]
Jan-29 16:04:52.773 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 80; name: CAT_FASTQ (L66146_EdenPool_cDNA_S43_20201227-787460_01_C06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/79/3c3b4148c68c5dde4a2b9b2d33502f]
Jan-29 16:04:52.845 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 81; name: CAT_FASTQ (L66147_EdenPool_cDNA_S44_20201226-787053_01_D06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/ea/13c5cdd02ca360651d5b6de72820e4]
Jan-29 16:04:52.933 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 82; name: CAT_FASTQ (L66148_EdenPool_cDNA_S45_20210103-793417_01_E06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/e6/d017db51f9a720c6dfc800cbc75314]
Jan-29 16:04:52.936 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:52.936 [Task submitter] INFO  nextflow.Session - [9b/70cee0] Submitted process > FASTQC (L66086_EdenPool_Covid-DD-VIR-00218)
Jan-29 16:04:52.969 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 83; name: CAT_FASTQ (L66149_EdenPool_cDNA_S46_20210103-793617_01_F06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9c/1344e9d6f0cacc0131caa9fcf9e04b]
Jan-29 16:04:53.037 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 84; name: CAT_FASTQ (L66150_EdenPool_cDNA_S47_20210103-793411_01_G06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/f8/bba5f80219b0f124fd0122b89660e9]
Jan-29 16:04:53.060 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 85; name: CAT_FASTQ (L66151_EdenPool_cDNA_S48_20210103-792272_01_H06); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/d4/cd8a88a697a1c1d567219162f70be1]
Jan-29 16:04:53.260 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 86; name: CAT_FASTQ (L66152_EdenPool_Covid-DD-VIR-00103); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/cf/1f2fc85c66414ce28c5eb878f6a2a8]
Jan-29 16:04:53.266 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 87; name: CAT_FASTQ (L66153_EdenPool_FH_0152); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/33/aa3b319dc3166a54fe83826aee3754]
Jan-29 16:04:53.364 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 88; name: CAT_FASTQ (L66154_EdenPool_FH_0170); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9f/d91a4c3783006c6da9fd2b64ba8c03]
Jan-29 16:04:53.366 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:53.366 [Task submitter] INFO  nextflow.Session - [b9/9c83de] Submitted process > FASTP (L66086_EdenPool_Covid-DD-VIR-00218)
Jan-29 16:04:53.448 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 89; name: CAT_FASTQ (L66155_EdenPool_FH_0455); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/d7/2d078d47553332a8028a32e528991e]
Jan-29 16:04:53.455 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 90; name: CAT_FASTQ (L66156_EdenPool_FH_0769); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/8e/5a9863bccaac2d59b67050f59999bb]
Jan-29 16:04:53.493 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 91; name: CAT_FASTQ (L66157_EdenPool_FH_0770); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/75/ac8598497ef7801737fb468b48ff7a]
Jan-29 16:04:53.609 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 92; name: CAT_FASTQ (L66158_EdenPool_FH_0790); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/50/474db92fd3d9b409f02d0aea6b4597]
Jan-29 16:04:53.676 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 93; name: CAT_FASTQ (L66159_EdenPool_Covid-DD-VIR-00247); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/79/851e6dbd68d3e21b855c0de399c578]
Jan-29 16:04:58.277 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 95; name: FASTQC (L66086_EdenPool_Covid-DD-VIR-00218); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/9b/70cee026491c6b3868f42bf7b63f48]
Jan-29 16:04:58.285 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:04:58.285 [Task submitter] INFO  nextflow.Session - [72/7c6b51] Submitted process > FASTQC (L66099_EdenPool_Covid-DD-VIR-00243)
Jan-29 16:05:03.201 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 96; name: FASTQC (L66099_EdenPool_Covid-DD-VIR-00243); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/72/7c6b518ac1f5250300a57eadb16d34]
Jan-29 16:05:03.205 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:03.206 [Task submitter] INFO  nextflow.Session - [41/32b6eb] Submitted process > FASTP (L66099_EdenPool_Covid-DD-VIR-00243)
Jan-29 16:05:05.552 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 94; name: FASTP (L66086_EdenPool_Covid-DD-VIR-00218); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b9/9c83defbd8e71dbf0802bfcb1f8246]
Jan-29 16:05:05.557 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:05.557 [Task submitter] INFO  nextflow.Session - [c9/b3b26f] Submitted process > FASTQC (L66080_EdenPool_Covid-DD-VIR-00209)
Jan-29 16:05:10.393 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 98; name: FASTQC (L66080_EdenPool_Covid-DD-VIR-00209); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/c9/b3b26faee1218913255be20f92783a]
Jan-29 16:05:10.397 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:10.397 [Task submitter] INFO  nextflow.Session - [b0/3bd9ff] Submitted process > FASTP (L66080_EdenPool_Covid-DD-VIR-00209)
Jan-29 16:05:11.357 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 97; name: FASTP (L66099_EdenPool_Covid-DD-VIR-00243); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/41/32b6ebc91a6e9c44e1d2a6227b5294]
Jan-29 16:05:11.361 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:11.361 [Task submitter] INFO  nextflow.Session - [77/15a96a] Submitted process > FASTQC (L66089_EdenPool_Covid-DD-VIR-00225)
Jan-29 16:05:16.309 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 100; name: FASTQC (L66089_EdenPool_Covid-DD-VIR-00225); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/77/15a96a627858e29aa57ed4d737a670]
Jan-29 16:05:16.314 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:16.314 [Task submitter] INFO  nextflow.Session - [b9/73eb29] Submitted process > FASTP (L66089_EdenPool_Covid-DD-VIR-00225)
Jan-29 16:05:18.521 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 99; name: FASTP (L66080_EdenPool_Covid-DD-VIR-00209); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b0/3bd9ffa974be35acb098e64e735915]
Jan-29 16:05:18.526 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:18.526 [Task submitter] INFO  nextflow.Session - [14/139f49] Submitted process > FASTP (L66075_EdenPool_Covid-DD-VIR-00203)
Jan-29 16:05:25.597 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 103; name: FASTP (L66075_EdenPool_Covid-DD-VIR-00203); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/14/139f49a415a39389f105874bdd6ccd]
Jan-29 16:05:25.601 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:25.602 [Task submitter] INFO  nextflow.Session - [15/c9f701] Submitted process > FASTQC (L66075_EdenPool_Covid-DD-VIR-00203)
Jan-29 16:05:26.601 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 101; name: FASTP (L66089_EdenPool_Covid-DD-VIR-00225); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/b9/73eb295f19bd2702d3cba1138d4053]
Jan-29 16:05:26.605 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:26.605 [Task submitter] INFO  nextflow.Session - [c1/94a425] Submitted process > FASTQC (L66084_EdenPool_Covid-DD-VIR-00213)
Jan-29 16:05:31.545 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 102; name: FASTQC (L66075_EdenPool_Covid-DD-VIR-00203); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/15/c9f701f860de8cb4bccaa5f620202e]
Jan-29 16:05:31.549 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:31.549 [Task submitter] INFO  nextflow.Session - [3f/9b4d47] Submitted process > FASTP (L66084_EdenPool_Covid-DD-VIR-00213)
Jan-29 16:05:31.589 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 104; name: FASTQC (L66084_EdenPool_Covid-DD-VIR-00213); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/c1/94a4258145cd345cc8545de512e5d5]
Jan-29 16:05:31.593 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:31.593 [Task submitter] INFO  nextflow.Session - [e4/f1464d] Submitted process > FASTQC (L66083_EdenPool_Covid-DD-VIR-00212)
Jan-29 16:05:35.513 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 106; name: FASTQC (L66083_EdenPool_Covid-DD-VIR-00212); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/e4/f1464d64eeba0abeb39754b6dcb871]
Jan-29 16:05:35.518 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:35.518 [Task submitter] INFO  nextflow.Session - [db/dfa667] Submitted process > FASTP (L66083_EdenPool_Covid-DD-VIR-00212)
Jan-29 16:05:39.618 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 105; name: FASTP (L66084_EdenPool_Covid-DD-VIR-00213); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/3f/9b4d477164f19c68dfde1fdba02f4f]
Jan-29 16:05:39.622 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:39.622 [Task submitter] INFO  nextflow.Session - [7d/08c5e8] Submitted process > FASTP (L66093_EdenPool_Covid-DD-VIR-00235)
Jan-29 16:05:45.580 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 107; name: FASTP (L66083_EdenPool_Covid-DD-VIR-00212); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/db/dfa667a5de08f25b485aed706c4341]
Jan-29 16:05:45.585 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:45.585 [Task submitter] INFO  nextflow.Session - [69/7a513e] Submitted process > FASTQC (L66093_EdenPool_Covid-DD-VIR-00235)
Jan-29 16:05:47.617 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 109; name: FASTP (L66093_EdenPool_Covid-DD-VIR-00235); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/7d/08c5e824285d6f441e629421060421]
Jan-29 16:05:47.621 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jan-29 16:05:47.622 [Task submitter] INFO  nextflow.Session - [43/666074] Submitted process > FASTQC (L66091_EdenPool_Covid-DD-VIR-00229)
Jan-29 16:05:50.605 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 108; name: FASTQC (L66093_EdenPool_Covid-DD-VIR-00235); status: COMPLETED; exit: 0; error: -; workDir: /home/crtd_bioinf/fabirost/projects/illudev/bfx1527/nfcore/work/69/7a513e68614cd5c9f90dc7ef873bfa]
```

</p>
</details>
",fbnrst,https://github.com/nf-core/viralrecon/issues/151
MDU6SXNzdWU4MjE0OTg0MzA=,Test Not Working On Cluster,CLOSED,2021-03-03T21:25:22Z,2021-03-04T19:02:30Z,2021-03-04T18:43:43Z,"The setup is a cluser of machines with docker and nextflow installed. Each machine runs a `nextflow node` process and a docker daemon.

I am trying to run your workflow on the cluster by executing the following command on one node.
`nextflow run nf-core/viralrecon -profile test,docker -process.executor ignite`

The cluster starts to process the test pipeline, but get stuck in the following error.
```Error executing process > 'BOWTIE2_INDEX (GCF_009858895.2_ASM985889v3_genomic.200409.fna)'

Caused by:
  java.nio.file.NoSuchFileException: /work/3f/4b5b5e80605434963098c246e097b7/.command.run

Command executed:

  bowtie2-build \
      --seed 1 \
      --threads 2 \
      GCF_009858895.2_ASM985889v3_genomic.200409.fna \
      GCF_009858895.2_ASM985889v3_genomic.200409
  mkdir Bowtie2Index && mv GCF_009858895.2_ASM985889v3_genomic.200409* Bowtie2Index

Command exit status:
  -

Command output:
  (empty)

Work dir:
  /work/3f/4b5b5e80605434963098c246e097b7

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line
-[nf-core/viralrecon] Pipeline completed with errors-
```
Each node of the cluster seems to do some work until the error appears.",rmoczalla,https://github.com/nf-core/viralrecon/issues/156
MDU6SXNzdWU4MzE3NzUyOTk=,Where do I put bowtie2-index files?,CLOSED,2021-03-15T12:46:00Z,2021-03-15T13:10:17Z,2021-03-15T13:10:17Z,"Bowtie2-build requests 16GB of memory which causes the run to crash. I can build the indexes myself, but where do I put the files so that the pipeline does not execute bowtie2-build? Alternatively, how can I customize how bowtie2-build is executed?

Thanks, Jon",jonbra,https://github.com/nf-core/viralrecon/issues/160
MDU6SXNzdWU4MzE5MTMxNjI=,Errors caused by R-version conflicts,CLOSED,2021-03-15T15:14:48Z,2024-03-24T19:44:05Z,2021-05-10T19:44:51Z,"Hi,
There seems to be some conflicts with the version of R and some packages, maybe only the package `scales`. The entire pipeline ran smoothly with the test data, but on my own data this error arose:

```
Mar-15 14:07:32.450 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'MOSDEPT
H_AMPLICON_PLOT'

Caused by:
  Process `MOSDEPTH_AMPLICON_PLOT` terminated with an error exit status (1)

Command executed:

  plot_mosdepth_regions.r \
      --input_files SWIFT25213950.trim.mkD.amplicon.regions.bed.gz \
      --input_suffix .trim.mkD.amplicon.regions.bed.gz \
      --output_dir ./ \
      --output_suffix .trim.mkD.amplicon.regions

Command exit status:
  1

Command output:
  (empty)

Command error:
  package ‘scales’ was built under R version 3.6.3 
  Loading required package: grid
  ========================================
  ComplexHeatmap version 2.2.0
  Bioconductor page: http://bioconductor.org/packages/ComplexHeatmap/
  Github page: https://github.com/jokergoo/ComplexHeatmap
  Documentation: http://jokergoo.github.io/ComplexHeatmap-reference
  
  If you use it in published research, please cite:
  Gu, Z. Complex heatmaps reveal patterns and correlations in multidimensional 
    genomic data. Bioinformatics 2016.
  ========================================
  
  Loading required package: viridisLite
  
  Loading required package: viridisLite
  
  Attaching package: ‘viridis’
  
  The following object is masked from ‘package:scales’:
  
      viridis_pal
  
  Warning messages:
  1: package ‘viridis’ was built under R version 3.6.3 
  2: package ‘viridisLite’ was built under R version 3.6.3 
  ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──
  ✔ tibble  3.0.1     ✔ dplyr   1.0.0
  ✔ tidyr   1.1.0     ✔ stringr 1.4.0
  ✔ readr   1.3.1     ✔ forcats 0.5.0
  ✔ purrr   0.3.4     
  ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
  ✖ readr::col_factor() masks scales::col_factor()
  ✖ purrr::discard()    masks scales::discard()
  ✖ dplyr::filter()     masks stats::filter()
  ✖ dplyr::lag()        masks stats::lag()
  Warning messages:
  1: package ‘tidyverse’ was built under R version 3.6.3 
  2: package ‘tibble’ was built under R version 3.6.3 
  3: package ‘tidyr’ was built under R version 3.6.3 
  4: package ‘readr’ was built under R version 3.6.3 
  5: package ‘purrr’ was built under R version 3.6.3 
  6: package ‘dplyr’ was built under R version 3.6.3 
  7: package ‘stringr’ was built under R version 3.6.3 
  8: package ‘forcats’ was built under R version 3.6.3 
  Error:   Dimensions exceed 50 inches (height and width are specified in 'cm' not pixels).
    If you're sure you want a plot that big, use `limitsize = FALSE`.
  Backtrace:
      █
   1. └─ggplot2::ggsave(...)
   2.   └─ggplot2:::plot_dim(...)
  Execution halted
```
",jonbra,https://github.com/nf-core/viralrecon/issues/161
MDU6SXNzdWU4MzYwNDc0ODk=,mosdepth amplicon max depth is 16-bit integer,CLOSED,2021-03-19T14:18:50Z,2021-05-10T19:44:10Z,2021-05-10T19:44:10Z,"Hi,
it seems that the `mosdepth` coverage is encoded as a 16-bit unsigned integer, at least for the amplicon coverage calculation.
This leads to amplicons with coverage > 65 535 being cut-off at this value.
Not sure if it is coming from `mosdepth` or the R script.",angelovangel,https://github.com/nf-core/viralrecon/issues/165
MDU6SXNzdWU4NDEwNzgzMjE=,"test install not working, sra toolkit failure",CLOSED,2021-03-25T16:02:42Z,2021-04-27T13:09:15Z,2021-04-27T13:09:15Z,"Hello,

I am just trying the test data set using this command

nextflow run nf-core/viralrecon -profile test,singularity

It starts running and downloads the container but then after a while throws this error:

Error executing process > 'get_software_versions'

Caused by:
  Process `get_software_versions` terminated with an error exit status (132)

Command executed:

  echo 1.1.0 > v_pipeline.txt
  echo 20.10.0 > v_nextflow.txt
  parallel-fastq-dump --version > v_parallel_fastq_dump.txt
  fastqc --version > v_fastqc.txt
  fastp --version 2> v_fastp.txt
  bowtie2 --version > v_bowtie2.txt
  samtools --version > v_samtools.txt
  bedtools --version > v_bedtools.txt
  mosdepth --version > v_mosdepth.txt
  picard CollectMultipleMetrics --version &> v_picard.txt || true
  ivar -v > v_ivar.txt
  echo $(varscan 2>&1) > v_varscan.txt
  bcftools -v > v_bcftools.txt
  snpEff -version > v_snpeff.txt
  echo $(SnpSift 2>&1) > v_snpsift.txt
  quast.py --version > v_quast.txt
  cutadapt --version > v_cutadapt.txt
  kraken2 --version > v_kraken2.txt
  spades.py --version > v_spades.txt
  unicycler --version > v_unicycler.txt
  minia --version > v_minia.txt
  blastn -version > v_blast.txt
abacas.pl -v &> v_abacas.txt || true
  plasmidID -v > v_plasmidid.txt  || true
  Bandage --version > v_bandage.txt
  minimap2 --version > v_minimap2.txt
  vg version > v_vg.txt
  echo $(R --version 2>&1) > v_R.txt
  multiqc --version > v_multiqc.txt
  scrape_software_versions.py &> software_versions_mqc.yaml

Command exit status:
  132

Command output:
  (empty)

Command error:
  This sra toolkit installation has not been configured.
  Before continuing, please run: vdb-config --interactive
  For more information, see https://www.ncbi.nlm.nih.gov/sra/docs/sra-cloud/
  tput: No value for $TERM and no -T specified
  tput: No value for $TERM and no -T specified
  QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-joshua.hill'
  .command.sh: line 28:  1890 Illegal instruction     (core dumped) vg version > v_vg.txt

Work dir:
  /home/joshua.hill/work/56/51b8e6286b45f1e3e33b255e3de9ac

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command li
ne

Not sure why this is happening but is this in the singularity container?

This is a generic centos7 machine that it is running on.  I have used singularity successfully in the past so I think that installation is correct.  I just installed nextflow so maybe it that is not configured correctly.

[joshua.hill@buddy work]$ java -version
openjdk version ""1.8.0_282""
OpenJDK Runtime Environment (build 1.8.0_282-b08)
OpenJDK 64-Bit Server VM (build 25.282-b08, mixed mode)
[joshua.hill@buddy work]$ nextflow -v
nextflow version 20.10.0.5430
[joshua.hill@buddy work]$ singularity version
3.7.1-1.el7

Thanks for any help.

",jhill1440,https://github.com/nf-core/viralrecon/issues/167
MDU6SXNzdWU4NDg3NTA1Njk=,ggplot2 error when generating mosdepth amplicon plot with Swift v2 primers,CLOSED,2021-04-01T20:01:23Z,2021-04-28T14:24:45Z,2021-04-28T14:24:45Z,"Running the viralrecon pipeline (version 1.1.0) using docker.  The kit used to make the libraries is the swift v2 (additional coverage) panel.  When trying to generate the mosdepth amplicon plots ggplot2 throws an error:

`Error:   Dimensions exceed 50 inches (height and width are specified in 'cm' not pixels).
  If you're sure you want a plot that big, use `limitsize = FALSE`.
Backtrace:
    █
 1. └─ggplot2::ggsave(...)
 2.   └─ggplot2:::plot_dim(...)
Execution halted`

@drpatelh directed me to the correct area to modify:
https://github.com/nf-core/viralrecon/blob/75a2f9763e9b4c1aa20ad342ae3ce148c33cc65a/bin/plot_mosdepth_regions.r#L109
I changed the following line from:
`ggsave(file=outfile, plot, height=3+(0.3*length(unique(sample_dat$region))), width=16, units=""cm"")`
to
`ggsave(file=outfile, plot, height=3+(0.3*length(unique(sample_dat$region))), width=16, units=""cm"",limitsize = FALSE)`

adding `limitsize = FALSE` like the error suggested allowed the pipeline to complete.  However, it generates a huge plot
[all_samples.trim.amplicon.regions.heatmap.pdf](https://github.com/nf-core/viralrecon/files/6246191/all_samples.trim.amplicon.regions.heatmap.pdf)
This amplicon panel has 345 primers vs the ~200 primers for ARTIC v3.  For ARTIC the plot breaks down the the genome in 98 amplicons as the primers have clear names.  For the Swift primers the naming convention of the primers might be throwing off the ""grouping"" of amplicons.
",rrdavis77,https://github.com/nf-core/viralrecon/issues/169
MDU6SXNzdWU4NDg4NDUyODQ=,ivar trimming of Swift libraries new offset feature,CLOSED,2021-04-01T23:11:00Z,2021-04-27T16:55:20Z,2021-04-27T16:55:20Z,"Came across these improvements for ivar in the IDseq github:

https://github.com/chanzuckerberg/idseq-workflows/commit/d922823410d03dbae30f6476b11b77dbfacacd41

https://github.com/andersen-lab/ivar/pull/88

When processing swift libraries polymerases can add additional bases causing issues with trimming.  I guess this happens for swift libraries only?",rrdavis77,https://github.com/nf-core/viralrecon/issues/170
MDU6SXNzdWU4NjY0NDI3MTM=,MultiQC report does not include all the metrics,CLOSED,2021-04-23T21:28:25Z,2021-04-28T11:14:23Z,2021-04-28T11:14:23Z,"When running the dev nf-core/viralrecon v1.2.0dev (224865c), I noticed the multiQC report does not have information for Kraken2 % non-host reads even though the kraken2 reports are generated correctly.  There are NAs instead of actual percentages.  Also the coverage information is not displayed in the variant calling metrics section.
Thanks

Ryan",rrdavis77,https://github.com/nf-core/viralrecon/issues/175
MDU6SXNzdWU4Njg5MjQyNTM=,ivar outputs in vcf ,CLOSED,2021-04-27T14:46:54Z,2021-04-28T14:07:12Z,2021-04-27T15:03:33Z,"hi, 
reading from https://nf-co.re/viralrecon/1.0.0/output#ivar-variants-and-ivar-consensus
it seems you suggests ivar can output in vcf format top of tsv:  
variants/ivar/
<SAMPLE>.tsv: Low frequency variants in TSV format.
<SAMPLE>.vcf.gz: Low frequency variants VCF file.
<SAMPLE>.vcf.gz.tbi: Low frequency variants VCF index file.

I cannot read anywhere how to run ivar to call variants outputs in vcf. any suggestions?
thanks!
ibseq",ibseq,https://github.com/nf-core/viralrecon/issues/177
MDU6SXNzdWU4OTE5MTAzMTM=,Add mosdepth heatmap to MultiQC report,CLOSED,2021-05-14T13:10:01Z,2021-06-10T20:59:12Z,2021-06-10T20:59:12Z,"Would be awesome if we can include the mosdepth amplicon coverage heatmap in the MultiQC report too. Just need to export the matrix from the [custom R script](https://github.com/nf-core/viralrecon/blob/master/bin/plot_mosdepth_regions.r) we are using by adding a line or two. Can then create custom content for MultiQC to chomp like we are doing in the rnaseq pipeline for the DESeq2 heatmap.

@ewels pointed to some colour codes to get the same palette as in the PDF heatmap:
""Here are the colour codes for the blue-yellow (viridis) colour scale: 
https://jarrettmeyer.com/2018/08/07/viridis-color-palette

Get a list of 12 or so of them and set them as the colour_stops config option (or something like that it was, maybe check the docs)""",drpatelh,https://github.com/nf-core/viralrecon/issues/196
MDU6SXNzdWU4OTQ2MzU4NDI=,Output a .tsv comprising the Nextclade and Pangolin Results for all samples processed,CLOSED,2021-05-18T17:57:31Z,2021-06-17T13:27:27Z,2021-06-14T12:41:36Z,"Hi There,

First of all, a big thank you to everyone developing and maintaining Viralrecon; it has become integral to our laboratory's SARS-CoV-2 response.

We were excited to see in the latest version that you have included both the Nextclade and Pangolin typing tools.  Would it be possible to generate a basic report (e.g., a .tsv file) comprising the sample name, clade and lineage calls?  I admit, I am being lazy here, but it might be a nice report to have generated when a user is processing a large number of samples.  For example:

Sample | Nextclade | Pangolin
---------|------------|--------
Frodo | 20A | B.1.617.2
Sam | 20A | B.1.617.2

Thanks again for all your hard work on Viralrecon, and for considering this request.

All the best,
Cody
",Codes1985,https://github.com/nf-core/viralrecon/issues/197
MDU6SXNzdWU5MTU2NjIxODg=,ASCIIGenome failing during analysis,CLOSED,2021-06-09T00:27:19Z,2021-06-10T22:14:39Z,2021-06-10T22:14:02Z,"## Check Documentation

I have checked the following places for your error:
- [X] [nf-core website: troubleshooting](https://nf-co.re/usage/troubleshooting)
- [X] [nf-core/viralrecon pipeline documentation](https://nf-co.re/nf-core/viralrecon/usage)

## Description of the bug

While running viralrecon using data from the SNAP/Swift protocol, the pipeline repeatedly crashed at the ASCIIGenome step:

![image](https://user-images.githubusercontent.com/11418858/121273453-a7aeb500-c90b-11eb-91e9-5ad2211df551.png)

If I skip the ASCIIGenome step (`--skip_asciigenome`), the pipeline finishes as expected. I was asked to create this issue by @drpatelh (https://nfcore.slack.com/archives/C0110R22NH3/p1623156803141900?thread_ts=1623119196.129800&cid=C0110R22NH3)

## Steps to reproduce

Steps to reproduce the behaviour:

1. Command line: `nextflow run nf-core/viralrecon --platform illumina --input samplesheet.csv  --genome 'NC_045512.2'  --protocol amplicon --primer_bed swift.bed --primer_left_suffix '_F' --primer_right_suffix '_R' --ivar_trim_offset 5 --skip_assembly -profile singularity --max_memory ""50.0 GB""`
2. See error: 

```
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:ASCIIGENOME (sample1)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:ASCIIGENOME (sample1)` terminated with an error exit status (1)

Command executed:

  zcat sample1.vcf.gz \
      | grep -v '#' \
      | awk -v FS='	' -v OFS='	' '{print $1, ($2-50-1), ($2+50)}' \
      > variants.bed
  
  ASCIIGenome \
      -ni \
      -x ""trackHeight 0 bam#1 && trackHeight 50 bam@2 && readsAsPairs -on && filterVariantReads && save sample1.%r.pdf"" \
      --batchFile variants.bed \
      --fasta GCF_009858895.2_ASM985889v3_genomic.200409.fna \
      sample1.ivar_trim.sorted.bam \
      sample1.vcf.gz \
      swift.bed \
      GCF_009858895.2_ASM985889v3_genomic.200409.gff \
      > /dev/null
  
  echo $(ASCIIGenome -ni --version 2>&1) | sed -e ""s/ASCIIGenome //g"" > asciigenome.version.txt

Command exit status:
  1

Command output:
  (empty)

Command error:
  WARNING: Skipping mount /usr/local/var/singularity/mnt/session/etc/resolv.conf [files]: /etc/resolv.conf doesn't exist in container
  Cannot read history file '/home/default/.asciigenome.yaml'
  
  Indexing 'GCF_009858895.2_ASM985889v3_genomic.200409.fna'.
  Initializing coordinates... Done from: sample1.ivar_trim.sorted.bam
  Cannot read history file '/home/default/.asciigenome.yaml'
  Invalid coordinates: -36 64
  Exception in thread ""main"" exceptions.InvalidGenomicCoordsException
  	at tracks.IntervalFeature.validateIntervalFeature(IntervalFeature.java:231)
  	at tracks.IntervalFeature.intervalFeatureFromBedLine(IntervalFeature.java:183)
  	at tracks.IntervalFeature.<init>(IntervalFeature.java:70)
  	at samTextViewer.Main.main(Main.java:150)
```
## Expected behaviour

ASCIIGenome to generate the correct output files, and for the pipeline to complete without error.

## Log files

Have you provided the following extra information/files:

- [X] The command used to run the pipeline
- [X] The `.nextflow.log` file
[nextflow.log](https://github.com/nf-core/viralrecon/files/6620311/nextflow.log)


## System

- Hardware: Desktop
- Executor: Just a simple `nextflow run` command
- OS: pop!_os
- Version  20.10

## Nextflow Installation

- Version: 21.04.1 build 5556

## Container engine

- Engine: Singularity
- version: Unsure
- Image tag: nf-core/viralrecon v2.0

## Additional context

What's the best way to privately share some reads that might allow the issue to be replicated?
",charlesfoster,https://github.com/nf-core/viralrecon/issues/198
MDU6SXNzdWU5MTcyODEyODk=,Conditional include are not expected to work ,CLOSED,2021-06-10T12:20:04Z,2021-06-15T08:39:18Z,2021-06-10T14:52:31Z,"Don't think this pattern is a good idea, if it works it's a bug! 

https://github.com/nf-core/viralrecon/blob/a85d5969f9025409e3618d6c280ef15ce417df65/main.nf#L55-L72",pditommaso,https://github.com/nf-core/viralrecon/issues/201
MDU6SXNzdWU5MTkyNzE1NDQ=,Memory errors for SNP_EFF step,CLOSED,2021-06-11T22:33:59Z,2021-06-15T16:45:53Z,2021-06-14T11:56:10Z,"Hi all,

Thank you for your work on this pipeline! @hpatel, thank you for your help on Slack, you suggested creating an issue if I couldn't resolve this with earlier suggestions. 

I am running a the Java memory error with SNPEff and was wondering if you have suggestions for how to fix this. I updated my config file to expand the memory. 

My command is: 
```
nextflow run nf-core/viralrecon -r 2.0 -resume serene_gates --input /labs/jandr/walter/lambda/nf-core/sample_list/sample_list_050421.csv -profile singularity --platform illumina --protocol amplicon --outdir resultsV2 --email kwalter@stanford.edu --fasta /labs/jandr/walter/lambda/refs/MN908947.3.fasta --gff /labs/jandr/walter/lambda/refs/MN908947.3.gff --save_reference True --primer_bed /labs/jandr/walter/lambda/refs/artic_v3_primers.bed.gz --primer_fasta /labs/jandr/walter/lambda/refs//artic-ncov2019_v3_primers.fasta.gz --primer_set artic --primer_set_version 3 --kraken2_variants_host_filter True --kraken2_assembly_host_filter True --filter_duplicates False --skip_markduplicates True --skip_assembly True --max_cpus 8 --max_memory 200.GB --max_time 36.h --skip_asciigenome --skip_variants_quast -c /labs/jandr/walter/lambda/scripts/nf_custom.nf
```

My config file: 

```
params {
    modules {
          'illumina_ivar_variants' {
            args = '-t 0 -q 20 -m 10'
          }
    }
}
process {
    withName: SNPEFF_ANN {
        memory = 200.GB
    }
}
```

The error message: 

```

-[nf-core/viralrecon] Pipeline completed with errors-
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:SNPEFF_SNPSIFT:SNPEFF_ANN (0-10e3_S17)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:SNPEFF_SNPSIFT:SNPEFF_ANN (0-10e3_S17)` terminated with an error exit status (255)

Command executed:

  snpEff MN908947.3 \
      -config snpeff.config \
      -dataDir snpeff_db \
       \
      0-10e3_S17.vcf.gz \
      -csvStats 0-10e3_S17.snpeff.csv \
      > 0-10e3_S17.snpeff.vcf
  mv snpEff_summary.html 0-10e3_S17.snpeff.summary.html
  
  echo $(snpEff -version 2>&1) | sed 's/^.*SnpEff //; s/ .*$//' > snpeff.version.txt

Command exit status:
  255

Command output:
  (empty)

Command error:
  INFO:    Converting SIF file to temporary sandbox...
  WARNING: Skipping mount /var/singularity/mnt/session/etc/resolv.conf [files]: /etc/resolv.conf doesn't exist in container
  Error: Error while processing VCF entry (line 22720) :
  	MN908947.3	25320	.	GNNNNNNNN	G	.	FAIL	DP=5182	GT:REF_DP:REF_RV:REF_QUAL:ALT_DP:ALT_RV:ALT_QUAL:ALT_FREQ	1:5175:1958:37:1:0:20:0.000192976
  java.lang.OutOfMemoryError: Java heap space
  java.lang.OutOfMemoryError: Java heap space
```

I have included the nextflow.log. Please let me know if you have any suggestions or need any other information. Thank you again for your help!
Katie",ksw9,https://github.com/nf-core/viralrecon/issues/204
MDU6SXNzdWU5MjE1MDMxNDg=,OSX via Docker fails with touch: setting times of '.command.trace': No such file or directory,CLOSED,2021-06-15T15:09:50Z,2021-07-07T16:58:35Z,2021-07-07T16:58:34Z,"Running `dev` on Mac OSX Big Sur via Docker fails

```
$ uname -a
Darwin dione 20.5.0 Darwin Kernel Version 20.5.0: Sat May  8 05:10:33 PDT 2021; root:xnu-7195.121.3~9/RELEASE_X86_64 x86_64

$ docker --version
Docker version 20.10.7, build f0df350

$ nextflow run main.nf -profile test,docker
N E X T F L O W  ~  version 21.04.1
Launching `main.nf` [maniac_majorana] - revision: c9b811b823


------------------------------------------------------
                                        ,--./,-.
        ___     __   __   __   ___     /,-._.--~'
  |\ | |__  __ /  ` /  \ |__) |__         }  {
  | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                        `._,._,'
  nf-core/viralrecon v2.1
------------------------------------------------------

...

Execution cancelled -- Finishing pending tasks before exit
-[nf-core/viralrecon] Pipeline completed with errors-
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:UNTAR_KRAKEN2_DB (kraken2_hs22.tar.gz)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:UNTAR_KRAKEN2_DB (kraken2_hs22.tar.gz)` terminated with an error exit status (1)

Command executed:

  tar -xzvf  kraken2_hs22.tar.gz
  echo $(tar --version 2>&1) | sed 's/^.*(GNU tar) //; s/ Copyright.*$//' > untar.version.txt

Command exit status:
  1

Command output:
  (empty)

Command error:
  touch: setting times of '.command.trace': No such file or directory

Work dir:
  /Users/xxx/working/nf-core-viralrecon/work/39/e0e2da5125f3f3f27140b4661704e5

Tip: view the complete command output by changing to the process work dir and entering the command `cat .command.out`
```",heuermh,https://github.com/nf-core/viralrecon/issues/208
MDU6SXNzdWU5MjIzMDI5OTA=,Check that contig in primer BED and genome fasta match,CLOSED,2021-06-16T08:31:04Z,2022-01-26T23:21:32Z,2022-01-26T23:21:31Z,We don't explicitly check whether the contig name(s) in the reference fasta file match that in the primer BED file and I suspect this can be quite easily missed. We should probably fail/warn if this is the case. Maybe we can use something from BEDTools to do this is it automatically checks this sort of stuff and fails - needs to be tested.,drpatelh,https://github.com/nf-core/viralrecon/issues/209
MDU6SXNzdWU5MjIzNTQ5NTg=,Show ref/alt bases in ASCIIGenome screenshots,OPEN,2021-06-16T09:12:11Z,2024-04-22T15:24:28Z,,"
For some reason the ref/alt bases initially displayed in the ASCIIGenome have disappeared in the [results](https://nf-co.re/viralrecon/2.1/output#asciigenome) from the [latest release](https://nf-core-awsmegatests.s3-eu-west-1.amazonaws.com/viralrecon/results-f0171324a60d1759ca7f5d02351372d97d22cc12/platform_illumina/variants/ivar/asciigenome/SAMPLE_10/SAMPLE_10.MN908947.3_6904_7004.pdf). Be good to figure out why and push a fix.",drpatelh,https://github.com/nf-core/viralrecon/issues/210
MDU6SXNzdWU5MzE2MzE0NTI=,Access to 'PYCOQC.out' is undefined,CLOSED,2021-06-28T14:24:39Z,2021-06-28T14:40:53Z,2021-06-28T14:40:53Z,"Hi @drpatelh ,

I'm documenting here what we discussed in the #viralrecon channel. When running Viralrecon v2.1 with Nanopore data, I get the following issue:

## Description of the bug

```
nextflow run nf-core/viralrecon -r 2.1 \
-profile cfc \
--genome 'MN908947.3' \
--fastq_dir '/sfs/7/workspace/ws/iijme01-COVID19_BENCHMARK-0/cog_uk_nanopore_amplicon_unzipped' \
--platform nanopore \
--primer_set_version 3 \
--skip_pycoqc \
--artic_minion_caller medaka \
--artic_minion_medaka_model ./r941_min_high_g360_model.hdf5 \
-resume
```

```
!! Only displaying parameters that differ from the pipeline defaults !!
------------------------------------------------------
If you use nf-core/viralrecon for your analysis please cite:
* The pipeline
  https://doi.org/10.5281/zenodo.3901628
* The nf-core framework
  https://doi.org/10.1038/s41587-020-0439-x
* Software dependencies
  https://github.com/nf-core/viralrecon/blob/master/CITATIONS.md
------------------------------------------------------
Access to 'PYCOQC.out' is undefined since process doesn't declare any output
 -- Check script '/home-link/qeaga01/.nextflow/assets/nf-core/viralrecon/./workflows/nanopore.nf' at line: 135 or see '.nextflow.log' file for more details
```
With and without `--skip_pycoqc`. 

As you mentioned, the line 135 should be nested in the block above:

https://github.com/nf-core/viralrecon/blob/f0171324a60d1759ca7f5d02351372d97d22cc12/workflows/nanopore.nf#L135
",ggabernet,https://github.com/nf-core/viralrecon/issues/212
MDU6SXNzdWU5Mzk0MDg5NTU=,config for 1200bp amplicon,CLOSED,2021-07-08T02:32:56Z,2021-07-13T11:28:13Z,2021-07-13T11:28:13Z,"Hello,

Thank you for crating very useful pipeline. Is it possible to run this pipeline for ARTIC 1200bp amplicon kit?

https://www.protocols.io/view/sars-cov2-genome-sequencing-protocol-1200bp-amplic-btsrnnd6

Any suggestion will be useful.
Keyur",KeyTals,https://github.com/nf-core/viralrecon/issues/214
MDU6SXNzdWU5NDUxMjIyNDk=,Support for compressed FastQ files for Nanopore data,CLOSED,2021-07-15T08:16:12Z,2022-01-14T11:21:56Z,2022-01-14T11:21:56Z,"Hello,

I realized that the pipeline only accepts uncompressed FastQ files as input for the Nanopore data processing. We always work with compressed FastQ files (.fastq.gz) in order to save space. It would be great if the pipeline can also take compressed files as input.
",berguner,https://github.com/nf-core/viralrecon/issues/218
MDU6SXNzdWU5NDkyMTg2NTg=,Fails if not using a covid genome,CLOSED,2021-07-21T00:40:32Z,2021-07-28T13:43:22Z,2021-07-28T13:43:21Z,"I think this has to do with the custom check for the swift protocol.

```
 -- Check script '/home/eam150030/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 197 or see '.nextflow.log' file for more details
WARN: Process 'NFCORE_VIRALRECON:ILLUMINA:MULTIQC_CUSTOM_CSV_IVAR_PANGOLIN' cannot be executed by 'slurm' executor -- Using 'local' executor instead
-[nf-core/viralrecon] Pipeline completed with errors-
```

## Description of the bug

Fails if you're not using a covid genome

## Steps to reproduce

Steps to reproduce the behaviour:

Relavent `nf-params.json`
```json
    ""fasta"": ""https://gist.githubusercontent.com/Emiller88/addd82ca68766c56d45248f546ff9c7c/raw/90541486f8d4f8302dab8bb79e0e0ec9b85ed042/NC_001802.1.fa"",
    ""gff"": ""https://gist.githubusercontent.com/Emiller88/addd82ca68766c56d45248f546ff9c7c/raw/90541486f8d4f8302dab8bb79e0e0ec9b85ed042/NC_001802.1.gff"",
    ""primer_bed"": ""https://gist.githubusercontent.com/Emiller88/addd82ca68766c56d45248f546ff9c7c/raw/471f9d2a1e72ddd769d995fbc16dcc71a9d9dec2/NC_001802.1_primers.bed""
```

## Expected behaviour


## Log files

Have you provided the following extra information/files:

```bash
./nextflow run nf-core/viralrecon -r 2.1 -params-file nf-params.json -profile utd_sysbio
```


## System

- Hardware: HPC
- Executor: slurm
- OS: CentOS?
- Version ?

## Nextflow Installation

- Version: 21.04.2

## Container engine

- Engine: Singularity
[.nextflow.log](https://github.com/nf-core/viralrecon/files/6851965/default.nextflow.log)

",edmundmiller,https://github.com/nf-core/viralrecon/issues/222
MDU6SXNzdWU5NTAwMTk4NzE=,Adding phylogeny tree for consensus fasta files,CLOSED,2021-07-21T19:02:03Z,2021-07-28T13:58:48Z,2021-07-28T13:58:47Z,"Hello,

Thank you for creating very useful pipeline, this is just a suggestion but wouldn't it be useful to perform multiple sequence alignment on consensus fasta files as both illumina with ivar and Nanopore will generate census fasta and generate phylogeny tree to check for sample similarities? 

Keyur",KeyTals,https://github.com/nf-core/viralrecon/issues/223
MDU6SXNzdWU5NTA2OTExNjk=,Add BLASTDB_LMDB_MAP_SIZE environment variable to process BLAST_MAKEBLASTDB,CLOSED,2021-07-22T13:49:06Z,2021-07-22T14:06:56Z,2021-07-22T14:06:56Z,"I am not sure if anyone had has this issue but I was getting the error
~~~
BLAST Database creation error: mdb_env_open: Cannot allocate memory
~~~
when I submitted the `NFCORE_VIRALRECON_ILLUMINA_PREPARE_GENOME_BLAST_MAKEBLASTDB` process to an SGE cluster.

To fix it I had to set the environment variable `BLASTDB_LMDB_MAP_SIZE=100000000` in a custom nextflow.config as described in the post here https://www.biostars.org/p/413294/

Could an environment variable `BLASTDB_LMDB_MAP_SIZE` be added as input to the process BLAST_MAKEBLASTDB ?
",ggrimes,https://github.com/nf-core/viralrecon/issues/225
MDU6SXNzdWU5NTMxMDMxMzM=,User defined JSON output for Nextclade,CLOSED,2021-07-25T13:16:32Z,2021-08-24T14:48:49Z,2021-07-28T18:49:50Z,"
## Is your feature request related to a problem? Please describe

By default the pipeline outputs Nextclades's results only in CSV format. 
I find useful to have the result also in JSON format, it is more flexible for further analysis. To date there is no way to tell viralrecon to output any other format.

## Describe the solution you'd like

User defined option to tell viralrecon to output nextclade's results in json format.

## Describe alternatives you've considered

One possibility is via custom.config file. Since the CSV output is parsed downstream in the pipeline I think that outputting both formats is the best way to go. Not sure if it is possible to tell nextclade something like:
--output-json=output/nextclade.json \ 
--output-csv=output/nextclade.csv \

In one command line.
",ampinzonv,https://github.com/nf-core/viralrecon/issues/226
MDU6SXNzdWU5NTQ2MzI0MjE=,IVar error with conda,CLOSED,2021-07-28T08:55:47Z,2021-07-28T14:02:01Z,2021-07-28T14:02:01Z,"<!--
# nf-core/viralrecon bug report

Hi there!

Thanks for telling us about a problem with the pipeline.
Please delete this text and anything that's not relevant from the template below:
-->

## Check Documentation

I have checked the following places for your error:

- [X] [nf-core website: troubleshooting](https://nf-co.re/usage/troubleshooting)
- [X] [nf-core/viralrecon pipeline documentation](https://nf-co.re/nf-core/viralrecon/usage)

## Description of the bug

<!-- A clear and concise description of what the bug is. -->
Error while running IVAR_CONSENSUS or IVAR_VARIANTS with Conda .

## Steps to reproduce

Steps to reproduce the behaviour:

1. Command line:
 <!-- [e.g. `nextflow run ...`] -->
nextflow run nf-core/viralrecon \
    --input samplesheet.csv \
    --platform illumina \
    --protocol amplicon \
    --genome 'MN908947.3' \
    --primer_set artic \
    --primer_set_version 3 \
    --skip_assembly \
    --max_cpus 4 \
    --max_memory '15.GB'\
    -profile conda
2. See error: <!-- [Please provide your error message] -->

 samtools: relocation error: viralrecon/work/conda/env-b6deb684c62494fb6921b1962c660b51/bin/../lib/./libssl.so.1.1: symbol EVP_idea_cbc version OPENSSL_1_1_0 not defined in file libcrypto.so.1.1 with link time reference

## Log files

Have you provided the following extra information/files:

- [X] The command used to run the pipeline
- [X] The `.nextflow.log` file <!-- this is a hidden file in the directory where you launched the pipeline -->

[nextflow.log](https://github.com/nf-core/viralrecon/files/6891631/nextflow.log)

## System

- Hardware: <!-- [e.g. HPC, Desktop, Cloud...] --> Desktop
- Executor: <!-- [e.g. slurm, local, awsbatch...] --> local
- OS: <!-- [e.g. CentOS Linux, macOS, Linux Mint...] --> Debian 
- Version <!-- [e.g. 7, 10.13.6, 18.3...] --> 10.10

## Nextflow Installation

- Version: <!-- [e.g. 19.10.0] --> 21.04.3

## Container engine

- Engine: <!-- [e.g. Conda, Docker, Singularity, Podman, Shifter or Charliecloud] --> Conda 
- version: <!-- [e.g. 1.0.0] --> 4.10.3
- Image tag: <!-- [e.g. nfcore/viralrecon:1.0.0] --> nf-core/viralrecon v2.1
",Merguerrero,https://github.com/nf-core/viralrecon/issues/228
MDU6SXNzdWU5NTQ5MjM5ODU=,ARTIC Guppyplex default settings result in removal of valid reads for 1200 bp amplicon protocol SARS-CoV-2 Nanopore sequence data,CLOSED,2021-07-28T14:28:16Z,2021-07-28T18:20:11Z,2021-07-28T18:20:11Z,"The current config seems to be set for the ARTIC V1-4 primer schemes:
https://github.com/nf-core/viralrecon/blob/f0171324a60d1759ca7f5d02351372d97d22cc12/conf/modules.config#L54-L55

This results in most reads from the 1200 bp amplicon protocol to be filtered out during the Guppyplex stage.

The authors of the protocol used the following settings in the paper describing the protocol:

> We used 250 bp as the minimum read length cut-off and 1500 bp as the maximum length cut-off, which resulted in between 20% and 30% of the reads being filtered.

https://academic.oup.com/biomethods/article/5/1/bpaa014/5873518#207982774

### Workaround

Providing a custom modules config file with the following text resolved the issue:

```nextflow
params {
    modules {
        'nanopore_artic_guppyplex' {
            args            = '--min-length 250 --max-length 1500'
            publish_files   = false
            publish_dir     = 'guppyplex'
        }
    }
}
```
",peterk87,https://github.com/nf-core/viralrecon/issues/229
MDU6SXNzdWU5NTY5OTU2MzA=,Remove duplicate variants called by ARTIC ONT pipeline,CLOSED,2021-07-30T19:06:13Z,2022-01-22T08:53:27Z,2022-01-17T10:48:58Z,"There's an unresolved issue with the ARTIC pipeline where variants present in both pools may not be merged/deduplicated properly (see https://github.com/artic-network/fieldbioinformatics/issues/53 and https://github.com/will-rowe/artic-tools/issues/3), which may result in inflated numbers of variants found in these samples with BCFTools and reported in the viralrecon MultiQC report.

For example, in some samples I tested, the following variant calls are duplicated in the `<sample>.pass.vcf.gz`:

```
MN908947.3	28881	.	G	A	14025.3	PASS	TotalReads=985;SupportFraction=0.95057;SupportFractionByStrand=0.924196,0.976891;BaseCalledReadsWithVariant=902;BaseCalledFraction=0.902;AlleleCount=1;StrandSupport=37,11,455,482;StrandFisherTest=40;SOR=0.203982;RefContext=CAGTAGGGGAA;Pool=nCoV-2019_1	GT	1
MN908947.3	28881	.	G	A	14657.3	PASS	TotalReads=962;SupportFraction=0.946487;SupportFractionByStrand=0.910959,0.981867;BaseCalledReadsWithVariant=894;BaseCalledFraction=0.919753;AlleleCount=1;StrandSupport=43,9,437,473;StrandFisherTest=65;SOR=0.199358;RefContext=CAGTAGGGGAA;Pool=nCoV-2019_2	GT	1
MN908947.3	28882	.	G	A	14025.3	PASS	TotalReads=985;SupportFraction=0.870563;SupportFractionByStrand=0.780772,0.960173;BaseCalledReadsWithVariant=880;BaseCalledFraction=0.88;AlleleCount=1;StrandSupport=108,20,384,473;StrandFisherTest=176;SOR=0.440152;RefContext=AGTAGGGGAAC;Pool=nCoV-2019_1	GT	1
MN908947.3	28882	.	G	A	14657.3	PASS	TotalReads=962;SupportFraction=0.86984;SupportFractionByStrand=0.774981,0.964305;BaseCalledReadsWithVariant=864;BaseCalledFraction=0.888889;AlleleCount=1;StrandSupport=108,17,372,465;StrandFisherTest=191;SOR=0.462109;RefContext=AGTAGGGGAAC;Pool=nCoV-2019_2	GT	1
MN908947.3	28883	.	G	C	14025.3	PASS	TotalReads=985;SupportFraction=0.973349;SupportFractionByStrand=0.984946,0.961775;BaseCalledReadsWithVariant=884;BaseCalledFraction=0.884;AlleleCount=1;StrandSupport=7,19,485,474;StrandFisherTest=14;SOR=0.20202;RefContext=GTAGGGGAACT;Pool=nCoV-2019_1	GT	1
MN908947.3	28883	.	G	C	14657.3	PASS	TotalReads=962;SupportFraction=0.967308;SupportFractionByStrand=0.976838,0.957817;BaseCalledReadsWithVariant=885;BaseCalledFraction=0.910494;AlleleCount=1;StrandSupport=11,20,469,462;StrandFisherTest=8;SOR=0.303134;RefContext=GTAGGGGAACT;Pool=nCoV-2019_2	GT	1
```

The ARTIC pipeline handles variant calling for each PCR pool separately and then merges the VCF files, by default, with `artic_vcf_merge`, which doesn't appear to do any deduplication of variants (see [fieldbioinformatics/artic/vcf_merge.py](https://github.com/artic-network/fieldbioinformatics/blob/23a8460f5b881c5b2712c0381e0ec4dc84d38359/artic/vcf_merge.py). 

If ARTIC is run with `--strict`, then `artic-tools` v0.2.6 (which [`artic_minion` v1.2.1 uses](https://github.com/bioconda/bioconda-recipes/blob/master/recipes/artic/meta.yaml#L36)) keeps all copies of duplicate variants encountered as well:

https://github.com/will-rowe/artic-tools/blob/98532314bc2345ed64e3c8864e2a1b22b47b794f/artic/vcfCheck.cpp#L167

Although the code has changed in `artic-tools` v0.3.0 compared to v0.2.6:

https://github.com/will-rowe/artic-tools/compare/v0.2.6...v0.3.0#diff-df805cd5df2f5f2218fd8b5ba16f89171028315340e591b941f6fe135e7cf8d9L167

![image](https://user-images.githubusercontent.com/4203424/127686823-04ffe84a-da8d-46fa-ba31-9293ee334f7c.png)

`artic-tools` v0.3.0 also keeps the duplicate variant calls and logs that the variant was found in an amplicon overlap region:

```
[12:29:37] [artic-tools::check_vcf] variant at pos 28881: G->A
[12:29:37] [artic-tools::check_vcf]     located within an amplicon overlap region
[12:29:37] [artic-tools::check_vcf] variant at pos 28881: G->A
[12:29:37] [artic-tools::check_vcf]     located within an amplicon overlap region
[12:29:37] [artic-tools::check_vcf] variant at pos 28882: G->A
[12:29:37] [artic-tools::check_vcf]     located within an amplicon overlap region
[12:29:37] [artic-tools::check_vcf] variant at pos 28882: G->A
[12:29:37] [artic-tools::check_vcf]     located within an amplicon overlap region
[12:29:37] [artic-tools::check_vcf] variant at pos 28883: G->C
[12:29:37] [artic-tools::check_vcf]     located within an amplicon overlap region
[12:29:37] [artic-tools::check_vcf] variant at pos 28883: G->C
[12:29:37] [artic-tools::check_vcf]     located within an amplicon overlap region
```

### Possible solution

One possible solution would be to add a process and script to keep only the first duplicate variant called by the ARTIC pipeline.
",peterk87,https://github.com/nf-core/viralrecon/issues/232
MDU6SXNzdWU5NTkxNjQ3MjU=,2 errors when running pipeline test on minimal dataset,CLOSED,2021-08-03T14:16:49Z,2022-01-18T11:09:42Z,2022-01-18T11:09:41Z,"Hi there! :)

## Check Documentation
I have checked the following places for my error:
https://nf-co.re/usage/troubleshooting
https://nf-co.re/viralrecon/usage

## Description of the bug
I follow README.md Quick Start steps 
Download and installation are ok, but cannot run test dataset or others command 

## Steps to reproduce

1. Command line:

nextflow run nf-core/viralrecon -profile test,singularity

2. See error:

N E X T F L O W  ~  version 19.07.0
Launching `nf-core/viralrecon` [serene_wiles] - revision: 2ebae61442 [master]
Script_cf2c5f68: 51: Not a valid include definition -- it must specify the module path as a string @ line 51, column 5.
       include { ILLUMINA } from './workflows/illumina'
       ^
│Script_cf2c5f68: 53: Not a valid include definition -- it must specify the module path as a string @ line 53, column 5.
       include { NANOPORE } from './workflows/nanopore'
       ^

2 errors

## Expected behaviour
Processed test dataset with succes to validate installation and start playing with my data :)

## Log files
The `.nextflow.log` file

## System
- Hardware: HPC
- Executor:  direct on node (can try slurm)
- OS: Linux
- Version: 3.10.0-693.11.6.el7.x86_64

## Nextflow Installation
- Version: 19.07.0

## Container engine
- Engine: Singularity
- version: 3.3.0-rc.1.73.gcbe1673

## Additional context
Thank you very much for your help ! :)

##### .nextflow.log #####
[nextflow.log](https://github.com/nf-core/viralrecon/files/6924762/nextflow.log)
",Nicolas-Fernandez,https://github.com/nf-core/viralrecon/issues/233
MDU6SXNzdWU5NjEwNDA2ODg=,Remove replacement of dashes in sample name with underscores,CLOSED,2021-08-04T21:00:08Z,2022-07-11T13:49:01Z,2022-07-11T13:49:01Z,"## Is your feature request related to a problem? Please describe

I'd like dashes to be preserved as dashes in sample names.

## Describe the solution you'd like

Any of the following or similar solutions would be great:

- Workflow param to skip replacing dashes
- Sample name invalid characters regex workflow param (e.g. `--sample_name_invalid_chars ""\W""`)
- Sample name ""whitelist"" regex of valid characters allowed workflow param (e.g. `--sample_name_regex ""[\w\-]+""`)

## Describe alternatives you've considered

Commenting out the following code:

https://github.com/nf-core/viralrecon/blob/2ebae61442598302c64916bd5127cf23c8ab5611/bin/check_samplesheet.py#L102-L106
",peterk87,https://github.com/nf-core/viralrecon/issues/234
MDU6SXNzdWU5ODM2MTE4Njc=,Nextclade version bump,CLOSED,2021-08-31T08:53:51Z,2022-01-18T11:06:31Z,2022-01-18T11:06:31Z,"Hi there! I've only just discovered nf-core and this pipeline, i'm very impressed with how polished it is.

## Is your feature request related to a problem? Please describe
I noticed that nextclade is quite out of date, this leads to wrong clade calls. Currently the javascript implementation version 0.14.4 is used, the newest version is 1.3.0 (updated today). 

## Describe the solution you'd like

I'd like to see the version of nextclade increased. From what i can tell the newest version widely disseminated is 1.2.3
Conda: `bioconda::nextclade=1.2.3`
Singularity: `https://depot.galaxyproject.org/singularity/nextclade:1.2.3--h9ee0642_0`
Biocontainer: `quay.io/biocontainers/nextclade:1.2.3--h2eeb373_1`

## Describe alternatives you've considered

I've considered trying to bump the version myself, but i'm unsure how the code should be distributed between this repository and nf-core/modules. Also i'm very new to nextflow, so it's a bit overwhelming :smile:

## Additional context
Nextclade has received new required input parameters and removed at least one used output-parameter

Added required input for v. 1.2.3

- `--input-root-seq` should match the genome parameter
- `--input-tree` Path to Auspice JSON v2 file containing reference tree. 
- `--input-qc-config` Path to a JSON file containing configuration of Quality Control rules

Removed output option
- `--output-tsv-clades-only` which i think is used downstream in the multiQC 

Also it appears that the next version of nextclade (1.3.0) introduces a simpler input specification `--input-dataset=data/sars-cov-2`",marcmtk,https://github.com/nf-core/viralrecon/issues/235
MDU6SXNzdWU5ODM3Mzg4ODA=,"Shows ""[nf-core/viralrecon] Pipeline completed successfully"" after executing only 6 process",CLOSED,2021-08-31T11:12:49Z,2021-09-21T10:16:25Z,2021-09-21T10:16:25Z,"Hi all,

Thank you so much for developing this amazing pipeline!

I just tried to run the pipeline with the following command line and it seems to run at the first time, but it soon stops but with no error message. Also, it shows ""[nf-core/viralrecon] Pipeline completed successfully-"", but the downstream analysis discontinued. May I know if others also encountered this problem and how to solve this? 

I have checked fastq_pass/barcode33 to fastq_pass/barcode48 contains the fastq.gz files.

Samplesheet, log, command line, and terminal messages has been attached below.

Thank you very much for you help in advance. 

Eddie

Samplesheet:
[samplesheet.csv](https://github.com/nf-core/viralrecon/files/7083445/samplesheet.csv)

Log:
[.nextflow.log](https://github.com/nf-core/viralrecon/files/7083415/default.nextflow.log)

Command line:
""nextflow run nf-core/viralrecon --input samplesheet.csv --platform nanopore --genome 'MN908947.3' --primer_set_version 3 --fastq_dir fastq_pass/ --artic_minion_caller medaka --artic_minion_medaka_model r941_min_high_g360 -profile docker --max_memory 24.GB""

Log shows on the terminal:
""
------------------------------------------------------
                                        ,--./,-.
        ___     __   __   __   ___     /,-._.--~'
  |\ | |__  __ /  ` /  \ |__) |__         }  {
  | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                        `._,._,'
  nf-core/viralrecon v2.2
------------------------------------------------------
Core Nextflow options
  revision                 : master
  runName                  : drunk_nightingale
  containerEngine          : docker
  launchDir                : /mnt/data/Viralrecon/20210830_COVID_Batch91_guppyV5_partial
  workDir                  : /mnt/data/Viralrecon/20210830_COVID_Batch91_guppyV5_partial/work
  projectDir               : /home/gilmansiu3/.nextflow/assets/nf-core/viralrecon
  userName                 : gilmansiu3
  profile                  : docker
  configFiles              : /home/gilmansiu3/.nextflow/assets/nf-core/viralrecon/nextflow.config

Input/output options
  input                    : samplesheet.csv
  platform                 : nanopore

Reference genome options
  genome                   : MN908947.3
  fasta                    : https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.reference.fasta
  gff                      : https://github.com/nf-core/test-datasets/raw/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz
  primer_bed               : https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.primer.bed
  primer_set_version       : 3

Nanopore options
  fastq_dir                : fastq_pass/
  artic_minion_caller      : medaka
  artic_scheme             : nCoV-2019
  artic_minion_medaka_model: r941_min_high_g360

Max job request options
  max_memory               : 24.GB

!! Only displaying parameters that differ from the pipeline defaults !!
------------------------------------------------------
If you use nf-core/viralrecon for your analysis please cite:

* The pipeline
  https://doi.org/10.5281/zenodo.3901628

* The nf-core framework
  https://doi.org/10.1038/s41587-020-0439-x

* Software dependencies
  https://github.com/nf-core/viralrecon/blob/master/CITATIONS.md
------------------------------------------------------
executor >  local (6)
[28/41fec3] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:GUNZIP_GFF (GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz) [100%] 1 of 1 ✔
[ba/b4665a] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:GET_CHROM_SIZES (nCoV-2019.reference.fasta)                    [100%] 1 of 1 ✔
[66/d83193] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:COLLAPSE_PRIMERS (nCoV-2019.primer.bed)                        [100%] 1 of 1 ✔
[df/d294e3] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:SNPEFF_BUILD (nCoV-2019.reference.fasta)                       [100%] 1 of 1 ✔
[b0/92b4ed] process > NFCORE_VIRALRECON:NANOPORE:INPUT_CHECK:SAMPLESHEET_CHECK (samplesheet.csv)                               [100%] 1 of 1 ✔
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_CUSTOM_TSV_NO_SAMPLE_NAME                                             -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_CUSTOM_TSV_NO_BARCODES                                                -
[a8/89c1d8] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_CUSTOM_TSV_BARCODE_COUNT                                              [100%] 1 of 1 ✔
[-        ] process > NFCORE_VIRALRECON:NANOPORE:ARTIC_GUPPYPLEX                                                               -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_CUSTOM_TSV_GUPPYPLEX_COUNT                                            -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:NANOPLOT                                                                      -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION                                                                  -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:FILTER_BAM_SAMTOOLS:SAMTOOLS_VIEW                                             -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:FILTER_BAM_SAMTOOLS:SAMTOOLS_INDEX                                            -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:FILTER_BAM_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_STATS                         -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:FILTER_BAM_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_FLAGSTAT                      -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:FILTER_BAM_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_IDXSTATS                      -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:BCFTOOLS_STATS                                                                -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MOSDEPTH_GENOME                                                               -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PLOT_MOSDEPTH_REGIONS_GENOME                                                  -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MOSDEPTH_AMPLICON                                                             -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PLOT_MOSDEPTH_REGIONS_AMPLICON                                                -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PANGOLIN                                                                      -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:NEXTCLADE                                                                     -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_CUSTOM_TSV_NEXTCLADE                                                  -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:QUAST                                                                         -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:SNPEFF_SNPSIFT:SNPEFF_ANN                                                     -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:SNPEFF_SNPSIFT:VCF_BGZIP_TABIX_STATS:TABIX_BGZIP                              -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:SNPEFF_SNPSIFT:VCF_BGZIP_TABIX_STATS:VCF_TABIX_STATS:TABIX_TABIX              -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:SNPEFF_SNPSIFT:VCF_BGZIP_TABIX_STATS:VCF_TABIX_STATS:BCFTOOLS_STATS           -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:SNPEFF_SNPSIFT:SNPSIFT_EXTRACTFIELDS                                          -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:ASCIIGENOME                                                                   -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:GET_SOFTWARE_VERSIONS                                                         -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC                                                                       -
-[nf-core/viralrecon] Pipeline completed successfully-
""


",llk578496,https://github.com/nf-core/viralrecon/issues/236
I_kwDODvpAGM49QnN5,VARIANTS_IVAR:PLOT_BASE_DENSITY fails with Fatal error: cannot create 'R_TempDir',CLOSED,2021-10-15T19:58:19Z,2022-01-18T11:08:56Z,2022-01-18T11:08:56Z,"Appears to be same issue as https://github.com/nf-core/rnaseq/issues/713

```bash
$ nextflow run main.nf -profile test,docker
...
-[nf-core/viralrecon] Pipeline completed with errors-
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:PLOT_BASE_DENSITY (SAMPLE2_PE.consensus.fa)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:PLOT_BASE_DENSITY (SAMPLE2_PE.consensus.fa)` terminated with an error exit status (2)

Command executed:

  plot_base_density.r \
      --fasta_files SAMPLE2_PE.consensus.fa \
      --prefixes SAMPLE2_PE.consensus \
      --output_dir ./

Command exit status:
  2

Command output:
  (empty)

Command error:
  Fatal error: cannot create 'R_TempDir'

Work dir:
  /working/nf-core-viralrecon/work/d7/4162949b0691ff8ef4b384e88e5cd5

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
```

<!--
# nf-core/viralrecon bug report

Hi there!

Thanks for telling us about a problem with the pipeline.
Please delete this text and anything that's not relevant from the template below:
-->

## Check Documentation

I have checked the following places for your error:

- [ ] [nf-core website: troubleshooting](https://nf-co.re/usage/troubleshooting)
- [ ] [nf-core/viralrecon pipeline documentation](https://nf-co.re/viralrecon/usage)

## Description of the bug

<!-- A clear and concise description of what the bug is. -->

## Steps to reproduce

Steps to reproduce the behaviour:

1. Command line: <!-- [e.g. `nextflow run ...`] -->
2. See error: <!-- [Please provide your error message] -->

## Expected behaviour

<!-- A clear and concise description of what you expected to happen. -->

## Log files

Have you provided the following extra information/files:

- [ ] The command used to run the pipeline
- [ ] The `.nextflow.log` file <!-- this is a hidden file in the directory where you launched the pipeline -->

## System

- Hardware: multiple MacBook Pro laptops
- Executor: local
- OS: macOS Big Sur
- Version: 11.6

```
$ uname -a
Darwin dione 20.6.0 Darwin Kernel Version 20.6.0: Mon Aug 30 06:12:21 PDT 2021; root:xnu-7195.141.6~3/RELEASE_X86_64 x86_64
```

## Nextflow Installation

- Version: 21.04.1

```
$ nextflow -version

      N E X T F L O W
      version 21.04.1 build 5556
      created 14-05-2021 15:20 UTC (10:20 CDT)
      cite doi:10.1038/nbt.3820
      http://nextflow.io
```

## Container engine

- Engine: Docker
- version: 20.10.8

```
$ docker --version
Docker version 20.10.8, build 3967b7d
```

## Additional context

<!-- Add any other context about the problem here. -->
",heuermh,https://github.com/nf-core/viralrecon/issues/237
I_kwDODvpAGM49yvw0,Error at the PlasmidID step : gff_to_bed.sh,CLOSED,2021-10-26T20:30:39Z,2022-02-02T15:46:43Z,2022-02-02T15:46:43Z,"
# Error at the PlasmidID step :  gff_to_bed.sh

Hi

I am trying to run viral recon pipeline with assembly enabled, and has been encountering an error at the PlasmidID step. it would be very helpful if I could get a solution to resolve the error which is described in detail below. Thank you !

viralrecon was run using the following command:

```
nextflow run nf-core/viralrecon \
    --input samplesheet.csv \
    --platform illumina \
    --protocol amplicon \
    --genome 'MN908947.3' \
    --primer_set artic \
    --primer_set_version 3 \
    --min_mapped_reads 15000 \
    --kraken2_assembly_host_filter \
    --blast_db betacoronavirus_BLAST \
    -profile singularity

```

The contents of the `nextflow.config` file in the working directory are as follows:

```
params {
    // Max resource options
    // Defaults only, expecting to be overwritten
    max_memory                   = '764.GB'
    max_cpus                     = 36
    max_time                     = '335.h'
}

```

I get the following error message (seems to be from prokka)

```

  Command wrapper:
  
  
  CHECKING DEPENDENCIES AND MANDATORY FILES
  
  DEPENDENCY	              STATUS
  ----------	              ------
  blastn                       INSTALLED 
  prokka                       INSTALLED 
  circos                       INSTALLED 
  mash                         INSTALLED 
  gawk                         INSTALLED 
  
  SCREENING READS WITH KMERS (Tue Oct 26 10:45:30 EDT 2021)
   Reads will be screened against database supplied for further filtering and mapping,
   this will reduce the input sequences to map against SAMPLE_IDENTIFIER
  
  CLUSTERING SEQUENCES BY KMER DISTANCE (Tue Oct 26 10:45:30 EDT 2021)
   Sequences obtained after screen will be clustered to reduce redundancy,
   one representative, the largest, will be considered for further analysis SAMPLE_IDENTIFIER
  
  
  -------------------------
  #Pipeline reconstruction#
  -------------------------
  Contigs                                SAMPLE_IDENTIFIER.scaffolds.fa
  Will be aligned to                     database.filtered_0.80_term.0.5.representative.fasta
  That contains                          1 plasmids
  And each contig aligned more than      20 %
  and have at least                      60 % identity
  Will be represented and annotated       
  
  ANNOTATING CONTIGS (Tue Oct 26 10:45:33 EDT 2021)
   A file including all automatic annotations on contigs will be generated.
  
  
  ALIGNING CONTIGS TO FILTERED PLASMIDS (Tue Oct 26 10:45:37 EDT 2021)
   Contigs are aligned to filtered plasmids and those are selected by alignment identity and alignment percentage in order to create links, full length and annotation tracks
  
  
  ---------------------------------------
  
  ERROR in Script plasmidID on or near line 868; exiting with status 1
  MESSAGE:
  
  See ./logs/plasmidID.log for more information.
  command:
  gff_to_bed.sh -i ./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER"".gff"" -L
  
  ---------------------------------------

Work dir:
  /2021_10_25_run/work/1b/34f24b04239cd078bfd503161f3f62

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`

```

At , the content of the log file at `/2021_10_25_run/work/1b/34f24b04239cd078bfd503161f3f62/NO_GROUP/SAMPLE_IDENTIFIER/logs/plasmidID.log` are as follows:

```
LOG FILE PLASMIDID
Tue Oct 26 10:45:30 EDT 2021

#Executing /usr/local/bin/mash_screener.sh 


DEPENDENCY	              STATUS
----------	              ------
bash                         INSTALLED 
mash                         INSTALLED 
Output directory is ./NO_GROUP/SAMPLE_IDENTIFIER/kmer
creating sketch of  nCoV-2019.reference.fasta
Sketching nCoV-2019.reference.fasta...
Writing to ./NO_GROUP/SAMPLE_IDENTIFIER/kmer/database.msh...
Tue Oct 26 10:45:30 EDT 2021
screening SAMPLE_IDENTIFIER.scaffolds.fa
Loading ./NO_GROUP/SAMPLE_IDENTIFIER/kmer/database.msh...
   1000 distinct hashes.
Streaming from SAMPLE_IDENTIFIER.scaffolds.fa...
   Estimated distinct k-mers in mixture: 31081
Summing shared...
Reallocating to winners...
Computing coverage medians...
Writing output...
Tue Oct 26 10:45:30 EDT 2021
DONE Screening SAMPLE_IDENTIFIER of NO_GROUP Group 

Retrieving sequences matching more than 0.80 identity

#Executing /usr/local/bin/filter_fasta.sh 

Output directory is ./NO_GROUP/SAMPLE_IDENTIFIER/kmer
Tue Oct 26 10:45:30 EDT 2021
Filtering terms on file nCoV-2019.reference.fasta
Tue Oct 26 10:45:30 EDT 2021
DONE Filtering terms on file nCoV-2019.reference.fasta
File with filtered sequences can be found in ./NO_GROUP/SAMPLE_IDENTIFIER/kmer/database.filtered_0.80_term.fasta
Previous number of sequences= 1
Post number of sequences= 1


Namespace(distance=0.5, input_file='./NO_GROUP/SAMPLE_IDENTIFIER/kmer/database.filtered_0.80_term.fasta', output=False, output_grouped=False)
Obtaining mash distance
Obtaining cluster from distance
Calculating length
Filtering representative fasta
1 sequences clustered into 1
DONE

#Executing /usr/local/bin/calculate_seqlen.sh 

Tue Oct 26 10:45:33 EDT 2021
Done seqlen calculation
Files can be found at ./NO_GROUP/SAMPLE_IDENTIFIER/data

#Executing /usr/local/bin/build_karyotype.sh 

(standard_in) 1: syntax error
(standard_in) 1: syntax error
FILE NAME SAMPLE_IDENTIFIER
Tue Oct 26 10:45:33 EDT 2021
Obtain list of cromosomes (idiogram) for CIRCOS karyotype file
Generating summary karyotype file with plasmids that mapped more than %
Tue Oct 26 10:45:33 EDT 2021
Done Obtain list of cromosomes (idiogram) for CIRCOS karyotype file
Files can be found at ./NO_GROUP/SAMPLE_IDENTIFIER/data
1 sequences will be displayed on summary image
1 images will be created individually 


#Executing /usr/local/bin/prokka_annotation.sh 


DEPENDENCY	              STATUS
----------	              ------
prokka                       INSTALLED 
PREFIX SAMPLE_IDENTIFIER
Output directory is ./NO_GROUP/SAMPLE_IDENTIFIER/data
Tue Oct 26 10:45:33 EDT 2021
Annotating SAMPLE_IDENTIFIER.scaffolds.fa with prokka
[10:45:33] This is prokka 1.14.6
[10:45:33] Written by Torsten Seemann <torsten.seemann@gmail.com>
[10:45:33] Homepage is https://github.com/tseemann/prokka
[10:45:33] Local time is Tue Oct 26 10:45:33 2021
[10:45:33] You are not telling me who you are!
[10:45:33] Operating system is linux
[10:45:33] You have BioPerl 1.007002
[10:45:33] System has 80 cores.
[10:45:33] Will use maximum of 1 cores.
[10:45:33] Annotating as >>> Bacteria <<<
[10:45:33] Re-using existing --outdir ./NO_GROUP/SAMPLE_IDENTIFIER/data
[10:45:33] Using filename prefix: SAMPLE_IDENTIFIER.XXX
[10:45:33] Setting HMMER_NCPU=1
[10:45:33] Writing log to: ./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER.log
[10:45:33] Command: /usr/local/bin/prokka --force --outdir ./NO_GROUP/SAMPLE_IDENTIFIER/data --prefix SAMPLE_IDENTIFIER --addgenes --kingdom Bacteria --genus --species --usegenus --centre BU-ISCIII --locustag SAMPLE_IDENTIFIER --addgenes --cpus 1 SAMPLE_IDENTIFIER.scaffolds.fa
[10:45:33] Appending to PATH: /usr/local/bin
[10:45:33] Looking for 'aragorn' - found /usr/local/bin/aragorn
[10:45:33] Determined aragorn version is 001002 from 'ARAGORN v1.2.38 Dean Laslett'
[10:45:33] Looking for 'barrnap' - found /usr/local/bin/barrnap
[10:45:33] Determined barrnap version is 000009 from 'barrnap 0.9'
[10:45:33] Looking for 'blastp' - found /usr/local/bin/blastp
[10:45:35] Determined blastp version is 002011 from 'blastp: 2.11.0+'
[10:45:35] Looking for 'cmpress' - found /usr/local/bin/cmpress
[10:45:35] Determined cmpress version is 001001 from '# INFERNAL 1.1.4 (Dec 2020)'
[10:45:35] Looking for 'cmscan' - found /usr/local/bin/cmscan
[10:45:35] Determined cmscan version is 001001 from '# INFERNAL 1.1.4 (Dec 2020)'
[10:45:35] Looking for 'egrep' - found /bin/egrep
[10:45:35] Looking for 'find' - found /usr/bin/find
[10:45:35] Looking for 'grep' - found /bin/grep
[10:45:35] Looking for 'hmmpress' - found /usr/local/bin/hmmpress
[10:45:35] Determined hmmpress version is 003003 from '# HMMER 3.3.2 (Nov 2020); http://hmmer.org/'
[10:45:35] Looking for 'hmmscan' - found /usr/local/bin/hmmscan
[10:45:35] Determined hmmscan version is 003003 from '# HMMER 3.3.2 (Nov 2020); http://hmmer.org/'
[10:45:35] Looking for 'java' - found /usr/local/bin/java
[10:45:35] Looking for 'makeblastdb' - found /usr/local/bin/makeblastdb
[10:45:35] Determined makeblastdb version is 002011 from 'makeblastdb: 2.11.0+'
[10:45:35] Looking for 'minced' - found /usr/local/bin/minced
[10:45:36] Determined minced version is 004002 from 'minced 0.4.2'
[10:45:36] Looking for 'parallel' - found /usr/local/bin/parallel
[10:45:36] Determined parallel version is 20210222 from 'GNU parallel 20210222'
[10:45:36] Looking for 'prodigal' - found /usr/local/bin/prodigal
[10:45:36] Determined prodigal version is 002006 from 'Prodigal V2.6.3: February, 2016'
[10:45:36] Looking for 'prokka-genbank_to_fasta_db' - found /usr/local/bin/prokka-genbank_to_fasta_db
[10:45:36] Looking for 'sed' - found /bin/sed
[10:45:36] Looking for 'tbl2asn' - found /usr/local/bin/tbl2asn
[10:45:37] Determined tbl2asn version is 025007 from 'tbl2asn 25.7   arguments:'
[10:45:37] Using genetic code table 11.
[10:45:37] Loading and checking input file: SAMPLE_IDENTIFIER.scaffolds.fa
[10:45:37] Wrote 9 contigs totalling 30319 bp.
[10:45:37] Predicting tRNAs and tmRNAs
[10:45:37] Running: aragorn -l -gc11  -w \.\/NO_GROUP\/SAMPLE_IDENTIFIER\/data\/SAMPLE_IDENTIFIER\.fna
[10:45:37] Found 0 tRNAs
[10:45:37] Predicting Ribosomal RNAs
[10:45:37] Running Barrnap with 1 threads
[10:45:37] Found 0 rRNAs
[10:45:37] Skipping ncRNA search, enable with --rfam if desired.
[10:45:37] Total of 0 tRNA + rRNA features
[10:45:37] Searching for CRISPR repeats
[10:45:37] Found 0 CRISPRs
[10:45:37] Predicting coding sequences
[10:45:37] Contigs total 30319 bp, so using meta mode
[10:45:37] Running: prodigal -i \.\/NO_GROUP\/SAMPLE_IDENTIFIER\/data\/SAMPLE_IDENTIFIER\.fna -c -m -g 11 -p meta -f sco -q
[10:45:37] Found 12 CDS
[10:45:37] Connecting features back to sequences
[10:45:37] Skipping genus-specific proteins as can't see /usr/local/db/--species
[10:45:37] Annotating CDS, please be patient.
[10:45:37] Will use 1 CPUs for similarity searching.
[10:45:37] There are still 12 unannotated CDS left (started with 12)
[10:45:37] Will use blast to search against /usr/local/db/kingdom/Bacteria/IS with 1 CPUs
[10:45:37] Running: cat \.\/NO_GROUP\/SAMPLE_IDENTIFIER\/data\/SAMPLE_IDENTIFIER\.IS\.tmp\.2470808\.faa | parallel --gnu --plain -j 1 --block 3028 --recstart '>' --pipe blastp -query - -db /usr/local/db/kingdom/Bacteria/IS -evalue 1e-30 -qcov_hsp_perc 90 -num_threads 1 -num_descriptions 1 -num_alignments 1 -seg no > \.\/NO_GROUP\/SAMPLE_IDENTIFIER\/data\/SAMPLE_IDENTIFIER\.IS\.tmp\.2470808\.blast 2> /dev/null
[10:45:37] Could not run command: cat \.\/NO_GROUP\/SAMPLE_IDENTIFIER\/data\/SAMPLE_IDENTIFIER\.IS\.tmp\.2470808\.faa | parallel --gnu --plain -j 1 --block 3028 --recstart '>' --pipe blastp -query - -db /usr/local/db/kingdom/Bacteria/IS -evalue 1e-30 -qcov_hsp_perc 90 -num_threads 1 -num_descriptions 1 -num_alignments 1 -seg no > \.\/NO_GROUP\/SAMPLE_IDENTIFIER\/data\/SAMPLE_IDENTIFIER\.IS\.tmp\.2470808\.blast 2> /dev/null
Tue Oct 26 10:45:37 EDT 2021
done annotating SAMPLE_IDENTIFIER.scaffolds.fa with prokka
Removing unwanted files



#Executing /usr/local/bin/blast_align.sh 

query type selected as nucl
Output directory is ./NO_GROUP/SAMPLE_IDENTIFIER/data
filename is SAMPLE_IDENTIFIER
Tue Oct 26 10:45:37 EDT 2021
Blasting SAMPLE_IDENTIFIER agaist database.filtered_0.80_term.0.5.representative.fasta


Building a new DB, current time: 10/26/2021 10:45:37
New DB name:   /2021_10_25_run/work/1b/34f24b04239cd078bfd503161f3f62/NO_GROUP/SAMPLE_IDENTIFIER/kmer/database.filtered_0.80_term.0.5.representative.fasta.blast.tmp
New DB title:  ./NO_GROUP/SAMPLE_IDENTIFIER/kmer/database.filtered_0.80_term.0.5.representative.fasta
Sequence type: Nucleotide
Keep MBits: T
Maximum file size: 1000000000B
Adding sequences from FASTA; added 1 sequences in 0.000415802 seconds.


BLAST command is blastn
Tue Oct 26 10:45:38 EDT 2021
Done blasting SAMPLE_IDENTIFIER agaist database.filtered_0.80_term.0.5.representative.fasta
blasted file can be found in ./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER.plasmids.blast 


#Executing /usr/local/bin/blast_to_bed.sh 

Tue Oct 26 10:45:38 EDT 2021
Adapting blast to bed using SAMPLE_IDENTIFIER.plasmids.blast with:
Blast identity= 60
Min length aligned= 500
Min len percentage= 0
database_delimiter= -
database_field)= length(database_name)
query_delimiter= _
query_field= length(query_name)
Tue Oct 26 10:45:38 EDT 2021
DONE adapting blast to bed
File can be found at ./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER.plasmids.bed 


#Executing /usr/local/bin/blast_to_complete.sh 

Tue Oct 26 10:45:38 EDT 2021
Adapting blast to complete using SAMPLE_IDENTIFIER.plasmids.blast with:
Blast identity= 60
Min len percentage= 20
Tue Oct 26 10:45:38 EDT 2021
DONE adapting blast to complete
File can be found at ./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER.plasmids.complete /n

#Executing /usr/local/bin/blast_to_link.sh 

Tue Oct 26 10:45:38 EDT 2021
Adapting blast to links using SAMPLE_IDENTIFIER.plasmids.blast with:
Blast identity= 60
Min len percentage= 20
Tue Oct 26 10:45:38 EDT 2021
DONE adapting blast to link
File can be found at ./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER.plasmids.links 


#Executing /usr/local/bin/gff_to_bed.sh 

SAMPLE_IDENTIFIER.gff not supplied, please, introduce a valid file
ERROR: 1 missing files, aborting execution
Tue Oct 26 10:45:38 EDT 2021
Getting bed file from GFF in SAMPLE_IDENTIFIER.gff
awk: cmd. line:2: fatal: cannot open file `./NO_GROUP/SAMPLE_IDENTIFIER/data/SAMPLE_IDENTIFIER.gff' for reading: No such file or directory

---------------------------------------

ERROR in Script gff_to_bed.sh on or near line 213; exiting with status 1
MESSAGE:

Awk command in SAMPLE_IDENTIFIER.gff"".reverse.bed"" creation. See ./NO_GROUP/SAMPLE_IDENTIFIER/data/logs for more information.

---------------------------------------

```


## Check Documentation

I have checked the following places for your error:

- [X] [nf-core website: troubleshooting](https://nf-co.re/usage/troubleshooting)
- [X] [nf-core/viralrecon pipeline documentation](https://nf-co.re/viralrecon/usage)

## Log files

Have you provided the following extra information/files:

- [X] The command used to run the pipeline
- [ ] The `.nextflow.log` file 

## System

- Hardware: HPC
- Executor: PBS
- OS:  CentOS Linux
- Version 8.4.2105

## Nextflow Installation

- Version: 21.04.3.5560

## Container engine

- Engine: Singularity
- version: 3.8.0-1.el8
",stevin-wilson,https://github.com/nf-core/viralrecon/issues/238
I_kwDODvpAGM5AnnMn,Difference in NextClade/Pangolin Assignments between viralrecon and the official web apps,CLOSED,2021-12-19T15:38:07Z,2022-01-07T18:06:58Z,2022-01-07T18:06:58Z,"# nf-core/viralrecon bug report

Hi

I am part of a SARS-CoV-2 surveillance team, and we have been using nf-core/viralrecon extensively in our project [Thank you :) ]. Recently, we have been having several omicron variant samples (we have been using a wet lab assay to predict the variant associated with samples prior to sequencing), and we are noticing that viralrecon calls them as 20A or 20B. I uploaded the consensus sequence files from `results/variant/ivar/consensus` into [NextClade](https://clades.nextstrain.org/) and  [Pangolin](https://pangolin.cog-uk.io/) web apps, and the sequences are classified as 21K and B.1.1.529. I was wondering about the cause of this discrepancy.

## Check Documentation

I have checked the following places for your error:

- [ X] [nf-core website: troubleshooting](https://nf-co.re/usage/troubleshooting)
- [ X] [nf-core/viralrecon pipeline documentation](https://nf-co.re/viralrecon/usage)

## Steps to reproduce

Steps to reproduce the behaviour:

1. Command line: 

nextflow run nf-core/viralrecon \
    --input samplesheet.csv \
    --platform illumina \
    --protocol amplicon \
    --genome 'MN908947.3' \
    --primer_set artic \
    --primer_set_version 3 \
    --skip_assembly \
    -profile singularity

## Log files

Have you provided the following extra information/files:

- [ X] The command used to run the pipeline
- [ ] The `.nextflow.log` file <!-- this is a hidden file in the directory where you launched the pipeline -->

## System

- Hardware: HPC
- Executor: PBS
- OS: CentOS Linux
- Version 8.4.2105

## Nextflow Installation

- Version: 21.10.3

## Container engine

- Engine: Singularity
- version: 3.8.0-1.el8

## Additional context

Attached is the pipeline report.

[pipeline_report.txt](https://github.com/nf-core/viralrecon/files/7741055/pipeline_report.txt)

Thank you

",stevin-wilson,https://github.com/nf-core/viralrecon/issues/241
I_kwDODvpAGM5frdQq,AWS Access Key Id you provided does not exist in our records,CLOSED,2021-12-22T21:39:39Z,2023-03-01T15:55:39Z,2023-03-01T15:55:38Z,"Hello!

Here running the typical command:
nextflow run nf-core/viralrecon --input samplesheet.csv --platform illumina --protocol amplicon --genome 'MN908947.3' --primer_set artic --primer_set_version 3 --skip_assembly -profile docker
produces:
The AWS Access Key Id you provided does not exist in our records. (Service: Amazon S3; Status Code: 403; Error Code: InvalidAccessKeyId; Request ID: PJZXQ5FZAWTQH9GM; S3 Extended Request ID: TXcLDOz/N1yKf/fgFGradf2eg9cEo4asEzitppMlel7UsMg7b7fiv7pAnZqGdLRdJa7Kr+VpCVk=)


 -- Check script '/home/genomica/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 25 or see '.nextflow.log' file for more details 
[nextflow.log](https://github.com/nf-core/configs/files/7765368/nextflow.log) attached

Thank you for looking into this!


",anca-riza,https://github.com/nf-core/viralrecon/issues/357
I_kwDODvpAGM5AzZJp,AWS Access Key Id you provided does not exist in our records,CLOSED,2021-12-22T21:52:51Z,2022-01-17T15:06:44Z,2022-01-17T15:06:44Z,"Hello!

Here running the typical command:
nextflow run nf-core/viralrecon --input samplesheet.csv --platform illumina --protocol amplicon --genome 'MN908947.3' --primer_set artic --primer_set_version 3 --skip_assembly -profile docker
produces:
The AWS Access Key Id you provided does not exist in our records. (Service: Amazon S3; Status Code: 403; Error Code: InvalidAccessKeyId; Request ID: PJZXQ5FZAWTQH9GM; S3 Extended Request ID: TXcLDOz/N1yKf/fgFGradf2eg9cEo4asEzitppMlel7UsMg7b7fiv7pAnZqGdLRdJa7Kr+VpCVk=)

-- Check script '/home/genomica/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 25 or see '.nextflow.log' file for more details
nextflow.log attached
[nextflow.log](https://github.com/nf-core/viralrecon/files/7767431/nextflow.log)


Thank you for looking into this!",anca-riza,https://github.com/nf-core/viralrecon/issues/242
I_kwDODvpAGM5Bge8d,Fix BCFtools consensus generation and masking,CLOSED,2022-01-11T11:26:49Z,2022-01-21T14:15:52Z,2022-01-21T14:15:51Z,"## Check Documentation

I have checked the following places for your error:

- [X] [nf-core website: troubleshooting](https://nf-co.re/usage/troubleshooting)
- [X] [nf-core/viralrecon pipeline documentation](https://nf-co.re/viralrecon/usage)

## Description of the bug
bcftools consensus fasta is renamed before consensus and masking command, so no variants are included in the consensus nor is masked. Reference genome is rendered.

We'll fix this.


",saramonzon,https://github.com/nf-core/viralrecon/issues/244
I_kwDODvpAGM5Bgg5b,Mpileup file as output,CLOSED,2022-01-11T11:35:17Z,2022-01-21T15:20:06Z,2022-01-21T15:20:06Z,"## Is your feature request related to a problem? Please describe
Mpileup files can't be generated nor outputted by the pipeline, not even in the work dir. This could be problematic when debugging potential problems/issues with the results. 

## Describe the solution you'd like
We'd like a bcftools and samtools mpileup module to be independent from bcftools call and ivar variants modules so the user can choose to save the mpileup as output or not.
We prefer this option as bcftools and ivar could potentially use the same mpileup file so we can save time and resources.

## Describe alternatives you've considered
An alternative is not to create a new module, but the existing modules would not to pipe the mpileup file into bcftools call or ivar variants, so use could save the mpileup if desired. 

## Additional context
",saramonzon,https://github.com/nf-core/viralrecon/issues/245
I_kwDODvpAGM5BgiqL,Option to generate consensus with BCFTools / BEDTools using iVar variants,CLOSED,2022-01-11T11:43:29Z,2022-01-31T14:39:37Z,2022-01-31T14:39:37Z,"## Is your feature request related to a problem? Please describe
`ivar consensus` command has some issues already reported in their github: https://github.com/andersen-lab/ivar/issues/103 , https://github.com/andersen-lab/ivar/issues/97, https://github.com/andersen-lab/ivar/issues/85

## Describe the solution you'd like
We want an alternative method for generating the consensus using ivar variants and bcftools consensus. We'll select variants with AF > threshold and include them in the consensus, and we'll mask the consensus fasta as for bcftools caller.",saramonzon,https://github.com/nf-core/viralrecon/issues/246
I_kwDODvpAGM5Bgj3g,Add strand-bias filtering option and codon fix in consecutive positions in ivar tsv conversion to vcf,CLOSED,2022-01-11T11:49:19Z,2022-01-21T14:17:48Z,2022-01-21T14:17:48Z,"## Is your feature request related to a problem? Please describe
Ivar software does not has an strand-bias filtering option (https://github.com/andersen-lab/ivar/issues/5), this is not needed for amplicon data but it's is useful for direc metagenomics or probe capture experiments. 
Also there is a problem with consecutive positions and codon annotation (https://github.com/andersen-lab/ivar/issues/92).

## Describe the solution you'd like
We'd like viralrecon script [ivar_variants_to_vcf.py](https://github.com/nf-core/viralrecon/blob/dev/bin/ivar_variants_to_vcf.py) to include the strand-bias filtering option, as well as fix the codon issue.
",saramonzon,https://github.com/nf-core/viralrecon/issues/247
I_kwDODvpAGM5BgkYU,New variants reporting table,CLOSED,2022-01-11T11:51:48Z,2022-02-02T13:15:53Z,2022-02-02T13:15:53Z,"## Describe the solution you'd like
We'd like a variants reporting as output like this:
```
Sample	POS	REF	ALT	GENE	EFFECT	HGVS_C	HGVS_P	lineages
2110041	3037	C	T	orf1ab	synonymous_variant	c.2772C>T	p.Phe924Phe	None
2110202	10029	C	T	orf1ab	missense_variant	c.9764C>T	p.Thr3255Ile	AY.124
2110202	10323	A	G	orf1ab	missense_variant	c.10058A>G	p.Lys3353Arg	AY.124
2110202	11201	A	G	orf1ab	missense_variant	c.10936A>G	p.Thr3646Ala	AY.124
2110202	11332	A	G	orf1ab	synonymous_variant	c.11067A>G	p.Val3689Val	AY.124
2110202	13971	C	T	orf1ab	missense_variant	c.13706C>T	p.Thr4569Ile	AY.124
2110202	14408	C	T	orf1ab	synonymous_variant	c.14143C>T	p.Leu4715Leu	AY.124
2110202	15451	G	A	orf1ab	synonymous_variant	c.15186G>A	p.Ala5062Ala	AY.124
2110202	1593	C	T	orf1ab	missense_variant	c.1328C>T	p.Ser443Phe	AY.124
2110202	16466	C	T	orf1ab	missense_variant	c.16201C>T	p.His5401Tyr	AY.124
2110202	17133	C	T	orf1ab	missense_variant	c.16868C>T	p.Thr5623Ile	AY.124
2110202	19220	C	T	orf1ab	synonymous_variant	c.18955C>T	p.Leu6319Leu	AY.124
2110202	210	G	T	orf1ab	upstream_gene_variant	c.-56G>T	.	AY.124
2110202	21145	C	T	orf1ab	synonymous_variant	c.20880C>T	p.Leu6960Leu	AY.124
2110202	21301	C	A	orf1ab	missense_variant	c.21036C>A	p.Asn7012Lys	AY.124
```
",saramonzon,https://github.com/nf-core/viralrecon/issues/248
I_kwDODvpAGM5BjoX9,repurposing viralrecon workflow for other viruses?,CLOSED,2022-01-12T04:17:27Z,2022-01-14T13:45:06Z,2022-01-14T13:44:58Z,"Hi there! 

Thank you so much for the efforts in developing and contributing to this this excellent pipeline!

Is there guide for showing us how to experiment with other viruses by re-configuring workflow input settings especially genome reference and primers (how about degenerate primers?), via an offline pipeline will be greatly useful. ...",Krysasp,https://github.com/nf-core/viralrecon/issues/249
I_kwDODvpAGM5CncpW,SARS-CoV-2 ORF1b mutation reporting differences between SnpEff and Nextclade,OPEN,2022-01-28T17:03:45Z,2022-02-03T18:35:03Z,,"We've encountered issues with the reporting of ORF1ab mutations falling in the ORF1b region where the -1 frameshift is not taken into account by SnpEff. 

Nextclade uses a different GFF than viralrecon when using MN908947.3 genome profile:

```
.	.	gene	266	13468	.	+	.	 gene_name=ORF1a
.	.	gene	13468	21555	.	+	.	 gene_name=ORF1b
```

https://github.com/nextstrain/nextclade/blob/96e42468cae447afdbc9d0eda73f160e8049e6e4/data/sars-cov-2/genemap.gff#L8

```
MN908947.3	Genbank	gene	266	21555	.	+	.	ID=gene-orf1ab;Name=orf1ab;gbkey=Gene;gene=orf1ab;gene_biotype=protein_coding
MN908947.3	Genbank	CDS	266	13468	.	+	0	ID=cds-QHD43415.1;Parent=gene-orf1ab;Dbxref=NCBI_GP:QHD43415.1;Name=QHD43415.1;Note=translated by -1 ribosomal frameshift;exception=ribosomal slippage;gbkey=CDS;gene=orf1ab;product=orf1ab polyprotein;protein_id=QHD43415.1
MN908947.3	Genbank	CDS	13468	21555	.	+	0	ID=cds-QHD43415.1;Parent=gene-orf1ab;Dbxref=NCBI_GP:QHD43415.1;Name=QHD43415.1;Note=translated by -1 ribosomal frameshift;exception=ribosomal slippage;gbkey=CDS;gene=orf1ab;product=orf1ab polyprotein;protein_id=QHD43415.1
```

https://github.com/nf-core/test-datasets/blob/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz

So for example a C14322T nucleotide substitution will be reported by SnpEff as a T4686I AA substitution, but Nextclade will only report the nucleotide substitution and no AA substitution.

The AA at position 4686 should be **Y** instead of the **T** reported by SnpEff:

![image](https://user-images.githubusercontent.com/4203424/151589199-d3f4f42b-a029-4b7b-854e-f945d04fbfc1.png)

screenshot from https://www.ncbi.nlm.nih.gov/protein/QHD43415.1?report=graph

## Potential solution

Use a custom GFF with separate ORF1a and ORF1b ""gene"" entries like Nextclade does.
",peterk87,https://github.com/nf-core/viralrecon/issues/263
I_kwDODvpAGM5C7uE-,Major updates in v2.3,CLOSED,2022-02-03T11:10:01Z,2022-02-15T08:57:14Z,2022-02-15T08:57:14Z,Please see below for a summary of changes.,drpatelh,https://github.com/nf-core/viralrecon/issues/271
I_kwDODvpAGM5D1_cR,Misuse of rstrip in make_variants_long_table.py script,CLOSED,2022-02-15T06:07:05Z,2022-02-15T16:40:42Z,2022-02-15T16:11:36Z,"Hi folks.

There is a problem with the use of rstrip to remove file suffixes at https://github.com/nf-core/viralrecon/blob/master/bin/make_variants_long_table.py#L47 that can cause issues (and a workflow failure) for some sample names.

`rstrip` doesn't remove a specified substring from the end of string.
It actually removes any characters (and any number of them) regardless of order in the substring from the end of string.
`rstrip` only stops when it encounters a character in the string not in the specified substring.
e.g.,
```
""abaaacccca....ccaac"".rstrip(""ac."")
>>> ""ab""
```
This means sample names containing characters in the suffix being removed get mangled:
```
filename='XXXX_P0_meta.oilcans.saponin.pangolin.csv'
suffix="".pangolin.csv""
print(filename.rstrip(suffix))
>>>XXXX_P0_met
```

Replacing rstrip with `removesuffix` should fix this in python >=3.9 (alternatively replace should be fine although a simple regex would be better!).",fmaguire,https://github.com/nf-core/viralrecon/issues/277
I_kwDODvpAGM5EHOz8,"Nanopore medaka processing fails with error if model name, not model file, provided",CLOSED,2022-02-18T09:50:36Z,2022-02-18T18:14:58Z,2022-02-18T17:36:09Z,"### Description of the bug

When a medaka model is specified by model name, not path to model file, viralrecon will fail with an error. The error (see below) seems to come from this [line](https://github.com/nf-core/viralrecon/blob/master/modules/nf-core/modules/artic/minion/main.nf#L47) of code.

When a model filename is passed (I extracted the models from the Singularity image) the command runs to completion.

### Command used and terminal output

```console
$ nextflow run nf-core/viralrecon --input samplesheet.csv --platform nanopore --genome MN908947.3 --primer_set_version 3 --fastq_dir fastq_pass --artic_minion_caller medaka --artic_minion_medaka_model r941_min_high_g360
...
Error executing process > 'NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (Sample_01)'

Caused by:
  Argument of `file` function cannot be empty

Source block:
  def args = task.ext.args   ?: ''
  prefix   = task.ext.prefix ?: ""${meta.id}""
  def version  = scheme_version.toString().toLowerCase().replaceAll('v','')
  def fast5    = fast5_dir ? ""--fast5-directory $fast5_dir""             : """"
  def summary  = sequencing_summary ? ""--sequencing-summary $sequencing_summary"" : """"
  def model    = """"
  if (args.tokenize().contains('--medaka')) {
          fast5   = """"
          summary = """"
          model = file(medaka_model).exists() ? ""--medaka-model ./$medaka_model"" : ""--medaka-model $medaka_model""
      }
  def hd5_plugin_path = task.ext.hd5_plugin_path ? ""export HDF5_PLUGIN_PATH="" + task.ext.hd5_plugin_path : ""export HDF5_PLUGIN_PATH=/usr/local/lib/python3.6/site-packages/ont_fast5_api/vbz_plugin""
  """"""
      $hd5_plugin_path
  
      artic \\
          minion \\
          $args \\
          --threads $task.cpus \\
          --read-file $fastq \\
          --scheme-directory ./primer-schemes \\
          --scheme-version $version \\
          $model \\
          $fast5 \\
          $summary \\
          $scheme \\
          $prefix
  
      cat <<-END_VERSIONS > versions.yml
      ""${task.process}"":
          artic: \$(artic --version 2>&1 | sed 's/^.*artic //; s/ .*\$//')
      END_VERSIONS
      """"""
```


### Relevant files

_No response_

### System information

Nextflow version: 22.01.0-edge
Hardware: HPC
Executor: slurm
Container engine: Singularity
OS: Ubuntu 18.04
Version of nf-core/viralrecon: 2.3.1 (97bebf8fe1)",pvanheus,https://github.com/nf-core/viralrecon/issues/281
I_kwDODvpAGM5EKohI,Use -params-file params.yml to pass parameters instead of -c custom.config,CLOSED,2022-02-18T19:27:04Z,2022-02-25T22:14:39Z,2022-02-25T22:14:39Z,"### Description of the bug

I am getting an error when running the latest version of viralrecon (v2.3.1). I re-ran a subset of my samples with the new version of viralrecon and got this error. The pipeline completes fastp, fastqc steps but throws this error at the bowtie alignment step.  These samples ran successfully with the previous version of viralrecon. 


### Command used and terminal output

```console
Command:
nextflow run nf-core/viralrecon --input ${run_name}_samplesheet.csv -c test_viralrecon.config \
                                -profile singularity \
                                --outdir $out_dir1 \
			        --multiqc_title ${run_name}_viralrecon

Output:
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BAM_SORT_SAMTOOLS:SAMTOOLS_SORT (220124_SV3_UT_A01290_220208_S585_L002)'

Caused by:
  Input and output names are the same, use ""task.ext.prefix"" to disambiguate!

Source block:
  def args = task.ext.args ?: ''
  def prefix = task.ext.prefix ?: ""${meta.id}""
  if (""$bam"" == ""${prefix}.bam"") error ""Input and output names are the same, use \""task.ext.prefix\"" to disambiguate!""
  """"""
      samtools sort $args -@ $task.cpus -o ${prefix}.bam -T $prefix $bam
      cat <<-END_VERSIONS > versions.yml
      ""${task.process}"":
          samtools: \$(echo \$(samtools --version 2>&1) | sed 's/^.*samtools //; s/Using.*\$//')
      END_VERSIONS
      """"""
```


### Relevant files

[test_viralrecon_config.txt](https://github.com/nf-core/viralrecon/files/8099817/test_viralrecon_config.txt)


### System information

Nextflow version (21.10.6)
Container engine: Singularity
Version of nf-core/viralrecon (2.3.1)",poojasgupta,https://github.com/nf-core/viralrecon/issues/283
I_kwDODvpAGM5ET0Kq,IVAR_VARIANTS silently failing when FAI index is missing,CLOSED,2022-02-21T17:06:28Z,2022-02-22T14:24:27Z,2022-02-21T22:58:59Z,"### Description of the bug

Hi, 

I've had an issue on 2 of 3 new sequencing batches my group has analyzed of sars cov2 data since the 2.3/2.3.1 viralrecon updates. A quick note is that I run each batch in two different versions of viralrecon, one with the parameter --ivar_trim_offset 5 as recommended for Swift amplicons, and one without. I am the person who wrote in on slack a few months back about getting the correct Swift primers, and I have successfully analyzed dozens of batches of data. My PI and other colleagues have asked me to run with and without this parameter as omicron samples have known issues with it and the Swift primers (we've spoken with Swift). I mention this in case you notice the lack of that parameter in my supplied command to invoke viralrecon.

Anyway, the main issue is that I am getting an error in 2 new batches with 2 unrelated samples that have passed QC checks etc. ViralRecon will complete all steps up to bcftools consensus and will spit out the error below. It then fails to proceed forward with the multiqc stages, etc. 

Interestingly, for this particular sample, viralrecon DID successfully complete with the ivar_trim_offset 5 parameter on, but failed without it. I have updated to the latest nextflow and viralrecon versions. I have included my slightly tweaked multiqc config file  as a .txt since you cannot upload .yaml ( I need more info from mosdepth, this adds that into the report ) and my pangolin config. Prior to v2.3, I was manually providing updated pangolin paths per the suggestion on the viralrecon docs as we want the latest pangolin DB.

If I remove the problematic sample and run viralrecon only just on it, it magically works with the same parameters. So, I have to wait a few hours to process my entire sequencing run, find out that bcftools crashed with the error shown, and then isolate the sample and re-run it alone, and then re-run the entire rest of the batch.

Is there a way to resolve this issue with the bcftools consensus command? We did not see this sort of issue with viralrecon 2.2 as it is with the bcftools consensus portion of the pipeline.

Thank you in advance,
Robert Arthur



### Command used and terminal output

```console
The main analysis portion command issued:
nextflow run nf-core/viralrecon -profile docker --input samplesheet.csv --platform illumina --protocol amplicon --genome 'MN908947.3' --primer_bed swift_refv3_primers.bed --skip_assembly --skip_kraken2 --multiqc_config '/home/rarthur/new_multiqc_config.yaml' --email_on_fail 'rarthu3@emory.edu' -c pangolin_config.txt 


Error:
-[nf-core/viralrecon] Pipeline completed with errors-
WARN: To render the execution DAG in the required format it is required to install Graphviz -- See http://www.graphviz.org for more info.
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BCFTOOLS_CONSENSUS (EHC_C19_3957E_S8_L001)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BCFTOOLS_CONSENSUS (EHC_C19_3957E_S8_L001)` terminated with an error exit status (255)

Command executed:

  cat EHC_C19_3957E_S8_L001.masked.fa \
      | bcftools \
          consensus \
          EHC_C19_3957E_S8_L001.filtered.vcf.gz \
           \
          > EHC_C19_3957E_S8_L001.fa
  
  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BCFTOOLS_CONSENSUS"":
      bcftools: $(bcftools --version 2>&1 | head -n1 | sed 's/^.*bcftools //; s/ .*$//')
  END_VERSIONS

Command exit status:
  255

Command output:
  (empty)

Command error:
  Note: the --sample option not given, applying all records regardless of the genotype
  The fasta sequence does not match the REF allele at MN908947.3:11282:
     REF .vcf: [ANNNNNNNNN]
     ALT .vcf: [A]
     REF .fa : [AGTTTGTCTG]GTTTTAAGCTAAAAGACTGTGTTATGTATGCATCAGCTGTAGTGTTACTAATCCTTATGACAGCAAGAA

Work dir:
  /mnt/beegfs/v1/eicc/home/rarthur/projects/viral/viralrecon/ehc_c19_ampseqs/feb172022_notrimoffset/work/f4/ee6d763427f4992701500c505bdd52

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
```


### Relevant files

[new_multiqc_config.txt](https://github.com/nf-core/viralrecon/files/8111011/new_multiqc_config.txt)
[pangolin_config.txt](https://github.com/nf-core/viralrecon/files/8111013/pangolin_config.txt)



### System information

Nextflow v 21.10.6
Viralrecon v2.3.1",rarthur-eicc,https://github.com/nf-core/viralrecon/issues/286
I_kwDODvpAGM5ExU7N,"--primer_set_version only accepts Integers (incompatible with ""4.1"" Artic primers set)",CLOSED,2022-02-28T08:12:13Z,2022-03-01T16:49:03Z,2022-03-01T16:49:02Z,"### Description of the bug

Hello,
<br>

First thanks for developping viralrecon, it is a wonderful tool !

Wanting to run your pipeline on Illumina data produced using ""V4.1"" Artic primer set and using [corresponding nf-core pre-defined primers set](https://github.com/nf-core/configs/blob/ff5750936db948e36d4a10fce8027b88de172823/conf/pipeline/viralrecon/genomes.config#L54-L59), I got bellow error as if `--primer_set_version` parameter could only accept integers
<br>

Thanks for your help !
Kind regard,
Felix.


### Command used and terminal output

```console
nextflow run nf-core-viralrecon-2.4/workflow \
        --genome 'MN908947.3' --platform illumina --protocol amplicon \
        --input SampleTable.csv --primer_set artic --primer_set_version 4.1 --outdir outdir \
        --kraken2_db $viralrecon_data/genome/kraken2_human --bowtie2_index $viralrecon_data/genome/bowtie2 \
        --nextclade_dataset false --nextclade_dataset_tag false \
        --skip_assembly --max_cpus 8 --max_memory 20.GB \
        -profile docker -resume -bg

ERROR: Validation of pipeline parameters failed!

* --primer_set_version: expected type: Integer, found: Double (4.1)
```


### Relevant files

_No response_

### System information

* Nextflow version = 21.10.4.5656
* Running within a WSL2 install on a Windows 10 computer
* Local executor + desktop hardware
* Docker containers
* Viralrecon version = 2.4",tetedange13,https://github.com/nf-core/viralrecon/issues/288
I_kwDODvpAGM5E3lOM,Add option to hard trim amplicon primer sequences,OPEN,2022-03-01T14:40:17Z,2022-08-31T12:16:15Z,,"### Description of feature

Context in [this Tweet](https://twitter.com/nilshomer/status/1498528699670433795?s=20&t=1uKZpUz-ZkBQKuCobNvyGQ). Used by @peterk87 @fmaguire in [this pre-print](https://www.biorxiv.org/content/10.1101/2022.02.22.481551v1).

Be great if you can add a little description as to why hard-clipping was preferred over soft-clipping and anything else that you found on your travels that would be useful to know for the implementation including the command you used :)

### Methods

```
Paired-end illumina reads from ARTIC V4 and Fusion Genomics sequencing were initially analysed separately
with the nf-core/viralrecon Nextflow workflow (v2.3) (Di Tommaso et al., 2017; Ewels et al., 2020; Patel et
al., 2022) which ran: FASTQC (v0.11.9) (Andrews, 2010) read-level quality control, fastp (v0.20.1) (Chen et al.,
2018) quality filtering and adapter trimming, Bowtie2 (v2.4.2) (Langmead & Salzberg, 2012) read mapping to
Wuhan-Hu-1 (MN908947.3) (Wu et al., 2020) SARS-CoV-2 reference, Mosdepth (v0.3.1)(Pedersen & Quinlan,
2018)/Samtools (v.1.12) (Li et al., 2009) read mapping statistics calculation, iVar (v1.3.1) (Grubaugh et al.,
2019) ARTIC V4 primer trimming, variant calling, and consensus generation; SnpEff (v5.0) (Cingolani, Platts,
et al., 2012)/SnpSift (v4.3t) (Cingolani, Patel, et al., 2012) for variant effect prediction and annotation; and
Pangolin (v3.1.20) (O’Toole et al., 2021) with PangoLEARN (2022-01-05), Scorpio (v0.3.16) (Colquhoun &
Jackson, 2021), and Constellations (v.0.1.1) was used for PANGO lineage (Rambaut et al., 2020) assignment.
iVar primer trimmed soft-clipped read alignments were converted to hard-clipped alignments with fgbio
ClipBam (http://fulcrumgenomics.github.io/fgbio/). Reads from hard-clipped BAM files were output to
FASTQ files with “samtools fastq”. nf-core/viralrecon was re-run in amplicon mode without iVar primer
trimming on the combined Fusion Genomics and ARTIC V4 primer trimmed FASTQ reads to generate the
variant calling, variant effect and consensus sequence results used in downstream analyses.
```",drpatelh,https://github.com/nf-core/viralrecon/issues/290
I_kwDODvpAGM5E--86,Filter empty FastQ files after adapter trimming,CLOSED,2022-03-02T15:37:59Z,2022-07-11T12:12:21Z,2022-07-11T12:12:21Z,"### Description of feature

We suggest the introducction of a new checkpoint after fastp trimming simmilar to the one existing after the primer trimming:
https://github.com/nf-core/viralrecon/blob/42e38bba3da80484bc480f53d2130642a349e8c6/workflows/illumina.nf#L218

to test wether the output trim.fastq.gz is empty or not. We could add it after this peace of code:

https://github.com/nf-core/viralrecon/blob/42e38bba3da80484bc480f53d2130642a349e8c6/subworkflows/nf-core/fastqc_fastp.nf#L53",svarona,https://github.com/nf-core/viralrecon/issues/292
I_kwDODvpAGM5FKCvC,CRAM output,OPEN,2022-03-05T06:29:50Z,2022-03-07T18:13:40Z,,"### Description of feature

How can I add a step to compress BAM to CRAM once the analysis is complete, then delete BAMs?
The alternative would be to output CRAM in lieu of BAM but not sure all the downstream processes can ingest CRAM.",dbrami,https://github.com/nf-core/viralrecon/issues/294
I_kwDODvpAGM5FPezi,SARS-CoV-2 workflow comparison - kindly check if your work is represented correctly,CLOSED,2022-03-07T17:06:12Z,2022-03-07T18:06:04Z,2022-03-07T18:06:04Z,"### Description of feature

Hello viralrecon Team,

I am from the University Hospital Essen, Germany, and we work extensively with SARS-CoV-2 in our research. We have also developed a [SARS-CoV-2 workflow](https://github.com/IKIM-Essen/uncovar). In preparation for the publication of our workflow, we have looked at several other SARS-CoV-2 related workflows, including your work. We will present this review in the publication and want to ensure that your work is represented as accurately as possible.

Moreover, there is currently little to no current overview of SARS-CoV-2 related workflows. Therefore, we have decided to make the above comparison publicly available [via this GitHub repository](https://github.com/IKIM-Essen/sars-cov-2-workflow-comparison). It contains a table with an overview of the functions of different SARS-CoV-2 workflows and the tools used to implement these functions.

We would like to give you the opportunity to correct any misunderstandings on our side. Please take a moment to make sure we are not misrepresenting your work or leaving out important parts of it by taking a look at [this overview table](https://github.com/IKIM-Essen/sars-cov-2-workflow-comparison/blob/main/workflow-overview.md). If you feel that something is missing or misrepresented, please feel free to give us feedback by contributing directly to the repository.

Thank you very much!

cc @alethomas",thomasbtf,https://github.com/nf-core/viralrecon/issues/295
I_kwDODvpAGM5F0HmE,Add tube map for pipeline,CLOSED,2022-03-16T16:54:51Z,2023-03-22T17:35:14Z,2023-03-22T17:35:14Z,"### Description of feature

Add tube map for both Illumina and ONT arms of pipeline.",drpatelh,https://github.com/nf-core/viralrecon/issues/297
I_kwDODvpAGM5GMtq5,error at the assembly stage,OPEN,2022-03-23T07:47:38Z,2022-08-30T07:51:06Z,,"### Description of the bug

Dear colleagues,
I have a question similar to that https://github.com/nf-core/viralrecon/issues/198 when trying to launch test experiment.
nextflow \
run nf-core/viralrecon \
-profile test,docker -r 2.4.1 \
--outdir /work/viralrecon
The text of the error is in file. Similar to the question from the link above I've tried to skip assembly stage:
nextflow \
run nf-core/viralrecon \
-profile test,docker -r 2.4.1 \
--skip_assembly \
--outdir /work/viralrecon
In this case, everything works fine, but I'd like to fix assembly error. Hope for your help.

### Command used and terminal output

```console
nextflow \
run nf-core/viralrecon \
-profile test,docker -r 2.4.1 \
--outdir /work/viralrecon

nextflow \
run nf-core/viralrecon \
-profile test,docker -r 2.4.1 \
--skip_assembly \
--outdir /work/viralrecon
```


### Relevant files

[error.txt](https://github.com/nf-core/viralrecon/files/8330872/error.txt)


### System information

Debian 5.10.103-1 (2022-03-07) x86_64, Nextflow 21.10.6.
Docker, viralrecon 2.4.1",Mewgia,https://github.com/nf-core/viralrecon/issues/298
I_kwDODvpAGM5GP2Rh,Addition of Freyja tool in viralrecon pipeline,CLOSED,2022-03-23T19:18:37Z,2023-08-16T12:50:22Z,2023-08-16T12:50:22Z,"### Description of feature

I have been using viralrecon for analyzing wastewater sample data and it works quite well. It just requires some additional post-processing for wastewater data and I was wondering if there is a possibility to add [Freyja](https://github.com/andersen-lab/Freyja) tool as part of viralrecon pipeline. This might be specific to SARS-CoV-2 but could be very helpful for analyzing wastewater data. Freyja estimates relative abundance of various SARS-CoV-2 lineages present in a sample and can discern lineages in a mixed/pooled sample, e.g., in the case of wastewater samples. It needs bam output files after ivar primer trim step and a reference sequence.
Thanks!",poojasgupta,https://github.com/nf-core/viralrecon/issues/299
I_kwDODvpAGM5HBazN,Add LoFreq Subworkflow,OPEN,2022-04-04T10:10:19Z,2022-04-04T11:28:45Z,,"### Description of feature

Add [LoFreq](https://csb5.github.io/lofreq/) variant caller subworkflow to viralrecon.

In addition to providing an alternative variant caller, this would make it possible to perform standard analysis for the [EasySeq SARS-CoV-2 WGS Kit](https://github.com/JordyCoolen/easyseq_covid19).

 This kit has been used for wastewater sequencing:
 
 [Wastewater Sequencing using the EasySeq™ RC-PCR SARS CoV-2 ](https://www.protocols.io/view/wastewater-sequencing-using-the-easyseq-rc-pcr-sar-81wgb7bx3vpk/v1?version_warning=no)",bjohnnyd,https://github.com/nf-core/viralrecon/issues/302
I_kwDODvpAGM5HNH0J,New pangolin dbs (4.0.x) not assigning lineages to Sars-CoV-2 samples in MultiQC report correctly,CLOSED,2022-04-06T13:30:11Z,2022-07-13T16:19:13Z,2022-07-11T12:17:31Z,"Hello again,

I am running a small test batch consisting of 2 actual SARS-CoV-2 samples and 1 water control as I usually do to test new pangolin/nextclade versions or even the new viralrecon versions. That said, I have attempted to use all 3 ""new"" pangolin dbs found on [their repository ](https://quay.io/repository/biocontainers/pangolin?tag=&tab=tags) per the [documentation](https://nf-co.re/viralrecon/2.4.1/usage#updating-containers) in the viralrecon docs where we can provide our own config to force an update. I've attached my manual config, nextflog log, and the command I use to invoke viralrecon is:

`nextflow run nf-core/viralrecon -profile docker --input samplesheet.csv --platform illumina --protocol amplicon --genome 'MN908947.3' --primer_bed swift_refv3_primers.bed --ivar_trim_offset 5 --skip_assembly --skip_kraken2 --multiqc_config '/home/rarthur/new_multiqc_config.yaml' --email_on_fail 'rarthu3@emory.edu' -c pangolin_config.txt --outdir ./results`

These are ampseq with Swift primers and the correct current .bed file for them. 

When I use the previous Pangolin DB (3.1.20), I get the correct assignment of BA.1.1 and NextClade assignment of 21K (Omicron). When I force any Pangolin DB 4.0.x, I get the proper nextclade assignment but a ""NA"" for Pangolin. This has been consistent for all 3 pangolin 4.0.x released in the past few days. I am not sure if they're debugging or if it's to do with the security scan issues identified on the quay.io site ([it says a numpy vulnerability](https://quay.io/repository/biocontainers/pangolin/manifest/sha256:71e961a56210583198e653ab06a727f094a56a15a8339d5d9482a4141bc6ac4a?tab=vulnerabilities)) or what. 

This is a very minor issue, and things seem to work as always when I just keep the 3.1.20 db for pangolin. But, given that 4.0 is supposed to be a ""big"" update, I am trying to see what needs to be done to get it to work within viralrecon. For all I know, it's likely an issue with the db itself, but I figured I'd ask.

[nextflow.log](https://github.com/nf-core/viralrecon/files/8427260/nextflow.log)
[pangolin_config.txt](https://github.com/nf-core/viralrecon/files/8427262/pangolin_config.txt)

Thanks again!
-Robert",rarthur-eicc,https://github.com/nf-core/viralrecon/issues/303
I_kwDODvpAGM5H2CEO,single barcode,CLOSED,2022-04-15T07:28:07Z,2022-07-07T15:01:36Z,2022-07-07T15:01:36Z,"upd. solved, can be deleted",Mewgia,https://github.com/nf-core/viralrecon/issues/305
I_kwDODvpAGM5IBWLP,Add contig field information in vcf header in ivar_variants_to_vcf and use bcftools sort,CLOSED,2022-04-19T12:44:38Z,2022-07-08T19:37:36Z,2022-07-08T19:37:36Z,"### Description of feature

Contig field is recommended in [vcf 4.2 specs](https://samtools.github.io/hts-specs/VCFv4.2.pdf), and it's needed for using bcftools sort in a not indexed vcf. It would be useful for `ivar_variants_to_vcf` to optionally accept a fasta file for including this info in the vcf header.
",saramonzon,https://github.com/nf-core/viralrecon/issues/306
I_kwDODvpAGM5I3qty,Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:INPUT_CHECK:SAMPLESHEET_CHECK (samplesheet1.csv)',CLOSED,2022-05-02T07:01:34Z,2022-07-11T17:59:51Z,2022-07-11T17:59:51Z,"### Description of the bug

To whom may concern,

Thanks for such a wonderful workflow. I have tried this on my H1N1 data. There come some error regarding the Samplesheet_check. I used the suggested python script to formulate the samplesheet.csv. Please help with it. Thanks in advance.

### Command used and terminal output

```console
#Command
nextflow run nf-core/viralrecon  --input samplesheet1.csv  --outdir .  --platform illumina --protocol metagenomic  --genome 'CY121680'  -profile singularity --nextclade_dataset 'CY121680' --fasta CY121680.fasta --skip_kraken2 --kraken2_db '/mnt/e/labwork/database/kraken2_human_db.tar.gz'

# Output
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:INPUT_CHECK:SAMPLESHEET_CHECK (samplesheet1.csv)'

Caused by:
  Failed to pull singularity image
  command: singularity pull  --name depot.galaxyproject.org-singularity-python-3.9--1.img.pulling.1651473817763 https://depot.galaxyproject.org/singularity/python:3.9--1 > /dev/null
  status : 255
  message:
    INFO:    Downloading network image
    INFO:    Cleaning up incomplete download: /home/aaronhy2022/.singularity/cache/net/tmp_2572153510
    FATAL:   unexpected EOF
```


### Relevant files

_No response_

### System information

_No response_",AaronHY,https://github.com/nf-core/viralrecon/issues/309
I_kwDODvpAGM5LTBQ_,Invalid declaration `val medaka_model_string`,CLOSED,2022-06-07T13:11:31Z,2022-07-11T11:37:50Z,2022-07-11T11:37:50Z,"### Description of the bug

When using the pipeline I'm experiencing an error and I can't figure out the problem (see text of attached log file). 

### Command used and terminal output

```console
nextflow run nf-core/viralrecon -qs 4 -revision 2.4.1 -profile docker --input results/benchmarking/nf-core-viralrecon/nanopore/sample-sheets/1_ont/sample_sheet.csv --sequencing_summary data/RAW/ONT_batch1/sequencing_summary.txt --fastq_dir resources/benchmarking/data/nf-core-viralrecon/1_ont/fastq_pass --fast5_dir resources/benchmarking/data/nf-core-viralrecon/1_ont/fast5_pass --platform nanopore --genome 'MN908947.3' --primer_set_version 3 --outdir results/benchmarking/nf-core-viralrecon/nanopore/nanopolish/1_ont  > logs/nf-core-nf_core_viralrecon_nanopore/nanopolish/1_ont.log 2>&1
```


### Relevant files

```
N E X T F L O W  ~  version 21.10.6
Pulling nf-core/viralrecon ...
 downloaded from https://github.com/nf-core/viralrecon.git
Launching `nf-core/viralrecon` [fabulous_bhabha] - revision: 42e38bba3d [2.4.1]

  nf-core/viralrecon v2.4.1
------------------------------------------------------
Core Nextflow options
  revision                   : 2.4.1
  runName                    : fabulous_bhabha
  containerEngine            : docker
  launchDir                  : /local/master-snakemake-workflow-sars-cov2
  workDir                    : /local/master-snakemake-workflow-sars-cov2/work
  projectDir                 : /home/alex/.nextflow/assets/nf-core/viralrecon
  userName                   : alex
  profile                    : docker
  configFiles                : /home/alex/.nextflow/assets/nf-core/viralrecon/nextflow.config

Input/output options
  input                      : results/benchmarking/nf-core-viralrecon/nanopore/sample-sheets/1_ont/sample_sheet.csv
  platform                   : nanopore
  outdir                     : results/benchmarking/nf-core-viralrecon/nanopore/nanopolish/1_ont

Reference genome options
  genome                     : MN908947.3
  fasta                      : https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.reference.fasta
  gff                        : https://github.com/nf-core/test-datasets/raw/viralrecon/genome/MN908947.3/GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz
  primer_bed                 : https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.primer.bed
  primer_set_version         : 3

Nanopore options
  fastq_dir                  : resources/benchmarking/data/nf-core-viralrecon/1_ont/fastq_pass
  fast5_dir                  : resources/benchmarking/data/nf-core-viralrecon/1_ont/fast5_pass
  sequencing_summary         : data/RAW/ONT_batch1/sequencing_summary.txt
  artic_scheme               : nCoV-2019

Nanopore/Illumina options
  nextclade_dataset          : https://github.com/nf-core/test-datasets/raw/viralrecon/genome/MN908947.3/nextclade_sars-cov-2_MN908947_2022-01-18T12_00_00Z.tar.gz
  nextclade_dataset_name     : sars-cov-2
  nextclade_dataset_reference: MN908947
  nextclade_dataset_tag      : 2022-01-18T12:00:00Z

!! Only displaying parameters that differ from the pipeline defaults !!
------------------------------------------------------
If you use nf-core/viralrecon for your analysis please cite:

* The pipeline
  https://doi.org/10.5281/zenodo.3901628

* The nf-core framework
  https://doi.org/10.1038/s41587-020-0439-x

* Software dependencies
  https://github.com/nf-core/viralrecon/blob/master/CITATIONS.md
------------------------------------------------------
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PYCOQC                              -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:GUNZIP_GFF           -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:CUSTOM_GETCHROMSIZES -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:COLLAPSE_PRIMERS     -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:UNTAR                -

[-        ] process > NFCORE_VIRALRECON:NANOPORE:PYCOQC                              -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:GUNZIP_GFF           -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:CUSTOM_GETCHROMSIZES -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:COLLAPSE_PRIMERS     -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:UNTAR                -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:SNPEFF_BUILD         -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:INPUT_CHECK:SAMPLESHEET_CHECK       -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_TSV_NO_SAMPLE_NAME          -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_TSV_NO_BARCODES             -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_TSV_BARCODE_COUNT           -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:ARTIC_GUPPYPLEX                     -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:MULTIQC_TSV_GUPPYPLEX_COUNT         -
[-        ] process > NFCORE_VIRALRECON:NANOPORE:NANOPLOT                            -
A process input channel evaluates to null -- Invalid declaration `val medaka_model_string`

 -- Check script '/home/alex/.nextflow/assets/nf-core/viralrecon/./workflows/nanopore.nf' at line: 310 or see '.nextflow.log' file for more details
```

### System information

Nextflow version: 21.10.6
Hardware: Server
Executor: local via shell and Snakemake
Container engine: Docker/Conda
OS: Ubuntu 20.04.2 LTS
Version of nf-core/viralrecon: 2.4.1",alethomas,https://github.com/nf-core/viralrecon/issues/311
I_kwDODvpAGM5LTI5Y,broken redirect for medaka model,CLOSED,2022-06-07T13:30:26Z,2022-07-11T12:10:41Z,2022-07-11T12:10:41Z,"### Description of the bug

when using the medaka path of the of the viralrecon pipeline an error is occuring. Seems the redirection for the file is broken (at least with curl the -L option has to be activated, to download the file). See attached log file

### Command used and terminal output

```console
nextflow run nf-core/viralrecon -qs 4 -revision 2.4.1 -profile docker --input results/benchmarking/nf-core-viralrecon/nanopore/sample-sheets/1_ont/sample_sheet.csv --sequencing_summary data/RAW/ONT_batch1/sequencing_summary.txt --fastq_dir resources/benchmarking/data/nf-core-viralrecon/1_ont/fastq_pass --fast5_dir resources/benchmarking/data/nf-core-viralrecon/1_ont/fast5_pass --platform nanopore --genome 'MN908947.3' --primer_set_version 3 --artic_minion_caller medaka --artic_minion_medaka_model r941_min_fast_g303 --outdir results/benchmarking/nf-core-viralrecon/nanopore/medaka/1_ont  > logs/nf-core-nf_core_viralrecon_nanopore/medaka/1_ont.log 2>&1
```


### Relevant files

[1_ont.log](https://github.com/nf-core/viralrecon/files/8853558/1_ont.log)


### System information

Nextflow version: 21.10.6
Hardware: Server
Executor: local via shell and Snakemake
Container engine: Docker/Conda
OS: Ubuntu 20.04.2 LTS
Version of nf-core/viralrecon: 2.4.1",alethomas,https://github.com/nf-core/viralrecon/issues/312
I_kwDODvpAGM5NoA9N,Variant calling isn't run when using --skip_asciigenome with metagenomic data,CLOSED,2022-07-12T16:31:55Z,2023-03-12T19:08:11Z,2023-03-12T19:08:10Z,"### Description of the bug

When I run the pipeline with the param --skip_asciigenome, variant calling steps won't be performed.

### Command used and terminal output

```console
# Command used:
nextflow run /scratch/bi/pipelines/nf-core-viralrecon-2.4.1/workflow/main.nf \
          -c ../../DOC/viralrecon_metagenomic.config \
          --input samplesheet_MW536483.1.csv \
          --outdir MW536483.1_20220712_viralrecon \
          --platform illumina \
          --protocol metagenomic \
          --variant_caller ivar \
          --consensus_caller bcftools \
          --fasta /data/bi/references/virus/herpesviridae/MW536483.1.fasta \
          --gff /data/bi/references/virus/herpesviridae/MW536483.1.gff \
          --kraken2_db ""/data/bi/references/eukaria/homo_sapiens/hg38/UCSC/kraken2/kraken2_human.tar.gz"" \
          --skip_pangolin \
          --skip_nextclade \
          --skip_plasmidid \
          --skip_asciigenome \
          --min_mapped_reads 500 \
          -resume

# Terminal Output seems to be fine:
-[nf-core/viralrecon] 3/10 samples passed Bowtie2 500 mapped read threshold:
    4378: DTA2
    939: DTA5
    555: H62
-
-[nf-core/viralrecon] 7 samples skipped since they failed Bowtie2 500 mapped read threshold:
    20: DTA1
    231: DTA3
    277: DTA4
    27: H61
    36: H64
    50: H63
    186: H65
-
-[nf-core/viralrecon] Pipeline completed successfully-
Completed at: 12-Jul-2022 17:11:31
Duration    : 56m 21s
CPU hours   : 13.9
Succeeded   : 182


# Folder content misses ivar:
$ ls MW536483.1_20220712_viralrecon/variants/

bowtie2
```


### Relevant files

### Custom config file: viralrecon_metagenomic.config
```
singularity {
	enabled = true
	autoMounts = true
}

process {
	executor = 'slurm'
	queue = 'middle_idx'
	withName: 'FASTP' {
            ext.args = '--cut_front --cut_tail --trim_poly_x --cut_mean_quality 20 --qualified_quality_phred 20 --unqualified_percent_limit 10 --length_required 50'
        }
}

params {
	max_memory = 376.GB
	max_cpus = 32
	max_time = '48.h'
}
```
### .nextflow.log file
[nextflow.log](https://github.com/nf-core/modules/files/9095015/nextflow.log)

### System information

- Nextflow version 21.10.6
- Hardware HPC
- Executor Slurm
- Container engine and version: Singularity v3.7.1
- OS and version: CentOS 8",svarona,https://github.com/nf-core/viralrecon/issues/316
I_kwDODvpAGM5NoEqx,Enable --ignore_merge_codons in ivar_variants_to_vcf when no .gff file is given,CLOSED,2022-07-12T16:40:05Z,2022-10-28T07:53:05Z,2022-10-28T07:53:05Z,"### Description of feature

When no .gff file for annotation is given to the pipeline, the ivar_variants_to_vcf step is not performing well during the codon merging.

Also, the script should be updated in order to merge only those positions with the same allele frequency, not just keeping the first variant's allele frequency.",svarona,https://github.com/nf-core/viralrecon/issues/317
I_kwDODvpAGM5N2C22,Pipeline fails at email step: Failed to invoke workflow.onComplete event handler,CLOSED,2022-07-15T13:03:21Z,2023-03-28T22:16:55Z,2023-03-12T19:10:47Z,"### Description of the bug

Hi,

After upgrading to 2.5, I am noticing an error with failed samples that do not meet the 1000 read mapped threshold. We use this for negative controls and thus expect to see these fail, but it usually generates a little summary email with the number of aligned reads per failed sample. This isn't happening, and this is the part of the .nextflow.log I think is relevant to this:

```
Jul-15 08:53:47.620 [main] ERROR nextflow.script.WorkflowMetadata - Failed to invoke `workflow.onComplete` event handler
groovy.lang.GroovyRuntimeException: Failed to parse template script (your template may contain an error or be trying to use expressions not currently supported): startup failed:
GStringTemplateScript2.groovy: 54: Unexpected character: '\'' @ line 54, column 53.
   fail_mapped_reads.sort().join('</code></
                                 ^

1 error

	at groovy.text.GStringTemplateEngine$GStringTemplate.<init>(GStringTemplateEngine.java:200)
	at groovy.text.GStringTemplateEngine.createTemplate(GStringTemplateEngine.java:114)
	at groovy.text.TemplateEngine.createTemplate(TemplateEngine.java:58)
	at groovy.text.TemplateEngine$createTemplate.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at NfcoreTemplate.email(NfcoreTemplate.groovy:113)
	at NfcoreTemplate$email$4.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at Script_cbf077bf$_runScript_closure3.doCall(Script_cbf077bf:652)
	at Script_cbf077bf$_runScript_closure3.doCall(Script_cbf077bf)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:274)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)
	at groovy.lang.Closure.call(Closure.java:412)
	at groovy.lang.Closure.call(Closure.java:406)
	at nextflow.script.WorkflowMetadata$_invokeOnComplete_closure4.doCall(WorkflowMetadata.groovy:389)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:274)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)
	at groovy.lang.Closure.call(Closure.java:412)
	at groovy.lang.Closure.call(Closure.java:428)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2358)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2343)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2384)
	at nextflow.script.WorkflowMetadata.invokeOnComplete(WorkflowMetadata.groovy:387)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1268)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1035)
	at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:1029)
	at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:1012)
	at org.codehaus.groovy.runtime.InvokerHelper.invokeMethodSafe(InvokerHelper.java:101)
	at nextflow.script.WorkflowMetadata$_closure3.doCall(WorkflowMetadata.groovy:252)
	at nextflow.script.WorkflowMetadata$_closure3.call(WorkflowMetadata.groovy)
	at nextflow.Session.shutdown0(Session.groovy:675)
	at nextflow.Session.destroy(Session.groovy:625)
	at nextflow.script.ScriptRunner.terminate(ScriptRunner.groovy:222)
	at nextflow.script.ScriptRunner.execute(ScriptRunner.groovy:122)
	at nextflow.cli.CmdRun.run(CmdRun.groovy:337)
	at nextflow.cli.Launcher.run(Launcher.groovy:480)
	at nextflow.cli.Launcher.main(Launcher.groovy:639)
```
I've attached the nextflow.log and my samplesheet used to parse this. It won't let me upload a .sh file, so I've changed it to .txt and included it here.








### Command used and terminal output

```console
The command to invoke viralrecon 2.5 was:
`nextflow run nf-core/viralrecon -profile docker --input samplesheet.csv --platform illumina --protocol amplicon --genome 'MN908947.3' --primer_bed swift_refv3_primers.bed --ivar_trim_offset 5 --skip_assembly --skip_kraken2 --multiqc_config '/home/rarthur/new_multiqc_config.yaml' --email 'rarthu3@emory.edu' --outdir ./results`
```


### Relevant files

[nextflow.log](https://github.com/nf-core/viralrecon/files/9120967/nextflow.log)
[samplesheet.csv](https://github.com/nf-core/viralrecon/files/9120968/samplesheet.csv)
[water_only.txt](https://github.com/nf-core/viralrecon/files/9120969/water_only.txt)


### System information

_No response_",rarthur-eicc,https://github.com/nf-core/viralrecon/issues/320
I_kwDODvpAGM5OCHF6,Custom GFF file failing ivar_variants_to_vcf.py with release 2.5,CLOSED,2022-07-19T08:35:24Z,2023-03-12T19:45:16Z,2023-03-12T19:45:15Z,"### Description of the bug

I've been using a custom GFF file, I've added here in attached, when running viralrecon to highlight variants in the NSP12 which is not highlighted by default in the default GFF. This has worked fine up to version 2.4.1, it now fails in version 2.5.

While I have modified some other parameters, I've excluded them and the custom gff is necessary and sufficient to reproduce the issue. 

### Command used and terminal output

```console
nextflow run nf-core/viralrecon -r 2.5 -profile singularity,test --outdir tttest --gff 'refannot.gff'



Error: 

Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:IVAR_VARIANTS_TO_VCF (SAMPLE2_PE)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:IVAR_VARIANTS_TO_VCF (SAMPLE2_PE)` terminated with an error exit status (1)

Command executed:

  ivar_variants_to_vcf.py \
      SAMPLE2_PE.tsv \
      SAMPLE2_PE.vcf \
      --fasta nCoV-2019.reference.fasta \
      --ignore_strand_bias \
      > SAMPLE2_PE.variant_counts.log
  
  cat ivar_variants_header_mqc.txt SAMPLE2_PE.variant_counts.log > SAMPLE2_PE.variant_counts_mqc.tsv
  
  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:IVAR_VARIANTS_TO_VCF"":
      python: $(python --version | sed 's/Python //g')
  END_VERSIONS

Command exit status:
  1

Command output:
  (empty)

Command error:
  Traceback (most recent call last):
    File ""/home/xxxx/.nextflow/assets/nf-core/viralrecon/bin/ivar_variants_to_vcf.py"", line 577, in <module>
      sys.exit(main())
    File ""/home/xxxx/.nextflow/assets/nf-core/viralrecon/bin/ivar_variants_to_vcf.py"", line 552, in main
      fe_codon_ref = variants[next(iter(variants))][""ref_codon""]
  StopIteration

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
```


### Relevant files

[refannot.gff.gz](https://github.com/nf-core/viralrecon/files/9138972/refannot.gff.gz)


### System information


      N E X T F L O W
      version 22.04.0 build 5697
      created 23-04-2022 18:00 UTC (19:00 BST)
      cite doi:10.1038/nbt.3820
      http://nextflow.io

Linux step.local 3.10.0-1160.49.1.el7.x86_64 #1 SMP Tue Nov 30 15:51:32 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux

HPC running singularity
local executor
singularity containers
viralrecon 2.5",afonsoguerra,https://github.com/nf-core/viralrecon/issues/321
I_kwDODvpAGM5O6EVI,Error in the last 2 steps,CLOSED,2022-08-01T05:28:29Z,2023-04-12T23:34:58Z,2023-03-12T19:37:20Z,"### Description of the bug

Please help. While running the pipeline, there was an error on the second to last step of it

I have since gone into the conda environment in which R was installed and updated it, but all that did was get rid of the first four lines of the message:
```
 Warning message:
  package ‘optparse’ was built under R version 4.0.5 
  Warning message:
  package ‘scales’ was built under R version 4.0.5
```

### Command used and terminal output

```console
nextflow run nf-core/viralrecon --input samplesheet.csv --outdir results/viralrecon --protocol amplicon --genome MN908947.3 --primer_set artic --primer_set_version 3 --platform illumina --skip_assembly --max_cpus 8 --max_memory 13.GB -profile conda

Warning message:
  package ‘optparse’ was built under R version 4.0.5 
  Warning message:
  package ‘scales’ was built under R version 4.0.5 
  Loading required package: grid
  Error: package or namespace load failed for ‘ComplexHeatmap’:
   .onLoad failed in loadNamespace() for 'Cairo', details:
    call: dyn.load(file, DLLpath = DLLpath, ...)
    error: unable to load shared object '/home/yelbur/Desktop/03-consensus/uk_illumina/work/conda/env-05a634cd6ec064941b9d92badb58aa6c/lib/R/library/Cairo/libs/Cairo.so':
    libicuuc.so.70: cannot open shared object file: No such file or directory
  Execution halted
```


### Relevant files

_No response_

### System information

I'm on ubuntu with conda 4.13.0

",Yelbur,https://github.com/nf-core/viralrecon/issues/322
I_kwDODvpAGM5QHLRQ,Issues pulling singularity images,CLOSED,2022-08-19T07:30:00Z,2023-03-12T19:39:58Z,2023-03-12T19:39:57Z,"### Description of the bug

Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:BOWTIE2_BUILD (nCoV-2019.reference.fasta)'

Caused by:
  Failed to pull singularity image
  command: singularity pull  --name depot.galaxyproject.org-singularity-bowtie2-2.4.4--py39hbb4e92a_0.img.pulling.1660892881280 https://depot.galaxyproject.org/singularity/bowtie2:2.4.4--py39hbb4e92a_0 > /dev/null
  status : 255
  message:
    [31mFATAL:   While pulling from image from http(s): unexpected EOF






### Command used and terminal output

```console
I have used this command to pull the viralrecon image but i am facing error. 
please suggest
nextflow run nf-core/viralrecon -profile test,singularity --outdir viralrecon
```


### Relevant files

[execution_report_2022-08-19_07-07-25.zip](https://github.com/nf-core/viralrecon/files/9380026/execution_report_2022-08-19_07-07-25.zip)


### System information

ubuntu
container engine: singualrity ",Aqsakhalid30,https://github.com/nf-core/viralrecon/issues/324
I_kwDODvpAGM5Q5v7h,Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT,CLOSED,2022-08-31T13:09:59Z,2022-11-09T20:52:17Z,2022-11-09T20:52:17Z,"### Description of the bug

I haven't seen a post, and I wondering if anyone else is having an issue with bcftools at the ivar stage. I am receiving this error today. I am able to run version 2.4.1 on the same files without the error and I am wondering if this is a bcftools image issue or possibly something else. 

I previously tried removing the sample that errored, but on rerunning the error pops up again on a different sample, repeatedly.



### Command used and terminal output

```console
$nextflow run nf-core/viralrecon --input Clemson3.sample.sheet.csv --outdir . --platform illumina      -r 2.5      -c custom.pangolin.config      --protocol amplicon      --genome 'MN908947.3'      --primer_set artic      --primer_set_version 4.1      --skip_assembly      --min_mapped_reads 15000      -profile singularity
...
[Normal looking running]
...
[0b/6d799a] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:GUNZIP_GFF (GCA_009858895.3_ASM985889v3_genomic.200409.gff.gz)                 [100%] 1 of 1 ✔
[33/e5415a] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:CUSTOM_GETCHROMSIZES (SARS-CoV-2.reference.fasta)                              [100%] 1 of 1 ✔
[4e/129cec] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:UNTAR_KRAKEN2_DB (kraken2_human.tar.gz)                                        [100%] 1 of 1 ✔
[36/b391a9] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:COLLAPSE_PRIMERS (SARS-CoV-2.scheme.bed)                                       [100%] 1 of 1 ✔
[57/d7d179] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:BOWTIE2_BUILD (SARS-CoV-2.reference.fasta)                                     [100%] 1 of 1 ✔
[6c/df7778] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:UNTAR_NEXTCLADE_DB (nextclade_sars-cov-2_MN908947_2022-06-14T12_00_00Z.tar.gz) [100%] 1 of 1 ✔
[5d/2d0dc2] process > NFCORE_VIRALRECON:ILLUMINA:PREPARE_GENOME:SNPEFF_BUILD (SARS-CoV-2.reference.fasta)                                      [100%] 1 of 1 ✔
[3c/38533c] process > NFCORE_VIRALRECON:ILLUMINA:INPUT_CHECK:SAMPLESHEET_CHECK (Clemson3.sample.sheet.csv)                                     [100%] 1 of 1 ✔
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CAT_FASTQ                                                                                     -
[2d/b3dbba] process > NFCORE_VIRALRECON:ILLUMINA:FASTQC_FASTP:FASTQC_RAW (Sample185)                                                  [100%] 185 of 185 ✔
[39/486a78] process > NFCORE_VIRALRECON:ILLUMINA:FASTQC_FASTP:FASTP (Sample185)                                                       [100%] 185 of 185 ✔
[0a/743425] process > NFCORE_VIRALRECON:ILLUMINA:FASTQC_FASTP:FASTQC_TRIM (Sample185)                                                 [100%] 185 of 185 ✔
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:MULTIQC_TSV_FAIL_READS                                                                        -
[80/44fc3f] process > NFCORE_VIRALRECON:ILLUMINA:KRAKEN2_KRAKEN2 (Sample185)                                                          [100%] 185 of 185 ✔
[e5/db6a1f] process > NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BOWTIE2_ALIGN (Sample185)                                              [100%] 185 of 185 ✔
[fe/4431bd] process > NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BAM_SORT_SAMTOOLS:SAMTOOLS_SORT (Sample185)                            [100%] 185 of 185 ✔
[40/610d74] process > NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BAM_SORT_SAMTOOLS:SAMTOOLS_INDEX (Sample185)                           [100%] 185 of 185 ✔
[d6/0ab86e] process > NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BAM_SORT_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_STATS (sampleN)        [100%] 185 of 185 ✔
[ca/987f39] process > NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BAM_SORT_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_FLAGSTAT (sampleX)     [100%] 185 of 185 ✔
[20/36d29a] process > NFCORE_VIRALRECON:ILLUMINA:ALIGN_BOWTIE2:BAM_SORT_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_IDXSTATS (Sample185)     [100%] 185 of 185 ✔
[5c/ac4a63] process > NFCORE_VIRALRECON:ILLUMINA:MULTIQC_TSV_FAIL_MAPPED                                                                       [100%] 1 of 1 ✔
[c1/90e6d0] process > NFCORE_VIRALRECON:ILLUMINA:PRIMER_TRIM_IVAR:IVAR_TRIM (sampleX)                                               [100%] 184 of 184 ✔
[ef/7bd9b7] process > NFCORE_VIRALRECON:ILLUMINA:PRIMER_TRIM_IVAR:BAM_SORT_SAMTOOLS:SAMTOOLS_SORT (sampleX)                         [100%] 184 of 184 ✔
[8f/dcb9fb] process > NFCORE_VIRALRECON:ILLUMINA:PRIMER_TRIM_IVAR:BAM_SORT_SAMTOOLS:SAMTOOLS_INDEX (sampleX)                        [100%] 184 of 184 ✔
[ec/584b40] process > NFCORE_VIRALRECON:ILLUMINA:PRIMER_TRIM_IVAR:BAM_SORT_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_STATS (sampleN)     [100%] 184 of 184 ✔
[de/fd7385] process > NFCORE_VIRALRECON:ILLUMINA:PRIMER_TRIM_IVAR:BAM_SORT_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_FLAGSTAT (sampleX)  [100%] 184 of 184 ✔
[31/6d3265] process > NFCORE_VIRALRECON:ILLUMINA:PRIMER_TRIM_IVAR:BAM_SORT_SAMTOOLS:BAM_STATS_SAMTOOLS:SAMTOOLS_IDXSTATS (sampleX)  [100%] 184 of 184 ✔
[00/457ed8] process > NFCORE_VIRALRECON:ILLUMINA:PICARD_COLLECTMULTIPLEMETRICS (sampleN)                                            [ 98%] 182 of 184
[f6/feeca4] process > NFCORE_VIRALRECON:ILLUMINA:MOSDEPTH_GENOME (sampleN)                                                          [ 98%] 182 of 184
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:PLOT_MOSDEPTH_REGIONS_GENOME                                                                  -
[f9/f1d828] process > NFCORE_VIRALRECON:ILLUMINA:MOSDEPTH_AMPLICON (sampleN)                                                        [ 98%] 182 of 184
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:PLOT_MOSDEPTH_REGIONS_AMPLICON                                                                -
[d0/1544fe] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:IVAR_VARIANTS (sampleN)                                              [ 98%] 182 of 184
[3d/24caa4] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:IVAR_VARIANTS_TO_VCF (sampleZ)                                       [100%] 180 of 180
[7f/69fa49] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (sampleG)                                              [  1%] 3 of 180, failed: 3
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VCF_TABIX_STATS:TABIX_TABIX                                                     -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VCF_TABIX_STATS:BCFTOOLS_STATS                                                  -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VARIANTS_QC:SNPEFF_SNPSIFT:SNPEFF_ANN                                           -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VARIANTS_QC:SNPEFF_SNPSIFT:VCF_BGZIP_TABIX_STATS:TABIX_BGZIP                    -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VARIANTS_QC:SNPEFF_SNPSIFT:VCF_BGZIP_TABIX_STATS:VCF_TABIX_STATS:TABIX_TABIX    -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VARIANTS_QC:SNPEFF_SNPSIFT:VCF_BGZIP_TABIX_STATS:VCF_TABIX_STATS:BCFTOOLS_STATS -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VARIANTS_QC:SNPEFF_SNPSIFT:SNPSIFT_EXTRACTFIELDS                                -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:VARIANTS_QC:ASCIIGENOME                                                         -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BCFTOOLS_FILTER                                                            -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:TABIX_TABIX                                                                -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:MAKE_BED_MASK                                                              -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BEDTOOLS_MERGE                                                             -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BEDTOOLS_MASKFASTA                                                         -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:BCFTOOLS_CONSENSUS                                                         -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:RENAME_FASTA_HEADER                                                        -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:QUAST                                                         -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:PANGOLIN                                                      -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:NEXTCLADE_RUN                                                 -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:PLOT_BASE_DENSITY                                             -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:MULTIQC_TSV_NEXTCLADE                                                                         -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_LONG_TABLE:BCFTOOLS_QUERY                                                            -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:VARIANTS_LONG_TABLE:MAKE_VARIANTS_LONG_TABLE                                                  -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:CUSTOM_DUMPSOFTWAREVERSIONS                                                                   -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:MULTIQC                                                                                       -
-[nf-core/viralrecon] 184/185 samples passed Bowtie2 15000 mapped read threshold:
    4895927: sample2
    4869847: sample3
    1397118: sample4
    9120220: sample5
    5883515: sample6
    3218522: sample7
    ..see pipeline reports for full list
-
-[nf-core/viralrecon] 1 samples skipped since they failed Bowtie2 15000 mapped read threshold:
    154: sampl154
-[nf-core/viralrecon] Pipeline completed with errors-
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (sample1)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (sample1)` terminated with an error exit status (255)

Command executed:

  bcftools \
      sort \
      --output sample1.vcf.gz \
       \
      sample1.vcf

  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT"":
      bcftools: $(bcftools --version 2>&1 | head -n1 | sed 's/^.*bcftools //; s/ .*$//')
  END_VERSIONS

Command exit status:
  255

Command output:
  (empty)

Command error:
  mkdtemp(/local_scratch/pbs.87345.pbs02/bcftools.UkuBYp) failed: No such file or directory

Work dir:
  /2.5/work/98/892b340f809e7e690618ff769fe75a

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line
```


### Relevant files

[nextflow.log](https://github.com/nf-core/viralrecon/files/9461755/nextflow.log)

$ cat custom.pangolin.config
process {
    withName: PANGOLIN {
        container = 'https://depot.galaxyproject.org/singularity/pangolin:4.1.2--pyhdfd78af_0'
    }
}

### System information

Nextflow version: 22.04.5
Hardware: HPC
Executor: PBS
Container engine: Singularity
OS : Rocky Linux 8.6
Version of nf-core/viralrecon: 2.5",Rooksie,https://github.com/nf-core/viralrecon/issues/328
I_kwDODvpAGM5Rw_u0,Update V1200 primer scheme,OPEN,2022-09-13T17:45:45Z,2023-03-13T10:58:07Z,,"### Description of feature

Would it be possible to update the V1200 scheme to the newest version (v2 currently) that allows better sequencing of Omicron? 

The V1200_v2 files can be found here from IDT:

https://www.idtdna.com/pages/products/next-generation-sequencing/workflow/xgen-ngs-amplicon-sequencing/predesigned-amplicon-panels/sars-cov-2-midnight-amp-panel

https://sfvideo.blob.core.windows.net/sitefinity/docs/default-source/supplementary-product-info/primer-sequence-file-for-data-analysis.txt?sfvrsn=cffeff07_2

https://sfvideo.blob.core.windows.net/sitefinity/docs/default-source/supplementary-product-info/primer-bed-file-for-data-analysis.bed?sfvrsn=cefeff07_2&download=true

Thanks!
",ddomman,https://github.com/nf-core/viralrecon/issues/330
I_kwDODvpAGM5TvEYT,Add support for MGI's Atoplex kit,CLOSED,2022-10-11T15:33:09Z,2023-03-12T19:13:01Z,2023-03-12T19:13:01Z,"### Description of feature

Sequencing reads from MGI's Atoplex library prep kit is not currently supported. This feature adds support for it.",ljmesi,https://github.com/nf-core/viralrecon/issues/332
I_kwDODvpAGM5UU99n,"Cutadapt error with -profile test,singularity",CLOSED,2022-10-19T11:18:13Z,2023-03-12T19:29:24Z,2023-03-12T19:29:23Z,"### Description of the bug

Hi !
<br>

I am trying to change my container used for `viralrecon` from Docker to Singularity

I have installed Go (v1.19.1) + Singularity (v3.5.3) and downloaded latest `viralrecon` using `nf-core/tools` :
=> `nf-core download --revision 2.5 --compress none --container singularity nf-core/viralrecon` (with `$NXF_SINGULARITY_CACHEDIR` properly set)

And I got bellow error (= ""cutadapt: error: [Errno 30] Read-only file system"") **only with `-profile test,singularity`**, whereas `-profile test,docker` complete just fine

I am new to Singularity, so maybe there is something I missed during its configuration ?
<br>

Thanks for your help !
Have a nice day,
Felix.

### Command used and terminal output

```console
$ nextflow run /path/to/downloaded/nf-core-viralrecon-2.5/workflow test,singularity --outdir .

Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:CUTADAPT (SAMPLE2_PE)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:CUTADAPT (SAMPLE2_PE)` terminated with an error exit status (2)

Command executed:

  sed -r '/^[ACTGactg]+$/ s/$/X/g' nCoV-2019.primer.fa > adapters.sub.fa

  cutadapt \
      --cores 2 \
      --overlap 5 --minimum-length 30 --error-rate 0.1 \
      -a file:adapters.sub.fa -A file:adapters.sub.fa \
      -o SAMPLE2_PE.primer_trim_1.fastq.gz -p SAMPLE2_PE.primer_trim_2.fastq.gz \
      SAMPLE2_PE.unclassified_1.fastq.gz SAMPLE2_PE.unclassified_2.fastq.gz \
      > SAMPLE2_PE.primer_trim.cutadapt.log

  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:CUTADAPT"":
      cutadapt: $(cutadapt --version)
  END_VERSIONS

Command exit status:
  2

Command output:
  (empty)

Command error:
  Run ""cutadapt --help"" to see command-line options.
  See https://cutadapt.readthedocs.io/ for full documentation.

  cutadapt: error: [Errno 30] Read-only file system
```


### Relevant files

[nextflow.log](https://github.com/nf-core/viralrecon/files/9819882/nextflow.log)


### System information

* Nextflow: 21.10.6 build 5660
* Hardware: Desktop
* Executor: local
* Container: Docker / Singularity
* OS: Ubuntu 18.04 (within WSL2)
* nf-core/viralrecon: 2.5",tetedange13,https://github.com/nf-core/viralrecon/issues/333
I_kwDODvpAGM5U5L6s,Longshot thread 'main' panicked at 'assertion failed: p <= 0.0' error,CLOSED,2022-10-26T15:42:31Z,2023-03-05T09:28:18Z,2023-03-05T09:28:04Z,"### Description of the bug

I am hitting this error with longshot intermittently on some of our SARS-CoV-2 nanopore runs using the `medaka` pipeline. 

It has been described here : https://github.com/artic-network/fieldbioinformatics/issues/109

It seems updating to `artic` version 1.2.3 will do the trick. 

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",ddomman,https://github.com/nf-core/viralrecon/issues/334
I_kwDODvpAGM5U65_1,The ivar_variants_to_vcf.py does not sort variant,CLOSED,2022-10-26T21:41:57Z,2022-10-31T09:06:27Z,2022-10-31T09:06:27Z,"### Description of the bug

When trying to index the `ivar` vcf using tabix,, I get following error:

```
[E::hts_idx_push] Unsorted positions on sequence #1: 6512 followed by 5711
tbx_index_build failed: temp.ivar.vcf.gz
```
In VCF I can see
```
MN908947.3	6512	.	ANNN	A	.	PASS	DP=155	GT:REF_DP:REF_RV:REF_QUAL:ALT_DP:ALT_RV:ALT_QUAL:ALT_FREQ	1:154:90:35:151:0:20:0.974194
MN908947.3	5711	.	C	A	.	ft	DP=64	GT:REF_DP:REF_RV:REF_QUAL:ALT_DP:ALT_RV:ALT_QUAL:ALT_FREQ	1:62:0:36:2:0:37:0.03125
```

### Command used and terminal output


I was testing the new `ivar_variants_to_vcf.py` in the development branch

```
python ~/Documents/COVID_Project/nextCov/modules/ivar_variants_to_vcf.py temp.ivar.tsv temp.ivar.vcf -is -f ../00_index/Sars_cov_2.ASM985889v3.dna.toplevel.fa
```
and Ivar was run as

```
samtools mpileup     -aa     --count-orphans     --max-depth 0     --redo-BAQ -x     --min-BQ 20     --min-MQ 20     16_S16_L001.dedup.bam  | ivar variants     -p temp.ivar     -q 20     -t 0.03     -r  ../00_index/Sars_cov_2.ASM985889v3.dna.toplevel.fa     -g ../../../resources/Sars_cov_2.ASM985889v3.101.gff3 

```


### Relevant files

[temp.ivar.zip](https://github.com/nf-core/viralrecon/files/9873818/temp.ivar.zip)


",Rohit-Satyam,https://github.com/nf-core/viralrecon/issues/335
I_kwDODvpAGM5VE1CE,Clarify documentation on variants tables (inconsistent between platforms),CLOSED,2022-10-28T14:14:21Z,2024-04-23T11:43:18Z,2024-04-23T11:43:18Z,"### Description of feature

I was trying to understand what variants are included in the `variants_long_table.csv` file, and it seems that this is different depending on the sub-workflow used: 

- `--platform nanopore`: the long variants table includes only those that pass quality filters and are therefore injected onto the reference (i.e. those in `*.pass.unique.vcf.gz` files).
- `--platform illumina`: the variants table includes both variants that pass quality filters and those that don't (incidentally the column `FILTER` does not reflect the actual filtering that happens later by `ivar consensus`, which I believe retains only AF > 0.75). I.e. it includes the variants in `variants/ivar/*.vcf.gz` rather than those in `variants/ivar/consensus/bcftools/*.filtered.vcf.gz`.

This can be a little confusing/inconsistent when analysing data from either platform. 

On the other hand, I inferred (I hope correctly) that the `# SNPs` and `# INDELs` in the MultiQC ""Variant calling metrics"" section seem to be for the filtered SNPs/Indels only. In this sense, it seems consistent between the two platforms. 
As for the `# Missense variants`, I assume again this is inconsistent between the two sub-workflows, because `--platform illumina` uses the unfiltered VCF with SnpEff, whereas `--platform nanopore` uses the filtered VCF. 

Maybe this could be made more explicit in the documentation, or possibly modify the `FILTER` column in the long variants CSV to actually reflect whether the variants made it through to the final consensus sequence or not. ",tavareshugo,https://github.com/nf-core/viralrecon/issues/336
I_kwDODvpAGM5Vqrx9,ivar_variants_to_vcf.py collapses low quality ivar variant with high quality variant,OPEN,2022-11-06T01:40:54Z,2023-08-18T10:04:33Z,,"### Description of the bug

I noticed that ivar_variants_to_vcf.py is not behaving correctly. I was testing the difference between the phasing features of your `ivar_variants_to_vcf.py` and [phasing.py](https://github.com/TRON-Bioinformatics/covigator-ngs-pipeline/blob/master/bin/phasing.py), provided by COVIGATOR and it turns out that `ivar_variants_to_vcf.py` collapses bad quality variant with good quality variant
Eg:

```
MN908947.3	24129	A	G	30	29	36	1	1	37	0.0322581	31	0.508197	FALSE	CDS:ENSSASP00005000004	AAC	N	AGC	S
MN908947.3	24130	C	A	0	0	0	33	32	36	1	33	2.7703E-19	TRUE	CDS:ENSSASP00005000004	AAC	N	AAA	K
```
The A>G mutation at position 24129 is present in just 1. Therefore no matter that low quality variant call lie within same codon as high quality, they should be kept separate and only the high-quality calls must be collapsed. The current behaviour of your script is as follows:

```
MN908947.3	24129	.	AC	GA	.	ft	DP=31	GT:REF_DP:REF_RV:REF_QUAL:ALT_DP:ALT_RV:ALT_QUAL:ALT_FREQ	1:30:29:36:1:1:37:0.0322581	
MN908947.3	24256	.	T	C	.	ft	DP=33	GT:REF_DP:REF_RV:REF_QUAL:ALT_DP:ALT_RV:ALT_QUAL:ALT_FREQ	1:32:0:36:1:0:37:0.030303	
```

However it should be

```
MN908947.3	24129	.	A	G
MN908947.3	24130	.	C	A
``` 

Also, it is quite misleading to assign `AC>GA` with following tags of high quality variant `DP=31	GT:REF_DP:REF_RV:REF_QUAL:ALT_DP:ALT_RV:ALT_QUAL:ALT_FREQ	1:30:29:36:1:1:37:0.0322581
`

![image](https://user-images.githubusercontent.com/55479480/200149953-ef6a5f85-d08f-421b-8555-6c0d25b5f1a1.png)


### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",Rohit-Satyam,https://github.com/nf-core/viralrecon/issues/337
I_kwDODvpAGM5V-OVt,Pipeline reports mapped reads as 'NA' even tough viral genome aligning reads are present,CLOSED,2022-11-09T16:15:31Z,2022-12-18T14:05:37Z,2022-12-18T14:05:36Z,"### Description of the bug
Hi there,
All samples analyzed should be positive for reads aligning with the virus. I have validated this by manual, pipeline independent alignment, and manual IGV inspection. As you can appreciated in the screenshot, the pipelines detects the viral reads only in 3 out of 10 samples. In 7/10 it just writes ""NA"". Inspecting the /variants/bowtie2/ subfolder I find that the alignment for the 7/10 samples does actually not happen, but the samples are rather omitted for some reason. 

I also changed the minimum read threshold, but all 7/10 samples are above this threshold, as verified by manual inspection.

To further troubleshoot, I ran some of the ""NA"" samples independently, but no success.

Any help would be highly appreciated! Thank you.

<img width=""670"" alt=""image"" src=""https://user-images.githubusercontent.com/26895805/200880888-b47e2229-0022-4444-9650-a8f93ee62c42.png"">


### Command used and terminal output

```console
nextflow run nf-core/viralrecon -latest --input ./tumor_samples_set2.csv --platform illumina --skip_assembly --spades_mode meta --save_trimmed_fail --max_memory 400.GB --skip_markduplicates 0 --skip_snpeff --skip_bandage --max_cpus 20 --max_time 8h --protocol metagenomic --fasta ../reference/virus.fasta --skip_plasmidid --skip_nextclade --skip_pangolin --save_mpileup --skip_assembly_quast -profile cbe -bg -resume --outdir ./ --skip_kraken2
```


### Relevant files

_No response_

### System information

Workflow profile: cbe
Nextflow version: version 21.10.6, build 5660 (21-12-2021 16:55 UTC)",leiendeckerlu,https://github.com/nf-core/viralrecon/issues/338
I_kwDODvpAGM5WhSvp,Exit code 255 when running MAKE_VARIANTS_LONG_TABLE process for the test dataset,CLOSED,2022-11-16T13:04:06Z,2023-03-13T17:58:06Z,2023-03-12T19:33:14Z,"### Description of the bug

I'm running the test dataset using singularity profile and everything is running fine until this process:
NFCORE_VIRALRECON:ILLUMINA:VARIANTS_LONG_TABLE:MAKE_VARIANTS_LONG_TABLE
which exits with error code 255 and the following message:
```

[be/ab5e2a] process > NFCORE_VIRALRECON:ILLUMINA:... [100%] 1 of 1, cached: 1 ✔
[0e/23d4b5] process > NFCORE_VIRALRECON:ILLUMINA:... [100%] 3 of 3, cached: 3 ✔
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:... -
[-        ] process > NFCORE_VIRALRECON:ILLUMINA:... -
Execution cancelled -- Finishing pending tasks before exit
-[nf-core/viralrecon] 3/3 samples passed Bowtie2 1000 mapped read threshold:
    37980: SAMPLE2_PE
    48045: SAMPLE1_PE
    46278: SAMPLE3_SE
-
-[nf-core/viralrecon] Pipeline completed with errors-
Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_LONG_TABLE:MAKE_VARIANTS_LONG_TABLE'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_LONG_TABLE:MAKE_VARIANTS_LONG_TABLE` terminated with an error exit status (255)

Command executed:

  make_variants_long_table.py \
      --bcftools_query_dir ./bcftools_query \
      --snpsift_dir ./snpsift \
      --pangolin_dir ./pangolin \
      --variant_caller ivar
  
  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:VARIANTS_LONG_TABLE:MAKE_VARIANTS_LONG_TABLE"":
      python: $(python --version | sed 's/Python //g')
  END_VERSIONS

Command exit status:
  255

Command output:
  (empty)

Command error:
  WARNING: DEPRECATED USAGE: Forwarding SINGULARITYENV_TMP as environment variable will not be supported in the future, use APPTAINERENV_TMP instead
  WARNING: DEPRECATED USAGE: Forwarding SINGULARITYENV_TMPDIR as environment variable will not be supported in the future, use APPTAINERENV_TMPDIR instead
  WARNING: DEPRECATED USAGE: Forwarding SINGULARITYENV_NXF_DEBUG as environment variable will not be supported in the future, use APPTAINERENV_NXF_DEBUG instead
  FATAL:   container creation failed: mount hook function failure: mount /proc/self/fd/13->/var/apptainer/mnt/session/rootfs error: while mounting image /proc/self/fd/13: kernel reported a bad superblock for squashfs image partition, possible causes are that your kernel doesn't support the compression algorithm or the image is corrupted

Work dir:
  /mnt/fastdata/md1mbdx/HIV_sequencing/viralrecon/work/c5/9fd49b53f801594552b4d0bb9bec3a

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run
```

Is there any known issue with the image for this process? Or perhaps something else is causing this error.

### Command used and terminal output

```console
$ qsub run_viralrecon.sh
```


### Relevant files

#!/bin/sh
#$ -S /bin/sh
#$ -P coguk
#$ -N VR
#$ -l h_rt=2:00:00
#$ -l rmem=8G
#$ -o viralrecon.out
#$ -e viralrecon.err
#$ -M m.b.dabrowska@sheffield.ac.uk
#$ -m a
#$ -V
# Validate job and raise errors


source /etc/profile.d/modules.sh
module load apps/python/conda
module load apps/java

nextflow run nf-core/viralrecon -profile test,singularity \
--outdir results \
-resume \
-with-report \
-with-trace \
-with-timeline \

### System information

_No response_",mbdabrowska1,https://github.com/nf-core/viralrecon/issues/339
I_kwDODvpAGM5XYdsP,Latest medaka models not available - update artic module,CLOSED,2022-11-28T08:47:29Z,2022-12-01T10:06:07Z,2022-12-01T10:06:07Z,"### Description of the bug

The latest medaka models cannot be used at the moment, since they are not available through `artic` 1.2.2. 
I have made a [pull request](https://github.com/nf-core/modules/pull/2557) on the core modules to update the version to 1.2.3, if it gets accepted then the pipeline here would need to have its modules updated also. 

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",tavareshugo,https://github.com/nf-core/viralrecon/issues/341
I_kwDODvpAGM5X33cJ,multiqc error using dev branch,CLOSED,2022-12-03T22:44:22Z,2024-06-11T13:48:43Z,2024-06-11T13:48:43Z,"### Description of the bug

Hi,

I had issues running a few samples through viralrecon 2.5 with ivar_variants_to_vcf.py so I decided to run it on the dev branch and it made it past those errors but received errors running multiqc

### Command used and terminal output

```console
NXF_VER=21.10.3 nextflow run nf-core/viralrecon --input samplesheet_all_samples_10.csv --platform illumina --genome NC_045512.2 --protocol amplicon --primer_bed /share/sequencing_effort/viralrecon/primer_files/NC_045512.2.v2.primers.bed --primer_fasta /share/sequencing_effort/viralrecon/primer_files/NC_045512.2.v2.primers.fna --skip_assembly -profile singularity --primer_left_suffix F --primer_right_suffix R --kraken2_db /share/sequencing_effort/viralrecon/krakendb/kraken2_human.tar.gz --ivar_trim_offset 5 -c /share/sequencing_effort/viralrecon/viralrecon_dev.config --outdir /share/Viralrecon_results/test_dev/ -r dev -resume --skip_asciigenome --skip_snpeff --skip_kraken2 --skip_pangolin --skip_nextclade

Error reported:

Command exit status:
  1

Command output:
  (empty)

Command error:
  INFO:    Convert SIF file to sandbox...
                  | v1.13.dev0
  
  |           multiqc | Only using modules: custom_content, fastqc, fastp, kraken, bowtie2, samtools, mosdepth, bcftools, snpeff, quast, pangolin, cutadapt
  |           multiqc | Search path : /share/Viralrecon_results/test_dev/work/dd/88a60fee0466614174d1a6ec991086
  |         searching | ���������������������������������������� 100% 102/102  
  |    custom_content | software_versions: Found 1 sample (html)
  |    custom_content | nf-core-viralrecon-summary: Found 1 sample (html)
  |    custom_content | amplicon_heatmap: Found 10 samples (heatmap)
  �������������� Oops! The 'custom_content' MultiQC module broke... ��������������
  � Please copy this log and report it at                                        �
  � https://github.com/ewels/MultiQC/issues                                      �
  � Please attach a file that triggers the error. The last file found was:       �
  � ./variants/4056145117.variant_counts_mqc.tsv                                 �
  �                                                                              �
  � Traceback (most recent call last):                                           �
  �   File ""/usr/local/lib/python3.10/site-packages/multiqc/multiqc.py"", line 65 �
  �     output = mod()                                                           �
  �   File ""/usr/local/lib/python3.10/site-packages/multiqc/modules/custom_conte �
  �     parsed_modules[mod_id].add_cc_section(c_id, mod)                         �
  �   File ""/usr/local/lib/python3.10/site-packages/multiqc/modules/custom_conte �
  �     mod[""data""] = {k: v for k, v in sorted(mod[""data""].items())}             �
  � TypeError: '<' not supported between instances of 'str' and 'float'          �
  �                                                                              �
  ��������������������������������������������������������������������������������
  |            fastqc | Found 20 reports
  |             fastp | Found 10 reports
  |           bowtie2 | Found 10 reports
  |          samtools | Found 10 flagstat reports
  |          samtools | Found 10 flagstat reports
  |          mosdepth | Found 10 reports
  |          bcftools | Found 10 stats reports
  |             quast | Found 10 reports
  |           multiqc | Compressing plot data
  |           multiqc | Report      : multiqc_report.html
  |           multiqc | Data        : multiqc_data
  |           multiqc | MultiQC complete
  INFO:    Cleaning up image...

Work dir:
  /share/Viralrecon_results/test_v2.5/work/dd/88a60fee0466614174d1a6ec991086

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`




Is the issue with the header of the file attached?
```


### Relevant files

[4056145117.variant_counts_mqc.tsv.zip](https://github.com/nf-core/viralrecon/files/10147491/4056145117.variant_counts_mqc.tsv.zip)


### System information

Nextflow version 21.10.3
Hardware HPC
Executor local
Container engine: Singularity
OS Ubuntu Linux
Version of nf-core/viralrecon dev",rrdavis77,https://github.com/nf-core/viralrecon/issues/345
I_kwDODvpAGM5Z9TZw,[DOC] Document full parameters of iVar consensus,CLOSED,2022-12-23T11:34:52Z,2023-03-13T11:16:01Z,2023-03-13T11:16:00Z,"I've tried to figure out how exactly you call iVar consensus by default, to understand some issues with artifactual reversions and frameshifts.

However, I could figure out the complete default command that is run.

You have documented one option here: https://nf-co.re/viralrecon/2.5/parameters#min_mapped_reads but I can't see how it flows through the code.

In the module, you allow passing extra args, but I can't find out what they are.

Are they set to anything at all by default? If so what are default args?

The args end up here: https://github.com/nf-core/viralrecon/blob/master/modules/nf-core/modules/ivar/consensus/main.nf#L25

",corneliusroemer,https://github.com/nf-core/viralrecon/issues/348
I_kwDODvpAGM5aG50g,ERROR in Script plasmidID,CLOSED,2022-12-27T12:30:41Z,2023-03-12T19:12:18Z,2023-03-12T19:12:18Z,"### Description of the bug

Hello everyone, 

I'm running Viralrecon for monkeypox, and facing an error: 

## The error: 
```
ERROR in Script plasmidID on or near line 868; exiting with status 1
MESSAGE:  See ./logs/plasmidID.log for more information.
command: gff_to_bed.sh -i ./NO_GROUP/pmseq_V300081052_28_+_V300081052_30/data/pmseq_V300081052_28_+_V300081052_30"".gff"" -L
```



Is there any solution? 

Thanks, 

### Command used and terminal output

```console

time nextflow run nf-core/viralrecon \
    --input viralrecon.samplesheet.csv  \
    --outdir results  \
    -c custom.config \
    --max_cpus 60 \
    --max_memory '300.GB' \
    --memory-swap '-1' \
    --platform illumina \
    --protocol metagenomic \
    --genome 'NC_063383.1' \
    --nextclade_dataset_name 'hMPXV' \
    -profile docker
```
### Relevant files

[nextflow.log](https://github.com/nf-core/viralrecon/files/10308113/nextflow.log)
[custom.config.txt](https://github.com/nf-core/viralrecon/files/10308164/custom.config.txt)



### System information

- nextflow version 22.10.4.5836
- Container engine: Docker
- Version of nf-core/viralrecon:  2.5

EDIT by @maxulysse: removed extra triple quotes + fix viralrecon version",AroobAlhumaidy,https://github.com/nf-core/viralrecon/issues/349
I_kwDODvpAGM5bPDwb,Choose Kraken2-filtered host,OPEN,2023-01-12T13:00:02Z,2023-04-03T09:39:14Z,,"### Description of feature

Hi,
<br>

This is probably related to issue https://github.com/nf-core/viralrecon/issues/113#issuecomment-1034362913

We are trying to shift from a detection of solely Sars-cov-2 (using Artic primers) to a more ""metagenomics"" approach (using [Illumina RVOP kit](https://www.illumina.com/products/by-type/sequencing-kits/library-prep-kits/respiratory-virus-oligo-panel.html))
=> Looks like we can stick with `viralrecon` for that, so first : **thanks for this wonderful tool !**

Currently filtering of host reads with Kraken is based on keeping only ""unassigned"" reads after classification against a Kraken DB composed of Human only (deduced from [here](https://github.com/nf-core/viralrecon/blob/3ee1fe98fdf17a80922aa8cf4da4afaf483f3429/workflows/illumina.nf#L261-L268))

Would be great if we could run Kraken against a more diverse index (like ""Standard"" one) through `--kraken2_db`, then **filter out host reads by specifying host taxid** (new parameter such as `--kraken_host_taxid`)
=> This way we could keep filtering host reads, but also use Kraken at its full potential (to have a rapid global look of what's inside our sample)

It could be based on [`extract_kraken_reads.py`](https://github.com/jenniferlu717/KrakenTools#extract_kraken_readspy) from KrakenTools suite
=> But I guess it will require to add this script as an `nf-core` module first ([or maybe I missed it ?](https://nf-co.re/modules?q=krakentools))
<br>
Thanks again !
Kind regards,
Felix.",tetedange13,https://github.com/nf-core/viralrecon/issues/350
I_kwDODvpAGM5ck8HY,Outdated module folder structure,CLOSED,2023-01-23T14:20:51Z,2023-01-23T18:14:07Z,2023-01-23T18:13:06Z,"### Description of feature

The modules folder structure is outdated. It's currently `modules/nf-core/modules` whereas the current `nf-core modules` (v2.7.2) suggests (and automatically updates) the folder structure and moves all modules towards `modules/nf-core/`. 
",Joon-Klaps,https://github.com/nf-core/viralrecon/issues/351
I_kwDODvpAGM5c9UKI,Adding support for Atoplex kit,CLOSED,2023-01-27T11:13:13Z,2023-08-16T09:07:16Z,2023-08-16T09:07:16Z,"### Description of feature

Picking up a discussion that arose in the past October Hackathon by @ljmesi regarding adding the [Atoplex](https://en.mgi-tech.com/products/reagents_info/33/) library preparation kit to the list of available primer options.

I have used this kit to process samples and have extensively tested the correct formatting of the bed file available from MGI.

I'm opening the issue to start a conversation here and to confirm the correct way to add the kit would be to modify `genomes.config` file on [configs repo](https://github.com/nf-core/configs/blob/master/conf/pipeline/viralrecon/genomes.config), adding the kit to the bottom of `primer_sets` section.

I could do this change by forking the configs repo and following the basic contribution steps if this is the correct way to add the primer kit. I also understand I would need to fork `viralrecon` branch from `test-datasets` repo to upload the bed file.

Cheers!",ctuni,https://github.com/nf-core/viralrecon/issues/353
I_kwDODvpAGM5ekbqw,"Error ""No PSK available. Unable to resume."" ",CLOSED,2023-02-15T21:44:13Z,2023-03-17T03:39:43Z,2023-03-12T19:24:07Z,"### Description of the bug

My relevant knowledge is elementary and I don't think this is a viralrecon issue but rather something else that I can't resolve by Googling. My attempt at the pipeline succeeds but is incomplete, with the following error in the .nextflow.log file: 

Feb-14 18:29:29.407 [Actor Thread 23] ERROR nextflow.extension.OperatorImpl - @unknown
javax.net.ssl.SSLException: No PSK available. Unable to resume. 

Any help would be appreciated :)

### Command used and terminal output

```console
nextflow run nf-core/viralrecon \     
  --input samplesheet.csv \     
  --outdir viralrecon_test \     
  --platform illumina \     
  --protocol amplicon \     
  --genome 'MN908947.3' \     
  --primer_set artic \     
  --primer_set_version 3 \  
  -profile singularity


No PSK available. Unable to resume.
 -- Check script '/home/tsherman/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 130 or see '.nextflow.log' file for more details

No PSK available. Unable to resume.
 -- Check script '/home/tsherman/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 159 or see '.nextflow.log' file for more details

-[nf-core/viralrecon] Pipeline completed with errors-
```


### Relevant files

[nextflow.log](https://github.com/nf-core/viralrecon/files/10748036/nextflow.log)


### System information

Nextflow version 22.10.6 build 5843
HPC
Singularity
Linux 5.4.0-109-generic 

",forty2wallabyway,https://github.com/nf-core/viralrecon/issues/354
I_kwDODvpAGM5fqdmK,NEB SARS-CoV-2 primers,CLOSED,2023-02-16T14:24:56Z,2023-03-13T10:53:15Z,2023-03-13T10:53:15Z,"The NEB primer BED files on the config file don't seem to exist: [here ](https://github.com/nf-core/configs/blob/8dfcfa9201c3e48a4374bc79f6687aebf2c0dc3c/conf/pipeline/viralrecon/genomes.config#L75) and [here](https://github.com/nf-core/configs/blob/8dfcfa9201c3e48a4374bc79f6687aebf2c0dc3c/conf/pipeline/viralrecon/genomes.config#L81).

It might also be worth documenting what `vss1` and `vsl1` corresponded to in terms of VarSkip primer versions available from NEB (maybe just a comment in the config would be enough). ",tavareshugo,https://github.com/nf-core/viralrecon/issues/356
I_kwDODvpAGM5hiAtw,Incorrect depth from ivar variants reported in variants long table,CLOSED,2023-03-22T18:38:11Z,2023-03-22T20:37:20Z,2023-03-22T20:37:20Z,"### Description of the bug

When read depth is very high, `ivar variants` outputs depth in scientific notation. `variants_long_table` reports only the part of the number before the decimal, resulting in inaccurate depths and allele frequencies.

I believe the issue can be resolved by modifying https://github.com/nf-core/viralrecon/blob/master/bin/ivar_variants_to_vcf.py#L123 to `INFO = f""DP={int(float(line[11]))}""` to always report depth in vcf as an integer.

`$ grep 'e+' out/variants/ivar/ww.tsv`
| REGION | POS | REF | ALT | REF_DP | REF_RV | REF_QUAL | ALT_DP | ALT_RV | ALT_QUAL | ALT_FREQ | TOTAL_DP | PVAL | PASS | GFF_FEATURE | REF_CODON | REF_AA | ALT_CODON | ALT_AA |
| -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- |
| MN908947.3 | 21730 | A | G | 1317930 | 667938 | 35 | 14947 | 7521 | 36 | 0.0112138 | 1.33291e+06 | 0 | TRUE | cds-QHD43416.1 | TTA | L | TTG | L |
| MN908947.3 | 22583 | G | +T | 1474471 | 730754 | 36 | 79562 | 0 | 20 | 0.0531601 | 1.49665e+06 | 0 | TRUE | NA | NA | NA | NA | NA |
| MN908947.3 | 22977 | T | C | 1910409 | 57949 | 36 | 87378 | 1674 | 36 | 0.0437341 | 1.99794e+06 | 0 | TRUE | cds-QHD43416.1 | ATC | I | ACC | T |
| MN908947.3 | 23052 | T | A | 1983145 | 60241 | 36 | 12052 | 145 | 36 | 0.0060397 | 1.99546e+06 | 0 | TRUE | cds-QHD43416.1 | TTC | F | TAC | Y |
| MN908947.3 | 23126 | G | A | 3716960 | 1840637 | 37 | 5148 | 2450 | 36 | 0.00138304 | 3.72223e+06 | 1.39735e-52 | TRUE | cds-QHD43416.1 | GCA | A | ACA | T |
| MN908947.3 | 23256 | T | C | 2436217 | 1880072 | 36 | 4472 | 348 | 36 | 0.00183214 | 2.44086e+06 | 8.3265e-135 | TRUE | cds-QHD43416.1 | TTT | F | TCT | S |
| MN908947.3 | 24223 | C | +T | 1600383 | 258881 | 36 | 9068 | 0 | 20 | 0.00566151 | 1.60169e+06 | 1 | FALSE | NA | NA | NA | NA | NA |
| MN908947.3 | 24419 | A | G | 2602143 | 1303101 | 37 | 3394 | 1760 | 35 | 0.00130258 | 2.6056e+06 | 9.93939e-25 | TRUE | cds-QHD43416.1 | AAC | N | GAC | D |
| MN908947.3 | 24442 | C | A | 1274046 | 1271015 | 36 | 36373 | 36310 | 36 | 0.0277556 | 1.31047e+06 | 0 | TRUE | cds-QHD43416.1 | AAC | N | AAA | K |
| MN908947.3 | 24516 | A | G | 3613820 | 1381048 | 37 | 3692 | 218 | 36 | 0.00102047 | 3.61794e+06 | 0.192741 | FALSE | cds-QHD43416.1 | GAC | D | GGC | G |

`$ awk -F, '$10>1' out/variants/ivar/variants_long_table.csv`
| SAMPLE | CHROM | POS | REF | ALT | FILTER | DP | REF_DP | ALT_DP | AF | GENE | EFFECT | HGVS_C | HGVS_P | HGVS_P_1LETTER | CALLER |
| -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- |
| ww | MN908947.3 | 21730 | A | G | PASS | 1 | 1317930 | 14947 | 14947.0 | S | synonymous_variant | c.168A>G | p.Leu56Leu | p.L56L | ivar |
| ww | MN908947.3 | 22583 | G | GT | PASS | 1 | 1474471 | 79562 | 79562.0 | S | frameshift_variant&stop_gained | c.1026dupT | p.Asn343fs | p.N343fs | ivar |
| ww | MN908947.3 | 22977 | T | C | PASS | 1 | 1910409 | 87378 | 87378.0 | S | missense_variant | c.1415T>C | p.Ile472Thr | p.I472T | ivar |
| ww | MN908947.3 | 23052 | T | A | PASS | 1 | 1983145 | 12052 | 12052.0 | S | missense_variant | c.1490T>A | p.Phe497Tyr | p.F497Y | ivar |
| ww | MN908947.3 | 23126 | G | A | PASS | 3 | 3716960 | 5148 | 1716.0 | S | missense_variant | c.1564G>A | p.Ala522Thr | p.A522T | ivar |
| ww | MN908947.3 | 23256 | T | C | PASS | 2 | 2436217 | 4472 | 2236.0 | S | missense_variant | c.1694T>C | p.Phe565Ser | p.F565S | ivar |
| ww | MN908947.3 | 24223 | C | CT | ft | 1 | 1600383 | 9068 | 9068.0 | S | frameshift_variant | c.2664dupT | p.Gly889fs | p.G889fs | ivar |
| ww | MN908947.3 | 24419 | A | G | PASS | 2 | 2602143 | 3394 | 1697.0 | S | missense_variant | c.2857A>G | p.Asn953Asp | p.N953D | ivar |
| ww | MN908947.3 | 24442 | C | A | PASS | 1 | 1274046 | 36373 | 36373.0 | S | missense_variant | c.2880C>A | p.Asn960Lys | p.N960K | ivar |
| ww | MN908947.3 | 24516 | A | G | ft | 3 | 3613820 | 3692 | 1230.67 | S | missense_variant | c.2954A>G | p.Asp985Gly | p.D985G | ivar |

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

Nextflow version: 19.01.0.5050
Hardware: Cloud VM
Executor: local
Container engine: Docker
OS: Linux
Version of nf-core/viralrecon: 2.5",wutron,https://github.com/nf-core/viralrecon/issues/368
I_kwDODvpAGM5hiHNr,Missing conda package for ivar_variants_to_vcf.nf,CLOSED,2023-03-22T18:54:20Z,2023-03-22T20:17:35Z,2023-03-22T20:15:47Z,"### Description of the bug

`ivar_variants_to_vcf.py` has `from Bio import SeqIO`, which means that `ivar_variants_to_vcf.nf` requires biopython (e.g. `conda-forge::biopython=1.81`).

### Command used and terminal output

```console
Traceback (most recent call last):
  File ""ivar_variants_to_vcf.py"", line 12, in <module>
    from Bio import SeqIO
ModuleNotFoundError: No module named 'Bio'
```


### Relevant files

_No response_

### System information

Nextflow version: 19.01.0.5050
Hardware: Cloud VM
Executor: local
Container engine: Conda
OS: Linux
Version of nf-core/viralrecon: 2.5",wutron,https://github.com/nf-core/viralrecon/issues/369
I_kwDODvpAGM5hsZvI,Add subworkflows to nf-core,OPEN,2023-03-24T09:28:29Z,2023-03-28T11:36:59Z,,"### Description of feature

- [x] [bam_trim_primers_ivar.nf](https://github.com/nf-core/viralrecon/blob/master/subworkflows/local/bam_trim_primers_ivar.nf)
- [x] [fastq_trim_fastp_fastqc.nf](https://github.com/nf-core/viralrecon/blob/master/subworkflows/local/fastq_trim_fastp_fastqc.nf)
- [ ] [filter_bam_samtools.nf](https://github.com/nf-core/viralrecon/blob/master/subworkflows/local/filter_bam_samtools.nf) -> rename to `bam_filter_samtools_view`
- [ ] [vcf_bgzip_tabix_stats.nf](https://github.com/nf-core/viralrecon/blob/master/subworkflows/local/vcf_bgzip_tabix_stats.nf)
- [ ] [vcf_tabix_stats.nf](https://github.com/nf-core/viralrecon/blob/master/subworkflows/local/vcf_tabix_stats.nf)",drpatelh,https://github.com/nf-core/viralrecon/issues/371
I_kwDODvpAGM5hsg-Z,Add support for artic primer set version V5.3.2,OPEN,2023-03-24T09:46:36Z,2023-08-11T14:22:43Z,,"### Description of the bug

Hi, there has been a new primer set version uploaded to https://github.com/artic-network/artic-ncov2019/tree/master/primer_schemes/nCoV-2019/V5.3.2, would it be possible to add it to the genomes.config for viralrecon?

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",mbdabrowska1,https://github.com/nf-core/viralrecon/issues/373
I_kwDODvpAGM5htuiK,Custom .yaml and .txt for MultiQC and pangolin/nextclade version changes (-c error),CLOSED,2023-03-24T13:17:09Z,2023-03-24T20:20:36Z,2023-03-24T20:03:02Z,"### Description of the bug

Hi,

I have a large amount of custom code I use to generate reports and other sorts of semi-related things before and after I use viralrecon for given batches of SARS-CoV2 genomics. Having said that, I am and have been a big fan of viralrecon since I discovered it and I am trying to get 2.6 to work after having lots of stable extra things I added for my own use with 2.5.

I wanted to inquire about using custom multiqc config and a pangolin/nextclade 'config' file in 2.6. I get an error similar to the new documentation which suggests I use `-params-file` as opposed to `-c` . 

I have attached the configs I use. I typically name them 
'new_multiqc_config.yaml'
'mosdepth_only_multiqc_report.yaml'
'pangolin_config.txt'

For the multiqc reports, my lab group has asked I report all samples/reads with <1% coverage. Viralrecon and MultiQC by default include higher (>=10%, etc.), but we also want to track which samples obviously failed. I do this by getting >=1% in MultiQC via my config.yaml, then inverting by 100-x to get <1%.

In case upgrading to 2.6 and getting it working breaks my additional column in the .yamls, I am curious if this may be something that could just be added into MultiQC output by default? 

Then, I also use a pangolin file as suggested in the 2.5 and older documentation to override the pipeline defaults so that I can use newer versions of pangolin and nextclade dbs via quay.io.

So, my questions are: how do I continue to use my custom tweaks, (OR, can the default multiqc tweak be added in to include this small additional column) for both multiqc to create and grab the extra column and manipulate it and to use newer pangolin / nextclade configs given the error I saw?

I will paste my command line invocation below and attempt to attach my files here.

Thank you in advance,
Robert Arthur

### Command used and terminal output

```console
nextflow run nf-core/viralrecon -profile docker --input samplesheet.csv --platform illumina --protocol amplicon --genome 'MN908947.3' --primer_bed swift_refv3_primers.bed --consensus_caller 'ivar' --skip_asciigenome --skip_assembly --skip_kraken2 --multiqc_config '/home/rarthur/new_multiqc_config.yaml' --email_on_fail 'rarthu3@emory.edu' --outdir ./results -c pangolin_config.txt
```


### Relevant files

[Archive.zip](https://github.com/nf-core/viralrecon/files/11062408/Archive.zip)


### System information

_No response_",rarthur-eicc,https://github.com/nf-core/viralrecon/issues/374
I_kwDODvpAGM5iRn4Y,-[nf-core/viralrecon] Pipeline completed with errors- Error executing process > 'NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (SRX12373518)'  Caused by:   Process `NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (SRX12373518)` terminated with an error exit status (20),OPEN,2023-03-31T06:57:38Z,2024-04-09T10:57:09Z,,"### Description of the bug

It is my first time running nf-core/viralrecon pipeline using a sequence from nanopore (Minion). I used the following script but th Pipeline completed with errors. Is there anyone who can help me in troubleshooting the problem? 
when I try to view the complete command output by changing to the process work dir and entering the command `cat .command.out`, nothing is shown.

### Command used and terminal output

```console
The script I used:
#!/bin/bash

nextflow run nf-core/viralrecon \
  --input /home/dej/SARS/data105/samplesheet.csv \
  --outdir results105 \
  --platform nanopore \
  --protocol amplicon \
  --genome 'MN908947.3' \
  --primer_set artic \
  --primer_set_version 3 \
  --skip_assembly \
  --fastq_dir data105/fastq_pass/ \
  --artic_minion_caller medaka \
  --artic_minion_medaka_model r941_min_fast_g303 \
  -profile singularity -resume



-[nf-core/viralrecon] Pipeline completed with errors-
Error executing process > 'NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (SRX12373518)'

Caused by:
  Process `NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (SRX12373518)` terminated with an error exit status (20)

Command executed:

  export HDF5_PLUGIN_PATH=/usr/local/lib/python3.6/site-packages/ont_fast5_api/vbz_plugin

  artic \
      minion \
      --normalise 500 --medaka --minimap2 \
      --threads 12 \
      --read-file SRX12373518.fastq.gz \
      --scheme-directory ./primer-schemes \
      --scheme-version 3 \
      --medaka-model r941_min_fast_g303 \
       \
       \
      nCoV-2019 \
      SRX12373518

  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION"":
      artic: 1.2.3
  END_VERSIONS

Command exit status:
  20

Command output:
  (empty)

Command error:
                      insertion -> insertion:  0.353

                      Emission Probabilities:
                      match (equal):           0.966
                      match (not equal):       0.011
                      insertion:               1.000
                      deletion:                1.000

  2023-03-31 06:25:23 Reading potential variants from input VCF...
  2023-03-31 06:25:23 77 potential variants identified.
  2023-03-31 06:25:23 Generating haplotype fragments from reads...
  2023-03-31 06:25:23    10% of variants processed...
  2023-03-31 06:25:23    20% of variants processed...
  2023-03-31 06:25:23    30% of variants processed...
  2023-03-31 06:25:23    40% of variants processed...
  2023-03-31 06:25:23    50% of variants processed...
  2023-03-31 06:25:23    60% of variants processed...
  2023-03-31 06:25:23    70% of variants processed...
  2023-03-31 06:25:23    80% of variants processed...
  2023-03-31 06:25:23    90% of variants processed...
  2023-03-31 06:25:23    100% of variants processed.
  2023-03-31 06:25:23 Calling initial genotypes using pair-HMM realignment...
  Note: the --sample option not given, applying all records regardless of the genotype
  The site MN908947.3:11332 overlaps with another variant, skipping...
  The site MN908947.3:16466 overlaps with another variant, skipping...
  The fasta sequence does not match the REF allele at MN908947.3:22288:
     REF .vcf: [TGCTTTA]
     ALT .vcf: [T]
     REF .fa : [TGCTTNN]CATAGAAGTTATTTGACTCCTGGTGATTCTNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNAAAAGTCTACTAATTTGGTTAAAAACAAATGTGTCAATTTCAACTTCAATGGTTTAACAGGCACAGGTGTTCTTACTGAGTCTAACAAAAAGTTTCTGCCTTTCCAACAATTTGGCAGAGACATTGCTGACACTACTGATGCTGTCCGTGATCCACAGACACTTGAGATTCTTGACATTACACCATGTTCTTTTGGTGGTGTCAGTGTTATAACACCAGGAACAAATACTTCTAACCAGGTTGCTGTTCTTTATCAGGATGTTAACTGCACAGAAGTCCCTGTTGCTATTCATGCAGATCAACTTACTCCTACTTGGCGTGTTTATTCTACAGGTTCTAATGTTTTTCAAACACGTGCAGGCTGTTTAATAGGGGCTGAACATGTCAACAACTCATATGAGTGTGACATACCCATTGGTGCAGGTATATGCGCTAGTTATCAGACTCAGACTAATTCTCCTCGGCGGGCACGTAGTGTAGCTAGTCAATCCATCATTGCCTACACTATGTCACTTGGTGCAGAAAATTCAGTTGCTTACTCTAATAACTCTATTGCCATACCCACAAATTTTACTATTAGTGTTACCACAGAAATTCTACCAGTGTCTATGACCAAGACATCAGTAGATTGTACAATGTACATTTGTGGTGATTCAACTGAATGCAGCAATCTTTTGTTGCAATATGGCAGTTTTTGTACACAATTAAACCGTGCTTTAACTGGAATAGCTGTTGAACAAGACAAAAACACCCAAGAAGTTTTTGCACAAGTCAAACAAATTTACAAAACACCACCAATTAAAGATTTTGGTGGTTTTAATTTTTCACAAATATTACCAGATCCATCAAAACCAAGCAAGAGGTCATTTATTGAAGATCTACTTTTCAACAAAGTGACACTTGCAGATGCTGGCTTCATCAAACAATATGGTGATTGCCTTGGTGATATTGCTGCTAGAGACCTCATTTGTGCACAAAAGTTTAACGGCCTTACTGTTTTGCCACCTTTGCTCACAGATGAAATGATTGCTCAATACACTTCTGCACTGTTAGCGGGTACAATCACTTCTGGTTGGACCTTTGGTGCAGGTGCTGCATTACAAATACCATTTGCTATGCAAATGGCTTATAGGTTTAATGGTATTGGAGTTACACAGAATGTTCTCTATGAGAACCAAAAATTGATTGCCAACCAATTTAATAGTGCTATTGGCAAAATTCAAGACTCACTTTCTTCCACAGCAAGTGCACTTGGAAAACTTCAAGATGTGGTCAACCAAAATGCACAAGCTTTAAACACGCTTGTTAAACAACTTAGCTCCAATTTTGGTGCAATTTCAAGTGTTTTAAATGATATCCTTTCACGTCTTGACAAAGTTGAGGCTGAAGTGCAAATTGATAGGTTGATCACAGGCAGACTTCAAAGTTTGCAGACATATGTGACTCAACAATTAATTAGAGCTGCAGAAATCAGAGCTTCTGCTAATCTTGCTGCTACTAAAATGTCAGAGTGTGTACTTGGACAATCAAAAAGAGTTGATTTTTGTGGAAAGGGCTATCATCTTATGTCCTTCCCTCAGTCAGCACCTCATGGTGTAGTCTTCTTGCATGTGACTTATGTCCCTGCACAAGAAAAGAACTTCACAACTGCTCCTGCCATTTGTCATGATGGAAAAGCACACTTTCCTCGTGAAGGTGTCTTTGTTTCAAATGGCACACACTGGTTTGTAACACAAAGGAATTTTTATGAACCACAAATCATTACTACAGACAACACATTTGTGTCTGGTAACTGTGATGTTGTAATAGGAATTGTCAACAACACAGTTTATGATCCTTTGCAACCTGAATTAGACTCATTCAAGGAGGAGTTAGATAAATATTTTAAGAATCATACATCACCAGATGTTGATTTAGGTGACATCTCTGGCATTAATGCTTCAGTTGTAAACATTCAAAAAGAAATTGACCGCCTCAATGAGGTTGCCAAGAATTTAAATGAATCTCTCATCGATCTCCAAGAACTTGGAAAGTATGAGCAGTATATAAAATGGCCATGGTACATTTGGCTAGGTTTTATAGCTGGCTTGATTGCCATAGTAATGGTGACAATTATGCTTTGCTGTATGACCAGTTGCTGTAGTTGTCTCAAGGGCTGTTGTTCTTGTGGATCCTGCTGCAAATTTGATGAAGACGACTCTGAGCCAGTGCTCAAAGGAGTCAAATTACATTACACATAAACGAACTTATGGATTTGTTTATGAGAATCTTCACAATTGGAACTGTAACTTTGAAGCAAGGTGAAATCAAGGATGCTACTCCTTCAGATTTTGTTCGCGCTACTGCAACGATACCGATACAAGCCTCACTCCCTTTCGGATGGCTTATTGTTGGCGTTGCACTTCTTGCTGTTTTTCAGAGCGCTTCCAAAATCATAACCCTCAAAAAGAGATGGCAACTAGCACTCTCCAAGGGTGTTCACTTTGTTTGCAACTTGCTGTTGTTGTTTGTAACAGTTTACTCACACCTTTTGCTCGTTGCTGCTGGCCTTGAAGCCCCTTTTCTCTATCTTTATGCTTTAGTCTACTTCTTGCAGAGTATAAACTTTGTAAGAATAATAATGAGGCTTTGGCTTTGCTGGAAATGCCGTTCCAAAAACCCATTACTTTATGATGCCAACTATTTTCTTTGCTGGCATACTAATTGTTACGACTATTGTATACCTTACAATAGTGTAACTTCTTCAATTGTCATTACTTCAGGTGATGGCACAACAAGTCCTATTTCTGAACATGACTACCAGATTGGTGGTTATACTGAAAAATGGGAATCTGGAGTAAAAGACTGTGTTGTATTACACAGTTACTTCACTTCAGACTATTACCAGCTGTACTCAACTCAATTGAGTACAGACACTGGTGTTGAACATGTTACCTTCTTCATCTACAATAAAATTGTTGATGAGCCTGAAGAACATGTCCAAATTCACACAATCGACGGTTCATCCGGAGTTGTTAATCCAGTAATGGAACCAATTTATGATGAACCGACGACGACTACTAGCGTGCCTTTGTAAGCACAAGCTGATGAGTACGAACTTATGTACTCATTCGTTTCGGAAGAGACAGGTACGTTAATAGTTAATAGCGTACTTCTTTTTCTTGCTTTCGTGGTATTCTTGCTAGTTACACTAGCCATCCTTACTGCGCTTCGATTGTGTGCGTACTGCTGCAATATTGTTAACGTGAGTCTTGTAAAACCTTCTTTTTACGTTTACTCTCGTGTTAAAAATCTGAATTCTTCTAGAGTTCCTGATCTTCTGGTCTAAACGAACTAAATATTATATTAGTTTTTCTGTTTGGAACTTTAATTTTAGCCATGGCAGATTCCAACGGTACTATTACCGTTGAAGAGCTTAAAAAGCTCCTTGAACAATGGAACCTAGTAATAGGTTTCCTATTCCTTACATGGATTTGTCTTCTACAATTTGCCTATGCCAACAGGAATAGGTTTTTGTATATAATTAAGTTAATTTTCCTCTGGCTGTTATGGCCAGTAACTTTAGCTTGTTTTGTGCTTGCTGCTGTTTACAGAATAAATTGGATCACCGGTGGAATTGCTATCGCAATGGCTTGTCTTGTAGGCTTGATGTGGCTCAGCTACTTCATTGCTTCTTTCAGACTGTTTGCGCGTACGCGTTCCATGTGGTCATTCAATCCAGAAACTAACATTCTTCTCAACGTGCCACTCCATGGCACTATTCTGACCAGACCGCTTCTAGAAAGTGAACTCGTAATCGGAGCTGTGATCCTTCGTGGACATCTTCGTATTGCTGGACACCATCTAGGACGCTGTGACATCAAGGACCTGCCTAAAGAAATCACTGTTGCTACATCACGAACGCTTTCTTATTACAAATTGGGAGCTTCGCAGCGTGTAGCAGGTGACTCAGGTTTTGCTGCATACAGTCGCTACAGGATTGGCAACTATAAATTAAACACAGACCATTCCAGTAGCAGTGACAATATTGCTTTGCTTGTACAGTAAGTGACAACAGATGTTTCATCTCGTTGACTTTCAGGTTACTATAGCAGAGATATTACTAATTATTATGAGGACTTTTAAAGTTTCCATTTGGAATCTTGATTACATCATAAACCTCATAATTAAAAATTTATCTAAGTCACTAACTGAGAATAAATATTCTCAATTAGATGAAGAGCAACCAATGGAGATTGATTAAACGAACATGAAAATTATTCTTTTCTTGGCACTGATAACACTCGCTACTTGTGAGCTTTATCACTACCAAGAGTGTGTTAGAGGTACAACAGTACTTTTAAAAGAACCTTGCTCTTCTGGAACATACGAGGGCAATTCACCATTTCATCCTCTAGCTGATAACAAATTTGCACTGACTTGCTTTAGCACTCNNNNTGCTTTTGCTTGTCCTGACGGCGTAAAACACGTCTATCAGTTACGTGCCAGATCAGTTTCACCTAAACTGTTCATCAGACAAGAGGAAGTTCAAGAACTTTACTCTCCAATTTTTCTTATTGTTGCGGCAATAGTGTTTATAACACTTTGCTTCACACTCAAAAGAAAGACAGAATGATTGAACTTTCATTAATTGACTTCTATTTGTGCTTTTTAGCCTTTCTGCTATTCCTTGTTTTAATTATGCTTATTATCTTTTGGTTCTCACTTGAACTGCAAGATCATAATGAAACTTGTCACGCCTAAACGAACATGAAATTTCTTGTTTTCTTAGGAATCATCACAACTGTAGCTGCATTTCACCAAGAATGTAGTTTACAGTCATGTACTCAACATCAACCATATGTAGTTGATGACCCGTGTCCTATTCACTTCTATTCTAAATGGTATATTAGAGTAGGAGCTAGAAAATCAGCACCTTTAATTGAATTGTGCGTGGATGAGGCTGGTTCTAAATCACCCATTCAGTACATCGATATCGGTAATTATACAGTTTCCTGTTTACCTTTTACAATTAATTGCCAGGAACCTAAATTGGGTAGTCTTGTAGTGCGTTGTTCGTTCTATGAAGACTTTTTAGAGTATCATGACGTTCGTGTTGTTTTAGATTTCATCTAAACGAACAAACTAAAATGTCTGATAATGGACCCCAAAATCAGCGAAATGCACCCCGCATTACGTTTGGTGGACCCTCAGATTCAACTGGCAGTAACCAGAATGGAGAACGCAGTGGGGCGCGATCAAAACAACGTCGGCCCCAAGGTTTACCCAATAATACTGCGTCTTGGTTCACCGCTCTCACTCAACATGGCAAGGAAGACCTTAAATTCCCTCGAGGACAAGGCGTTCCAATTAACACCAATAGCAGTCCAGATGACCAAATTGGCTACTACCGAAGAGCTACCAGACGAATTCGTGGTGGTGACGGTAAAATGAAAGATCTCAGTCCAAGATGGTATTTCTACTACCTAGGAACTGGGCCAGAAGCTGGACTTCCCTATGGTGCTAACAAAGACGGCATCATATGGGTTGCAACTGAGGGAGCCTTGAATACACCAAAAGATCACATTGGCACCCGCAATCCTGCTAACAATGCTGCAATCGTGCTACAACTTCCTCAAGGAACAACATTGCCAAAAGGCTTCTACGCAGAAGGGAGCAGAGGCGGCAGTCAAGCCTCTTCTCGTTCCTCATCACGTAGTCGCAACAGTTCAAGAAATTCAACTCCAGGCAGCAGTAGGGGAACTTCTCCTGCTAGAATGGCTGGCAATGGCGGTGATGCTGCTCTTGCTTTGCTGCTGCTTGACAGATTGAACCAGCTTGAGAGCAAAATGTCTGGTAAAGGCCAACAACAACAAGGCCAAACTGTCACTAAGAAATCTGCTGCTGAGGCTTCTAAGAAGCCTCGGCAAAAACGTACTGCCACTAAAGCATACAATGTAACACAAGCTTTCGGCAGACGTGGTCCAGAACAAACCCAAGGAAATTTTGGGGACCAGGAACTAATCAGACAAGGAACTGATTACAAACATTGGCCGCAAATTGCACAATTTGCCCCCAGCGCTTCAGCGTTCTTCGGAATGTCGCGCATTGGCATGGAAGTCACACCTTCGGGAACGTGGTTGACCTACACAGGTGCCATCAAATTGGATGACAAAGATCCAAATTTCAAAGATCAAGTCATTTTGCTGAATAAGCATATTGACGCATACAAAACATTCCCACCAACAGAGCCTAAAAAGGACAAAAAGAAGAAGGCTGATGAAACTCAAGCCTTACCGCAGAGACAGAAGAAACAGCAAACTGTGACTCTTCTTCCTGCTGCAGATTTGGATGATTTCTCCAAACAATTGCAACAATCCATGAGCAGTGCTGACTCAACTCAGGCCTAAACTCATGCAGACCACACAAGGCAGATGGGCTATATAAACGTTTTCGCTTTTCCGTTTACGATATATAGTCTACTCTTGTGCAGAATGAATTCTCGTAACTACATAGCACAAGTAGATGTAGTTAACTTTAATCTCACATAGCAATCTTTAATCAGTGTGTAACATTAGGGAGGACTTGAAAGAGCCACCACATTTTCACCGAGGCCACGCGGAGTACGATCGAGTGTACAGTGAACAATGCTAGGGAGAGCTGCCTATATGGAAGAGCCCTAATGTGTAAAATTAATTTTAGTAGTGCTATCCNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
  Running: minimap2 -a -x map-ont -t 12 ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta SRX12373518.fastq.gz | samtools view -bS -F 4 - | samtools sort -o SRX12373518.sorted.bam -
  Running: samtools index SRX12373518.sorted.bam
  Running: align_trim --normalise 500 ./primer-schemes/nCoV-2019/V3/nCoV-2019.scheme.bed --start --remove-incorrect-pairs --report SRX12373518.alignreport.txt < SRX12373518.sorted.bam 2> SRX12373518.alignreport.er | samtools sort -T SRX12373518 - -o SRX12373518.trimmed.rg.sorted.bam
  Running: align_trim --normalise 500 ./primer-schemes/nCoV-2019/V3/nCoV-2019.scheme.bed --remove-incorrect-pairs --report SRX12373518.alignreport.txt < SRX12373518.sorted.bam 2> SRX12373518.alignreport.er | samtools sort -T SRX12373518 - -o SRX12373518.primertrimmed.rg.sorted.bam
  Running: samtools index SRX12373518.trimmed.rg.sorted.bam
  Running: samtools index SRX12373518.primertrimmed.rg.sorted.bam
  Running: medaka consensus --model r941_min_fast_g303 --threads 12 --chunk_len 800 --chunk_ovlp 400 --RG 1 SRX12373518.trimmed.rg.sorted.bam SRX12373518.1.hdf
  Running: medaka variant ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta SRX12373518.1.hdf SRX12373518.1.vcf
  Running: medaka consensus --model r941_min_fast_g303 --threads 12 --chunk_len 800 --chunk_ovlp 400 --RG 2 SRX12373518.trimmed.rg.sorted.bam SRX12373518.2.hdf
  Running: medaka variant ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta SRX12373518.2.hdf SRX12373518.2.vcf
  Running: artic_vcf_merge SRX12373518 ./primer-schemes/nCoV-2019/V3/nCoV-2019.scheme.bed 2> SRX12373518.primersitereport.txt 1:SRX12373518.1.vcf 2:SRX12373518.2.vcf
  Running: bgzip -f SRX12373518.merged.vcf
  Running: tabix -f -p vcf SRX12373518.merged.vcf.gz
  Running: longshot -P 0 -F -A --no_haps --bam SRX12373518.primertrimmed.rg.sorted.bam --ref ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta --out SRX12373518.merged.vcf --potential_variants SRX12373518.merged.vcf.gz
  Running: artic_vcf_filter --medaka SRX12373518.merged.vcf SRX12373518.pass.vcf SRX12373518.fail.vcf
  Running: bgzip -f SRX12373518.pass.vcf
  Running: tabix -p vcf SRX12373518.pass.vcf.gz
  Running: artic_make_depth_mask --store-rg-depths ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta SRX12373518.primertrimmed.rg.sorted.bam SRX12373518.coverage_mask.txt
  Running: artic_mask ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta SRX12373518.coverage_mask.txt SRX12373518.fail.vcf SRX12373518.preconsensus.fasta
  Running: bcftools consensus -f SRX12373518.preconsensus.fasta SRX12373518.pass.vcf.gz -m SRX12373518.coverage_mask.txt -o SRX12373518.consensus.fasta
  Command failed:bcftools consensus -f SRX12373518.preconsensus.fasta SRX12373518.pass.vcf.gz -m SRX12373518.coverage_mask.txt -o SRX12373518.consensus.fasta

Work dir:
  /home/dej/SARS/data105/work/0d/6b75867a93eeaffdaa78c9e3fd8ef2

Tip: view the complete command output by changing to the process work dir and entering the command `cat .command.out`
```
WHEN i RE-RUN THE COMMAND USING THE FOLLOWING SCRIPT

#!/bin/bash

nextflow run nf-core/viralrecon -profile singularity \
  --max_memory '32.GB' --max_cpus 12 \
  --input /home/dej/SARS/data105/samplesheet.csv \
  --outdir results_105/viralrecon \
  --platform nanopore \
  --protocol amplicon \
  --genome 'MN908947.3' \
  --primer_set artic \
  --primer_set_version 3 \
  --skip_assembly \
  --fastq_dir data105/fastq_pass/ \
  --artic_minion_caller medaka \
  --artic_minion_medaka_model r941_min_fast_g303


ERROR:

-[nf-core/viralrecon] Pipeline completed with errors-
WARN: Unable to stage foreign file: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.reference.fasta (try 1) -- Cause: github.com
WARN: Unable to stage foreign file: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.primer.bed (try 1) -- Cause: github.com
WARN: Unable to stage foreign file: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.reference.fasta (try 2) -- Cause: github.com
WARN: Unable to stage foreign file: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.primer.bed (try 2) -- Cause: github.com
WARN: Unable to stage foreign file: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.primer.bed (try 3) -- Cause: github.com
WARN: Unable to stage foreign file: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.reference.fasta (try 3) -- Cause: github.com
Error executing process > 'NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (SRX12622371)'

Caused by:
  Can't stage file https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V3/nCoV-2019.primer.bed -- reason: github.com


Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`

### Relevant files

_No response_

### System information

_No response_",dejenie21,https://github.com/nf-core/viralrecon/issues/376
I_kwDODvpAGM5jytLZ,Suggestions regarding BLAST step,CLOSED,2023-04-19T06:13:13Z,2024-06-18T07:11:34Z,2024-06-18T07:11:34Z,"### Description of feature

Hi,

Thanks for `viralrecon`, this is really an amazing tool !

I manipulated BLAST results produced by the pipeline when running it on Flu hybrid-capture data and here are a few improvements I may suggest :

1. Add taxonomic ID to BLAST output files ([should be `staxids` field ?](https://www.metagenomics.wiki/tools/blast/blastn-output-format-6))
=> This would be particularly useful working with a virus having segmented genome like Influenza
=> As you expect several assembled contigs aligning against a given segment, I like to group BLAST hits to check if all segments of a given species are well present
<br>

2. Detail somewhere in the documentation (probably [here](https://nf-co.re/viralrecon/2.6.0/output#blast) ?) filters used to generate `.filter.blastn.txt` files :
https://github.com/nf-core/viralrecon/blob/3731dd3a32a67a2648ea22c2bd980c224abdaee2/modules/local/filter_blastn.nf#L24
(with words : `qlen > 200 && length/qlen > 0.7 && stitle !~ /phage/`
<br>

3. This is not essential, but I would love to have a header for (raw) `.blastn.txt` too (same as for `filter.blastn.txt`)
<br>

Thanks again !
Have a nice day,
Felix.",tetedange13,https://github.com/nf-core/viralrecon/issues/378
I_kwDODvpAGM5j3zwk,ERROR picard container for  NFCORE_VIRALRECON:ILLUMINA:PICARD_COLLECTMULTIPLEMETRICS -> setlocale: LC_ALL: cannot change locale (en_US.UTF-8): No such file or directory,OPEN,2023-04-19T20:24:15Z,2024-11-22T09:30:26Z,,"### Description of the bug

I am running release 2.6.0 of the viralrecon pipeline. It aborts when it gets to this step 

NFCORE_VIRALRECON:ILLUMINA:PICARD_COLLECTMULTIPLEMETRICS.

It looks like the problem is with the picard singularity container. It is not setting up a bunch of global variables.

I had to rerun the pipeline with *skip_picard_metrics: true* in order to force it to skip this step and complete the rest of the analyses.  But it was just a temporary fix.

I am appending .command.err .command.run .command.sh for this failed process to help with troubleshooting.

Thanks in advance for your help.



### Command used and terminal output

_No response_

### Relevant files

[command.err.txt](https://github.com/nf-core/viralrecon/files/11277254/command.err.txt)
[command.run.txt](https://github.com/nf-core/viralrecon/files/11277255/command.run.txt)
[command.sh.txt](https://github.com/nf-core/viralrecon/files/11277256/command.sh.txt)


### System information

Nextflow version: 22.10.1
Hardware: HPC 
Executor: slurm
Container engine: Singularity
OS: Rocky Linux 8.5 (Green Obsidian)
Version of nf-core/viralrecon: 2.6.0",grendon,https://github.com/nf-core/viralrecon/issues/379
I_kwDODvpAGM5lozl1,Minia assembly is non-deterministic in parallel,OPEN,2023-05-11T07:01:29Z,2023-05-11T10:17:14Z,,"### Description of feature

Hi all,
<br>
I noticed that when running assembly with Minia twice with exact same parameters, produced assembled genomes are slightly different
=> This is something known: https://github.com/GATB/minia/issues/25#issuecomment-868818633

To avoid that, Minia should be run with `-nb-cores 1 -nb-glue-partitions 200` ([not the case in current Minia `nf-core` module](https://github.com/nf-core/viralrecon/blob/3731dd3a32a67a2648ea22c2bd980c224abdaee2/modules/nf-core/minia/main.nf#L28-L32))
=> See ""11 - Reproducibility"" section of [Minia manual](https://raw.githubusercontent.com/GATB/minia/master/doc/manual.pdf)

It first thought it would be OK to **set deterministic behaviour as default**, because Minia is fast and nextflow should be able to parallellize Minia processes over multiple samples
=> But my tests show a rather **important impact on performances**
(I only changed `main.nf` of Minia module, maybe there was something else to tweak to maintain performances ?)

So rather it could useful to add an **optional parameter to enable deterministic Minia assembly**  (could be something like `--deterministic-minia`) ?
=> In case one wants to compare assembled genomes ?
=> Warning user that it will have a huge impact on performances
<br>
Hope this helps !
Have a nice day,
Felix.",tetedange13,https://github.com/nf-core/viralrecon/issues/381
I_kwDODvpAGM5n60LC,Minimum frequency threshold is being ignored,OPEN,2023-06-06T09:36:25Z,2024-10-27T17:24:42Z,,"### Description of the bug

Hello. 
I am trying to use viralrecon as to detect variants with a minimun frequency of 0.1. Nevertheless, when using viralrecon with the instructions given below, I have found the following warning: 
-----------------------------------
WARN: Found unexpected parameters:
* --min_allele_freq: 0.1
-----------------------------------
the min_allele_freq is being ignored. What can I do? 

Thanks in advance! 

### Command used and terminal output

```console
$ nextflow run nf-core/viralrecon --input samplesheet.csv --genome 'MN908947.3' --min_allele_freq 0.1 -profile singularity --primer_bed nCoV-2019.artic.V4_1.bed --outdir viralrecon_output/ --platform illumina --protocol amplicon
```


### Relevant files

_No response_

### System information

_No response_",AndreaAguadoM,https://github.com/nf-core/viralrecon/issues/382
I_kwDODvpAGM5qCmfN,ERROR ~ Error executing process > 'NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION',OPEN,2023-06-28T14:24:59Z,2024-05-10T08:31:21Z,,"### Description of the bug

When running nf-core/viralrecon, the medaka minion throws an error. Seems the model cannot be downloaded via the medaka minion script. scm file with github credentials is present, internet connection is available. 

### Command used and terminal output

```console
nextflow run nf-core/viralrecon -qs 4 -revision 2.6.0 -profile docker 
--input results/benchmarking/nf-core-viralrecon/nanopore/sample-sheets/2_ont/sample_sheet.csv --sequencing_summary data/RAW/ONT_batch2/sequencing_summary.txt 
--fastq_dir resources/benchmarking/data/nf-core-viralrecon/2_ont/fastq_pass 
--fast5_dir resources/benchmarking/data/nf-core-viralrecon/2_ont/fast5_pass 
--platform nanopore 
--genome 'MN908947.3' 
--primer_set_version 3 
--artic_minion_caller medaka 
--artic_minion_medaka_model r941_min_fast_g303 
--outdir results/benchmarking/nf-core-viralrecon/nanopore/medaka/2_ont

Command error:
  [M::mm_idx_stat::0.007*3.40] distinct minimizers: 5587 (99.93% are singletons); average occurrences: 1.004; average spacing: 5.332; total length: 29903
  [M::worker_pipeline::17.215*4.14] mapped 365148 sequences
  [M::main] Version: 2.24-r1122
  [M::main] CMD: minimap2 -a -x map-ont -t 12 ./primer-schemes/nCoV-2019/V3/nCoV-2019.reference.fasta 2_ont.fastq.gz
  [M::main] Real time: 17.218 sec; CPU: 71.326 sec; Peak RSS: 0.489 GB
  Traceback (most recent call last):
    File ""/usr/local/lib/python3.8/site-packages/medaka/medaka.py"", line 35, in __call__
      model_fp = medaka.models.resolve_model(val)
    File ""/usr/local/lib/python3.8/site-packages/medaka/models.py"", line 66, in resolve_model
      raise DownloadError(
  medaka.models.DownloadError: The model file for r941_min_fast_g303 is not already installed and could not be downloaded. Check you are connected to the internet and try again.
```


### Relevant files

[nextflow.log](https://github.com/nf-core/viralrecon/files/11895814/nextflow.log)


### System information

nextflow version 23.04.1.5866
Linux server
locally executed in docker container
nf-core/viralrecon 2.6.0",alethomas,https://github.com/nf-core/viralrecon/issues/383
I_kwDODvpAGM5tAQl-,[bug] Fails to find FASTQ files when stored on S3,OPEN,2023-07-31T09:31:45Z,2023-08-16T07:50:54Z,,"### Description of the bug

viralrecon is affected by https://github.com/nextflow-io/nextflow/issues/4081 this bug.

It looks like the bug is here: https://github.com/nf-core/viralrecon/blob/3731dd3a32a67a2648ea22c2bd980c224abdaee2/workflows/nanopore.nf#L144-L145

The error in the log file is here:
```
Jul-31 02:21:34.846 [main] DEBUG nextflow.Nextflow - No such file or directory: /ngi-igenomes/test-data/viralrecon/minion_test/fastq_pass -- Skipping visit
Jul-31 02:21:34.847 [main] DEBUG nextflow.Nextflow - No such file or directory: /ngi-igenomes/test-data/viralrecon/minion_test/fastq_pass -- Skipping visit
Jul-31 02:21:34.849 [main] ERROR nextflow.Nextflow - Please specify a valid folder containing ONT basecalled, barcoded fastq files generated by guppy_barcoder or guppy_basecaller e.g. '--fastq_dir ./20191023_1522_MC-110615_0_FAO93606_12bf9b4f/fastq_pass/
```

### Command used and terminal output

```console
nextflow run nf-core/viralrecon -profile test_nanopore,docker --outdir results
```
```


### Relevant files

_No response_

### System information

Nextflow: 23.07.0-edge",adamrtalbot,https://github.com/nf-core/viralrecon/issues/385
I_kwDODvpAGM5uVzDU,epi2me-labs/wf-cnv failed during analysis,CLOSED,2023-08-15T10:15:14Z,2023-08-16T07:54:41Z,2023-08-16T07:49:06Z,"Hello, I am new to epi2melabs. I want to analysis CNV in CYP2D6 in chromosome 22. I followed the example on the epi2me/wf-cnv website.

nextflow run epi2me-labs/wf-cnv  --fastq /srv/nabi/EPIMOL_Malaria/FASTQ_CYPD6/fastq_pass/COMBINED/isolate01-COMBINED.fastq.gz  --reference /srv/nabi/EPIMOL_Malaria/copy_number/hg38.fa.gz --bin_size 500


Here is the error message I got and I do not understand how to go about it. Please can I get help on this

||||||||||   _____ ____ ___ ____  __  __ _____      _       _
||||||||||  | ____|  _ \_ _|___ \|  \/  | ____|    | | __ _| |__  ___
|||||       |  _| | |_) | |  __) | |\/| |  _| _____| |/ _` | '_ \/ __|
|||||       | |___|  __/| | / __/| |  | | |__|_____| | (_| | |_) \__ \
||||||||||  |_____|_|  |___|_____|_|  |_|_____|    |_|\__,_|_.__/|___/
||||||||||  wf-cnv v0.0.9-g956b861
--------------------------------------------------------------------------------
Core Nextflow options
  revision       : master
  runName        : modest_coulomb
  containerEngine: docker
  launchDir      : /srv/nabi/EPIMOL_Malaria/copy_number
  workDir        : /srv/nabi/EPIMOL_Malaria/copy_number/work
  projectDir     : /home/nabi/.nextflow/assets/epi2me-labs/wf-cnv
  userName       : nabi
  profile        : standard
  configFiles    : /home/nabi/.nextflow/assets/epi2me-labs/wf-cnv/nextflow.config

Input Options
  fastq          : /srv/nabi/EPIMOL_Malaria/FASTQ_CYPD6/fastq_pass/COMBINED/isolate01-COMBINED.fastq.gz
  reference      : /srv/nabi/EPIMOL_Malaria/copy_number/hg38.fa.gz

Advanced Options
  map_threads    : 4

!! Only displaying parameters that differ from the pipeline defaults !!
--------------------------------------------------------------------------------
If you use epi2me-labs/wf-cnv for your analysis please cite:

* The nf-core framework
  https://doi.org/10.1038/s41587-020-0439-x


--------------------------------------------------------------------------------
This is epi2me-labs/wf-cnv v0.0.9-g956b861.
--------------------------------------------------------------------------------
ERROR ~ wf-cnv is now deprecated and will no longer receive updates, please use wf-human-variation

 -- Check '.nextflow.log' file for details
Checking fastq input.
Single file input detected.
executor >  local (3)
[8d/acadf5] process > pipeline:getVersions      [  0%] 0 of 1
[1b/4e5fc0] process > pipeline:getParams        [  0%] 0 of 1
[69/9f749c] process > pipeline:getGenome        [  0%] 0 of 1 ✔
[-        ] process > pipeline:concatenateReads -
[-        ] process > pipeline:alignment        -
[-        ] process > pipeline:samtoolsIndex    -
[-        ] process > pipeline:callCNV          -
[-        ] process > pipeline:makeReport       -
[-        ] process > output                    -
ERROR ~ Error executing process > 'pipeline:getGenome'

Caused by:
  Process `pipeline:getGenome` terminated with an error exit status (127)

Command executed:

  faSize -detailed -tab hg38.fa.gz > hg38.fa.gz_genome.txt
  workflow-glue get_genome --chr_counts hg38.fa.gz_genome.txt -o output.txt
  genome_string=`cat output.txt`

Command exit status:
  127

Command output:
  (empty)

Command error:
  .command.run: line 290: docker: command not found

Work dir:
  /srv/nabi/EPIMOL_Malaria/copy_number/work/69/9f749c4fb6d59b8cfd7f5256c9cf98

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line

 -- Check '.nextflow.log' file for details
ERROR ~ The genome build detected is not compatible with this workflow. Please check the reference sequence and try again.

 -- Check '.nextflow.log' file for details


I honestly do not knw how to troubleshoot this message.
Any help please. Thank you",Ligerd5,https://github.com/nf-core/viralrecon/issues/389
I_kwDODvpAGM5uo5R4,Allow viralrecon to take gtf as input annotation file,CLOSED,2023-08-18T07:30:44Z,2024-04-22T14:08:39Z,2024-04-22T14:08:39Z,"### Description of feature

We are working on a custom gtf file with multiple overlapping features for SARS-CoV-2, but viralrecon won't let you use a gtf file as annotation file.

Depending if the input annotation file is a gff or a gtf, SNPEFF_BUILD process should be changed, because now it only works for gff files: https://github.com/nf-core/viralrecon/blob/23e3441ec70077e5af4717c2ee7d7d0d51f1e77a/modules/local/snpeff_build.nf#L49

Also, some additional changes are needed in the [make_variants_long_table.py](https://github.com/nf-core/viralrecon/blob/dev/bin/make_variants_long_table.py) to allow overlapping features to appear in the results table.

An example of the original variants_long_table output:
![image](https://github.com/nf-core/viralrecon/assets/25959991/71aad992-d8bd-4371-8206-e650d46794ac)

An example of the table we want to obtain:
![image](https://github.com/nf-core/viralrecon/assets/25959991/60e817de-48a1-4c0c-a3dd-248a1844274b)
",svarona,https://github.com/nf-core/viralrecon/issues/390
I_kwDODvpAGM5up3Sk,primer_set is not taking param,CLOSED,2023-08-18T10:20:05Z,2024-04-02T10:49:43Z,2024-04-02T10:49:43Z,"### Description of the bug

In [main.nf](https://github.com/nf-core/viralrecon/blob/master/main.nf) `primer_set` is always artic instead of `params.primer_set`

https://github.com/nf-core/viralrecon/blob/3731dd3a32a67a2648ea22c2bd980c224abdaee2/main.nf#L27

When it should be:
```
} else if (params.platform == 'nanopore') {
    primer_set          = params.primer_set
```

Else, it can give an error when using custom .bed primers

### Command used and terminal output

```console
nextflow run nf-core-viralrecon-2.6/workflow/main.nf \
          -c ./viralrecon_sars_nanopore.config \
          -params-file ./viralrecon_sars_params_nanopore.yml \
          --input samplesheet.csv \
          --outdir 20230303_viralrecon \
          --genome 'MN908947.3' \
          --fastq_dir ../../RAW/ESIB_EQA_2023.SARS1/ \
          -resume
```


### Relevant files

`viralrecon_sars_nanopore.config`:
```
singularity {
	enabled = true
	autoMounts = true
        runOptions = '-B /data/bi/references/ -B /data/bi/pipelines/artic-ncov2019/'
}

process {
	executor = 'slurm'
	queue = 'middle_idx'
        withName: 'ARTIC_MINION' {
            ext.args = [
                '--normalise 500',
                '--scheme-directory /data/bi/pipelines/artic-ncov2019/primer_schemes/',
                '--medaka'
            ].join(' ').trim()
        }
        withName: 'PANGOLIN' {
            ext.args = '--datadir /data/bi/references/pangolin/20230227/'
            container = 'https://depot.galaxyproject.org/singularity/pangolin:4.2--pyhdfd78af_1'
        }
	withName: 'NEXTCLADE_DATASETGET|NEXTCLADE_RUN' {
        container = 'https://depot.galaxyproject.org/singularity/nextclade:2.9.1--h9ee0642_0'
    }
}
params {
        // Max resource options
	max_memory = 376.GB
	max_cpus = 32
	max_time = '48.h'
}
```

`./viralrecon_sars_params_nanopore.yml`:
```
platform: 'nanopore'
protocol: 'amplicon'
artic_scheme: 'nCoV-2019'
primer_set_version: 5
fasta: '/data/bi/pipelines/artic-ncov2019/primer_schemes/nCoV-2019/V5/ESIB-EQA.reference.fasta'
primer_bed: '/data/bi/pipelines/artic-ncov2019/primer_schemes/nCoV-2019/V5/ESIB-EQA.primer.bed'
primer_fasta: '../../RAW/ESIB_EQA_2023.SARS1/ESIB_EQA_2023.SARS1.primers.fasta'
kraken2_db: '/data/bi/references/eukaria/homo_sapiens/hg38/UCSC/kraken2/kraken2_human.tar.gz'
nextclade_dataset_name: 'sars-cov-2'
nextclade_dataset: false
nextclade_dataset_tag: '2023-02-25T12:00:00Z'
artic_minion_caller: 'medaka'
artic_minion_medaka_model: 'r941_min_fast_g303'
```

### System information

- N E X T F L O W  ~  version 22.10.1
- HPC
- Slurm
- Singularity
- CentOS
- nf-core-viralrecon-2.6",svarona,https://github.com/nf-core/viralrecon/issues/391
I_kwDODvpAGM5urIbx,Artic v5 mismatched primer names in artic-ncov2019 repo cause certain amplicons to be erroneously filtered/removed,OPEN,2023-08-18T14:16:06Z,2023-11-07T09:04:21Z,,"### Description of the bug

Hello!

By default viralrecon pulls the Artic V5 bed file from: https://github.com/artic-network/artic-ncov2019/raw/master/primer_schemes/nCoV-2019/V5.3.2/SARS-CoV-2.scheme.bed

However in this version of the bed file, the primer names are mismatched for the following pairs:
`SARS-CoV-2_3`
`SARS-CoV-2_31`
`SARS-CoV-2_62`
`SARS-CoV-2_89`
`SARS-CoV-2_96`

This results in reads belonging to those pairs being erroneously filtered out as part of `artic minion`, and are consequently removed from the `primertrimmed.rg.sorted.bam` file. This results in amplicons appearing ""dropped"" for those regions, even though there is coverage. I have outlined this issue in more detail here: https://github.com/artic-network/fieldbioinformatics/issues/126

The current workaround I have found is to manually use the bed file from `artic-network/primer-schemes` : https://github.com/artic-network/primer-schemes/blob/master/nCoV-2019/V5.3.2/SARS-CoV-2.scheme.bed

This means removing the sequences in the bed file as the `collapse_primer_bed.py` script expects 6 columns: 
line 58: `chrom, start, end, name, score, strand = line.strip().split(""\t"")`

I think this would affect everyone using the Artic V5 scheme and viralrecon currently. It might be useful to use the bed file in `artic-network/primer-schemes` for now, and modify `collapse_primer_bed.py` to handle the sequence column?

Would be happy to open a PR - but think the config needs to be changed in the nf-core/configs repo to modify the download url?

Thanks,
Sam


### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",Sam-Sims,https://github.com/nf-core/viralrecon/issues/392
I_kwDODvpAGM5vn3cU,Add QIAseq DIRECT SARS-CoV-2 Kit amplicons,OPEN,2023-08-30T01:12:04Z,2023-08-30T21:21:41Z,,"### Description of feature

Many thanks to the developers of this workflow -- it's great to have a reproducible tool to automate the bulk of our amplicon sequencing. 

We are currently working with a few runs from Qiagens's QIAseq DIRECT SARS-CoV-2 Kit ([supplier link](https://www.qiagen.com/us/products/next-generation-sequencing/rna-sequencing/qiaseq-direct-sars-cov-2-kits?catno=333891) ). These primers are not the available in the standard configuration files for viralreon. The bed files for both he primers and amplicons are provide at the site above. 

One important difference point is that the kit comes in two flavours, one with standard primers and one with some ""booster"" primers that closely overlap the ""standard"" ones. I don't know enough about the `iVar` steps to know whether this would present a challenge for primer removal or the latter steps of aggregating coverage data per amplicon. 

Would it be possible to add at least the ""standard"" QIAseq kit to the known amplicons?

Tagging @natashaquill who will be an interested follower :)",dwinter,https://github.com/nf-core/viralrecon/issues/394
I_kwDODvpAGM5zoclJ,"Argument input-fasta is missing in NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:NEXTCLADE_RUN""",OPEN,2023-10-12T13:15:53Z,2024-05-10T08:22:45Z,,"### Description of the bug

The pipeline was running correctly until it had to retrieve a consensus fasta file with Nextclade. The parameter seems to be missing and I do not know how to add it when running a Singularity image. I did install Nextclade with conda and I am calling the most recent version I could find in my input command. I can see the fasta file the pipeline is calling in the folders so that is not the issue, I would need to have --input-fasta or -i added before the file.

### Command used and terminal output

```console
# Input commmand
conda activate env_nf

sudo nextflow run nf-core/viralrecon/master \
    --input samplesheet.csv -c custom.config \
    --outdir OUTDIR \
    --platform illumina \
    --protocol amplicon \
    --genome 'MN908947.3' \
    --primer_bed primers.bed \
    --primer_fasta primers.fasta \
    --assemblers 'spades' --spades_modes corona --max_memory 15GB \
    -profile singularity \
    --nextclade_dataset_tag 2023-09-21T12:00:00Z --save_reference \
    --min_mapped_reads 30


# Output message
-[nf-core/viralrecon] Pipeline completed with errors-
ERROR ~ Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:NEXTCLADE_RUN (20230424-011-TPB-1_S12_L001)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:NEXTCLADE_RUN (20230424-011-TPB-1_S12_L001)` terminated with an error exit status (1)

Command executed:

  nextclade \
      run \
       \
      --jobs 2 \
      --input-dataset nextclade_sars-cov-2_MN908947_2022-06-14T12_00_00Z \
      --output-all ./ \
      --output-basename 20230424-011-TPB-1_S12_L001 \
      20230424-011-TPB-1_S12_L001.consensus.fa

  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:CONSENSUS_BCFTOOLS:CONSENSUS_QC:NEXTCLADE_RUN"":
      nextclade: $(echo $(nextclade --version 2>&1) | sed 's/^.*nextclade //; s/ .*$//')
  END_VERSIONS

Command exit status:
  1

Command output:
  (empty)

Command error:
  Nextclade: Clade assignment, mutation calling, and sequence quality checks

  Usage: nextclade [options]
         nextclade completion

  Commands:
    nextclade completion  Generate shell autocompletion script

  Options:
    --help                    Show help  [boolean]
    --version                 Show version number  [boolean]
    --jobs, -j                Number of CPU threads used by the algorithm. If not specified, using number of logical CPU cores, as detected by Node.js runtime  [number] [default: 12]
    --input-fasta, -i         Path to a .fasta or a .txt file with input sequences  [string] [required]
    --input-root-seq, -r      Path to plain text file containing custom root sequence  [string]
    --input-tree, -a          (optional) Path to Auspice JSON v2 file containing custom reference tree. See https://nextstrain.org/docs/bioinformatics/data-formats  [string]
    --input-qc-config, -q     (optional) Path to a JSON file containing custom configuration of Quality Control rules.
                              For an example format see: https://github.com/nextstrain/nextclade/blob/20a9fda5b8046ce26669de2023770790c650daae/packages/web/src/algorithms/defaults/sars-cov-2/qcRulesConfig.ts  [string]
    --input-gene-map, -g      (optional) Path to a JSON file containing custom gene map. Gene map (sometimes also called ""gene annotations"") is used to resolve aminoacid changes in genes.
                              For an example see https://github.com/nextstrain/nextclade/blob/20a9fda5b8046ce26669de2023770790c650daae/packages/web/src/algorithms/defaults/sars-cov-2/geneMap.json  [string]
    --input-pcr-primers, -p   (optional) Path to a CSV file containing a list of custom PCR primer sites. These are used to report mutations in these sites.
                              For an example see https://github.com/nextstrain/nextclade/blob/20a9fda5b8046ce26669de2023770790c650daae/packages/web/src/algorithms/defaults/sars-cov-2/pcrPrimers.csv  [string]
    --output-json, -o         Path to output JSON results file  [string]
    --output-csv, -c          Path to output CSV results file  [string]
    --output-tsv-clades-only  Path to output CSV clades-only file  [string]
    --output-tsv, -t          Path to output TSV results file  [string]
    --output-tree, -T         Path to output Auspice JSON V2 results file. See https://nextstrain.org/docs/bioinformatics/data-formats  [string]

  Missing required argument: input-fasta

Work dir:
  /home/wastewater/work/48/61f8e691d05149aba7c8ef3ec6d238

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line

 -- Check '.nextflow.log' file for details
```


### Relevant files

_No response_

### System information

Nextflow version 23.04.4.5881
Container: Singularity 4.0.0
nf-core version 2.10
nf-core/viralrecon: Downloaded the master with nf-core download so it should be this latest release
Environment was created with miniconda
I am running it in Mobaxterm installed in a windows computer and I have the ubuntu wsl2 running.",CeliaRodrigues,https://github.com/nf-core/viralrecon/issues/398
I_kwDODvpAGM5zuJvB,Problem installing viralrecon ,OPEN,2023-10-13T08:19:44Z,2023-10-13T08:19:44Z,,"### Description of the bug

Hi,

I am trying to install the viralrecon pipeline within a conda environment.

After installing Nextflow and Singularity I tried to run the test pipeline with:

$ nextflow run nf-core/viralrecon -profile test,singularity

And I got a problem related to a '.nextflow/history.lock' file:

ERROR ~ .nextflow/history.lock (No existe el archivo o el directorio)

 -- Check '.nextflow.log' file for details

(No existe el archivo o el directorio (Spanish) = File or directory not found (English))

Can anybody help?

Best regards,
Vicente  

### Command used and terminal output

```console
$ nextflow run nf-core/viralrecon -profile test,singularity

ERROR ~ .nextflow/history.lock (No existe el archivo o el directorio)

 -- Check '.nextflow.log' file for details

(No existe el archivo o el directorio (Spanish) = File or directory not found (English))
```


### Relevant files

_No response_

### System information

_No response_",vilocha,https://github.com/nf-core/viralrecon/issues/399
I_kwDODvpAGM50omlv,"Adding ""aggregate"" and ""plot"" methods in the freyja subworkflow",CLOSED,2023-10-23T10:01:46Z,2024-01-25T16:12:33Z,2024-01-25T16:12:32Z,"### Description of feature

Hi,

Thank you for your amazing pipeline. I am currently testing the dev version which contains a wonderful freyja subworkflow for running mixed samples such as wastewater analysis. Please just asking, would it be nicer if you also include the `freyja aggregate` and `freyja plot` methods as they are very useful for downstream analysis? In particular `aggregate` method which tend to aggregate samples for downstream visualisation. 

Cheers!",bsalehe,https://github.com/nf-core/viralrecon/issues/400
I_kwDODvpAGM51cm8F,Error running version 2.6.0 with Nanopore data in process NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION,OPEN,2023-10-31T13:05:46Z,2023-10-31T13:05:46Z,,"### Description of the bug

Hi, everyone!

Our team have been using the latest version (2.6.0) of ViralRecon to process Illumina data for a while without any issues. However, if we try to test it with Nanopore data some errors arised during the execution of ARTIC_MINION subworkflow.

Change to version 2.5 seems to fix it and all process ended successfully.

Thank you in advance,
Adrián Muñoz

### Command used and terminal output

```console
# Activate conda environment:
conda activate nf-core

# Command:
nextflow run nf-core/viralrecon -r 2.6.0 \
  --input SampleSheet.csv \
  --platform nanopore \
  --protocol amplicon \
  --outdir results \
  --genome MN908947.3 \
  --primer_set artic \
  --primer_set_version 1200 \
  --fastq_dir ../../fastq_pass \
  --fast5_dir ../../fast5_pass \
  --sequencing_summary ../../sequencing_summary.txt \
  -profile docker

# Error message:
-[nf-core/viralrecon] Pipeline completed with errors-
ERROR ~ Error executing process > 'NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (150421716)'

Caused by:
  Process `NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION (150421716)` terminated with an error exit status (20)

Command executed:

  export HDF5_PLUGIN_PATH=/usr/local/lib/python3.6/site-packages/ont_fast5_api/vbz_plugin
  
  artic \
      minion \
      --normalise 500  --minimap2 \
      --threads 12 \
      --read-file SAMPLE_1.fastq.gz \
      --scheme-directory ./primer-schemes \
      --scheme-version 1200 \
       \
      --fast5-directory fast5_pass \
      --sequencing-summary sequencing_summary.txt \
      nCoV-2019 \
      150421716
  
  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:NANOPORE:ARTIC_MINION"":
      artic: 1.2.3
  END_VERSIONS

Command exit status:
  20

Command output:
  (empty)

Command error:
  [M::mm_idx_stat] kmer size: 15; skip: 10; is_hpc: 0; #seq: 1
  [M::mm_idx_stat::0.010*3.53] distinct minimizers: 5587 (99.93% are singletons); average occurrences: 1.004; average spacing: 5.332; total length: 29903
  [M::worker_pipeline::11.199*3.92] mapped 222915 sequences
  [M::main] Version: 2.24-r1122
  [M::main] CMD: minimap2 -a -x map-ont -t 12 ./primer-schemes/nCoV-2019/V1200/nCoV-2019.reference.fasta 150421716.fastq.gz
  [M::main] Real time: 11.206 sec; CPU: 43.963 sec; Peak RSS: 0.366 GB
  HDF5-DIAG: Error detected in HDF5 (1.10.6) thread 139721650939648:
    #000: H5Dio.c line 199 in H5Dread(): can't read data
      major: Dataset
      minor: Read failed
    #001: H5Dio.c line 603 in H5D__read(): can't read data
      major: Dataset
      minor: Read failed
    #002: H5Dchunk.c line 2293 in H5D__chunk_read(): unable to read raw data chunk
      major: Low-level I/O
      minor: Read failed
    #003: H5Dchunk.c line 3658 in H5D__chunk_lock(): data pipeline read failed
      major: Dataset
      minor: Filter operation failed
    #004: H5Z.c line 1301 in H5Z_pipeline(): required filter 'vbz' is not registered
      major: Data filters
      minor: Read failed
    #005: H5PLint.c line 270 in H5PL_load(): search in path table failed
      major: Plugin for dynamically loaded library
      minor: Can't get value
    #006: H5PLpath.c line 604 in H5PL__find_plugin_in_path_table(): search in path /usr/local/lib/python3.6/site-packages/ont_fast5_api/vbz_plugin encountered an error
      major: Plugin for dynamically loaded library
      minor: Can't get value
    #007: H5PLpath.c line 656 in H5PL__find_plugin_in_path(): can't open directory: /usr/local/lib/python3.6/site-packages/ont_fast5_api/vbz_plugin
      major: Plugin for dynamically loaded library
      minor: Can't open directory or file
  The fast5 file is compressed with VBZ but the required plugin is not loaded. Please read the instructions here: https://github.com/nanoporetech/vbz_compression/issues/5
  HDF5-DIAG: Error detected in HDF5 (1.10.6) thread 139721551283968:
    #000: H5T.c line 1754 in H5Tclose(): not a datatype
      major: Invalid arguments to routine
      minor: Inappropriate type
  HDF5-DIAG: Error detected in HDF5 (1.10.6) thread 139721551283968:
    #000: H5T.c line 1754 in H5Tclose(): not a datatype
      major: Invalid arguments to routine
  
      minor: Inappropriate type
  Running: nanopolish index -s sequencing_summary.txt -d fast5_pass SAMPLE_1.fastq.gz
  Running: minimap2 -a -x map-ont -t 12 ./primer-schemes/nCoV-2019/V1200/nCoV-2019.reference.fasta SAMPLE_1.fastq.gz | samtools view -bS -F 4 - | samtools sort -o SAMPLE_1.sorted.bam -
  Running: samtools index SAMPLE_1.sorted.bam
  Running: align_trim --normalise 500 ./primer-schemes/nCoV-2019/V1200/nCoV-2019.scheme.bed --start --remove-incorrect-pairs --report SAMPLE_1.alignreport.txt < SAMPLE_1.sorted.bam 2> SAMPLE_1.alignreport.er | samtools sort -T SAMPLE_1 - -o SAMPLE_1.trimmed.rg.sorted.bam
  Running: align_trim --normalise 500 ./primer-schemes/nCoV-2019/V1200/nCoV-2019.scheme.bed --remove-incorrect-pairs --report SAMPLE_1.alignreport.txt < SAMPLE_1.sorted.bam 2> SAMPLE_1.alignreport.er | samtools sort -T SAMPLE_1 - -o SAMPLE_1.primertrimmed.rg.sorted.bam
  Running: samtools index SAMPLE_1.trimmed.rg.sorted.bam
  Running: samtools index SAMPLE_1.primertrimmed.rg.sorted.bam
  Running: nanopolish variants --min-flanking-sequence 10 -x 1000000 --progress -t 12 --reads SAMPLE_1.fastq.gz -o SAMPLE_1.vcf -b SAMPLE_1.trimmed.rg.sorted.bam -g ./primer-schemes/nCoV-2019/V1200/nCoV-2019.reference.fasta -w ""MN908947.3:1-29904"" --ploidy 1 -m 0.15 --read-group 2 
  Command failed:nanopolish variants --min-flanking-sequence 10 -x 1000000 --progress -t 12 --reads SAMPLE_1.fastq.gz -o SAMPLE_1.2.vcf -b SAMPLE_1.trimmed.rg.sorted.bam -g ./primer-schemes/nCoV-2019/V1200/nCoV-2019.reference.fasta -w ""MN908947.3:1-29904"" --ploidy 1 -m 0.15 --read-group 2 

Work dir:
  ./work/91/1e0d7ccd56770126e42995155e9181

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line

 -- Check '.nextflow.log' file for details
```


### Relevant files

_No response_

### System information

- **Nextflow version:** 23.10.0.5889
- **Hardware:** Desktop server
- **Executor:** local
- **Container engine:** Docker
- **OS:** CentOS 7
- **Version of nf-core/viralrecon:** 2.6.0",AdrianMBarrera,https://github.com/nf-core/viralrecon/issues/402
I_kwDODvpAGM510726,Unable to download the python script,CLOSED,2023-11-03T19:30:05Z,2024-05-13T07:02:18Z,2024-05-13T07:02:18Z,"### Description of the bug

Hi, wanted to download the Python script unfortunately got the error whenever I ran the following command: 
""wget -L https://raw.githubusercontent.com/nf-core/viralrecon/master/bin/fastq_dir_to_samplesheet.py ./fastq_dir_to_samplesheet.py data samplesheet.csv""

Please help me on this issue!

Thank you,

### Command used and terminal output

```console
ms@Extensa:~/dataset/data$ wget -L https://raw.githubusercontent.com/nf-core/viralrecon/master/bin/fastq_dir_to_samplesheet.py ./fastq_dir_to_samplesheet.py data samplesheet.csv
--2023-11-04 00:50:07--  https://raw.githubusercontent.com/nf-core/viralrecon/master/bin/fastq_dir_to_samplesheet.py
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 49.44.79.236, 2405:200:1607:2820:41::36
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|49.44.79.236|:443... failed: Connection refused.
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|2405:200:1607:2820:41::36|:443... failed: Network is unreachable.
--2023-11-04 00:50:20--  http://./fastq_dir_to_samplesheet.py
Resolving . (.)... failed: No address associated with hostname.
wget: unable to resolve host address ‘.’
--2023-11-04 00:50:20--  http://data/
Resolving data (data)... failed: Temporary failure in name resolution.
wget: unable to resolve host address ‘data’
--2023-11-04 00:50:20--  http://samplesheet.csv/
Resolving samplesheet.csv (samplesheet.csv)... failed: Name or service not known.
wget: unable to resolve host address ‘samplesheet.csv’
```


### Relevant files

_No response_

### System information

OS Linux ubuntu 22.04",Mahendra687,https://github.com/nf-core/viralrecon/issues/403
I_kwDODvpAGM54DnHs,Split authors in generated RO crate,OPEN,2023-11-28T11:19:38Z,2023-11-28T11:19:38Z,,"### Description of feature

Hi, I was checking the RO Crate in workflowhub and it seems that multiple authors are being written as a single person in the metadata. You may want to have a look.
https://workflowhub.eu/workflows/19

```
{
   ""@id"": ""#creator-1"",
   ""@type"": ""Person"",
   ""name"": ""Sarai Varona and Miguel Juliá and Sara Monzon and Alexander Peltzer and Alison Meynert and Edgar Garriga Nogales and Erik Garrison and Gisela Gabernet and Harshil Patel and Joao Curado and Jose Espinosa-Carrasco and Katrin Sameith and Marta Pozuelo and Maxime Garcia and Michael Heuer and Phil Ewels and Simon Heumos and Stephen Kelly and Thanh Le Viet and Isabel Cuesta""
},
{
   ""@id"": ""#Sarai Varona and Miguel Juliá and Sara Monzon and Alexander Peltzer and Alison Meynert and Edgar Garriga Nogales and Erik Garrison and Gisela Gabernet and Harshil Patel and Joao Curado and Jose Espinosa-Carrasco and Katrin Sameith and Marta Pozuelo and Maxime Garcia and Michael Heuer and Phil Ewels and Simon Heumos and Stephen Kelly and Thanh Le Viet and Isabel Cuesta"",
   ""@type"": ""Person"",
   ""name"": ""Sarai Varona and Miguel Juliá and Sara Monzon and Alexander Peltzer and Alison Meynert and Edgar Garriga Nogales and Erik Garrison and Gisela Gabernet and Harshil Patel and Joao Curado and Jose Espinosa-Carrasco and Katrin Sameith and Marta Pozuelo and Maxime Garcia and Michael Heuer and Phil Ewels and Simon Heumos and Stephen Kelly and Thanh Le Viet and Isabel 
},
```",renatocjn,https://github.com/nf-core/viralrecon/issues/404
I_kwDODvpAGM54MpJz,"Adding ""--grouplineages"" parameter in the nf-core/viralrecon",CLOSED,2023-11-29T13:20:08Z,2024-01-25T16:07:27Z,2024-01-25T16:07:27Z,"Hi,

I am running the dev version which also supports the analysis of wastewater mixed samples with freyja variants, demix boot modules using samples from [PRJNA819090](http://www.ncbi.nlm.nih.gov/bioproject/?term=PRJNA819090). As the number of samples is much bigger, I am running pipeline on the hpc. All samples run successfully in every process except few which cause the viralrecon to throw errors. One of the errors is ""raise error.SolverError(
cvxpy.error.SolverError: Solver 'ECOS' failed. Try another solver, ..."" which has been explained in the freyja issue [here](https://github.com/andersen-lab/Freyja/issues/108) and has been actually fixed [here](https://github.com/andersen-lab/Freyja/pull/145) by adding `--grouplineages` option in both demix and boot methods which essentially addresses samples with low coverage that causes the error to occur. I wonder if you could add this option in the pipeline as to hopefully avoid throwing this error.

Many thanks",bsalehe,https://github.com/nf-core/viralrecon/issues/405
I_kwDODvpAGM576w-2,Make cutadapt primer's position ext.arg,CLOSED,2024-01-12T14:42:54Z,2024-12-09T12:35:24Z,2024-12-09T12:35:24Z,"### Description of feature

In cutadapt module for primer sequence trimming, in de novo assembly subworkflow, primer sequences are given as -A and -a by default:
https://github.com/nf-core/viralrecon/blob/3731dd3a32a67a2648ea22c2bd980c224abdaee2/modules/local/cutadapt.nf#L25

It would be nice to set this as an `ext.arg`, so each one can decide if their primers are in the 3' (-a/-A) or 5' (-g/-G) of the reads.

This is done already in the nf-core's cutadapt module, so replacing the local module with the nf-core one's could fix it:
https://github.com/nf-core/modules/blob/master/modules/nf-core/cutadapt/main.nf",svarona,https://github.com/nf-core/viralrecon/issues/409
I_kwDODvpAGM58Ngad,Properly deal with multiqc in the config files before the next release,OPEN,2024-01-16T12:58:28Z,2024-05-10T07:50:07Z,,"### Description of feature

cc @adamrtalbot @svar",maxulysse,https://github.com/nf-core/viralrecon/issues/411
I_kwDODvpAGM59qtl2,Temp file problem in VARIANTS_IVAR:BCFTOOLS_SORT,OPEN,2024-01-30T17:04:39Z,2024-05-07T20:07:19Z,,"### Description of the bug

Hello, I am running the test command to launch the pipeline on an HPC machine, but with version 2.6 I am having issues as it fails at the NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE) step. It reports an error that it cannot create a temporary file in my temp folder, which is empty and has write permissions. I saw this issue (https://github.com/nf-core/viralrecon/issues/328) and did what was recommended, adding a config file to change the path of the temporary directory with the following content:
------------{custom.config}------------
 process {
    withName: '.*:.*:VARIANTS_IVAR:BCFTOOLS_SORT' {
        ext.args = '--temp-dir ./'
    }
}
------------{custom.config}------------
However, the error persists at the same step, stating that it cannot find the vcf file. If I run the same  test command with version 2.4.1, it works without any problems. Any ideas on how to solve this would be appreciated, as it's unfortunate that the latest version isn't working.

### Command used and terminal output

```console
With the command:
nextflow run nf-core/viralrecon -profile test,singularity --outdir prueba_viral
Terminal output:
-[nf-core/viralrecon] Pipeline completed with errors-
ERROR ~ Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE)'

Caused by:
  Process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE)` terminated with an error exit status (255)

Command executed:

  bcftools \
      sort \
      --output SAMPLE1_PE.vcf.gz \
      --output-type z \
      SAMPLE1_PE.vcf
  
  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT"":
      bcftools: $(bcftools --version 2>&1 | head -n1 | sed 's/^.*bcftools //; s/ .*$//')
  END_VERSIONS

Command exit status:
  255

Command output:
  (empty)

Command error:
  mkdtemp(/scr/ruizro/tmp/bcftools.FKVBhi) failed: No such file or directory

Work dir:
  /home/ruizro/work/12/21875be8c258a88ce9e39e720cfc42

With the command: 
nextflow run nf-core/viralrecon -profile test,singularity --outdir prueba_viral -c custom.config

Terminal output:
  task: name=NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE); work-dir=/home/ruizro/work/66/6a66d0f7510e869e8142482ef5d6c5
  error [nextflow.exception.MissingFileException]: Missing output file(s) `*.{vcf,vcf.gz,bcf,bcf.gz}` expected by process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE)` (note: input files are not included in the default matching set)
Jan-29 20:19:43.456 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE)'

Caused by:
  Missing output file(s) `*.{vcf,vcf.gz,bcf,bcf.gz}` expected by process `NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT (SAMPLE1_PE)` (note: input files are not included in the default matching set)

Command executed:

  bcftools \
      sort \
      --output SAMPLE1_PE.vcf \
      --temp-dir ./ \
      SAMPLE1_PE.vcf
  
  cat <<-END_VERSIONS > versions.yml
  ""NFCORE_VIRALRECON:ILLUMINA:VARIANTS_IVAR:BCFTOOLS_SORT"":
      bcftools: $(bcftools --version 2>&1 | head -n1 | sed 's/^.*bcftools //; s/ .*$//')
  END_VERSIONS

Command exit status:
  0

Command output:
  (empty)

Command error:
  Writing to ./kzRuuA
  Merging 1 temporary files
  Cleaning
  Done

Work dir:
  /home/ruizro/work/66/6a66d0f7510e869e8142482ef5d6c5
```


### Relevant files

_No response_

### System information

- Nextflow version: 23.10.1
- Hardware: HPC
- Executor: slurm
- Container engine: Singularity
- OS: Linux 
- Version of nf-core/viralrecon: 2.6",Paururo,https://github.com/nf-core/viralrecon/issues/415
I_kwDODvpAGM5_zzds,Allow skipping `freyja boot`,CLOSED,2024-02-20T12:38:59Z,2024-05-10T07:37:22Z,2024-05-10T07:37:22Z,"### Description of feature

To save some computation, it may sometimes be desirable to skip `freyja`'s bootstrapping step. 

My suggestion would be to allow using `--freyja_repeats 0`. At the moment, using it like this throws an internal error from freyja. 
But maybe `viralrecon` could interpret 0 (or any negative number, for that matter) as meaning ""don't run the bootstrap step"".

In fact, it may be worth considering `--freyja_repeats 0` as the default, in case those processing clinical isolates forget to do `--skip_freyja` and end up spending a lot of unnecessary compute time bootstrapping.

I guess an alternative would be to add a new option `--skip_freyja_boot`. ",tavareshugo,https://github.com/nf-core/viralrecon/issues/417
I_kwDODvpAGM5_2Nj3,`MOSDEPTH_AMPLICON` doesn't run in `dev` branch,CLOSED,2024-02-20T17:35:56Z,2024-04-22T14:07:45Z,2024-04-22T14:07:44Z,"### Description of the bug

In the current `dev` branch the modules `MOSDEPTH_AMPLICON` and `PLOT_MOSDEPTH_REGIONS_AMPLICON` seem to be always skipped. 

This may be related to [these changes](https://github.com/nf-core/viralrecon/commit/eb7a82db49ec338079986c1467d1feeaaac7531d). 
I'm sorry, I'm not familiar with the syntax, but maybe @svarona can spot what might be the issue?

The commands I used to test: 

```bash
# current version
nextflow run viralrecon -r 2.6.0 -profile test,singularity --outdir results/v2.6 --skip_assembly --skip_asciigenome --skip_consensus

# development version
nextflow run viralrecon -r dev -profile test,singularity --outdir results/dev --skip_assembly --skip_asciigenome --skip_consensus --skip_freyja
```

(I've skipped several steps to save time for testing)

Both run successfully (i.e. there is no error), but the second one does not run the `MOSDEPTH_AMPLICON` processes. 

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",tavareshugo,https://github.com/nf-core/viralrecon/issues/419
I_kwDODvpAGM6Ama5i,Non-SCV2 amplicon run returns consensus genomes with no low-coverage masking,OPEN,2024-02-27T20:35:18Z,2024-08-26T23:12:53Z,,"### Description of the bug

Viralrecon has worked perfectly for our SCV2 and some hybrid capture protocols (with the metagenomic side). However, when I ran the pipeline by passing a custom bed file and fasta reference for RSV, the default pipeline produced consensus genomes that have no low coverage mask or Ns. It appears the bcftools consensus pipeline IS substituting the variants but for all low coverage areas, the reference base is given rather than Ns.  

Switching over to the iVar consensus option (  `--variant_caller ivar`, `--consensus_caller ivar`), pipeline produces correct consensus genomes with low coverage areas masked with Ns.

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",ddomman,https://github.com/nf-core/viralrecon/issues/420
I_kwDODvpAGM6DZmYw,nf-core/viralrecon run halted due to R version clash,OPEN,2024-03-24T19:47:41Z,2024-07-04T14:42:48Z,,"Hello! My nf-core/viralrecon run was halted due to R version clash. Please see the error message below -

ERROR ~ Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:PLOT_MOSDEPTH_REGIONS_AMPLICON'

Caused by:
Process NFCORE_VIRALRECON:ILLUMINA:PLOT_MOSDEPTH_REGIONS_AMPLICON terminated with an error exit status (1)

Command executed:

plot_mosdepth_regions.r
--input_files cGMPSARS-CoV-2.regions.bed.gz
--output_dir ./
--output_suffix mosdepth
--input_suffix .regions.bed.gz

cat <<-END_VERSIONS > versions.yml
""NFCORE_VIRALRECON:ILLUMINA:PLOT_MOSDEPTH_REGIONS_AMPLICON"":
r-base: 
(R --version 2>&1) | sed 's/^.R version //; s/ .$//')
END_VERSIONS

Command exit status:
1

Command output:
(empty)

Command error:
Warning message:
package ‘optparse’ was built under R version 4.0.5
Warning message:
package ‘scales’ was built under R version 4.0.5
Loading required package: grid
Error: package or namespace load failed for ‘ComplexHeatmap’:
.onLoad failed in loadNamespace() for 'Cairo', details:
call: dyn.load(file, DLLpath = DLLpath, ...)
error: unable to load shared object '/root/work/conda/env-05a634cd6ec064941b9d92badb58aa6c/lib/R/library/Cairo/libs/Cairo.so':
libicuuc.so.70: cannot open shared object file: No such file or directory
Execution halted

Have updated my r-base in conda-forge, which is 4.3.3 instead of 4.0.5. Attempted with the following command -

conda install -c conda-forge r-base=4.0.5

That didn't work though... Not quite sure how I can fix this.

Any input would be much appreciated! Thank you!",asanenjoy,https://github.com/nf-core/viralrecon/issues/422
I_kwDODvpAGM6E_CLn,Error when running illumina command,OPEN,2024-04-08T12:43:39Z,2024-04-08T12:43:39Z,,"### Description of the bug

This is my first time using nf-core/viralrecon. When trying to run the command with my data I got the error 
-- Check script '/home/joancuesta/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 26 or see '.nextflow.log' file for more details
Could you please help me?

### Command used and terminal output

```console
Command used:
nextflow run nf-core/viralrecon --input rv3471.csv --platform illumina --protocol metagenomic --outdir /home/joancuesta/quasispecies/3471 --fasta KX148107.fasta --skip_nextclade -profile docker

Terminal output:
N E X T F L O W  ~  version 23.10.1
Launching `https://github.com/nf-core/viralrecon` [drunk_laplace] DSL2 - revision: 3731dd3a32 [master]


------------------------------------------------------
                                        ,--./,-.
        ___     __   __   __   ___     /,-._.--~'
  |\ | |__  __ /  ` /  \ |__) |__         }  {
  | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                        `._,._,'
  nf-core/viralrecon v2.6.0-g3731dd3
------------------------------------------------------
Core Nextflow options
  revision       : master
  runName        : drunk_laplace
  containerEngine: docker
  launchDir      : /home/joancuesta/quasispecies
  workDir        : /home/joancuesta/quasispecies/work
  projectDir     : /home/joancuesta/.nextflow/assets/nf-core/viralrecon
  userName       : joancuesta
  profile        : docker
  configFiles    : /home/joancuesta/.nextflow/assets/nf-core/viralrecon/nextflow.config

Input/output options
  input          : rv3471.csv
  platform       : illumina
  protocol       : metagenomic
  outdir         : /home/joancuesta/quasispecies/3471

Reference genome options
  fasta          : KX148107.fasta

Nanopore/Illumina options
  skip_nextclade : true

!! Only displaying parameters that differ from the pipeline defaults !!
------------------------------------------------------
If you use nf-core/viralrecon for your analysis please cite:

* The pipeline
  https://doi.org/10.5281/zenodo.3901628

* The nf-core framework
  https://doi.org/10.1038/s41587-020-0439-x

* Software dependencies
  https://github.com/nf-core/viralrecon/blob/master/CITATIONS.md
------------------------------------------------------
ERROR ~ Access Denied (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: JPCTWMMFEEJEYMKA; S3 Extended Request ID: QYKOf7UzK0VOFoNXCpuPA6erH7Zh2gzklLkmtx3scNhAuIN0sEU4aipQrqACygaLEgk0A2ZTJZE=; Proxy: null)

 -- Check script '/home/joancuesta/.nextflow/assets/nf-core/viralrecon/./workflows/illumina.nf' at line: 26 or see '.nextflow.log' file for more details
```


### Relevant files

[.nextflow.log](https://github.com/nf-core/viralrecon/files/14905517/default.nextflow.log)



### System information

Nextflow version (23.10.1)
Hardware (x86_64)
Executor (awsbatch)
Container engine: (Docker)
OS (Linux #61~20.04.1-Ubuntu)
Version of nf-core/viralrecon (v2.6.0-g3731dd3)",fractaljc,https://github.com/nf-core/viralrecon/issues/423
I_kwDODvpAGM6Gmy0b,ivariant filtering problem using 'tsv file' generated by 'ivar variant' command.,CLOSED,2024-04-23T08:52:32Z,2024-05-10T07:20:29Z,2024-05-10T07:20:28Z,"### Description of the bug

For the variant filter, the command is given as below:
`ivar filtervariants -t 0.5 -p P.test.filtered P1_S1.tsv P2_S2.tsv P3_S3.tsv` 

But, unfortunately getting the following error message:
Header format of P1_S1.tsv did not match! Please use files generated using ""ivar variants"" command.
Header format of P2_S2.tsv did not match! Please use files generated using ""ivar variants"" command.
Header format of P3_S3.tsv did not match! Please use files generated using ""ivar variants"" command.

Even the header formats are unique among the files. txt files have also been used to filter but encountered the same error message. What could be the problem and solution to resolve it? Thanks in advance.
 

### Command used and terminal output

_No response_

### Relevant files

[P1_S1.csv](https://github.com/nf-core/viralrecon/files/15074059/P1_S1.csv)
[P2_S2.csv](https://github.com/nf-core/viralrecon/files/15074060/P2_S2.csv)
[P3_S3.csv](https://github.com/nf-core/viralrecon/files/15074061/P3_S3.csv)


### System information

_No response_",Moslemecoh,https://github.com/nf-core/viralrecon/issues/425
I_kwDODvpAGM6Is4v0,variant discrepancy between in ivar and snpeff annotated file,OPEN,2024-05-13T17:57:13Z,2024-06-10T10:20:07Z,,"### Description of the bug

I am recently running the viralrecon 2.6.0 on some sars-cov-2 sequences; I noticed that ivar.tsv output doesn't match with the snpeff. annotated vcf as well as the variant long table when there is polymorphism. I have attached the output. also to visualize things easier 
Here is the snpeff vcf file, there is only one mutation at position 23606
<img width=""967"" alt=""Screenshot 2024-05-13 at 12 49 47 PM"" src=""https://github.com/nf-core/viralrecon/assets/97980830/c9e3b4ce-ac06-471a-a342-f9b9e8f82b04"">
When looking at the tsv file, there is two variants at the same mutation. 
<img width=""756"" alt=""Screenshot 2024-05-13 at 12 51 27 PM"" src=""https://github.com/nf-core/viralrecon/assets/97980830/5a62b447-3817-450d-8912-64d56236dad8"">
I try to add the command in the config file but doesn't fix the issue. withName: 'IVAR_VARIANTS_TO_VCF' {
                ext.args = params.protocol == 'amplicon' ? '--ignore_strand_bias --ignore_merge_codons' : '--ignore_merge_codons'
}
I would appreciate if people can take a look and help me solve it. Thank you!

### Command used and terminal output

_No response_

### Relevant files

[stock-variant.zip](https://github.com/nf-core/viralrecon/files/15298357/stock-variant.zip)


### System information

_No response_",wantingwei,https://github.com/nf-core/viralrecon/issues/429
I_kwDODvpAGM6LxGCR,Old container for FASTQC processes in current release (2.6.0) is old and now fails on AWS Batch,CLOSED,2024-06-10T21:54:47Z,2024-07-03T12:51:48Z,2024-07-03T06:21:11Z,"### Description of the bug

The current container version used by viralrecon release 2.6.0 for [FASTQC modules is 0.11.9](https://github.com/nf-core/viralrecon/blob/3731dd3a32a67a2648ea22c2bd980c224abdaee2/modules/nf-core/fastqc/main.nf#L8). 

This version is extremely outdated and uses and old docker image format and manifest specification. This can be shown by pulling the container using docker:
```
docker pull quay.io/biocontainers/fastqc:0.11.9--0
[DEPRECATION NOTICE] Docker Image Format v1, and Docker Image manifest version 2, schema 1 support will be removed in an upcoming release. Suggest the author of wave.seqera.io/wt/870285518668/biocontainers/fastqc:0.11.9--0 to upgrade the image to the OCI Format, or Docker Image manifest v2, schema 2. More information at https://docs.docker.com/go/deprecated-image-specs
```
Amazon AWS batch seems to have removed support for these old specification as this started breaking between May 31st 2024 and June 10th 2024. Updating the fastqc container version fixes this issue. An [updated nf-core module version for fastqc is already included in the dev branch](https://github.com/nf-core/viralrecon/blob/8161eb9051d3779a77d3f6a84ec296ae034afd02/modules/nf-core/fastqc/main.nf#L8), so nothing needs to be done beside a new release soon!

A current fix for anybody running into this with version 2.6.0 is to add the following to your nextflow.config:
```
process {
  withName:'NFCORE_VIRALRECON:ILLUMINA:FASTQ_TRIM_FASTP_FASTQC:FASTQC_TRIM' {
    container = 'quay.io/biocontainers/fastqc:0.12.1--hdfd78af_0'
  }
  withName:'NFCORE_VIRALRECON:ILLUMINA:FASTQ_TRIM_FASTP_FASTQC:FASTQC_RAW' {
    container = 'quay.io/biocontainers/fastqc:0.12.1--hdfd78af_0'
  }
  withName:'NFCORE_VIRALRECON:ILLUMINA:FASTQC' {
    container = 'quay.io/biocontainers/fastqc:0.12.1--hdfd78af_0'
  }
}
```

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",FloWuenne,https://github.com/nf-core/viralrecon/issues/431
I_kwDODvpAGM6RK7o3,fastp version update?,CLOSED,2024-07-29T14:18:47Z,2024-07-30T09:47:08Z,2024-07-30T09:47:08Z,"### Description of the bug

Hi everyone,

I'm new to this workflow / pipeline and had just installed the latest version of nextflow. I was trying to run `nextflow run nf-core/viralrecon -profile conda` but I ran into the following error message:

```
WARN: There's no process matching config selector: .*:.*:PREPARE_GENOME:UNTAR_.*
WARN: Task runtime metrics are not reported when using macOS without a container engine
ERROR ~ Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:FASTQ_TRIM_FASTP_FASTQC:FASTP (2)'

Caused by:
  Failed to create Conda environment
    command: conda create --mkdir --yes --quiet --prefix /Users/*****/bioinfo/work/conda/env-5f3a7d0793e009f164e4d72933b51818 bioconda::fastp=0.23.2
    status : 1
    message:
      Channels:
       - conda-forge
       - bioconda
       - defaults
      Platform: osx-arm64
      Collecting package metadata (repodata.json): ...working... done
      Solving environment: ...working... failed
```

I've tried `conda install fastp=0.23.2` it seems that version 0.23.2 is no longer available (at least from my macOS arm64). Is there any way to work around this?

### Command used and terminal output

_No response_

### Relevant files

_No response_

### System information

_No response_",didiowen,https://github.com/nf-core/viralrecon/issues/437
I_kwDODvpAGM6UPNw2,Error reading user provided bowtie2 index files,CLOSED,2024-08-26T14:28:23Z,2024-08-26T14:50:05Z,2024-08-26T14:50:05Z,"### Description of the bug

I seem to be having trouble providing a correctly formatted bowtie2 index for parvovirus mapping. I've run bowtie2-build and generated the index and placed the files generated into a directory (references/ParvovirusB19/index). I'm pointing to this directory when running the pipeline, but I get this error:
```
WARN: Input tuple does not match input set cardinality declared by process `NFCORE_VIRALRECON:ILLUMINA:FASTQ_ALIGN_BOWTIE2:BOWTIE2_ALIGN` -- offending value: references/ParvovirusB19/index
ERROR ~ Error executing process > 'NFCORE_VIRALRECON:ILLUMINA:FASTQ_ALIGN_BOWTIE2:BOWTIE2_ALIGN (1)'
Caused by:
  Not a valid path value type: org.codehaus.groovy.runtime.NullObject (null)

```

I previously asked about the issue on [Slack](https://nfcore.slack.com/archives/C0110R22NH3/p1724430245300219).

### Command used and terminal output

```console
echo ""Running viralrecon-nf""
${nextflow_exe} run ${module_dir}/main.nf \
	--input ${sample_sheet} \
	--outdir ${outdir} \
	--platform illumina \
	--protocol metagenomic \
	-profile singularity \
	--skip_asciigenome \
	--fasta ${module_dir}/references/ParvovirusB19/ParvovirusB19.fasta \
	--bowtie2_index ${module_dir}/references/ParvovirusB19/index/ \
	-c ${viralrecon_config_file} \
	--skip_pangolin \
	--skip_kraken2 ${skip_kraken2} \
	--skip_nextclade \
	-with-report ${outdir}/${run_name}_report.html \
	-resume
```


### Relevant files

_No response_

### System information

_No response_",hkunerth,https://github.com/nf-core/viralrecon/issues/440
I_kwDODvpAGM6VSc5Z,Include pango-designation version,OPEN,2024-09-04T08:23:56Z,2024-09-04T08:23:57Z,,"### Description of feature

Although pangolin software version is already included in the yml file, there's an important feature that impacts lineage designation greatly, which is [pango-designation](https://github.com/cov-lineages/pango-designation) version. I think including the version of this database (a.k.a pango-data) is **key** when reproducing the analysis, as using a different version of the database may lead to a different lineage designation, even when the software version is the same.

I'd say to include it in `versions.yml`, but could also be included elsewhere.",Shettland,https://github.com/nf-core/viralrecon/issues/441
I_kwDODvpAGM6cGQHL,custom schemes,OPEN,2024-10-28T16:14:42Z,2024-10-28T16:14:42Z,,"Hello! 

I am trying to run this on a custom primer scheme for another coronavirus, not SC2. 

Data is nanopore data.

1st thing, the data is now being outputted as pod5 as opposed to fast5_pass/fail. - does this matter? 

2nd thing is what parameters do I need to get this to run the custom scheme. I have provided the paths to the reference fasta, the primer bed file and the suffix for the right and left primers. 

If anyone could point me in the right direction that would be great, as so far, no good! 


`------------------------------------------------------
                                        ,--./,-.
        ___     __   __   __   ___     /,-._.--~'
  |\ | |__  __ /  ` /  \ |__) |__         }  {
  | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                        `._,._,'
  nf-core/viralrecon v2.6.0-g3731dd3
------------------------------------------------------
Core Nextflow options
  revision              : master
  runName               : exotic_chandrasekhar
  containerEngine       : docker
  launchDir             : /home/van_hohenheim
  workDir               : /home/van_hohenheim/work
  projectDir            : /home/van_hohenheim/.nextflow/assets/nf-core/viralrecon
  userName              : van_hohenheim
  profile               : docker
  configFiles           : /home/van_hohenheim/.nextflow/assets/nf-core/viralrecon/nextflow.config

Input/output options
  platform              : nanopore
  outdir                : user/rebee/projects/viral_recon_MHV

Reference genome options
  fasta                 : /mnt/c/primer_schemes/MHVCoV-400/MHVCoV-400.reference.fasta
  primer_bed            : /mnt/c/primer_schemes/MHVCoV-400/MHVCoV-400.scheme.bed
  primer_left_suffix    : _F
  primer_right_suffix   : _R

Nanopore options
  fastq_dir             : /mnt/c/data/artic/20241025_MHV_OC43_RPR/20241025_1638_MN46757_FAY84222_db1155b0/fastq_pass/
  fast5_dir             : /mnt/c/data/artic/20241025_MHV_OC43_RPR/20241025_1638_MN46757_FAY84222_db1155b0/pod5/
  sequencing_summary    : /mnt/c/data/artic/20241025_MHV_OC43_RPR/20241025_1638_MN46757_FAY84222_db1155b0/sequencing_summary_FAY84222_db1155b0_ef1fbc1a.txt
  artic_scheme          : /mnt/c/primer_schemes/MHVCoV-400/

Nanopore/Illumina options
  nextclade_dataset_name: MHV

!! Only displaying parameters that differ from the pipeline defaults !!
------------------------------------------------------
If you use nf-core/viralrecon for your analysis please cite:

* The pipeline
  https://doi.org/10.5281/zenodo.3901628

* The nf-core framework
  https://doi.org/10.1038/s41587-020-0439-x

* Software dependencies
  https://github.com/nf-core/viralrecon/blob/master/CITATIONS.md
------------------------------------------------------
[-        ] NFCORE_VIRALRECON:NANOPORE:PYCOQC                              -
[-        ] NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:CUSTOM_GETCHROMSIZES -
[-        ] NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:COLLAPSE_PRIMERS     -
[-        ] NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:NEXTCLADE_DATASETGET -
[-        ] NFCORE_VIRALRECON:NANOPORE:PREPARE_GENOME:SNPEFF_BUILD         -
ERROR ~ A process input channel evaluates to null -- Invalid declaration `val scheme_version`

 -- Check script '.nextflow/assets/nf-core/viralrecon/./workflows/nanopore.nf' at line: 308 or see '.nextflow.log' file for more details`",rebeelouise,https://github.com/nf-core/viralrecon/issues/445
I_kwDODvpAGM6fWQyh,Addition of a parameter for the minimum depth to call a base,OPEN,2024-11-19T20:19:26Z,2024-12-16T13:59:18Z,,"### Description of feature

Hello Viralrecon team, 

I am requesting an addition of a parameter that would allow the user to supply a minimum depth to cal a base and thus variants as well. Currently this can be done by supplying a custom config with specific processes and update args to increase or lower the minimum depth. The variant calling and consensus modules would use this parameter. It would be ideal to have this as a parameter that can be set by a custom config or on the command line. I think the default of 10 works well, which is what these values are set in the config files. This would enhance the usability of this pipeline. Additionally, if possible it would ideal to have the metric table have a column for the genome fraction of the sample at the specified depth. For example, there is a column ""% Coverage > 10x"" that could possible be altered to reflect the minimum depth parameter being specified (i.e. '% Coverage > ${params.min_depth}x'). 

I wonder if the added parameter could be added and then placed in the config files, as to not alter or change the modules' code base. Please reach out with any questions or if I can provide further explanation. Thanks! -CJ",cjjossart,https://github.com/nf-core/viralrecon/issues/447
I_kwDODvpAGM6iJ5KX,Update all modules to the latest,OPEN,2024-12-05T14:01:17Z,2024-12-05T14:01:17Z,,"### Description of feature

Please update all modules used in the pipeline to the latest version:
 - Update the modules in nf-core/modules
 - Add the latest modules to the pipeline",LilyAnderssonLee,https://github.com/nf-core/viralrecon/issues/448
I_kwDODvpAGM6iiZZN,Check up if pipeline is up to date with TEMPLATE,OPEN,2024-12-09T12:36:38Z,2024-12-09T12:36:38Z,,"### Description of feature

and if possible add the full nf-test magic",maxulysse,https://github.com/nf-core/viralrecon/issues/449
