id,title,state,created_at,updated_at,closed_at,body,user,url
MDU6SXNzdWUxOTIxMTc0OTQ=,Bug in align.protocol line 378?,CLOSED,2016-11-28T21:08:22Z,2017-01-13T16:48:41Z,2017-01-13T16:48:41Z,"I got an invalid syntax error when importing something from evcouplings.align. 
The error comes from align.protocol line 378
```
    info = pd.DataFrame(
        {
            ""pos"": range(first_index, first_index + alignment.L),
            ""target_seq"": target_seq,
            ""conservation"": conservation,
            **fi_cols
        }
    )
````
",b-schubert,https://github.com/debbiemarkslab/EVcouplings/issues/3
MDU6SXNzdWUyMDA2NTc2MTc=,Continuous Integration via Travis?,CLOSED,2017-01-13T15:29:35Z,2017-03-10T20:58:39Z,2017-03-10T20:58:39Z,"Perhaps it is a good idea to start thinking about continuous integration and testing.
One very easy way to do this is TravisCI (https://travis-ci.org). I can help setup the CI and write some unit tests....",b-schubert,https://github.com/debbiemarkslab/EVcouplings/issues/5
MDU6SXNzdWUyMjMyMTc4NDM=,Restraint weights in folding module (dg_sa),OPEN,2017-04-20T22:19:40Z,2017-12-05T20:31:28Z,,"The original pipeline had a small modification to the scalehot and scalecool modules of CNS to allow different restraint weights for secondary structure distance and EC-based distance restraints:

**Old settings in dg_sa.inp**:
md.cool.noe=5 (used to scale EC distance restraints)
md.cool.noe2=10 (used to scale secondary structure distance restraints)
These weights were used to rescale the restraints in the first (ECs) and second (sec. struct.) tbl files.

**New settings**
The reimplementation does not have this modification (only md.cool.noe = 5), since individual restraint weights can be specified in the tbl files. At the moment, this adjustment is however not done, which might lead to a lower overall contribution of secondary structure distance restraints (with unclear consequences).

To adjust, in restraints.yml, under secstruct_distance_restraints we should (probably) change weight: 5 to weight: 10. However it is unclear if this change 
- is really equivalent to the overall scale factor (md.cool.noe2), and 
- would have any beneficial effect on folding

Before making this change, its effect should best be tested empirically.

",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/10
MDU6SXNzdWUyMjMyMzg0Njc=,Consistent behaviour for output file checking,CLOSED,2017-04-21T00:17:00Z,2017-05-19T19:52:27Z,2017-05-19T19:52:27Z,"Pipeline outputs with the suffix ""_file"" are implemented in some of the stages to be None if the product could not be created, whereas other stages do not return the key. 

Need to make this behaviour consistent, and make sure that the pipeline (re-)runner does not choke when files are set to be None.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/11
MDU6SXNzdWUyMjMyMzkyMDc=,Index mapping in non-focus mode,CLOSED,2017-04-21T00:22:05Z,2020-04-21T07:15:15Z,2020-04-21T07:15:15Z,"Segments and index remapping in the coupling stage do not accommodate the following case:
- Position present in the sequence alignment
- No corresponding position present in the target sequence

Since all of the pipeline currently operates in focus mode (and this is the only sensible mode for downstream stages like compare, mutate and fold), this is not an issue currently. If non-focus mode applications are ever integrated into the pipeline that require mapping to a target sequence, this issue has to be addressed.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/12
MDU6SXNzdWUyMjMyMzk3ODg=,Update output tutorial to cover folding stage,OPEN,2017-04-21T00:26:24Z,2017-04-21T00:26:24Z,,"Currently settings and output products of ""fold"" stages not explained in notebooks/output_files_tutorial.ipynb and notebooks/running_jobs.ipynb",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/13
MDU6SXNzdWUyMjM0NTI0ODg=,Add a license,CLOSED,2017-04-21T17:51:04Z,2017-06-09T22:35:58Z,2017-06-09T22:35:58Z,"contenders: MIT, BSD 3-clause",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/14
MDU6SXNzdWUyMjM0NTI2ODk=,Create documentation pages,CLOSED,2017-04-21T17:51:55Z,2017-08-21T20:42:03Z,2017-08-21T20:42:03Z,"Use https://readthedocs.org/, couple to repository",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/15
MDU6SXNzdWUyMjQ4MTMzMzc=,Stage Subfolders,CLOSED,2017-04-27T15:00:24Z,2017-05-11T01:48:38Z,2017-05-11T01:48:38Z,Make subfolders for all output stages,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/16
MDU6SXNzdWUyMjQ4MTQwMjc=,Interactive contact maps,CLOSED,2017-04-27T15:02:35Z,2017-12-05T20:34:21Z,2017-12-05T20:34:21Z,Add interactive contact maps plotting function - HTML - think about consistency with server whilst doing,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/17
MDU6SXNzdWUyMjQ4MTQzNDE=,Predicted Contact Maps (no structure),OPEN,2017-04-27T15:03:38Z,2017-12-08T15:45:26Z,,Add to couplings stage,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/18
MDU6SXNzdWUyMjQ4MTUwMjc=,Coloring contact maps,CLOSED,2017-04-27T15:05:44Z,2017-05-11T01:48:38Z,2017-05-11T01:48:38Z,Color range for EC strengths ( discuss what it should be) ,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/19
MDU6SXNzdWUyMjQ4MTc5MzQ=,ECs represented as arcs on a line,OPEN,2017-04-27T15:14:48Z,2018-01-10T18:30:49Z,,"Put UniProt numbering on beginning and end of line
Interactive arcs that display residue numbers and name
Range of colors for arcs related to strength of EC
Optional - predicted secondary structure along line",deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/20
MDU6SXNzdWUyMjQ4MjA3MDA=,Add EVcomplex,CLOSED,2017-04-27T15:23:14Z,2017-10-21T18:13:37Z,2017-10-21T18:13:37Z,,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/21
MDU6SXNzdWUyMjU1NzEwNjc=,compare stage: search using HMM from alignment stage,CLOSED,2017-05-02T01:54:16Z,2018-01-31T15:16:12Z,2018-01-31T15:16:12Z,"Current implementation uses jackhmmer only against the sequences of PDB structures. For greater sensitivity, should search with the broader HMM profile generated by searching against Uniref/Uniprot.

To implement,
1) generate HMM file from .a2 alignment (better to use than checkpoints_hmm parameter of jackhmmer search) using hmmbuild
2) scan HMM against PDB Uniprot sequence database (from SIFTS object) using hmmsearch",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/22
MDU6SXNzdWUyMjU4MDc5Mjk=,Secondary structure and numbering on contact maps,OPEN,2017-05-02T20:14:03Z,2017-12-08T21:56:23Z,," Put numbering and secondary structure logo on same axis in contact maps for better visualization.
",deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/23
MDU6SXNzdWUyMjU4Njk4Mjc=,Make optimal rule for secondary structure vis in contact map,CLOSED,2017-05-03T02:20:14Z,2017-05-11T01:48:38Z,2017-05-11T01:48:38Z,Decide on best rule for secondary structure is shown in compare contact map,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/24
MDU6SXNzdWUyMjYwMDg2MzE=,Pfam family size table creation function,CLOSED,2017-05-03T14:38:29Z,2017-05-17T00:37:13Z,2017-05-17T00:37:13Z,"Implement evcouplings.align.pfam.create_family_size_table(), parse the numbers from full Pfam-A flat file (ftp://ftp.ebi.ac.uk/pub/databases/Pfam/current_release/Pfam-A.full.gz).

Before implementing, check that this information is not available in a more straightforward way.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/25
MDU6SXNzdWUyMjg3NTI3OTg=,Add configuration parameter to delete intermediate alignment files,CLOSED,2017-05-15T15:27:31Z,2017-05-19T19:52:27Z,2017-05-19T19:52:27Z,"To save space, delete intermediate products of align stage (which are biggest space takers next to .model file):
* .sto file 
* _faw.fasta 
* .output

Add a parameter like ""save_model"" couplings stage to enable/disable this.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/27
MDU6SXNzdWUyMjg3NTQ2NTk=,Estimate amount of memory needed for compute job,OPEN,2017-05-15T15:33:24Z,2018-01-09T18:47:02Z,,"Goal: reduce amount of memory that needs to be requested by estimating upper bound based on length of target sequence.

* This feature will be enabled by putting ""auto"" as value of environment->memory in configuration file.
* To estimate, we need to know how long the target sequence is in evcouplings app, which does not touch the sequence (this only first happens in align stage of pipeline). Possible solutions: 
   - if region is given, can compute length from that
   - otherwise, we have to open sequence_file or fetch sequence_id and compute from that
",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/28
MDU6SXNzdWUyMzExMTE4NTU=,[ERROR] Seaborn is missing in setup.py as dependency,CLOSED,2017-05-24T17:15:51Z,2017-05-24T18:27:38Z,2017-05-24T18:27:38Z,,b-schubert,https://github.com/debbiemarkslab/EVcouplings/issues/32
MDU6SXNzdWUyMzg2NDQ4NzU=,lsf submitter seems to block,CLOSED,2017-06-26T19:28:02Z,2017-08-01T13:34:43Z,2017-08-01T13:34:43Z,,sophiamersmann,https://github.com/debbiemarkslab/EVcouplings/issues/38
MDU6SXNzdWUyNDU1MjM1NzQ=,statistics summary files not always made,CLOSED,2017-07-25T20:21:26Z,2017-09-06T14:21:51Z,2017-09-06T14:21:51Z,"Benni and I have noticed that the ""..statistics_summary.pdf"" and ""..statistics_summary.csv"" files are not always made and it seems to be random when they are not. It seems they  are 'timed out' but we don't know why. Even when runs take just a few hours the stats file can take a day .. odd??",deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/46
MDU6SXNzdWUyNDc0ODc4NDU=,ValueError: No chains with given name found,CLOSED,2017-08-02T18:54:44Z,2017-08-03T17:21:32Z,2017-08-03T17:21:15Z,"I encountered the following error:

```
Traceback (most recent call last):
  File ""/Users/bs224/Dropbox/PostDoc/projects/EVcouplings/test/TestPDB.py"", line 33, in test_pbd
    distmap_intra = intra_dists(selected_structures)
  File ""/Users/bs224/Dropbox/PostDoc/projects/EVcouplings/evcouplings/compare/distances.py"", line 759, in intra_dists
    model
  File ""/Users/bs224/Dropbox/PostDoc/projects/EVcouplings/evcouplings/compare/distances.py"", line 667, in _prepare_chain
    chain = structures[pdb_id].get_chain(pdb_chain, model)
  File ""/Users/bs224/Dropbox/PostDoc/projects/EVcouplings/evcouplings/compare/pdb.py"", line 538, in get_chain
    ""No chains with given name found""
ValueError: No chains with given name found
```

which basically breaks the complete pipeline. The culprit was 1OAY...

I propose to ignore the particular PDB structure and continue with the processing via a try and except block. Agreed?",b-schubert,https://github.com/debbiemarkslab/EVcouplings/issues/49
MDU6SXNzdWUyNDg3MDg4OTM=,"""theta"" not working in command line",CLOSED,2017-08-08T13:07:08Z,2017-08-08T17:18:37Z,2017-08-08T17:18:37Z,"Changing theta in config is working ok , changing it in command line doesn't .",deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/52
MDU6SXNzdWUyNDg3OTk3MTY=,compute_num_effective_seqs appears to be ignored,CLOSED,2017-08-08T18:08:58Z,2017-08-08T18:42:48Z,2017-08-08T18:42:48Z,"I have compute_num_effective_seqs: True in my config file, but Neff does not appear to be calculated at my align stage.

I am not 100% sure  that this is not operator error. Here is the call I am using:

evcouplings --yolo -P output/capsid_config_mod -p P12497 -b ""0.2, 0.5, 0.8"" -t 0.99 -r 133-363  sample_config_align.txt

[sample_config_align.txt](https://github.com/debbiemarkslab/EVcouplings/files/1209134/sample_config_align.txt)

",mchonofsky,https://github.com/debbiemarkslab/EVcouplings/issues/54
MDU6SXNzdWUyNDg4MDI3NzU=,Weird errors in fold,CLOSED,2017-08-08T18:20:30Z,2017-08-16T18:06:54Z,2017-08-16T18:06:54Z,"1. This one:

```
multiprocessing.pool.RemoteTraceback: 
""""""
Traceback (most recent call last):
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/multiprocessing/pool.py"", line 119, in worker
    result = (True, func(*args, **kwds))
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/multiprocessing/pool.py"", line 47, in starmapstar
    return list(itertools.starmap(args[0], args[1]))
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns.py"", line 573, in cns_dgsa_fold
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns.py"", line 274, in cns_generate_easy_inp
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns.py"", line 101, in _cns_render_template
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/system.py"", line 129, in verify_resources
    ""{}:\n{}"".format(message, "", "".join(invalid))
evcouplings.utils.system.ResourceError: CNS template does not exist: /groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns_templates/generate_easy.inp:
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns_templates/generate_easy.inp
""""""

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 453, in execute_wrapped
    outcfg = execute(**config)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 173, in execute
    outcfg = runner(**incfg)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 606, in run
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 486, in standard
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/multiprocessing/pool.py"", line 268, in starmap
    return self._map_async(func, iterable, starmapstar, chunksize).get()
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/multiprocessing/pool.py"", line 608, in get
    raise self._value
evcouplings.utils.system.ResourceError: CNS template does not exist: /groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns_templates/generate_easy.inp:
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/cns_templates/generate_easy.inp
```

2. This one:

```
Traceback (most recent call last):
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 453, in execute_wrapped
    outcfg = execute(**config)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 173, in execute
    outcfg = runner(**incfg)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 606, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 504, in standard
    shutil.copy(file_path, fold_dir)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/shutil.py"", line 235, in copy
    copyfile(src, dst, follow_symlinks=follow_symlinks)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/shutil.py"", line 114, in copyfile
    with open(src, 'rb') as fsrc:
FileNotFoundError: [Errno 2] No such file or directory: 'output/capsid_config_mod_b0.2/fold/aux/capsid_config_mod_b0.2_significant_ECs_0.9_1_hMIN.pdb'
```",mchonofsky,https://github.com/debbiemarkslab/EVcouplings/issues/55
MDU6SXNzdWUyNDg4MzU4MzE=,multimer_dists() fails for pdb 5o2u,CLOSED,2017-08-08T20:25:52Z,2017-08-14T14:23:12Z,2017-08-14T14:23:12Z,"Multimer distance calculation fails for hits to the protein P12497 (code and error message below). We believe this is due to pdb id 5o2u, as this is the only structure hit with multiple chains. Structure hits and mapping files are attached. 

We have tried the following:
1. verified that sifts and pdb files exist and do not appear to have anything strange about them:
http://files.rcsb.org/view/5o2u.pdb
http://mmtf.rcsb.org/v1.0/full/5o2u

2. Tried calculating the distance map using the by_pdb_id method. This does not return any error. 

Potentially of note: this error was originally returned on orchestra but I was able to reproduce it locally. Benni was not able to reproduce the error locally but got a different error that also seems to be related to missing coordinates. 

Code:
---------------------------------------------------------------------------
```
uid = 'P12497'
s = SIFTS(""/Users/AG/databases/pdb_chain_uniprot_plus_2017_08_03.csv"", 
    ""/Users/AG/databases/pdb_chain_uniprot_plus_2017_08_03.fa"")
selected_structures = s.by_alignment(
    reduce_chains=False, sequence_id=uid, region=(378, 432),
    jackhmmer=""/Applications/hmmer-3.1b2-macosx-intel/binaries/jackhmmer"",
    
)
c = multimer_dists(sifts_result=selected_structures,intersect=False)
```

Error: 
---------------------------------------------------------------------------
```
IndexError                                Traceback (most recent call last)
<ipython-input-14-2902a00c3a21> in <module>()
----> 1 c = multimer_dists(sifts_result=selected_structures,intersect=False)
      2 c.contacts()

/Users/AG/marks_lab_scripts/EVcouplings/evcouplings/compare/distances.py in multimer_dists(sifts_result, structures, atom_filter, intersect, output_prefix, model, raise_missing)
    876             # is close in some combination)
    877             distmap_sym = DistanceMap.aggregate(
--> 878                 distmap, distmap.transpose(), intersect=intersect
    879             )
    880             distmap_sym.symmetric = True

/Users/AG/marks_lab_scripts/EVcouplings/evcouplings/compare/distances.py in aggregate(cls, intersect, agg_func, *matrices)
    597             )
    598 
--> 599             new_mat[k][i_agg, j_agg] = m.dist_matrix[i_src, j_src]
    600 
    601         # aggregate

IndexError: arrays used as indices must be of integer (or boolean) type
```
[nucleocapsid_b0.8_mapping1737.txt](https://github.com/debbiemarkslab/EVcouplings/files/1209435/nucleocapsid_b0.8_mapping1737.txt)
[nucleocapsid_b0.8_mapping1738.txt](https://github.com/debbiemarkslab/EVcouplings/files/1209437/nucleocapsid_b0.8_mapping1738.txt)
[nucleocapsid_b0.8_structure_hits.txt](https://github.com/debbiemarkslab/EVcouplings/files/1209436/nucleocapsid_b0.8_structure_hits.txt)
",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/56
MDU6SXNzdWUyNTAwMjM2MDA=,Clean up couplings/protocol.py,CLOSED,2017-08-14T13:00:15Z,2018-01-04T21:47:49Z,2018-01-04T21:47:49Z,"Currently the protocols have quite some code duplication. I already refactored some of it in the complexes_dev branch (standard and complexes protocols). After these changes are merged into master, we should continue to refactor such that mean-field protocol also gets de-duplicated.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/57
MDU6SXNzdWUyNTAwMjQzNjY=,Better score column handling,CLOSED,2017-08-14T13:03:18Z,2020-04-21T07:14:43Z,2020-04-21T07:14:42Z,"Currently the ""cn"" score column is the default score column in the entire pipeline. To make this more flexible for use with other scores (e.g. DI score from mean-field protocol), there should be a generic ""score"" column which the rest of the pipeline after the couplings stage uses. Which score gets assigned to that column is a parameter of the couplings stage (entry like ""use_score: cn""). Needs consideration of special score properties (e.g. mixture model does not make sense with DI scores).",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/58
MDU6SXNzdWUyNTY0MjY4MDM=,Create SIFTS mapping file with segments with structural coverage,CLOSED,2017-09-09T09:17:01Z,2018-07-01T14:58:11Z,2018-07-01T14:58:11Z,"We had a response from the SIFTS team that they will provide an segment mapping file that maps consecutive Uniprot sequence segments to segments with structural coverage later this year or early next year. In the meantime, we shouldtry to create such a file ourselves based on the residue-level xml files. We could then distribute these precomputed files using the evcouplings_dbupdate tool and as downloads on the lab website.

## Requirements

- The file should have the format of ftp://ftp.ebi.ac.uk/pub/databases/msd/sifts/flatfiles/csv/pdb_chain_uniprot.csv.gz
- One PDB chain can have multiple rows in the table
- Each row should be one consecutive segment of Uniprot residue numbers that maps to a consecutive segment with actual structural coverage in the ATOM records, and a consecutive SEQRES segment (i.e. no deletions or insertions in any of the numbering spaces inside a segment)

## Implementation

1. Fetch xml files for entire PDB from ftp://ftp.ebi.ac.uk/pub/databases/msd/sifts/, best do this using rsync and write all parsing code in a way it only needs to look at updated entries between releases
2. Write XML Parser that extracts segments and stores them in table; in the process note the following caveats (there will be more...):
    - PDB atom index can contain insertion codes (i.e. are strings)
    - One chain can contain different Uniprot entries (i.e. one chain can lead to multiple rows in the output table, and each one can have a different Uniprot identifier)
    - there is some initial parsing code in the old folding_dev pipeline, but the used XML parser uses insane amounts of RAM very quickly, so choice of parser should be done carefully.
",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/64
MDU6SXNzdWUyNjQ2MDY3NzA=,Add secondary structure prediction from Perry's code to output,OPEN,2017-10-11T14:23:26Z,2017-12-05T20:56:05Z,,,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/68
MDU6SXNzdWUyNjQ2MDcwNjY=,Add predicted secondary structure to predicted contact maps,OPEN,2017-10-11T14:24:16Z,2017-11-15T13:23:41Z,,"can be psipred and perry's from ECs 
should have both options",deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/69
MDU6SXNzdWUyNjQ2MDc1NTI=,Add ability to input own PDB for comparison,OPEN,2017-10-11T14:25:27Z,2018-04-06T15:02:07Z,,Great feature for unpublished PDBs or comparing own models to others,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/70
MDU6SXNzdWUyNjQ2MDgwOTk=,Statistics summary csv doesn't always contain all the runs,CLOSED,2017-10-11T14:26:50Z,2017-11-21T19:18:07Z,2017-11-21T19:18:07Z,see marks/projects/murj_ecoli/MURJ_ECOLI  for example,deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/71
MDU6SXNzdWUyNjYyMTE4NTI=,Add flag to change proline secondary structure,OPEN,2017-10-17T17:24:38Z,2018-06-19T18:00:20Z,,"For prolines that appear in long helices, could be good to have a flag that would change them from H to C in secondary structure prediction file from PSIPRED to allow the helix to bend in fold stage",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/72
MDU6SXNzdWUyNjc3NTExOTY=,Create Docker container for easier distribution,CLOSED,2017-10-23T17:26:17Z,2019-01-27T10:50:47Z,2019-01-27T10:50:46Z,"* including all software dependencies, as far as possible
* think about how to best handle databases
* pay attention to licenses, some of the used tools are under GPL",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/74
MDU6SXNzdWUyNjc3NTM1NDM=,Increase test coverage,CLOSED,2017-10-23T17:34:13Z,2018-06-19T17:55:53Z,2018-06-19T17:55:53Z,"Highest priority would be tests that check the sanity of the individual pipeline stage outputs, and that the pipeline runs through from start to end for the major workflows (monomers / complexes).",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/75
MDU6SXNzdWUyNjk3MjczMDA=,Correct PDB file column widths for large structures,CLOSED,2017-10-30T19:36:48Z,2017-10-31T15:56:00Z,2017-10-31T15:56:00Z,"When loading a large structure (from mmCIF or MMTF) with many residues / atoms that exceed the maximum width in PDB files, and then writing the chains from these as PDB file using 
evcouplings.compare.pdb.Chain.to_file(), the output file will have shifted columns (i.e. broken PDB file).

Fix:
* Minimally, to_file() should raise an exception when trying to write an invalid file with shifted columns (this is easy to detected based on atom and residue ids)
* to be still able to write these chains for use with the pipeline, the function should allow to renumber the atoms (e.g. shift numbers to start at 1);
* If we number atoms in a chain from 1 by default this might however lead to issues with files that contain multiple chains (e.g. complexes pipeline) because of duplicate atoms (maxcluster is particularly sensitive to this)",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/78
MDU6SXNzdWUyNzIzMzUxMzQ=,Dependencies licences,CLOSED,2017-11-08T20:18:24Z,2018-04-06T15:01:12Z,2018-04-06T15:01:12Z,"### Check licenses for tools and report here
As from #74

For this purpose, I propose listing all external dependencies here and slowly commenting with their licenses.

Dependencies:
- [x] CNS
- [x] psipred",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/83
MDU6SXNzdWUyNzI2MDc3OTY=,Additional last step in pipeline: store list of files to database,CLOSED,2017-11-09T15:36:57Z,2018-04-26T19:40:26Z,2018-04-26T19:40:26Z,"After the pipeline has finished generating all files, there should be a final optional step where files are copied from the FS to a database. This should be as transparent as possible (i.e.: database can be mongo/postgres/...) and the files to be stored are read from some config file.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/84
MDU6SXNzdWUyNzI2MTUzMzI=,List of files to be stored in database for webserver (front-/backend) consumption,CLOSED,2017-11-09T15:56:48Z,2018-11-05T21:06:11Z,2018-11-05T21:06:11Z,"- [ ] Master config file (job parameters)
- [ ] `subfoldbitscore/align/*_alignment_statistics.csv`
- [ ] `*_job_statistics_summary.pdf` --> Might be missing

### Align
- [ ] Master alignment statistics file (`align\*_alignment_statistics.csv`)
- [ ] Sequences file (`align\*.fa`)
- [ ] Alignment file (`align\*.a2m`)
- [ ] Frequencies file (`align\*_frequencies.csv`)

### Couplings
- [ ] Couplings model file (`couplings\*.model`)
- [ ] Enrichment file (`couplings\*_enrichment_sausage`)
- [ ] Enrichment file (`couplings\*_enrichment_sphere`)
- [ ] EV_Zoom file (`couplings\*_evzoom.json`)

if no compare:
- [ ] Coupling scores file (`couplings\*_CouplingScores.csv`)

else:
- [ ] Coupling scores file (`compare\*_CouplingScoresCompared_all.csv`)

### Compare
- [ ] Coupling scores file (`compare\*_CouplingScoresCompared_longrange.csv`)
- [ ] Structure hits file (`compare\*_structure_hits.csv`)

### Mutate
- [ ] Mutation effect file (`mutate\*_mutate_matrix.csv`)


### Fold
- [ ] Sec structure file (`fold\*_secondary_structure.csv`)
- [ ] Model ranking file (`fold\*_ranking.csv`)

if structures available:
- [ ] Model ranking file (`fold\*_comparison.csv`) (has more cols)",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/85
MDU6SXNzdWUyNzQyOTg4NzA=,"Finding structural ""homologs""",OPEN,2017-11-15T20:46:51Z,2018-04-06T14:58:57Z,,"We should search with HHPRED for all queries independent of alignment depth of search.
Just as an alert rather than to use and not to be put in web server.
( Current status with alignment search is under review from Thomas)",deboramarks,https://github.com/debbiemarkslab/EVcouplings/issues/87
MDU6SXNzdWUyNzQzMzkyNTk=,parse error in uniref100_current.fasta,CLOSED,2017-11-15T23:16:01Z,2018-02-02T15:43:26Z,2017-11-17T18:02:46Z,"Hi guys,

the pipeline dies almost immediately when I set off a run. I get the following parse error:

Error: Parse failed (sequence file
/groups/marks/databases/jackhmmer/uniref100/uniref100_current.fasta):
Line 1: unexpected char ; expected FASTA to start with >

I looked at this briefly with Christian, and he suggested that this is caused by some kind of encoding error (I see weird characters when I run 'head uniref100_current.fasta' on the command-line).

Thanks!
Rohan
",rohanmaddamsetti,https://github.com/debbiemarkslab/EVcouplings/issues/88
MDU6SXNzdWUyNzk1MTkxNTk=,Incorporate new coloring of EC enrichment,CLOSED,2017-12-05T20:29:18Z,2018-02-27T15:14:28Z,2018-02-27T15:14:28Z,"New function for coloring EC enrichment should be incorporated into pipeline. The new function has more bins and a nicer color scheme.

",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/90
MDU6SXNzdWUyODY4NjE0Njk=,Improve hmmbuild_and_search with stockholm-formatted alignments,OPEN,2018-01-08T19:40:22Z,2018-04-06T14:58:05Z,,"This comprises the following three steps:

1. Write a function that writes a stockholm-formatted sequence alignment. Function should be modeled after write_fasta in align/alignment. 

Additionally, it should provide the option to input a reference coordinate annotation (see pg. 37 ofhttp://eddylab.org/software/hmmer3/3.1b2/Userguide.pdf for example) and write that annotation to the output file. 

2. In align/protocol/hmmbuild_and_search, after calling run_hmmsearch, the .sto formatted alignment output by run_hmmsearch isn't guaranteed to have the query sequence contained in it, so we need to patch in the query sequence and then write a new .sto formatted sequence alignment. This will contain the output of hmmsearch plus the query sequence AND RF annotation columns corresponding to the columns of the query sequence. 

3. In compare/sifts/find_homologs, the function _make_hmmsearch_raw_fasta can be removed and the alignment from hmmbuild_and_search can be read in directly.


",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/93
MDU6SXNzdWUyODY5MDk0NTg=,0.0.2 Release,CLOSED,2018-01-08T22:29:20Z,2018-02-22T22:48:36Z,2018-02-22T22:48:36Z,"Since EVcouplings has changed quit a bit over the last months, we should probably release a new official version. 


What do you think?

",b-schubert,https://github.com/debbiemarkslab/EVcouplings/issues/95
MDU6SXNzdWUyODcxNzkwMzI=,EVcomplex database file downloading / generation,CLOSED,2018-01-09T18:04:07Z,2018-06-19T17:59:20Z,2018-06-19T17:59:20Z,"Necessary for EVcomplex part of pipeline to be usable.

Two escalation levels:

1) Distribute pre-generated downloadable file using DB update tool (download from lab website)

2) Include script that generates databases from source files in fully automated way.

For next release, I think having 1) would be sufficient.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/96
MDU6SXNzdWUyODc1Mjk1MzA=,Feature request: visualize ECs on a one-dimensional string,CLOSED,2018-01-10T18:15:25Z,2018-01-10T18:29:34Z,2018-01-10T18:29:33Z,"It would be nice if we can make figures that visualize ECs as arcs between points on a string, especially for proteins where we get some high-confidence ECs but not enough to fold the full protein.",rohanmaddamsetti,https://github.com/debbiemarkslab/EVcouplings/issues/97
MDU6SXNzdWUyODc1OTMzODE=,Possible inconsistency in CSV export of secondary struct,CLOSED,2018-01-10T22:04:48Z,2018-01-14T14:45:42Z,2018-01-13T18:41:17Z,"In this function ( https://github.com/debbiemarkslab/EVcouplings/blob/master/evcouplings/visualize/pairs.py#L752 ), a column with `id` needs to be defined, but in sec_struct.csv the column's header is just `i`. Maybe inconsistent?",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/98
MDU6SXNzdWUyODc5MTM0NjI=,Add in Uniprot and PDB id to contact maps,CLOSED,2018-01-11T20:26:43Z,2020-04-21T07:16:30Z,2020-04-21T07:16:30Z,Might be nice to add in PDB ids and uniprot id that was used to generate contact maps directly in the pdf files,kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/99
MDU6SXNzdWUyODgyNDgzNzY=,Update readme with GCC dependencies?,CLOSED,2018-01-12T21:15:56Z,2018-01-26T16:27:17Z,2018-01-26T16:27:17Z,Add GCC/G++/clang dependency (just to not get flooded with issues),sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/100
MDU6SXNzdWUyODg1OTYyMzY=,evcouplings_runcfg uses #!/usr/bin/python3 instead of #!/usr/bin/env python,CLOSED,2018-01-15T13:35:32Z,2018-03-24T14:28:45Z,2018-03-24T14:28:44Z,"... And consequently fails to run, when the rest of EVcouplings is being used from a virtual environment.

Edit: This version is from a fresh installation today using
pip install evcouplings

Switching the first line between the two options in the title of this issue, I can get the following error due to python3.4 instead of my virtual environment's 3.6 being used, or a normal execution:

```
(venv_EVCouplings) /../EVcouplings$ evcouplings_runcfg
Traceback (most recent call last):
  File ""/usr/local/bin/evcouplings_runcfg"", line 6, in <module>
    from pkg_resources import load_entry_point
  File ""/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py"", line 3144, in <module>
    @_call_aside
  File ""/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py"", line 3128, in _call_aside
    f(*args, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py"", line 3157, in _initialize_master_working_set
    working_set = WorkingSet._build_master()
  File ""/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py"", line 666, in _build_master
    ws.require(__requires__)
  File ""/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py"", line 984, in require
    needed = self.resolve(parse_requirements(requirements))
  File ""/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py"", line 870, in resolve
    raise DistributionNotFound(req, requirers)
pkg_resources.DistributionNotFound: The 'msgpack-python' distribution was not found and is required by mmtf-python
```",PeterARBork,https://github.com/debbiemarkslab/EVcouplings/issues/101
MDU6SXNzdWUyODg2NjQ1ODU=,Couple of bumps on the way for a new user,CLOSED,2018-01-15T17:14:22Z,2018-01-23T22:44:41Z,2018-01-23T18:29:43Z,"Based on the articles, I think your method is very interesting, so I'm adding this ""issue"" to give something back in the form of helping you guys know where people like me get errors.

Running a pipeline nearly identical to the example_config, I ran into a long stacktrace because the lines below got a keyerror for resseq_end.

A try-catch around these with a helpful reminder instead of the long stacktrace for the std.out might be worth the effort. The reminder could be the same that the python-module has, to run without SIFT files, but only directories to recreate them.

https://github.com/debbiemarkslab/EVcouplings/blob/e35a0691bf466d3cf9edcc508ca9e2dc983f71b4/evcouplings/compare/sifts.py#L319-L321

Maybe that wouldn't solve my problem though, because after changing the config file to not have specific SIFT files, but just directories, I now get a different stacktrace for this line:
https://github.com/debbiemarkslab/EVcouplings/blob/e35a0691bf466d3cf9edcc508ca9e2dc983f71b4/evcouplings/compare/sifts.py#L235-L237

The stacktrace looks like this (paths taken out):
```
Traceback (most recent call last):
  File ""./corrected_bin/evcouplings_runcfg"", line 11, in <module>
    load_entry_point('evcouplings==0.0.1', 'console_scripts', 'evcouplings_runcfg')()
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/click/core.py"", line 722, in __call__
    return self.main(*args, **kwargs)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/click/core.py"", line 697, in main
    rv = self.invoke(ctx)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/click/core.py"", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/click/core.py"", line 535, in invoke
    return callback(*args, **kwargs)
  File ""/../evcouplings/utils/pipeline.py"", line 510, in app
    outcfg = run(**kwargs)
  File ""/../evcouplings/utils/pipeline.py"", line 497, in run
    return execute_wrapped(**config)
  File ""/../evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
    outcfg = execute(**config)
  File ""/../evcouplings/utils/pipeline.py"", line 174, in execute
    outcfg = runner(**incfg)
  File ""/../evcouplings/compare/protocol.py"", line 1008, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/../evcouplings/compare/protocol.py"", line 485, in standard
    ""prefix"": aux_prefix,
  File ""/../evcouplings/compare/protocol.py"", line 75, in _identify_structures
    kwargs[""sifts_sequence_db""]
  File ""/../evcouplings/compare/sifts.py"", line 236, in __init__
    sifts_table_file, comment=""#""
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/pandas/io/parsers.py"", line 709, in parser_f
    return _read(filepath_or_buffer, kwds)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/pandas/io/parsers.py"", line 449, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/pandas/io/parsers.py"", line 818, in __init__
    self._make_engine(self.engine)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/pandas/io/parsers.py"", line 1049, in _make_engine
    self._engine = CParserWrapper(self.f, **self.options)
  File ""/../venv_EVCouplings/lib/python3.6/site-packages/pandas/io/parsers.py"", line 1695, in __init__
    self._reader = parsers.TextReader(src, **kwds)
  File ""pandas/_libs/parsers.pyx"", line 562, in pandas._libs.parsers.TextReader.__cinit__
  File ""pandas/_libs/parsers.pyx"", line 760, in pandas._libs.parsers.TextReader._get_header
  File ""pandas/_libs/parsers.pyx"", line 965, in pandas._libs.parsers.TextReader._tokenize_rows
  File ""pandas/_libs/parsers.pyx"", line 2208, in pandas._libs.parsers.raise_parser_error
pandas.errors.ParserError: Error tokenizing data. C error: Calling read(nbytes) on source failed. Try engine='python'.
```

If you guys are interested in this kind of user feedback, I'll return with more next week, when I again have time to work on it. In the meantime, thanks for making the effort to make your method available.",PeterARBork,https://github.com/debbiemarkslab/EVcouplings/issues/102
MDU6SXNzdWUyODg3MTgzNDU=,Floating point overflow in single site model recalculation,CLOSED,2018-01-15T21:16:27Z,2018-01-26T16:44:14Z,2018-01-26T16:27:17Z,"I encountered these floating point errors when using the mean_field approximation algorithm to calculate coupling scores. Model file attached. 
[AIM2_HUMAN.model.zip](https://github.com/debbiemarkslab/EVcouplings/files/1633020/AIM2_HUMAN.model.zip)



```/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/matplotlib/font_manager.py:1297: UserWarning: findfont: Font family ['Arial'] not found. Falling back to DejaVu Sans
  (prop.get_family(), self.defaultFamily[fontext]))
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:887: RuntimeWarning: overflow encountered in exp
  logZ = np.log(np.exp(x).sum())
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:895: RuntimeWarning: overflow encountered in exp
  Z = np.exp(x).sum()
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:896: RuntimeWarning: overflow encountered in exp
  P = np.exp(x) / Z
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:896: RuntimeWarning: invalid value encountered in true_divide
  P = np.exp(x) / Z
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:887: RuntimeWarning: overflow encountered in exp
  logZ = np.log(np.exp(x).sum())
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:887: RuntimeWarning: overflow encountered in exp
  logZ = np.log(np.exp(x).sum())
/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/couplings/model.py:895: RuntimeWarning: overflow encountered in exp
  Z = np.exp(x).sum()```",sysbiogirl,https://github.com/debbiemarkslab/EVcouplings/issues/104
MDU6SXNzdWUyOTA4ODkzODA=,"""Structure contains more than one model"" Error",CLOSED,2018-01-23T15:53:43Z,2018-01-26T16:33:20Z,2018-01-26T16:27:17Z,"Running the pipeline, I would like to do the standard compare part of the code to get TP rates, etc, but I receive this error. 

> Traceback (most recent call last):
>   File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
>     outcfg = execute(**config)
>   File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 174, in execute
>     outcfg = runner(**incfg)
>   File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 606, in run
>     return PROTOCOLS[kwargs[""protocol""]](**kwargs)
>   File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 545, in standard
>     binary=kwargs[""maxcluster""]
>   File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 221, in compare_models_maxcluster
>     exp_pos, exp_chain = _determine_pos(exp_file)
>   File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/fold/protocol.py"", line 173, in _determine_pos
>     filename
> evcouplings.utils.config.InvalidParameterError: Structure contains more than one model: output/DLG4_RAT/DLG4_RAT_1_b0.5/compare/aux/DLG4_RAT_1_b0.5_3i4w_A_143.pdb

Is this an issue with the ""reduce_chains"" argument? It is set to default in these runs. I would still like to get back multimer contacts in these runs.",ariesselman,https://github.com/debbiemarkslab/EVcouplings/issues/108
MDU6SXNzdWUyOTA5NDQxMTk=,Remove resize tool in bokeh-based mutation matrix plots,CLOSED,2018-01-23T18:23:28Z,2018-01-25T20:32:37Z,2018-01-25T20:32:37Z,"See #102 and https://github.com/bokeh/bokeh/issues/4196

Fix is trivial: Change https://github.com/debbiemarkslab/EVcouplings/blob/develop/evcouplings/visualize/mutations.py#L336 to `TOOLS = ""hover""`, we can live without the resize.

But needs verification that it actually fixes the problem with the latest version of bokeh
",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/109
MDU6SXNzdWUyOTEwMTkyODE=,Update example config files,CLOSED,2018-01-23T22:38:56Z,2018-03-06T14:11:33Z,2018-03-06T14:11:33Z,"One of the things to add is:

https://github.com/debbiemarkslab/EVcouplings/blob/develop/config/sample_config_monomer_o2.txt#L143

Now the options are `standard` for plmc and `mean_field` for dca.

Please comment here for any other changes to the headers in the config files",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/110
MDU6SXNzdWUyOTE2NTg2Mjg=,atom_distance default should be named,CLOSED,2018-01-25T17:49:38Z,2018-01-26T18:19:14Z,2018-01-26T18:18:27Z,"In https://github.com/debbiemarkslab/EVcouplings/blob/develop/config/sample_config_monomer.txt#L223 the default is ""leave empty"", which by inspecting the code seems to fallback on `Null`. This is not good practice. Either this field is boolean, or all options are named (e.g. default: minimum atom distance = MAD), and one of the options is defaulted (in this case MAD).

Should be addressed in v0.0.3

Opinions @thomashopf ?",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/111
MDU6SXNzdWUyOTE5MTcyMjI=,Summarizer fails without filelock package,CLOSED,2018-01-26T14:27:53Z,2018-01-26T15:48:44Z,2018-01-26T15:06:40Z,"I recently created a new conda environment and installed evcouplings using pip install -e path/to/development/repo. 

Using this environment, the summarizer functionality of the pipeline was not outputting any files because the filelock package was not installed. No error was thrown, and I confirmed that the function was being called and doing computation, but not writing to file. Neither the plots nor the csv file were created. This surprises me, it seems like it should have failed on import or on line 114 with the call to filelock. 

After running conda install filelock the function works perfectly. Conda says this was a new package for my environment so I don't think it's a version issue.

we should definitely add filelock to the setup script, and potentially add some sort of error to the summarizer so that new users are prompted to install the software. ",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/114
MDU6SXNzdWUyOTE5NTY5ODM=,Improve mean-field integration,OPEN,2018-01-26T16:29:54Z,2020-04-21T07:19:40Z,,"While investigating #104 I found a couple of issues with the mean-field protocol and couplings objects that would be great to address:

1) The mean_field couplings protocol should allow to specify the pseudocount weight as a parameter (given the inference method itself has the option already)

2) It looks like there may be some sign problem with the mutation effects computed using mean-field couplings models (damaging > 0 instead of < 0)

3) Inference of the independent model shoul be based on pseudocounted f_i matrix (this is the way I originally implemented it, before we moved over to the l2-based inference that is currently present in the CouplingsModel object. Ideally, this would be based on detecting the model is from mean-field upon loading, and returning a MeanFieldCouplingsObject that has the appropriate behavior. For now, the fix from #104 is to specify a default lambda_h of 0.01 and apply l2-regularized inference instead.

@sophiamersmann if you have any time to look into this would be greatly appreciated!
",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/116
MDU6SXNzdWUyOTIwMDM2NzI=,user-proof command line options for EVcomplex ,OPEN,2018-01-26T19:17:40Z,2018-06-19T18:00:26Z,,"Adam brought to my attention today that users are allowed to supply some command line options that are nonsensical for the complex pipeline. This leads to errors upon execution. 

For example:

If you use the -b flag in the command line to change bitscores, but supply a complexes config file, the pipeline will fail when it tries to overwrite config[""align""][""use_bitscores""] because the align stage is not part of the complexes pipeline. 

Fixing this issue will entail:
1. Figuring out all such options from the monomer pipeline that are nonsensical or lead to errors in the complexes pipeline
2. Catching them with proper checking and prompting the user not to specify those options. 
",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/117
MDU6SXNzdWUyOTI1MTE0NzQ=,Example complex config file has wrong compare stage,CLOSED,2018-01-29T18:26:26Z,2018-01-31T00:53:06Z,2018-01-31T00:53:06Z,"Minor fix: change the comparison protocol and description in the complex config file from 'complex_compare' to just 'compare' - I changed the name of this protocol but forgot to update the example config
",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/118
MDU6SXNzdWUyOTM2Nzg2NDA=,Add optional --master config flag,CLOSED,2018-02-01T20:50:00Z,2020-04-21T07:15:43Z,2020-04-21T07:15:43Z,"The EVcouplings server frontend spits out a stripped down config for the users to run on local instances. There are two approaches as to how the user could set the job to run locally:

1. Write environment specific parameters (e.g. databases, environment, dependencies, submitter,...) in the config file downloaded from the frontend (a lot of copy-pasting, error-prone if frequent).
2. We allow an option in evcouplings that takes in a ""master"" config (where the databases, environment,.... are defined) and overwrites OR, in general, uses all job-specific params (aka. the ones defined in the job config txt file). So: `evouplings --master master.txt job.txt`. This should be less error-prone, and if users have a config file of a previous job lying around, that should do as well.

An example of a config as it comes from the frontend is here: 
[job.txt](https://github.com/debbiemarkslab/EVcouplings/files/1687155/job.txt)

The full example of what you get from downloading a ""job"" template from evcouplings frontend: 
[example.zip](https://github.com/debbiemarkslab/EVcouplings/files/1687167/example.zip)


@thomashopf you likey likey or ney?

",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/122
MDU6SXNzdWUyOTUxNTc3Njk=,Symbolic link creation as absolute path,CLOSED,2018-02-07T14:29:05Z,2018-02-08T02:44:35Z,2018-02-08T02:44:35Z,"When downloading the databases and using optional create symbolic links, the symbolic links should always refer to the absolute path, not to the relative that the user might have used in the command line. Failing to do so will render the links invalid and the pipeline will fail to run :(",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/123
MDU6SXNzdWUyOTYzOTQwNDk=,"Jobs on o2 fail, looking for a needle in the haystack",CLOSED,2018-02-12T14:30:36Z,2018-02-12T22:42:07Z,2018-02-12T22:42:07Z,"I've gotten celery workers to submit jobs on o2, which is nice.

In theory, the jobs are submitted transparently, meaning that it doesn't matter that _actually_ I'm submitting them from the web, so really there must be a problem with my config files.

You can see all the runs I've tried by `ssh`ing into o2 and navigating to `/n/groups/marks/web/evcouplings_backend/runs`, the most recent run is `0f10e0b64a9a9a71d36635efe1bd9694`.

All jobs fail at the compare stage with the following error:

```python
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 174, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1022, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 528, in standard
    d_intra.to_file(outcfg[""distmap_monomer""])
AttributeError: 'NoneType' object has no attribute 'to_file'
```

I also attach the config of the most recent try: 
[0f10e0b64a9a9a71d36635efe1bd9694_config.txt](https://github.com/debbiemarkslab/EVcouplings/files/1716578/0f10e0b64a9a9a71d36635efe1bd9694_config.txt)


And here is the ""master"" config (aka, the template on which the job config is applied to): 
[masterconfig.txt](https://github.com/debbiemarkslab/EVcouplings/files/1716581/masterconfig.txt)


I can't seem to solve this one myself and help would be *immensely appreciated*",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/127
MDU6SXNzdWUyOTY1MTE2MTE=,utils.helpers.range_overlap does not work correctly with negative numbers,CLOSED,2018-02-12T20:22:30Z,2018-03-10T23:04:14Z,2018-03-10T23:04:13Z,"the range_overlap function does not compute negative interval overlap correctly....

e.g.:
```
range_overlap((-1,-3), (-2, -4)) 
```
should return 1 but returns 0.  Should we fix that or can we just ignore it since we would never expect negative numbers?",b-schubert,https://github.com/debbiemarkslab/EVcouplings/issues/128
MDU6SXNzdWUzMDE3OTQ2NjU=,bug running pipeline on O2,CLOSED,2018-03-02T15:01:11Z,2018-03-03T00:41:51Z,2018-03-03T00:41:51Z,"I get this error message:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/scope.py"", line 179, in resolve
    return self.resolvers[key]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/collections/__init__.py"", line 881, in __getitem__
    return self.__missing__(key)            # support subclasses that define __missing__
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/collections/__init__.py"", line 873, in __missing__
    raise KeyError(key)
KeyError: 'probability'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/scope.py"", line 190, in resolve
    return self.temps[key]
KeyError: 'probability'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 174, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1022, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 630, in standard
    ec_table, d_intra, d_multimer, **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 207, in _make_contact_maps
    ec_set = ecs_longrange.query(""probability >= @c"")
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/frame.py"", line 2116, in query
    res = self.eval(expr, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/frame.py"", line 2186, in eval
    return _eval(expr, inplace=inplace, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/eval.py"", line 262, in eval
    truediv=truediv)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 727, in __init__
    self.terms = self.parse()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 744, in parse
    return self._visitor.visit(self.expr)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 313, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 319, in visit_Module
    return self.visit(expr, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 313, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 322, in visit_Expr
    return self.visit(node.value, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 313, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 644, in visit_Compare
    return self.visit(binop)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 313, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 416, in visit_BinOp
    op, op_class, left, right = self._maybe_transform_eq_ne(node)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 354, in _maybe_transform_eq_ne
    left = self.visit(node.left, side='left')
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 313, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 430, in visit_Name
    return self.term_type(node.id, self.env, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/ops.py"", line 58, in __init__
    self._value = self._resolve_name()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/ops.py"", line 75, in _resolve_name
    res = self.env.resolve(self.local_name, is_local=self.is_local)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_o2/lib/python3.5/site-packages/pandas/core/computation/scope.py"", line 192, in resolve
    raise compu.ops.UndefinedVariableError(key, is_local)
pandas.core.computation.ops.UndefinedVariableError: name 'probability' is not defined",rohanmaddamsetti,https://github.com/debbiemarkslab/EVcouplings/issues/138
MDU6SXNzdWUzMDE5NTAyNzk=,[INTERNAL] o2 conda behaves inconsistently ,CLOSED,2018-03-03T00:51:06Z,2018-03-20T23:03:07Z,2018-03-20T22:56:53Z,"As from https://github.com/debbiemarkslab/EVcouplings/issues/138#issuecomment-370094824

A few guesses:
- [ ] cached stuff?
- [x] PATH",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/139
MDU6SXNzdWUzMDIzMzk3NzM=,Folding comparison contact maps,OPEN,2018-03-05T15:19:33Z,2018-06-05T15:24:39Z,,"So-called ""green lawn"" plots. In the folding stage, make or have the ability to make a contact map for each individual structural model with the following:

1. The contacts in that folded model 
2. The contacts in the real crystal(s) as comparison
3. The ECs used for fold. 

Generate this for the top 10 folded models (or give users ability to modify). This is useful for troubleshooting folding. ",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/141
MDU6SXNzdWUzMDI3NDYxNjM=,Improve error messages in read_species_annotation_columns,CLOSED,2018-03-06T15:28:36Z,2018-06-03T21:27:16Z,2018-06-03T21:27:16Z,"This function needs to throw a clear error when the user provides an annotation file that has no entries in the ""OS"" or ""Tax"" column, something like ""Provided annotation file has no annotation information"".  In addition, this function needs to first confirm that the dataframe contains at least one of the SPECIES_ANNOTATION_COLUMNS - I suspect it will return an error otherwise, which will only affect user-generated annotation files. 

Currently the error returned when both columns are all null is:

```
Traceback (most recent call last):
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 516, in <module>
    app()
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/click/core.py"", line 722, in __call__
    return self.main(*args, **kwargs)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/click/core.py"", line 697, in main
    rv = self.invoke(ctx)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/click/core.py"", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/click/core.py"", line 535, in invoke
    return callback(*args, **kwargs)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 510, in app
    outcfg = run(**kwargs)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 497, in run
    return execute_wrapped(**config)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
    outcfg = execute(**config)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 174, in execute
    outcfg = runner(**incfg)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/complex/protocol.py"", line 568, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/complex/protocol.py"", line 448, in best_hit
    kwargs[""paralog_identity_threshold""]
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/complex/protocol.py"", line 421, in _load_monomer_info
    annotation_table = read_species_annotation_table(annotations_file)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/evcouplings/complex/similarity.py"", line 54, in read_species_annotation_table
    data.loc[:, ""species""] = data.loc[:, annotation_column]
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1325, in __getitem__
    return self._getitem_tuple(key)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/pandas/core/indexing.py"", line 836, in _getitem_tuple
    return self._getitem_lowerdim(tup)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/pandas/core/indexing.py"", line 967, in _getitem_lowerdim
    section = self._getitem_axis(key, axis=i)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1551, in _getitem_axis
    self._has_valid_type(key, axis)
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1434, in _has_valid_type
    error()
  File ""/groups/marks/software/anaconda/envs/evcouplings_env/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1426, in error
    raise TypeError(""cannot use label indexing with a null ""
TypeError: cannot use label indexing with a null key

```",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/144
MDU6SXNzdWUzMDY1NzU3MjQ=,Starting position vs region,CLOSED,2018-03-19T18:14:55Z,2018-03-19T19:05:05Z,2018-03-19T19:05:04Z,"I was just thinking about this with @aggreen and she couldn't give me a definite answer, so just to see if someone has an idea. It's for clarity, rather than anything else.

IF I pass a sequence via FASTA (assume a length of 200) and define a region in it (50 to 100) and also specify that the starting position of the FASTA sequence is 20 (original length of the protein 600), will the computation consider the starting of the region at 50 or 70? Is this important (I assume for alignment purposes it is?)?

Thanks!!! :)",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/149
MDU6SXNzdWUzMDgxODU4MzM=,Circular dependency,CLOSED,2018-03-23T21:35:43Z,2018-03-25T13:44:09Z,2018-03-25T13:44:09Z,"In the latest develop version, there appears to be a circular dependency, that causes the `evcouplings` CLI to fail (before submitting the job).

Stack trace:

```python
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/bin/evcouplings"", line 11, in <module>
    load_entry_point('evcouplings==0.0.2', 'console_scripts', 'evcouplings')()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/pkg_resources/__init__.py"", line 480, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/pkg_resources/__init__.py"", line 2693, in load_entry_point
    return ep.load()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/pkg_resources/__init__.py"", line 2324, in load
    return self.resolve()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/pkg_resources/__init__.py"", line 2330, in resolve
    module = __import__(self.module_name, fromlist=['__name__'], level=0)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/utils/app.py"", line 22, in <module>
    from evcouplings.utils import pipeline, database
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 34, in <module>
    import evcouplings.couplings.protocol as cp
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/couplings/protocol.py"", line 18, in <module>
    from evcouplings.visualize.parameters import evzoom_json
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/visualize/__init__.py"", line 3, in <module>
    from evcouplings.visualize.mutations import *
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/visualize/mutations.py"", line 24, in <module>
    from evcouplings.mutate.calculations import split_mutants
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/mutate/__init__.py"", line 2, in <module>
    from evcouplings.mutate.protocol import *
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_develop/lib/python3.6/site-packages/evcouplings/mutate/protocol.py"", line 17, in <module>
    from evcouplings.visualize.mutations import (
ImportError: cannot import name 'plot_mutation_matrix'
```

Is probably exactly this: https://github.com/debbiemarkslab/EVcouplings/pull/147#discussion_r173625763


:)",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/150
MDU6SXNzdWUzMDgyNjQ5NDA=,KeyError: 'alignment_id',CLOSED,2018-03-24T14:02:37Z,2018-03-30T15:29:46Z,2018-03-30T15:08:35Z,"This problem happens on stable in compare and makes the execution of later stages crash.

AFAIK it happens when no PDB structure to compare with is found, a complete stack follows.

```python
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexes/base.py"", line 2525, in get_loc
    return self._engine.get_loc(key)
  File ""pandas/_libs/index.pyx"", line 117, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/index.pyx"", line 139, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1265, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1273, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'alignment_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 174, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/protocol.py"", line 1034, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/protocol.py"", line 499, in standard
    ""prefix"": aux_prefix,
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/protocol.py"", line 101, in _identify_structures
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/sifts.py"", line 772, in by_alignment
    mapping_df, on=hit_columns
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/frame.py"", line 5370, in merge
    copy=copy, indicator=indicator, validate=validate)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/reshape/merge.py"", line 57, in merge
    validate=validate)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/reshape/merge.py"", line 565, in __init__
    self.join_names) = self._get_merge_keys()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/reshape/merge.py"", line 837, in _get_merge_keys
    left_keys.append(left[lk]._values)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/frame.py"", line 2139, in __getitem__
    return self._getitem_column(key)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/frame.py"", line 2146, in _getitem_column
    return self._get_item_cache(key)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/generic.py"", line 1842, in _get_item_cache
    values = self._data.get(item)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/internals.py"", line 3843, in get
    loc = self.items.get_loc(item)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexes/base.py"", line 2527, in get_loc
    return self._engine.get_loc(self._maybe_cast_indexer(key))
  File ""pandas/_libs/index.pyx"", line 117, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/index.pyx"", line 139, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1265, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1273, in pandas._libs.hashtable.PyObjectHashTable.get_item
[cd174@login04 BB22OPb]$ cat Effector.failed
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexes/base.py"", line 2525, in get_loc
    return self._engine.get_loc(key)
  File ""pandas/_libs/index.pyx"", line 117, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/index.pyx"", line 139, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1265, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1273, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'alignment_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 454, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 174, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/protocol.py"", line 1034, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/protocol.py"", line 499, in standard
    ""prefix"": aux_prefix,
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/protocol.py"", line 101, in _identify_structures
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/compare/sifts.py"", line 772, in by_alignment
    mapping_df, on=hit_columns
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/frame.py"", line 5370, in merge
    copy=copy, indicator=indicator, validate=validate)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/reshape/merge.py"", line 57, in merge
    validate=validate)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/reshape/merge.py"", line 565, in __init__
    self.join_names) = self._get_merge_keys()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/reshape/merge.py"", line 837, in _get_merge_keys
    left_keys.append(left[lk]._values)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/frame.py"", line 2139, in __getitem__
    return self._getitem_column(key)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/frame.py"", line 2146, in _getitem_column
    return self._get_item_cache(key)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/generic.py"", line 1842, in _get_item_cache
    values = self._data.get(item)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/internals.py"", line 3843, in get
    loc = self.items.get_loc(item)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexes/base.py"", line 2527, in get_loc
    return self._engine.get_loc(self._maybe_cast_indexer(key))
  File ""pandas/_libs/index.pyx"", line 117, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/index.pyx"", line 139, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1265, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1273, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'alignment_id'
```

In the config for this file, the pdb alignment method is set so:
```text
  pdb_alignment_method: jackhmmer
```

@aggreen should have fixed this on develop but due to the circular dependency, it's hard to test, and I would keep it open until confirmed fixed. Also, I remember @aggreen saying yesterday that it's odd that it also happened using `jackhmmer`, so just for the reference.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/151
MDU6SXNzdWUzMDgyNjUzNzQ=,environment > configuration > source activate is ignored,CLOSED,2018-03-24T14:08:38Z,2018-03-31T09:24:53Z,2018-03-30T15:06:27Z,"In `/n/groups/marks/users/assaf/dor/BB22OPb` check the `Immunity_config.txt` and `Immunity.failed` files. There is a major inconsistency:

In the config:
```
environment:
  configuration:
  - source activate evcouplings_develop
```

but in the stack trace:
```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexes/base.py"", line 2525, in get_loc
    return self._engine.get_loc(key)
  File ""pandas/_libs/index.pyx"", line 117, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/index.pyx"", line 139, in pandas._libs.index.IndexEngine.get_loc
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1265, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File ""pandas/_libs/hashtable_class_helper.pxi"", line 1273, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'alignment_id'
...
```

Notice, that `evcouplings_stable` env is being used instead of the one indicated in the config. This needs fixing before _submission_, otherwise, we cannot claim reproducibility.

The reason why this phenomenon occurred in this case, is that the source being activated upon submission via CLI was `evcouplings_stable`, a.k.a.: it seems that the env being considered is the one from the login node submitting the job, which is very odd.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/152
MDU6SXNzdWUzMDgzNTYxNTE=,Change some flag names and entry points,CLOSED,2018-03-25T14:54:18Z,2018-04-26T19:40:01Z,2018-04-26T19:40:00Z,"I suggest that for `0.0.3` we change some flags both for clarity and _""seriousness""_:

1. The flag `--yolo` --> `--overwrite-previous-results` or `--overwrite-results`. More verbose: yes, more explicit: also. But especially: feels way less awkward to tell someone in another lab to use that flag when ev fails on existing results. + the `-y` option will still remain for those that prefer the short version.
2. The entry point `evcouplings_dbupdate`, either `evcouplings databases update` borrowing the idea from https://github.com/debbiemarkslab/EVcouplings/issues/117#issuecomment-360989845 or `evcouplings_databases` as it's not always an `update` operation (e.g. the first time it's a create operation) and also ""db"" is an obscure term for most humans.

If anyone disagrees, has other suggestions or is against this, please comment.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/155
MDU6SXNzdWUzMTEzNDc3OTQ=,Update configs for v0.0.3,CLOSED,2018-04-04T18:48:37Z,2018-04-05T15:32:40Z,2018-04-05T15:32:40Z,"Last outstanding items before release v0.0.3

1. Remove old orchestra configs
2. Update o2 configs to **current** working version, which means:
  - remove `source activates`
  - append `o2` at the end of databases (once @b-schubert will update the CRON jobs to run on o2 we can revert this, but for now, we should put it this way, otherwise we get emails from collaborators saying ""it failed when looking up the db"").

Once these are done and a PR for them has been merged, we can release 0.0.3, which is also the _publishable_ candidate",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/157
MDU6SXNzdWUzMTE3MzQ4MjQ=,Deploy to pip rising errors,CLOSED,2018-04-05T19:13:42Z,2018-04-08T12:26:17Z,2018-04-08T12:26:16Z,"@b-schubert @thomashopf the autodeploy to pip is still not working correctly, **but the package seems to be deployed anyway**.

Now pip authenticates correctly thanks to @b-schubert fixes ( see: https://travis-ci.org/debbiemarkslab/EVcouplings/jobs/362726271#L1224 ) but it apparently **fails** to deploy the new release (see: https://travis-ci.org/debbiemarkslab/EVcouplings/jobs/362726271#L1344 ).

Nevertheless, from the old pip: https://pypi.python.org/pypi/evcouplings/0.0.3 (although notice that the Markdown has not been processed) and on the new pip: https://pypi.org/project/evcouplings .

I don't know how to fix this ",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/163
MDU6SXNzdWUzMjIzMzQ4MzU=,Auto range not working when skipping align?,CLOSED,2018-05-11T15:17:13Z,2018-05-11T15:55:47Z,2018-05-11T15:47:18Z,"Frank (in Chris' group) reports the following error:

- Conf: [PROT.txt](https://github.com/debbiemarkslab/EVcouplings/files/1995840/PROT.txt)
- stderr: [PROT_stderr.log](https://github.com/debbiemarkslab/EVcouplings/files/1995839/PROT_stderr.log)
- .failed: [PROT.failed.txt](https://github.com/debbiemarkslab/EVcouplings/files/1995846/PROT.failed.txt)


Notice that in the config I've changed all sensible data to `PROT`.

As you can tell, he is only interested in running the couplings, given that he already run align and the namespace is conserved etc.

My intuition is that in `global` the missing explicit `region` causes the error, given that the pipeline is executed not from the beginning @aggreen @thomashopf @b-schubert can you help out?

Thanks!


**edit**: I've asked Frank to change the config with an explicit range, I'll update this issue after that",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/167
MDU6SXNzdWUzMjQwODM2MjE=,Add documentation for distance map objects,OPEN,2018-05-17T15:51:23Z,2018-05-17T15:51:23Z,,Realized the .npy and .csv distance map files could be confusing to new users - they're explained in the distance tutorial but not in the output files tutorial. Note for me to add them in :),kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/168
MDU6SXNzdWUzMjQ0MjQyODg=,Improve error checking in describe_concatenation,CLOSED,2018-05-18T14:04:13Z,2018-06-03T21:26:41Z,2018-06-03T21:26:41Z,"If the genome location file is empty, the code throws an error. This should be modified to just return None. 
",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/169
MDU6SXNzdWUzMjYwMzk2NTg=,protein ids as input,CLOSED,2018-05-24T09:34:15Z,2018-06-06T07:55:47Z,2018-05-24T13:29:28Z,"Hi,

I would like to use your package for a list of protein pairs and calculate the EVComplex scores. Something similar to this:
https://evcomplex.hms.harvard.edu/results/test_2018-05-17_130958_3381
but automatically, since my list is big and I don't want to do it online.

Is it possible that I give protein names instead of multiple alignment results and I get the complex scores for each pair of proteins? If yes, then I appreciate a lot your help on introducing me to the functions which I can use to facilitate computation of the complex scores.

looking very much forward to your response.

Best,
Nooshin",omranian,https://github.com/debbiemarkslab/EVcouplings/issues/170
MDU6SXNzdWUzMjk1MDg1MDc=,Fold stage: contact maps with ECs used for folding,OPEN,2018-06-05T15:25:54Z,2018-06-05T15:26:04Z,,"When we generate a model with 100 ECs, we may have actually input 120 ECs and then filtered some out due to SS clashes. So, we need to generate new contact maps that display all 120 but with the 20 filtered ECs as x's. ",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/172
MDU6SXNzdWUzMzI0NDA2MjM=,"""Not a valid index for sequence alignment""",CLOSED,2018-06-14T14:58:35Z,2019-02-19T08:29:10Z,2019-02-19T08:29:10Z,"Seems related to #151 ( 
@aggreen ?) somehow, getting it from a run via the web interface.

```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 387, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 183, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1034, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 499, in standard
    ""prefix"": aux_prefix,
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 101, in _identify_structures
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/compare/sifts.py"", line 715, in by_alignment
    map_j, map_j_df = _create_mapping(r)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/compare/sifts.py"", line 644, in _create_mapping
    ali[r[""alignment_id""]], r[""alignment_start""], r[""alignment_end""]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_production/lib/python3.5/site-packages/evcouplings/align/alignment.py"", line 647, in __getitem__
    ""Not a valid index for sequence alignment: {}"".format(index)
KeyError: 'Not a valid index for sequence alignment: sp|O00212|RHOD_HUMAN/19-58'
```

check `/n/scratch2/105280abb7b4c88bbc1e7db8761d45e8`. I am 80% sure that the version running on o2 for the web server is the latest code on develop merged with my web branch. I'm keeping this here as question to see if this was a known, resolved issue. If not, might be worth checking out.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/175
MDU6SXNzdWUzMzMwNjg2MzQ=,Application termination not detected on O2,CLOSED,2018-06-17T14:53:22Z,2019-01-11T23:10:38Z,2019-01-11T23:10:38Z,"See b0.2 and b0.3 runs for `/n/scratch2/105280abb7b4c88bbc1e7db8761d45e8`, both terminated by slurm because of excess memory usage, but there is no .terminated file.

Two possible reasons:
1) The current configuration terminates jobs right away with SIGKILL or the time window before SIGKILL following some other signal is too short to wind things down - in this case cannot do anything but ask RC to change the slurm config

2) slurm uses a signal that is not in the list of signals that are currently caught - but according to documentation on the web it should be SIGTERM unless there is a SIGKILL right away

Right now the pipeline catches the following signals (https://github.com/debbiemarkslab/EVcouplings/blob/develop/evcouplings/utils/pipeline.py#L451):
* SIGINT
* SIGTERM
* SIGUSR1
* SIGUSR2 (used by LSF on O1 for job termination)
",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/176
MDU6SXNzdWUzMzM3NzYwMTc=,MultiSegmentCouplingsModel needs type checking of input segments,OPEN,2018-06-19T17:53:02Z,2018-06-19T18:55:51Z,,"If the user inputs a segment in list format instead of an EVcouplings.mapping.Segment object, the code throws the following unhelpful error:

```
AttributeError                            Traceback (most recent call last)
<ipython-input-27-2f5602e058af> in <module>()
----> 1 model = MultiSegmentCouplingsModel(""../complex_ecs/04_SCPA_SMC_tail/04_SCPA_SMC_tail.model"", config[""segments""])

/Users/AG/marks_lab_scripts/EVcouplings/evcouplings/couplings/mapping.py in __init__(self, filename, precision, file_format, *segments, **kwargs)
    378 
    379         first_segment = segments[0]
--> 380         index_start = first_segment.region_start
    381         r = SegmentIndexMapper(
    382             True,  # use focus mode

AttributeError: 'list' object has no attribute 'region_start'
```
This should be type checked and fixed to be something more readable

In addition, if the users calls MultiSegmentCouplingsModel with no segments provided, instead of raising a valueError, we get an exception during raising of the exception because the exception doesn't derive from a base exception. ",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/177
MDU6SXNzdWUzMzM3NzgwNzg=,Expand evcouplings_dbupdate to download complex databases and SIFTS mapping files,OPEN,2018-06-19T17:59:08Z,2018-07-03T17:21:49Z,,"From #96 .

Re-assigning @b-schubert and @aggreen , and putting up for the next release. If this doesn't seem like a prio, then put it up for 0.0.6",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/178
MDU6SXNzdWUzMzQ1Nzk5MzU=,o2 cron-job for dbupdate,CLOSED,2018-06-21T17:04:01Z,2019-01-07T21:47:58Z,2019-01-07T21:47:57Z,"Just putting this as an issue, so we can follow up on it.

@b-schubert have you had time to look into this?",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/179
MDU6SXNzdWUzMzg2ODMwMDc=,Add MI as option for couplings stage,OPEN,2018-07-05T18:36:58Z,2018-07-07T15:59:20Z,,"Would be useful to have, in addition to mean field/plm",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/182
MDU6SXNzdWUzNTEyNzEyNDU=,EVcomplex auxiliary outputs,OPEN,2018-08-16T16:06:40Z,2018-08-20T14:45:12Z,,"EVcomplex frequencies and EC enrichment files both need to be created with the correct numbering. 

1. During the concatenate stage, a frequencies file is output but it does not have segment numbering, just column frequency numbering, and thus isn't really useful out of the box

2. Calculate EC enrichment for each monomer independently from the concatenated ECs, output to a big file with correct segment numbering in compare stage",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/185
MDU6SXNzdWUzNjc0OTM4ODA=,ValueError: HMMER added identifier prefixes to alignment because of non-unique sequence identifiers,CLOSED,2018-10-06T20:39:12Z,2019-02-18T17:46:35Z,2019-02-18T17:46:35Z,"Ref: #175 #151

A job for [alpha-synuclein](https://www.uniprot.org/uniprot/P37840) failed on compare with the following log:

```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1044, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 500, in standard
    ""prefix"": aux_prefix,
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 102, in _identify_structures
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/sifts.py"", line 723, in by_alignment
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/sifts.py"", line 172, in find_homologs
    ali = Alignment.from_file(a, ""stockholm"")
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/align/alignment.py"", line 648, in from_file
    raise_hmmer_prefixes=raise_hmmer_prefixes
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/align/alignment.py"", line 176, in read_stockholm
    ""HMMER added identifier prefixes to alignment because of non-unique ""
ValueError: HMMER added identifier prefixes to alignment because of non-unique sequence identifiers. Either some sequence identifier is present twice in the sequence database, or your target sequence identifier is the same as an identifier in the database. In the first case, please fix your sequence database. In the second case, please choose a different sequence identifier for your target sequence that does not overlap with the sequence database.
```

This is different from the issues reported above, but seems related.

It is worth mentioning that this is running from the branch of #166 , which if I'm not mistaken doesn't include the changes of #180 

I'll try to merge the latest develop into Management and run this again. Maybe @thomashopf you immediately see what happens and can deny/confirm that that's the issue.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/189
MDU6SXNzdWUzNzI2OTkxNTg=,Missing required param `pseudo_count`,CLOSED,2018-10-22T21:03:01Z,2018-10-23T21:37:55Z,2018-10-23T21:04:00Z,"(Note to self)

in `/n/groups/marks/web/backend/runs` check:
- `5f61e22c929cd14d1383f3e42fc2fac7/5f61e22c929cd14d1383f3e42fc2fac7_b0.2.failed`
- `21c3094ae7c1995a67029ef52e794f41/21c3094ae7c1995a67029ef52e794f41_e10.failed`


There seems to be a missing param as a dependency of another setting in the options of the job sumission: figure out what and amend in the backend.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/190
MDU6SXNzdWUzNzMyMDM5OTU=,Name 'probability' is not defined in couplings,CLOSED,2018-10-23T21:12:45Z,2018-10-25T14:59:12Z,2018-10-25T14:59:12Z,"Running a job using the couplings `mean_field` protocol will result in an error (previously #190, now that is amended). Here's the [config.txt](https://github.com/debbiemarkslab/EVcouplings/files/2508023/config.txt).

The output of the `.failed` file:
```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/scope.py"", line 181, in resolve
    return self.resolvers[key]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/collections/__init__.py"", line 881, in __getitem__
    return self.__missing__(key)            # support subclasses that define __missing__
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/collections/__init__.py"", line 873, in __missing__
    raise KeyError(key)
KeyError: 'probability'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/scope.py"", line 192, in resolve
    return self.temps[key]
KeyError: 'probability'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1044, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 631, in standard
    ec_table, d_intra, d_multimer, **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 208, in _make_contact_maps
    ec_set = ecs_longrange.query(""probability >= @c"")
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/frame.py"", line 2847, in query
    res = self.eval(expr, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/frame.py"", line 2962, in eval
    return _eval(expr, inplace=inplace, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/eval.py"", line 291, in eval
    truediv=truediv)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 739, in __init__
    self.terms = self.parse()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 756, in parse
    return self._visitor.visit(self.expr)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 321, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 327, in visit_Module
    return self.visit(expr, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 321, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 330, in visit_Expr
    return self.visit(node.value, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 321, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 656, in visit_Compare
    return self.visit(binop)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 321, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 425, in visit_BinOp
    op, op_class, left, right = self._maybe_transform_eq_ne(node)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 362, in _maybe_transform_eq_ne
    left = self.visit(node.left, side='left')
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 321, in visit
    return visitor(node, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/expr.py"", line 439, in visit_Name
    return self.term_type(node.id, self.env, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/ops.py"", line 58, in __init__
    self._value = self._resolve_name()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/ops.py"", line 75, in _resolve_name
    res = self.env.resolve(self.local_name, is_local=self.is_local)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/pandas/core/computation/scope.py"", line 194, in resolve
    raise compu.ops.UndefinedVariableError(key, is_local)
pandas.core.computation.ops.UndefinedVariableError: name 'probability' is not defined
```

I assume that a later computational step assumes the `probability` column be present in a generated file/pandas, but `mean_field` won't produce this column as the pipeline expects, resulting in this failure. Maybe, on the other hand, it's just another required parameter missing? The latter seems unlikely.

Pinging @thomashopf @aggreen @sophiamersmann and @b-schubert to figure out if this is an actual bug (in which case: high prio) or just a missing param (in which case: not that high prio).",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/191
MDU6SXNzdWUzNzUwNDI1NTE=,mutation_matrix_plot_files rename,CLOSED,2018-10-29T14:27:32Z,2018-10-29T21:08:33Z,2018-10-29T21:08:33Z,"In essence: 
```
mutation_matrix_plot_files --> mutation_matrix_[epistatic|independent|...]_plot_[html|pdf]_file
```


I would like to propose a rename of the `mutation_matrix_plot_files` to single file names in the outconfig. I've already implemented this change on the `management` PR, see https://github.com/debbiemarkslab/EVcouplings/pull/166/commits/b0760231b7aaffdb741284e9421bc92873e27253

Why?

Using an array to store the plots makes it a bit tedious to parse the relevant files for the web server. On the other hand, storing it how I implemented it requires you to know which types of plots you want to store (e.g. `epistatic` vs. `independent` vs. ...) for stuff like the archive file.

Yay, nay?",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/193
MDU6SXNzdWUzODMyMzI5NDY=,Trying to compile an impossible URL,OPEN,2018-11-21T17:52:23Z,2018-12-18T18:26:34Z,,"When submitting a complex job via evcouplings.org, I run into the following `.failed`:

```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_w
rapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1044, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/compare/protocol.py"", line 755, in complex
    outcfg, first_sifts_map = _identify_monomer_structures(""first"", outcfg, firs
t_aux_prefix)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/compare/protocol.py"", line 741, in _identi
fy_monomer_structures
    prefix=aux_prefix
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/compare/protocol.py"", line 102, in _identi
fy_structures
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/compare/sifts.py"", line 760, in by_alignme
nt
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
b/python3.5/site-packages/evcouplings/compare/sifts.py"", line 169, in find_homol
ogs
    ar = jackhmmer_search(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/li
[cd174@login06 0507c25b15ede6ed625b05261cf930da]$ cat 0507c25b15ede6ed625b05261cf930da.failed
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1044, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 755, in complex
    outcfg, first_sifts_map = _identify_monomer_structures(""first"", outcfg, first_aux_prefix)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 741, in _identify_monomer_structures
    prefix=aux_prefix
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 102, in _identify_structures
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/sifts.py"", line 760, in by_alignment
    **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/sifts.py"", line 169, in find_homologs
    ar = jackhmmer_search(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/align/protocol.py"", line 1049, in jackhmmer_search
    full_sequence_file
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/align/protocol.py"", line 211, in fetch_sequence
    allow_redirects=True
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/system.py"", line 267, in get
    r.status_code, url
evcouplings.utils.system.ResourceError: Invalid status code (404) for URL:http://www.uniprot.org/uniprot/sp|P12345|AATM_RABIT.fasta
```


The config (-management) is attached here: 
[conf.txt](https://github.com/debbiemarkslab/EVcouplings/files/2605269/conf.txt)


This is odd, because if I pass such an identifier in the `monomer` pipeline, it runs though just okay (e.g.: another job [conf2.txt](https://github.com/debbiemarkslab/EVcouplings/files/2605275/conf2.txt)). I assume in the complex pipeline there's a disassembly of the identifier missing?

Needs digging.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/194
MDU6SXNzdWUzODYyOTcxMTY=,Consistency with _files keys?,CLOSED,2018-11-30T18:19:09Z,2018-12-16T10:24:31Z,2018-12-16T10:24:31Z,"This is an annoying issue (I'm sorry), and it has to do mainly with consistency.

Usually, when `*_files` keys are encountered in the out config, they are lists of files. That is not the case with `remapped_pdb_files`, where the `*_files` key points to a dictionary where the keys of the dictionary are the filenames and the value of the dictionary entry is an int cross-referencing the structure hits file.

This doesn't really produce any issue so far for creating the final archive or writing the file to an external source (like is needed in the web runs), but IMO it is inconsistent and creates a bit of confusion. If type checks were in place, this would definitely create an exception (dictionary vs. list).

I think it would be better to use a list for these files and outsource the mapping from filename to structure hit in another outconfig key, or even embed this mapping in the structure hits file.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/195
MDU6SXNzdWUzOTEyOTU3Mzc=,standard couplings protocol fails for RNA,CLOSED,2018-12-14T22:07:49Z,2020-07-24T07:52:03Z,2020-07-24T07:48:44Z,"Exctingly, Jonny and Mafalada are doing the first RNA runs for the EVcouplings pipeline. We've run into what might be the first of many small issues in adapting:

```
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 456, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 176, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/couplings/protocol.py"", line 798, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/couplings/protocol.py"", line 310, in standard
    generate_line_plot=is_single_segment
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/couplings/protocol.py"", line 739, in _postprocess_inference
    evzoom_json(model) + ""\n""
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/visualize/parameters.py"", line 174, in evzoom_json
    map_, logo, matrix = evzoom_data(model, **kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/visualize/parameters.py"", line 75, in evzoom_data
    model.alphabet_map[c] for c in reorder
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/visualize/parameters.py"", line 75, in <listcomp>
    model.alphabet_map[c] for c in reorder
KeyError: 'K'
```

What's happening is that the default value for reorder in the evzoom_json function is a 20-letter protein alphabet, and this fails when called for RNA. 

Proposed solution:
Because this is the final step of the postprocess inference function, it doesn't seem worth it to make an entirely new protocol for RNA. So, I'm proposing to change lines 741 in couplings/protocol.py to:

```
     if len(model.alphabet) != 20: #probably can do nicer checking here
            f.write(
                evzoom_json(model, reorder=None) + ""\n""
            )
     else:
            f.write(
                evzoom_json(model) + ""\n""
            )",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/196
MDU6SXNzdWUzOTIyNTY2OTA=,Adding checks to see if alignment wandered off,OPEN,2018-12-18T17:20:00Z,2018-12-18T18:24:42Z,,"Would like to make a function to:
1) Check if query sequence was hit in the alignment
2) If 1) is true, how well does the self hit in the alignment match to the query
3) Compare the final HMM to the query

This can help us decide if our alignment has 'wandered off' in sequence space, and therefore less useful.",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/197
MDU6SXNzdWUzOTYzMDIzMjc=,Associate available chains with PDB object,OPEN,2019-01-06T22:41:29Z,2019-01-06T22:41:29Z,,evcouplings.compare.pdb.PDB should have an attribute that lists all available chains in a model (i.e. anything that is a valid argument to PDB.get_chain()),thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/198
MDU6SXNzdWUzOTgzNTk2MzE=,Wrong exception raise,CLOSED,2019-01-11T16:25:57Z,2024-07-08T11:35:58Z,2024-07-08T11:35:58Z,"https://github.com/debbiemarkslab/EVcouplings/blob/0b563c89394ab1a945e5f4ce9af36a5c53c44c60/evcouplings/couplings/mapping.py#L377

should be raise ValueError(""..."")",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/199
MDU6SXNzdWU0MDMxMDI4MTY=,plmc runtime issues single vs. double precision,OPEN,2019-01-25T10:46:30Z,2019-02-04T01:02:24Z,,"According to Frank, the single-precision binary (meant to be faster) we use for the pipeline on O2 takes longer than the double-precision version. I think this is particularly interesting for you @aggreen and @kpgbrock.

Needs to be evaluated if this speed regression is generally the case and if the issue persists after a single-precision recompile on O2 (could be some vector instruction set or library issue after all, the one in current use was compiled on O1 way back). If single-precision still doesn't give any speed gains, we probably should switch to the double-precision version.

At least for N=1, Frank experienced quite some differences in EC precision (and non-deterministic results between multi-CPU reruns with the double precision version), so that is also something to keep in mind and test.

@jingraham do you have any ideas what might be going on here?",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/200
MDU6SXNzdWU0MDMxMDU4NTM=,Folding protocol crashes due to cleanup of non-existing folder,OPEN,2019-01-25T10:54:31Z,2019-01-25T10:54:31Z,,"The following line can crash the pipeline if no folding was carried out before (e.g. because of empty EC sets), or maybe due to some race condition.

https://github.com/debbiemarkslab/EVcouplings/blob/ab44065d5052a34d878e7a4bb4d2afe7e7d105a0/evcouplings/fold/protocol.py#L524

Solution is to call create_prefix_folders outside the individual folding processes after the aux path is computed (https://github.com/debbiemarkslab/EVcouplings/blob/ab44065d5052a34d878e7a4bb4d2afe7e7d105a0/evcouplings/fold/protocol.py#L471) and before mp.starmap is called.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/201
MDU6SXNzdWU0MDM1MDc4Nzk=,is there any protocol that we can follow?,CLOSED,2019-01-27T02:59:59Z,2019-01-29T17:55:28Z,2019-01-27T10:44:04Z,why install the optional softwares is so complex?,N/A,https://github.com/debbiemarkslab/EVcouplings/issues/202
MDU6SXNzdWU0MDM4NzA5MTU=,Log execution time for stages,OPEN,2019-01-28T15:33:27Z,2019-01-28T15:35:12Z,,"From a management perspective, being able to log how long a stage executes for is useful information (undoubtably for the web, but even for fair share on o2 etc.).

This would translate in a function in utils/pipeline.py that gets called at the beginning **and end** (suppose you only run one stage and want logging on how long that took) of this for loop https://github.com/debbiemarkslab/EVcouplings/blob/develop/evcouplings/utils/pipeline.py#L141 . This is obviously optional, I'd add a key in `management`, called `report_execution_time` that may be not set or `False` for no reporting, and only if explicitly set to `True` will report said execution time.

I think #166 is already way too feature packed to put this in as well, so I'm gonna do this once that PR is merged.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/204
MDU6SXNzdWU0MDYwMDkxNTQ=,Variable names start with number,OPEN,2019-02-02T18:35:17Z,2019-02-18T18:04:36Z,,"Some of the variable names start with a number, such as 1st_uc in _alignment_statistics.csv, which will make them invalid variable names when the files are imported in some programming languages, like Matlab. Would suggest avoiding this (e.g. change to ""first_uc"" in the case above).",poelwijk,https://github.com/debbiemarkslab/EVcouplings/issues/205
MDU6SXNzdWU0MDY5MzE5Njg=,Update example notebooks and make sure they can be executed on the spot,OPEN,2019-02-05T19:11:05Z,2019-02-05T19:11:05Z,,"* make sure everything is up to date
* make sure no relative paths are used, or if files are needed, put comments that user action is required (e.g. in distance calculations notebook, refers to directory ../databases/sifts/... which blocks users from direct execution)
* asf",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/206
MDU6SXNzdWU0MTM5OTY4MTU=,Add a resolution filter to PDBs for comparison,OPEN,2019-02-25T08:59:20Z,2019-02-25T08:59:20Z,,It would be a great feature to have a filter in the comparison stage that will allow users to only compare to structures with a certain resolution. This would require finding a table to download from PDB to extract this information. Extracting the information directly from PDB structures will be too expensive. ,aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/207
MDU6SXNzdWU0MTQwNTE4MTk=,Finding best coverage when searching for structures,OPEN,2019-02-25T11:09:22Z,2019-02-26T15:06:30Z,,"In the compare stage, the pipeline takes the top N structural hits based on their similarity to the target. This can be problematic because sometimes the user wants to maximize for the amount of input sequence covered by a structure. 
Create a flag called something like maximize_structural_coverage and write a greedy algorithm to take the longest hits. ",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/208
MDU6SXNzdWU0MTQxNzI2Nzc=,Inter distance calculations shouldn't use same region on same chain,OPEN,2019-02-25T15:51:22Z,2019-02-25T20:26:12Z,,"(Note: cannot exclude the case of both entities being on the same chain in general, since that is a valid situation e.g. if the structure has both entities fused in one protein, or for multidomain analyses)",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/209
MDU6SXNzdWU0MTQyODk4OTU=,Use dedicated alignment for hmmsearch-based structure search,OPEN,2019-02-25T20:22:37Z,2019-02-25T20:24:43Z,,"Right now, comparison using alignment from align stage may lead to different structure comparisons for different bitscore/e-value thresholds. Would be better to build a dedicated alignment in the compare stage (e.g. using 3 iterations against a redundancy-reduced database like uniref 50)",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/210
MDU6SXNzdWU0MTQyOTA1MTY=,Handle non-200 return codes when building SIFTS sequence file,CLOSED,2019-02-25T20:24:14Z,2023-05-11T11:08:18Z,2023-05-11T11:08:18Z,"Right now only handles connection failures, but nowadays Uniprot ID mapping also throws 4xx return codes at us (which is caught in fetch_mapping and then reraised as a ResourceError). Retries should handle any type of failed download.",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/211
MDU6SXNzdWU0Mjc3MTA0MDU=,Pipeline fails at producing visualizations,CLOSED,2019-04-01T13:37:55Z,2019-04-02T20:20:20Z,2019-04-02T20:20:20Z,"From a web submitted run (see `/n/groups/marks/web/backend/runs/7cbb0143a58e83b4b1373af43408d85d`):

```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1044, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1001, in complex
    second_segment_name, **kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 377, in _make_complex_contact_maps
    output_file=output_file
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 318, in plot_complex_cm
    scale_sizes=kwargs[""scale_sizes""]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/visualize/pairs.py"", line 488, in complex_contact_map
    multimer=d_multimer_i, **new_kwargs
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/visualize/pairs.py"", line 337, in plot_contact_map
    style=scale_func(secstruct_style), ax=ax
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/visualize/pairs.py"", line 842, in plot_secondary_structure
    start_i, end_i, segments_i = _extract_secstruct(secstruct_i, x_range)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/visualize/pairs.py"", line 811, in _extract_secstruct
    first_pos, last_pos = min(secstruct), max(secstruct) + 1
ValueError: min() arg is an empty sequence
```

Also see: https://evcouplings.org/jobs/7cbb0143a58e83b4b1373af43408d85d (this link is only valid for 6d)",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/212
MDU6SXNzdWU0MjgyMTQ4OTM=,Mapping from target to model positions does not contain all positions of internal model numbering,OPEN,2019-04-02T13:03:43Z,2020-04-03T15:28:47Z,,"```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/protocol.py"", line 576, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/protocol.py"", line 454, in best_hit
    kwargs[""paralog_identity_threshold""]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/protocol.py"", line 427, in _load_monomer_info
    annotation_table = read_species_annotation_table(annotations_file)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/similarity.py"", line 61, in read_species_annotation_table
    annotation_file
evcouplings.utils.config.InvalidParameterError: provided annotation file 7a74f5bd34b11f505e287d1fd767fbf9/align_1/7a74f5bd34b11f505e287d1fd767fbf9_annotation.csv has no annotation information
[cd174@login06 runs]$ clearcat 00c7b99d38370a666e9d32e337d25cd0/00c7b99d38370a666e9d32e337d25cd0.failed^C
[cd174@login06 runs]$ cat 00c7b99d38370a666e9d32e337d25cd0/00c7b99d38370a666e9d32e337d25cd0.failed
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/couplings/mapping.py"", line 219, in patch_model
    for pos in model.index_list
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/couplings/mapping.py"", line 219, in <listcomp>
    for pos in model.index_list
KeyError: 4

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/mutate/protocol.py"", line 326, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/mutate/protocol.py"", line 202, in complex
    c = MultiSegmentCouplingsModel(kwargs[""model_file""], *segment_objects)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/couplings/mapping.py"", line 388, in __init__
    r.patch_model(model=self)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/couplings/mapping.py"", line 223, in patch_model
    ""Mapping from target to model positions does ""
ValueError: Mapping from target to model positions does not contain all positions of internal model numbering
```


Runs with this error:
```
/n/groups/marks/web/backend/runs/

8dbdbb37177af143b6a2f815e805dd05
80600be20c3735f21011334f3b1235e0
9e1b6ed888a8a15aecce724939bca904
90c3840d96414159e4d37765a38f71e2
2ef90e06afc175f200bac8dab09a9ed5
00c7b99d38370a666e9d32e337d25cd0
```

That's 7 out of 15 failed jobs.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/213
MDU6SXNzdWU0MjgyMTU3MzE=,InvalidParameterError: provided annotation file has no annotation information,OPEN,2019-04-02T13:05:28Z,2019-06-18T14:26:19Z,,"```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/protocol.py"", line 576, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/protocol.py"", line 454, in best_hit
    kwargs[""paralog_identity_threshold""]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/protocol.py"", line 427, in _load_monomer_info
    annotation_table = read_species_annotation_table(annotations_file)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/complex/similarity.py"", line 61, in read_species_annotation_table
    annotation_file
evcouplings.utils.config.InvalidParameterError: provided annotation file 7a74f5bd34b11f505e287d1fd767fbf9/align_1/7a74f5bd34b11f505e287d1fd767fbf9_annotation.csv has no annotation information
```

One job failed with this error:
`/n/groups/marks/web/backend/runs/7a74f5bd34b11f505e287d1fd767fbf9 `",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/214
MDU6SXNzdWU0MjgyMTY3ODA=,Request Timeout,CLOSED,2019-04-02T13:07:35Z,2019-06-18T14:09:13Z,2019-06-18T14:09:13Z,"This one just as an FYI. It seems to have occurred only with complex jobs, but I wouldn't exclude that it may happen with monomer jobs, too.

```
Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 1254, in do_open
    h.request(req.get_method(), req.selector, req.data, headers)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 1107, in request
    self._send_request(method, url, body, headers)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 1152, in _send_request
    self.endheaders(body)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 1103, in endheaders
    self._send_output(message_body)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 934, in _send_output
    self.send(msg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 877, in send
    self.connect()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 1253, in connect
    super().connect()
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/http/client.py"", line 849, in connect
    (self.host,self.port), self.timeout, self.source_address)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/socket.py"", line 712, in create_connection
    raise err
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/socket.py"", line 703, in create_connection
    sock.connect(sa)
TimeoutError: [Errno 110] Connection timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 389, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/utils/pipeline.py"", line 185, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 1044, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 865, in complex
    first_sifts_map, ""first"", first_chain_name
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/protocol.py"", line 840, in _compute_monomer_distance_maps
    raise_missing=kwargs[""raise_missing""]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/distances.py"", line 1170, in remap_chains
    structures, sifts_result.hits.pdb_id, raise_missing
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/distances.py"", line 647, in _prepare_structures
    pdb_id_list, structures, raise_missing
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/pdb.py"", line 938, in load_structures
    structures[pdb_id] = PDB.from_id(pdb_id)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/evcouplings/compare/pdb.py"", line 537, in from_id
    return cls(fetch(pdb_id))
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/mmtf/api/default_api.py"", line 84, in fetch
    decoder.decode_data(get_raw_data_from_url(pdb_id))
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/site-packages/mmtf/api/default_api.py"", line 56, in get_raw_data_from_url
    response = urllib2.urlopen(request)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 163, in urlopen
    return opener.open(url, data, timeout)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 466, in open
    response = self._open(req, data)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 484, in _open
    '_open', req)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 444, in _call_chain
    result = func(*args)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 1297, in https_open
    context=self._context, check_hostname=self._check_hostname)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_backend_develop/lib/python3.5/urllib/request.py"", line 1256, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 110] Connection timed out>
```",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/215
MDU6SXNzdWU0MjgyMzcxMzE=,Analysis of 10 days of submitted jobs,CLOSED,2019-04-02T13:46:05Z,2019-06-18T14:09:05Z,2019-06-18T14:09:05Z,"Looking at the jobs that were submitted over the last 10 days via web:

1. 208 individual jobs were submitted
   1. 109 complex jobs, and 99 **individual** monomer jobs
   1. 179 jobs have summaries, thus finished somehow (I don't know if summaries get produced even if one of the batches fails, @thomashopf ?)
   1. 15 jobs have .failed files, thus failed. All failed jobsare complex jobs. There are 5 types of errors, 1 can't be fixed, 1 is on me RE sequence_id, the rest: look at opened issues.

1. The monomer jobs submitted total 279 actual SLURM submissions (considering b cut-offs as batches), of which 259 finished. Since no monomer jobs failed, 20 **batch** runs timed out (this means that in one job with 3 batch runs, one might have still produced results!). That's ~8%.

Difficult to get the numbers for complex jobs (not gonna dwell into the details here), but it's probably >8% based on frequency of emails.",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/216
MDU6SXNzdWU0NjA0NTA1MDE=,Add MMseqs2 as align protocol,OPEN,2019-06-25T14:13:27Z,2019-06-28T07:26:35Z,,"@thomashopf don't know how you feel about this, but I think this could be an interesting development for the future in case EVcouplings can be run on a bigger machine.

[Edit]: keeping in mind that one could just use MMseqs externally and chose the `existing` protocol, but tying it in would probably be nice",sacdallago,https://github.com/debbiemarkslab/EVcouplings/issues/218
MDU6SXNzdWU0NjM0OTQ1MDg=,Add 'checkpoint_domtbl' option to alignment stage,CLOSED,2019-07-03T00:51:49Z,2019-07-03T17:46:49Z,2019-07-03T17:46:49Z,"Currently there is no option to save the .domtbl files generated during alignment stage. Alongside the checkpoint_ali option, would be useful for checking the integrity of the alignment process",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/219
MDU6SXNzdWU0Njg1MTE5ODg=,Problems on reproducing paper results,CLOSED,2019-07-16T08:16:08Z,2019-07-18T14:13:55Z,2019-07-18T14:13:55Z,"Hello,

We have downloaded the supplementary result file. (for the paper: [Sequence co-evolution gives 3D contacts and structures of protein complexes (2014](http://evfold.org/evfold-web/datasets.do)) )

And, we tried to reproduce the first result which is FRDA_ECOLI with FRDB_ECOLI using the default values on the webserver. However, we did not reproduce the results that are given in the supplementary file. For example, we do not get any inter-EC over 0.8, but the supplementary says there should be ""2"". 

How can we adjust the parameters so we can get the same results? What are the parameters that need adjusting?
Also we tried the webserver with our own proteins which are known to interact but we never get any score even close to the threshold value of 0.8. Is there some documentation of how to use the webserver properly?

Best regards",bariskalem,https://github.com/debbiemarkslab/EVcouplings/issues/221
MDU6SXNzdWU0Njk4MTMxMjA=,Complex contact map visualization fails when no ECs or structure for monomers,CLOSED,2019-07-18T14:46:45Z,2020-03-31T13:54:41Z,2020-03-31T13:54:41Z,"See /n/groups/marks/users/agreen/dev/debug_server/96f47a25085adc3af241b39f96af4b2e

It looks like what happens is that when trying to plot the contact map for probability cutoff 0.99, because there are no intra protein ECs and no monomer structure, visualize/pairs.py fails because it can't define the boundaries. ",aggreen,https://github.com/debbiemarkslab/EVcouplings/issues/222
MDU6SXNzdWU0NzkwNjg2Njc=,More flexible sequence weight handling,OPEN,2019-08-09T16:25:20Z,2019-08-09T16:25:20Z,,"Right now, sequence weights are done in a very rigid way - computed inside plmc, no option to export etc.

Ideally, we would be able to:
* export sequence weights computed by plmc, or - even better - move the computation to a dedicated step
* allow user-defined sequence weights or reuse existing weights
* have more elaborate sequence weighting schemes
* have faster sequence weighting algorithms instead of all vs all which becomes prohibitively expensive for large alignments",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/224
MDU6SXNzdWU1MTM1MDEwMTM=,Output alignment file sorted by sequence identity,OPEN,2019-10-28T19:08:42Z,2019-10-28T19:08:42Z,,"Currently, a2m file sequences are not in order of sequence identity - would be nice to have a new function that can sort based on sequence identity in annotations file for example",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/226
MDU6SXNzdWU1NDg2MTIxODY=,making frobenius norm/ APC score calculation part of mean field couplings scores calculations,CLOSED,2020-01-12T19:02:18Z,2020-04-21T07:04:39Z,2020-04-21T07:04:39Z,,ayshaw,https://github.com/debbiemarkslab/EVcouplings/issues/227
MDU6SXNzdWU1NzU1ODAzMTI=,Bypassing Align Stage in Complex Pipeline,CLOSED,2020-03-04T17:04:12Z,2020-03-12T14:33:39Z,2020-03-06T12:10:41Z,"Howdy,

I am running EVcouplings locally, and am hitting a little snag.

I am wanting to bypass the align_1 / align_2 stages of the complex workflow, and feed the next stages a (non EVcouplings) generated _msa_. 

__Is this possible? And if so, what are the necessary parameters to alter and change in the config file?__ Some of this issue could overlap in the #214 issue.

Thank you for the wonderful product, and thank you for your time,


Curtis


(tagging @jrr-cpt)",cross12tamu,https://github.com/debbiemarkslab/EVcouplings/issues/228
MDU6SXNzdWU1ODQ1NzUxNTk=,Complex Pipeline Failure - ValueError,CLOSED,2020-03-19T17:23:24Z,2020-03-28T09:59:54Z,2020-03-28T09:59:54Z,"This is somewhat related to Issue #215 

I am running a complex pipeline and during the later steps, it hangs on the attached issue.
![evcouplings_error](https://user-images.githubusercontent.com/26947059/77095419-dcb7aa80-69db-11ea-8369-6dbadbd667ac.png)

Let me know if there's anything else I need to provide for y'all.

Of note, I also did the (couple line) changes [seen here](https://github.com/debbiemarkslab/EVcouplings/pull/217/commits/9e6c0e6b729a42468dd7b5219a66a68bf0ef90dc)

Thanks!

( For other jobs, I am also getting errors related to #213 , in which I will bump )",cross12tamu,https://github.com/debbiemarkslab/EVcouplings/issues/229
MDU6SXNzdWU1ODkyMDc5NjY=,Make compatible with PSIPRED v4,CLOSED,2020-03-27T15:20:47Z,2020-04-08T19:19:27Z,2020-04-08T19:19:27Z,"Hey, I hope this finds yall well and in good spirits!

I'm having some issues troubleshooting regarding the fold step of the monomer pipeline.

The output of my error is as follows:

``` python
Traceback (most recent call last):
  File ""execute-pipeline.py"", line 7, in <module>
    outcfg = execute(**config)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 176, in execute
    outcfg = runner(**incfg)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/fold/protocol.py"", line 712, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/fold/protocol.py"", line 355, in standard
    residues = secondary_structure(**kwargs)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/fold/protocol.py"", line 117, in secondary_structure
    target_seq_file, output_dir, binary=kwargs[""psipred""]
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/fold/tools.py"", line 233, in run_psipred
    ""psipred output is invalid"", ss2_file, horiz_file
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/utils/system.py"", line 130, in verify_resources
    ""{}:\n{}"".format(message, "", "".join(invalid))
evcouplings.utils.system.ResourceError: psipred output is invalid:
/home/curtisross/research/cpt-aux/mu-releasin/EVcouplings/results/mu_monomer/gp22/first_run/fold/psipred/.fa.ss2, /home/curtisross/research/cpt-aux/mu-releasin/EVcouplings/results/mu_monomer/gp22/first_run/fold/psipred/.fa.horiz
```

This is occuring on multiple different runs via the monomer pipeline on different proteins. I'm curious if there's something wrong with how I am running `psipred` or if it's a different issue entirely. I would think the results that I can see would pass the `run_psipred` portion at `verify_resources`, but that seems to be what raises this error.

Let me know if you have some questions, or would like to take a peak at any of the returns for the different steps.

Thanks for your time as always!


Curtis",cross12tamu,https://github.com/debbiemarkslab/EVcouplings/issues/230
MDU6SXNzdWU1ODk0OTU5Mjk=,"Deprecated usage of pandas's ""loc""",CLOSED,2020-03-28T02:58:04Z,2020-04-21T07:03:12Z,2020-04-21T07:03:12Z,"When computing couplings from an existing alignment .sto file, error can be thrown:
```Traceback (most recent call last):
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 456, in execute_wrapped
    outcfg = execute(**config)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/utils/pipeline.py"", line 176, in execute
    outcfg = runner(**incfg)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/align/protocol.py"", line 1673, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/align/protocol.py"", line 695, in existing
    ali_raw, from_annotation=from_anno_line
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/evcouplings/align/protocol.py"", line 465, in extract_header_annotation
    return df.loc[:, [""id"", ""name""] + list(col_to_descr.keys())]
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1761, in __getitem__
    return self._getitem_tuple(key)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1288, in _getitem_tuple
    retval = getattr(retval, self.name)._getitem_axis(key, axis=i)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1953, in _getitem_axis
    return self._getitem_iterable(key, axis=axis)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1594, in _getitem_iterable
    keyarr, indexer = self._get_listlike_indexer(key, axis, raise_missing=False)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1552, in _get_listlike_indexer
    keyarr, indexer, o._get_axis_number(axis), raise_missing=raise_missing
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_stable/lib/python3.6/site-packages/pandas/core/indexing.py"", line 1654, in _validate_read_indexer
    ""Passing list-likes to .loc or [] with any missing labels ""
KeyError: 'Passing list-likes to .loc or [] with any missing labels is no longer supported, see https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#deprecate-loc-reindex-listlike'
```

I believe this is happening because the pipeline is collecting certain columns of a pandas dataframe made from the annotations- but they are absent. As of an update, pandas will error when this happens instead of populating NaNs. Their recommended solution is to replace use of "".loc"" with "".reindex"" when collecting possibly absent entries / columns / rows.",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/231
MDU6SXNzdWU1OTYwMjE4NTM=,Monomer v. Complex FOLD step output comparisons,CLOSED,2020-04-07T17:08:18Z,2020-04-17T15:57:20Z,2020-04-17T15:57:04Z,"Howdy!

I have the full pipeline running now for various monomer and complex runs (see #230) after figuring out the full paths issue. Now I have, what I think is an easy question (hopefully) for y'all.

**_context:_**
> I run the monomer pipeline. No errors that exit the script. Output files in `FOLD` have a `psipred` directory and it contains: `*.pdb` files, `...CouplingScores...clashes.csv`, `*.in/outcfg`, and a few others (likely what is expected).

> I run the complex piepline. Little, or no errors (eg: a `RuntimeWarning: invalid value encountered in .. Max Ent calc`),  however the error, nor any of the others, halt the pipeline. Now, when I check the `FOLD` directory, the results are different. I get the `HADDOCK` restraint `*.tbl` files, the `*.in/outcfg`; and that's it. 

**QUESTION** 
From a complete complex pipeline run, are .tbl files for HADDOCK-based docking the expected final output? If so, what is your recommended work process for mapping those onto a predicted structure? Do you use monomer fold output in conjunction with `.tbl` files on the HADDOCK web server?

@jrr-cpt",cross12tamu,https://github.com/debbiemarkslab/EVcouplings/issues/233
MDU6SXNzdWU2MDIwNzc1NDg=,evcomplex scoring model,OPEN,2020-04-17T15:59:57Z,2020-04-28T19:12:35Z,,"I have ran different jobs using two primary scoring models, skewnormal and evcomplex. My question is regarding results from evcomplex jobs, which is, _what does it mean to have a probability > 1_. We have numerous pairs resulting in scores > 1, and want to verify with y'all the meaning.

@jrr-cpt",cross12tamu,https://github.com/debbiemarkslab/EVcouplings/issues/234
MDU6SXNzdWU2MDM3NTc1MjQ=,Fix travis setup,CLOSED,2020-04-21T07:00:28Z,2021-03-08T20:04:18Z,2021-03-08T20:04:18Z,Currently does not appear to be linked to repository any more,thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/236
MDU6SXNzdWU2MDcxMTQxMzc=,Error running couplings for RNAs / unique alphabets,CLOSED,2020-04-26T21:10:46Z,2020-07-24T07:52:23Z,2020-06-20T15:47:02Z,"(1 not an error, but quality of life) When running couplings for an RNA alignment- it is necessary to specify ""alphabet: -AUGC"". Would be good to make this automatically defined
(2 an error) again when running couplings for an RNA alignment- EVzoom fails and crashes the pipeline. EVzoom is trying to pass non-RNA characters to the model

Traceback (most recent call last):
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 456, in execute_wrapped
    outcfg = execute(**config)
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 176, in execute
    outcfg = runner(**incfg)
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/protocol.py"", line 801, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/protocol.py"", line 310, in standard
    generate_line_plot=is_single_segment
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/protocol.py"", line 742, in _postprocess_inference
    evzoom_json(model) + ""\n""
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/visualize/parameters.py"", line 174, in evzoom_json
    map_, logo, matrix = evzoom_data(model, **kwargs)
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/visualize/parameters.py"", line 75, in evzoom_data
    model.alphabet_map[c] for c in reorder
  File ""/anaconda3/lib/python3.7/site-packages/evcouplings/visualize/parameters.py"", line 75, in <listcomp>
    model.alphabet_map[c] for c in reorder
KeyError: 'K'
",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/237
MDU6SXNzdWU2MDgzODU4MjM=,PLMC Tool Error,CLOSED,2020-04-28T14:57:11Z,2020-04-28T16:18:35Z,2020-04-28T16:18:35Z,"Hey y'all, hope you're doing well.
Below is an error from running a monomer job. 

Let me know what you think I should do next, or simply if this is a ""strike it up with PLMC"" type error.


Thanks as always for your time and brain energy!

```
Traceback (most recent call last):
  File ""run_ev.py"", line 7, in <module>
    outcfg = execute(**config)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 176, in execute
    outcfg = runner(**incfg)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/protocol.py"", line 801, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/protocol.py"", line 297, in standard
    outcfg, ecs, segments = infer_plmc(**kwargs)
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/protocol.py"", line 214, in infer_plmc
    binary=kwargs[""plmc""],
  File ""/home/curtisross/anaconda3/lib/python3.7/site-packages/evcouplings/couplings/tools.py"", line 275, in run_plmc
    cmd, return_code, stdout, stderr
evcouplings.utils.system.ExternalToolError: Call failed:
cmd=['/home/curtisross/research/ext-tools/plmc/bin/plmc', '-c', '/home/curtisross/research/cpt-aux/protein-covariance/N4/results/monomer/gp53-LINregulator-default/couplings/gp53-LINregulator-default_ECs.txt', '-o', '/home/curtisross/research/cpt-aux/protein-covariance/N4/results/monomer/gp53-LINregulator-default/couplings/gp53-LINregulator-default.model', '-f', 'gp53-LINregulator', '-g', '-m', '100', '-t', '0.19999999999999996', '-lh', '0.01', '-le', '621.6800000000001', '/home/curtisross/research/cpt-aux/protein-covariance/N4/results/monomer/gp53-LINregulator-default/align/gp53-LINregulator-default.a2m']
returncode=-9
stdout=
stderr=Found focus gp53-LINregulator as sequence 1
43 valid sequences out of 43 
3273 sites out of 3500
Region starts at 1
Effective number of samples: 22.0	(80% identical neighborhood = 1.000 samples)
```",cross12tamu,https://github.com/debbiemarkslab/EVcouplings/issues/238
MDU6SXNzdWU2MjUwNTg3MjA=,Forward min_sequence_distance from couplings protocols to enrichment calculation function,CLOSED,2020-05-26T17:34:27Z,2020-06-20T15:47:17Z,2020-06-20T15:47:17Z,"missing here: https://github.com/debbiemarkslab/EVcouplings/blob/80d30b3d2568ae3327f973346be73cdcd41f678b/evcouplings/couplings/protocol.py#L874

should be 
```python
ecs_enriched = pairs.enrichment(ecs, score=score, min_seqdist=kwargs[""min_sequence_distance""])
```

",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/239
MDU6SXNzdWU2MzQ4MzkyODc=,include sample data and a working example,CLOSED,2020-06-08T18:32:20Z,2023-05-11T11:06:41Z,2023-05-11T11:06:41Z,"I am an HPC support scientist who has been asked to install this pipeline on a user's behalf.  I have no domain knowledge and cannot work out how to test the pipeline based on the information in the jupyter notebooks.  In particular, I think it would be great if this repo contained a small amount of sample data (or perhaps links to a place where sample data could be downloaded) and if the `align_*:` fields in the conf file already contained relative paths to these data so that the `evcouplings_batch` script worked (or nearly worked) out of the box.  This would also aid any efforts toward CI/CD testing.  Thanks!  ",GodloveD,https://github.com/debbiemarkslab/EVcouplings/issues/240
MDU6SXNzdWU2NDA3OTA5MjE=,'NoneType' object has no attribute 'group',CLOSED,2020-06-17T22:54:38Z,2023-05-11T11:07:50Z,2023-05-11T11:07:50Z,"I'm seeing the following:

```
$ evcouplings -p RASH_HUMAN -P /data/${USER}/ev_out_files -b ""0.3,0.5,0.7"" sample_config_monomer.txt
Traceback (most recent call last):
  File ""/opt/conda/bin/evcouplings"", line 8, in <module>
    sys.exit(app())
  File ""/opt/conda/lib/python3.7/site-packages/click/core.py"", line 829, in __call__
    return self.main(*args, **kwargs)
  File ""/opt/conda/lib/python3.7/site-packages/click/core.py"", line 782, in main
    rv = self.invoke(ctx)
  File ""/opt/conda/lib/python3.7/site-packages/click/core.py"", line 1066, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/opt/conda/lib/python3.7/site-packages/click/core.py"", line 610, in invoke
    return callback(*args, **kwargs)
  File ""/opt/conda/lib/python3.7/site-packages/evcouplings/utils/app.py"", line 475, in app
    run(**kwargs)
  File ""/opt/conda/lib/python3.7/site-packages/evcouplings/utils/app.py"", line 401, in run
    kwargs.get(""workdir"", None)
  File ""/opt/conda/lib/python3.7/site-packages/evcouplings/utils/app.py"", line 360, in run_jobs
    submitter.submit(cmd)
  File ""/opt/conda/lib/python3.7/site-packages/evcouplings/utils/batch.py"", line 425, in submit
    job_id = self._get_job_id(stdo)
  File ""/opt/conda/lib/python3.7/site-packages/evcouplings/utils/batch.py"", line 269, in _get_job_id
    return self.job_id_pattern.match(input).group(1)
AttributeError: 'NoneType' object has no attribute 'group'
```
The `sbatch` command is still executed and the job is spawned (though it fails for reasons I'll detail in a different issue).  ",GodloveD,https://github.com/debbiemarkslab/EVcouplings/issues/241
MDU6SXNzdWU2NDA3OTM5NjA=,Erroneously escaped dollar signs in sbatch --wrap string ,CLOSED,2020-06-17T23:03:04Z,2020-06-30T17:21:46Z,2020-06-30T17:21:46Z,"This error is observed under slurm 19.05.6

When I execute this command produces the following string that is passed to `sbatch --wrap` :
```
$ evcouplings -p RASH_HUMAN -P /data/${USER}/ev_out_files -b ""0.3,0.5,0.7"" sample_config_monomer.txt
```
```
export PATH=/a/new/path/bin:$PATH \&\& evcouplings_runcfg /data/apptest3/ev_out_files_b0.3_config.txt \&\& evcouplings_summarize protein_monomer /data/apptest3/ev_out_files /data/apptest3/ev_out_files_b0.3_config.txt /data/apptest3/ev_out_files_b0.5_config.txt /data/apptest3/ev_out_files_b0.7_config.txt
```
Note in the escaped dollar signs (i.e. `\$\$`).  Because these dollar signs are escaped they are treated as strings passed to `sbatch --wrap` and are not recognized as linking multiple commands on a single line.  If I manually create the same submission script and remove the backslash characters the job seems to run as intended.   ",GodloveD,https://github.com/debbiemarkslab/EVcouplings/issues/242
MDU6SXNzdWU2NDkxMjYyMjM=,Prepare v0.0.6 release,CLOSED,2020-07-01T16:47:58Z,2021-03-08T20:03:56Z,2021-03-08T20:03:56Z,"Need to release all the fixes that have accumulated over the last months but have not yet been released to pypi

Release needs fixing travis setup #236 

@kpgbrock @amyyxt What's your experience from using the latest state of develop in the lab - any issues?",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/243
MDU6SXNzdWU2NTM2NjA4ODE=,Make 'create evzoom' optional in config- crashes pipeline for non-AA alphabets,CLOSED,2020-07-08T23:37:50Z,2020-07-24T07:51:22Z,2020-07-24T07:51:22Z,"Right now, alphabets not including all amino acid characters crash during couplings stage- when trying to generate EVzoom visualization. This means other folders (especially compare and mutate) directories aren't created.

For now, an easy fix is to make EVzoom optional so that we can avoid the crash and still output those results.",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/244
MDU6SXNzdWU2NzQxNjg2NjY=,Pandas KeyError in _validate_read_indexer,CLOSED,2020-08-06T09:26:41Z,2020-08-09T18:18:38Z,2020-08-09T18:18:37Z,"KeyError                                  Traceback (most recent call last)
<ipython-input-21-b280763115a0> in <module>
      3 
      4 config = read_config_file(""/home/pascal/evcouplings/Config_files/PsbS_X_config_test.txt"")
----> 5 outcfg = execute(**config)

~/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py in execute(**config)
    174 
    175             # run stage
--> 176             outcfg = runner(**incfg)
    177 
    178             # prefix output keys if this parameter is

~/anaconda3/lib/python3.7/site-packages/evcouplings/align/protocol.py in run(**kwargs)
   1671         )
   1672 
-> 1673     return PROTOCOLS[kwargs[""protocol""]](**kwargs)

~/anaconda3/lib/python3.7/site-packages/evcouplings/align/protocol.py in complex(**kwargs)
   1567         )
   1568 
-> 1569     outcfg = PROTOCOLS[kwargs[""alignment_protocol""]](**kwargs)
   1570 
   1571     # if the user selected the existing alignment protocol

~/anaconda3/lib/python3.7/site-packages/evcouplings/align/protocol.py in standard(**kwargs)
   1483     if kwargs[""extract_annotation""]:
   1484         annotation_file = prefix + ""_annotation.csv""
-> 1485         annotation = extract_header_annotation(ali_raw)
   1486         annotation.to_csv(annotation_file, index=False)
   1487 

~/anaconda3/lib/python3.7/site-packages/evcouplings/align/protocol.py in extract_header_annotation(alignment, from_annotation)
    463 
    464     df = pd.DataFrame(res)
--> 465     return df.loc[:, [""id"", ""name""] + list(col_to_descr.keys())]
    466 
    467 

~/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py in __getitem__(self, key)
   1759                 except (KeyError, IndexError, AttributeError):
   1760                     pass
-> 1761             return self._getitem_tuple(key)
   1762         else:
   1763             # we by definition only have the 0th axis

~/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py in _getitem_tuple(self, tup)
   1286                 continue
   1287 
-> 1288             retval = getattr(retval, self.name)._getitem_axis(key, axis=i)
   1289 
   1290         return retval

~/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py in _getitem_axis(self, key, axis)
   1951                     raise ValueError(""Cannot index with multidimensional key"")
   1952 
-> 1953                 return self._getitem_iterable(key, axis=axis)
   1954 
   1955             # nested tuple slicing

~/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py in _getitem_iterable(self, key, axis)
   1592         else:
   1593             # A collection of keys
-> 1594             keyarr, indexer = self._get_listlike_indexer(key, axis, raise_missing=False)
   1595             return self.obj._reindex_with_indexers(
   1596                 {axis: [keyarr, indexer]}, copy=True, allow_dups=True

~/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py in _get_listlike_indexer(self, key, axis, raise_missing)
   1550 
   1551         self._validate_read_indexer(
-> 1552             keyarr, indexer, o._get_axis_number(axis), raise_missing=raise_missing
   1553         )
   1554         return keyarr, indexer

~/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py in _validate_read_indexer(self, key, indexer, axis, raise_missing)
   1652             if not (ax.is_categorical() or ax.is_interval()):
   1653                 raise KeyError(
-> 1654                     ""Passing list-likes to .loc or [] with any missing labels ""
   1655                     ""is no longer supported, see ""
   1656                     ""https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#deprecate-loc-reindex-listlike""  # noqa:E501

KeyError: 'Passing list-likes to .loc or [] with any missing labels is no longer supported, see https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#deprecate-loc-reindex-listlike'",palbanese,https://github.com/debbiemarkslab/EVcouplings/issues/246
MDU6SXNzdWU2NzUyNTg1NjI=,Add 'existing paired alignment' to complex pipeline,OPEN,2020-08-07T20:32:25Z,2020-08-08T21:13:06Z,,"For some applications, such as protein-RNA complexes, I'd like to pair sequences by a custom method- and input already paired seqs (2 alignments where sequence X in ali 1 is paired with sequence X in ali 2) into pipeline.

This means skipping the 'genome distance' or 'best hit' step in the concatenation pipeline

",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/247
MDU6SXNzdWU2NzU3NDY5MjU=,Fix newly appeared matplotlib and numpy deprecations,CLOSED,2020-08-09T18:19:41Z,2024-07-08T11:35:58Z,2024-07-08T11:35:58Z,See #246,thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/248
MDU6SXNzdWU2OTM0MDg4NDk=,Fix crash if extract_annotation parameter not True,CLOSED,2020-09-04T17:18:42Z,2021-03-19T16:34:14Z,2021-03-19T16:34:14Z,"https://github.com/debbiemarkslab/EVcouplings/blob/0b407170104a2796ca3a080f2ed8b6f460137be7/evcouplings/align/protocol.py#L1519

if ""extract_annotation"" is False a few lines above, annotation_file is not defined and will cause crash",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/249
MDU6SXNzdWU3MTY3ODI4NzA=,Computation of N_eff when the align stage (but not the couplings stage) is run,OPEN,2020-10-07T19:10:55Z,2020-10-26T16:53:01Z,,"https://github.com/debbiemarkslab/EVcouplings/blob/49748ad4ac28d5c0a152cb65cdc3f90abfb74569/evcouplings/utils/app.py#L451-L452

This may be unexpected behavior since the corresponding config file parameter is overridden. Additionally, computing N_eff in the align stage may significantly lengthen computation when the couplings stage is expected to be run at a later point.",berkalpay,https://github.com/debbiemarkslab/EVcouplings/issues/251
MDU6SXNzdWU3MTY4NDI0MjI=,CouplingsScoresCompared_longrange.csv misses couplings,OPEN,2020-10-07T20:50:16Z,2020-10-16T15:54:59Z,,"Hi, 

Just to mark that for the complex pipeline, the CouplingsScoresCompared_longrange.csv is missing some inter couplings in the complex when the couplings are close (for example a coupling A_i,i=60 with A_j,j=58 is missing in my protein complex but this coupling is indeed displayed on the contactmap).

Presumably the filter for longrange is not taking into account that the 2 positions i and j are coming from different proteins.

Cheers",ddingding,https://github.com/debbiemarkslab/EVcouplings/issues/252
MDU6SXNzdWU4MTkwOTU2NjI=,Fix ruamel.yaml import issue with conda,CLOSED,2021-03-01T17:38:16Z,2023-05-11T11:04:58Z,2023-05-11T11:04:57Z,This causes issues with latest conda versions,thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/257
MDU6SXNzdWU4MTkwOTYyNjU=,Running existing alignment protocol import with lowercase columns crashes,CLOSED,2021-03-01T17:39:08Z,2021-03-19T16:34:13Z,2021-03-19T16:34:13Z,,thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/258
MDU6SXNzdWU4MjM0OTM2MDc=,Wrong error message in CouplingsModel.delta_hamiltonian ,CLOSED,2021-03-05T23:39:16Z,2021-03-19T16:34:14Z,2021-03-19T16:34:14Z,"https://github.com/debbiemarkslab/EVcouplings/blob/86fbd62f04851800b8716b8798155e71088149a2/evcouplings/couplings/model.py#L699-L702

I think in line 702 `self.target_seq[i]` should be `self.target_seq[pos[i]]`",nikkithadani,https://github.com/debbiemarkslab/EVcouplings/issues/259
MDU6SXNzdWU4NTI1NjYzMjA=,Add statistics about filtered sequences to output,OPEN,2021-04-07T16:08:57Z,2021-04-07T16:08:57Z,,"* add coverage of target for each sequence to annotation file
* plot coverage before filter
* plot number of retained vs filtered sequences (bar chart)",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/262
MDU6SXNzdWU4NjE1MjEwNTA=,Add alignment summary: organisms,OPEN,2021-04-19T16:49:49Z,2023-05-10T16:31:23Z,,"Would be useful to give quick visual summary of what organisms are collected in the alignment.

One option: represent aligned sequences in a tree or simply a bar-chart, colored by species membership
e.g. by
- fetch NCBI taxonomy from UniProt IDs (batch query API) or TaxID in annotations.csv
- input IDs to visualize as e.g. tree (https://itol.embl.de/)
- Perhaps color at according to chordata + mammalia + domain (other eukaryotes, bacteria, virus, ..)

Could in the future be nice to do something similar, but color branches by strongest Pfam hit to each seq overlapping aligned region",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/263
MDU6SXNzdWU4NjE1MjU0MjQ=,Add 2ndary structure pred. from ECs,OPEN,2021-04-19T16:53:35Z,2023-05-10T16:27:08Z,,"Include code developed in Toth-Petroczy 2016,
recommend = include output and plot in Couplings stage, and contrast to 2ndary in PDBs in Compare stage",njrollins,https://github.com/debbiemarkslab/EVcouplings/issues/264
MDU6SXNzdWU4NjU3MTA0NTI=,Unable to download the database files using evcouplings_dbupdate ,CLOSED,2021-04-23T03:36:46Z,2023-05-10T16:32:13Z,2023-05-10T16:32:13Z,"Hi, 

I am trying to download SIFT and Uniprot database using the below command-

evcouplings_dbupdate -v -s ./SIFT/ -d ./Uniprot/

However, the download is stopped without returning to the command prompt. It took more than 15 days for downloading the files and unfortunately, I had to terminate the run. I was wondering if there are any alternative ways to download the database. 

As you mentioned in one of the issues that these files can be downloaded from the Marks Lab server. It would be great if you could provide the direct link to download these files.

I appreciate your kind help.

Thank you

Kind regards,
Hitesh

",HiteshKore,https://github.com/debbiemarkslab/EVcouplings/issues/265
MDU6SXNzdWU4NzA1MjYyMjA=,Unable to perform the de novo protein structure prediction.,OPEN,2021-04-29T01:11:47Z,2021-05-04T18:41:28Z,,"Hi developer,

Thanks you for your program. It is quite easy to use and generate valuable results. 

I want to get help with the de novo protein structure prediction using PSIPRED. I always got the same error saying that PSIPRED cannot find the output folder for .ss2 and .horiz files. 

Why it is happen and how to solve it?

Below, I attached the .config and .fail file if it can help.

I observed two things:
1. It seems that EVcouplings cannot process the coupling step and downstream analyses; correct? 
2. When my protein slightly differ from the experimental protein structure, the ""compare"" step return a protein (.pdb) with missing part.

I have a bulk of other questions:
1. What can I do if there is no experimental structure for my protein (RdDR protein) in PDB? 
2. When it work properly, will PSIPRED return a 3D predicted structure file (.pdb)? 
3. If not, what output file can I use to compute this and with which software?

Thanks for you help!
Sbastien


#############
#    dcl5.failed    #
#############
Traceback (most recent call last):
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/utils/pipeline.py"", line 508, in execute_wrapped
    outcfg = execute(**config)
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/utils/pipeline.py"", line 187, in execute
    outcfg = runner(**incfg)
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/fold/protocol.py"", line 714, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/fold/protocol.py"", line 357, in standard
    residues = secondary_structure(**kwargs)
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/fold/protocol.py"", line 116, in secondary_structure
    ss2_file, horiz_file = run_psipred(
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/fold/tools.py"", line 232, in run_psipred
    verify_resources(
  File ""/Users/sbelanger/opt/miniconda3/lib/python3.8/site-packages/evcouplings/utils/system.py"", line 129, in verify_resources
    raise ResourceError(
evcouplings.utils.system.ResourceError: psipred output is invalid:
/Users/sbelanger/Documents/research/orthology/prot.coevolution/dcl5/fold/psipred/dcl5.ss2, /Users/sbelanger/Documents/research/orthology/prot.coevolution/dcl5/fold/psipred/dcl5.horiz





#################
#    dcl5_config.txt    #
#################
# Sample configuration file for evcouplings monomer protein prediction pipeline.
# This file determines all aspects of the computation:
# - which compute environment to use
# - which stages of the pipeline to run
# - what the settings for each of the stages are

# Minimal settings required before this configuration can be executed:
# - set your environment, paths to tools and databases (at the end of this file)
# - under ""global"", set prefix and sequence_id
# - run it! :)

# Configuration rules:
# 1) Global settings override settings for stages
# 2) Outputs of a stage are merged into ""global"" and fed into the input of subsequent stages
#    (e.g., the alignment_file output of align will be used by the alignment_file input of couplings)
# 3) All settings are explicitly specified here. No hidden defaults in code.
# 4) Each stage is also passed the parameters in the ""databases"" and ""tools"" sections

pipeline: protein_monomer

# which stages of workflow to run. Uncomment downstream stages using # (however, no stage can be run before the previous
# stage has been run)
stages:
- align
- couplings
- compare
- mutate
- fold

# Global job settings (which protein, region). These will override settings of the same name in each of the stages.
# These are typically the settings you want to modify for each of your jobs, together with some settings in the align stage.
global:
    # mandatory output prefix of the job (e.g. output/HRAS will store outputs in folder ""output"", using files prefixed with ""HRAS"")
  prefix: /Users/sbelanger/Documents/research/orthology/prot.coevolution/dcl5

    # mandatory sequence identifier (mandatory, even if sequence_file is given)
  sequence_id: DCL5.aa

    # optional FASTA file with target sequence (if blank, will fetch try to fetch sequence_id from databases.sequence_download_url)
    # if sequence_file is set, sequence_id must be defined, but can be arbitrary identifier (does not have to match ID in file)
  sequence_file: /Users/sbelanger/Documents/research/orthology/prot.coevolution/seq/DCL5.aa.fasta

    # cut to subregion of sequence (specify as list, e.g. [24, 286], leave blank for full sequence)
  region:

    # Clustering threshold for downweighting redudant sequences (Meff computation). E.g. 0.8 will cluster sequences
    # at a 80% sequence identity cutoff
  theta: 0.8

    # number of cores to use. If running through evcouplings application, will be overriden by environment.cores
  cpu: 10

# Specify multiple batch jobs (if empty, only a single job will be run). Each entry (e.g. b_0.75) will be appended to
# global.prefix to uniquely identify the subjob. Parameters for individual stages that should be overridden for each
# subjob have to be specified, for all other parameters jobs share the same values.
batch:
#    _b0.75:
#       align: {domain_threshold: 0.75, sequence_threshold: 0.75}
#    _b0.3:
#       align: {domain_threshold: 0.3, sequence_threshold: 0.3}

# Sequence alignment generation/processing.
align:
    # standard: iterative sequence search and postprocessing using jackhmmer.
  protocol: standard

    # The following fields usually do not need to be set, since ""global"" defines them.
    # prefix:
    # sequence_id:
    # sequence_file:
    # region:
    # theta:

    # index of first residue in sequence_id / sequence_file. This can be used to renumber sequences that already have
    # been cut to a subsequence
  first_index: 1

    # Use bitscore threshold instead of E-value threshold for sequence search
  use_bitscores: true

    # jackhmmer domain- and sequence-level inclusion thresholds.
    # if use_bitscores is True:
    # - floating point number will be interpreted as a relative bitscore threshold (bits/residue)
    # - integer will be interpreted as an absolute bitscore threshold
    # if use_bitscore is False:
    # - mantissa-exponent string or float will be interpreted literally
    # - integer will be interpreted as negative of the exponent (10 -> 1E-10)
  domain_threshold: 0.5
  sequence_threshold: 0.5

    # number of jackhmmer iterations
  iterations: 5

    # sequence database (specify possible databases and paths in ""databases"" section below)
  database: uniref100

    # compute the redundancy-reduced number of effective sequences (M_eff) already in the alignment stage.
    # To save compute time, this computation is normally carried out in the couplings stage
  compute_num_effective_seqs: false

    # Filter sequence alignment at this % sequence identity cutoff. Can be used to cut computation time in
    # the couplings stage (e.g. set to 95 to remove any sequence that is more than 95% identical to a sequence
    # already present in the alignment). If blank, no filtering. If filtering, HHfilter must be installed.
  seqid_filter:

    # Only keep sequences that align to at least x% of the target sequence (i.e. remove fragments)
  minimum_sequence_coverage: 50

    # Only include alignment columns with at least x% residues (rather than gaps) during model inference
  minimum_column_coverage: 70

    # Create a file with extracted annotation from UniRef/UniProt sequence FASTA headers
  extract_annotation: true
  cpu:

    # set to True to turn of jackhmmer bias correction
  nobias: false

    # if align stage has been run previously, reuse the generated raw sequence alignment coming out of jackhmmer
  reuse_alignment: true

    # create checkpoint files of HMM and aligment after each iteration
  checkpoints_hmm: false
  checkpoints_ali: false

# Alternative protocol: reuse existing alignment and apply postprocessing to generate alignment that is consistent
# with pipeline requirements. Uncomment, and comment all values in align section above to enable the ""existing"" protocol
#    protocol: existing
#    prefix:
#    # Path of input alignment. Alignment needs to contain region in form SEQID/start-end, or first_index must be set
#    input_alignment:
#    sequence_id:
#    first_index:
#    compute_num_effective_seqs: False
#    theta:
#    seqid_filter:
#    minimum_sequence_coverage: 50
#    minimum_column_coverage: 70
#    extract_annotation: True

# Inference of evolutionary couplings from sequence alignment
couplings:
    # current options: 
    # - standard (model inference using plmc)
    # - mean_field (mean field direct coupling analysis, see below)
  protocol: standard

    # number of plmc iterations
  iterations: 100

    # specify custom alphabet as a string. Gap symbol must be first character
  alphabet:

    # Treat gaps as missing data during model inference
  ignore_gaps: true

    # strength of regularization on coupling parameters J
  lambda_J: 0.01

    # adjust for larger number of coupling parameters relative to number of fields h (multiply by model length and
    # number of states)
  lambda_J_times_Lq: true

    # strength of regularization on fields h
  lambda_h: 0.01
  lambda_group:
  scale_clusters:
    # reuse ECs and model parameters, if this stage has been run before
  reuse_ecs: true

    # Sequence separation filter for generation of CouplingScores_longrange.csv table (i.e. to take out short-range
    # ECs from table, only pairs with abs(i-j)>=min_sequence_distance will be kept.
  min_sequence_distance: 6

    # Post-inference scoring of ECs to derive probabilities
    # Options are: skewnormal, normal, logistic_regression
  scoring_model: logistic_regression

# Alternative protocol: compute couplings with mean field direct coupling analysis
# Uncomment, and comment all values in align section above to enable the mean_field protocol
    # protocol: mean_field

    # Options: cn, di, mi_apc, mi
    # ec_score_type: cn

    # Post-inference scoring of ECs to derive probabilities - only available if used_score == ""cn""!
    # Options are: skewnormal, normal, logistic_regression
    # scoring_model: logistic_regression

    # pseudo_count: 0.5
    # alphabet:
    # ignore_gaps: False
    # reuse_ecs: True
    # min_sequence_distance: 6

    # Following input parameters will usually be overriden by ""global"" and outputs of ""align"" stage
    # prefix:
    # alignment_file:
    # focus_sequence:
    # focus_mode: True
    # segments:
    # cpu:
    # theta:

# Compare ECs to known 3D structures
compare:
    # Current options: standard
  protocol: standard

    # Following parameters will be usually overriden by global settings / output of previous stage
  prefix:
  sequence_id:
  ec_file:
  target_sequence_file:

    # If True, find structures by sequence alignment against the PDB, otherwise identify structures using
    # sequence_id and SIFTS database (sequence_id must be UniProt AC/ID in this case)
  by_alignment: true

    # Leave this parameter empty to use all PDB structures for given sequence_id, otherwise
    # will be limited to the given IDs (single value or list). Important: note that this acts only as a filter on the
    # structures found by alignment or in the SIFTS table (!)
  pdb_ids:

    # Limit number of structures and chains for comparison
  max_num_structures: 10
  max_num_hits: 25

    # compare to multimer contacts (if multiple chains of the same sequence or its homologs are present in a structure)
  compare_multimer: true

    # settings for sequence alignment against PDB sequences using jackhmmer
    # (additional settings like iterations possible, compare to align stage)
  sequence_file:
  first_index:
  region:
  alignment_min_overlap: 20
  use_bitscores: true
  domain_threshold: 0.1
  sequence_threshold: 0.1

    # Comparison and plotting settings
    # Filter that defines which atoms will be used for distance calculations. If empty/None, no filter will be
    # applied (resulting in the computation of minimum atom distances between all pairs of atoms). If setting to any
    # particular PDB atom type, only these atoms will be used for the computation (e.g. CA will give C_alpha distances,
    # CB will give C_beta distances, etc.)
  atom_filter:

    # Distance cutoff (Angstrom) for a true positive pair
  distance_cutoff: 5

    # Only long-range pairs with abs(i-j)>= min_sequence_distance will be used for CouplingScoresCompared_longrange.csv file
  min_sequence_distance: 6

    # Plot contact maps with ECs above these mixture model probability cutoffs
  plot_probability_cutoffs: [0.90, 0.99]

    # Plot fixed numbers of ECS. Integers will be interpreted as absolute numbers, floats as fractions of L (model length)
  plot_lowest_count: 0.05
  plot_highest_count: 1.0
  plot_increase: 0.05

    # Axis boundaries of contact map plot depending on range of ECs and structure.
    # Options: union, intersection, ecs, structure, [start, end] (e.g. [100, 200])
  boundaries: union

    # scale sizes of EC dots in scatter plot based on strength of EC score
  scale_sizes: true

    # draw secondary structure on contact map plots
  draw_secondary_structure: true

    # draw structure and alignment/EC coverage information on contact map plots
  draw_coverage: true

    # print information about used PDB structures on contact map plots
  print_pdb_information: true

    # Alignment method to use to search the PDB Seqres database. Options: jackhmmer, hmmsearch
    # Set to jackhmmer to search the PDB Seqres database using jackhmmer from the target sequence only (more stringent). 
    # Set to hmmsearch to search the PDB seqres database using an HMM built from the output monomer alignment (less stringent). 
    # Warning: searching by HMM may result in crystal structures from very distant homologs or even unrelated sequences. 
  pdb_alignment_method: jackhmmer

# Settings for Mutation effect predictions
mutate:
    # Options: standard
  protocol: standard

    # predict the following dataset file (.csv file, mutants like A102V or A102V,K199W in column ""mutant"")
  mutation_dataset_file:

    # Inputs set by global stage and output of previous stages
    # prefix:
    # model_file:

# Settings for 3D structure prediction
fold:
    # Options: standard
  protocol: standard

    # Options: cns_dgsa
  engine: cns_dgsa

    # Config file. If blank, default configuration (restraints.yml) in package will be used
  folding_config_file:

    # If True, limit 3D modeling only to that region of sequence that actually has sequence alignment coverage)
  cut_to_alignment_region: true

    # Method for secondary structure prediction (options: psipred, requires PSIPRED installation). Will be used
    # to generate distance and dihedral angle restraints for local geometry.
  sec_struct_method: psipred

    # If secondary structure was already predicted in previous execution of configuration, reuse the file
  reuse_sec_struct: true

    # Instead of predicting secondary structure in pipeline, can specify a secondary structure file:
    # Must be csv file with columns i (position), A_i (residue) and sec_struct_3state (secondary structure, H, E or C
    # for helix, sheet or coil)
  sec_struct_file:

    # Do not use EC pairs as distance restraints that are geometrically incompatible with predicted secondary structure
  filter_sec_struct_clashes: true

    # Only use ECs with sequence distance abs(i-j) >= min_sequence_distance for folding
  min_sequence_distance: 6

    # Predict structures using all ECs above these probability cutoffs according to mixture model
  fold_probability_cutoffs: [0.90, 0.99]

    # Predict structures with selected number of ECs.
    # Integers will be interpreted as absolute number of ECs, floats as a fraction of L (model length)
  fold_lowest_count: 0.5
  fold_highest_count: 1.3
  fold_increase: 0.05

    # number of trial structure to generate for each EC set
  num_models: 10

    # remove intermediate files created during folding and keep only final models
  cleanup: true

    # Inputs defined by ""global"" or previous stages
    # prefix:
    # ec_file:
    # target_sequence_file:
    # segments:
    # remapped_pdb_files:
    # cpu:

# These settings allow job status tracking using a database, and result collection in an archive
management:
    # URI of database
  database_uri:

    # unique job identifier
  job_name:

    # add the following output files to results archive
  archive: [target_sequence_file, statistics_file, alignment_file, frequencies_file,
    ec_file, ec_longrange_file, model_file, enrichment_file, evzoom_file, enrichment_pml_files,
    ec_lines_pml_file, contact_map_files, ec_compared_all_file, ec_compared_longrange_file,
    remapped_pdb_files, mutations_epistatic_pml_files, mutation_matrix_file, mutation_matrix_plot_files,
    secondary_structure_pml_file, folding_ec_file, folded_structure_files, folding_ranking_file,
    folding_comparison_file, folding_individual_comparison_files, ec_lines_compared_pml_file,
    pdb_structure_hits_file, sec_struct_file]

    # Delete the following output files after running the job if you don't need them, to save disk space.
    # Note that this may jeopardize your ability to rerun parts of the job if intermediate files are missing.
    # The following, deactivated default deletes the biggest output files.
    # delete: [raw_alignment_file, model_file]

# Computational environment for batch jobs (using evcouplings command line application)
environment:
    # current options for engine: lsf, local, slurm (for local, only set cores and leave all other fields blank)
    # If your batch engine of choice (e.g. SGE, Torque) is not available yet, please consider contributing by
    # implementing it and submitting a pull request!
    # Note that ""cores"" will override the ""cpu"" parameter for ""global""
  engine: local
  queue:
  cores: 10
  memory:
  time:

    # Special setting for ""local"" engine to define number of workers running in parallel
    # (note that ""cores"" has to be defined above to make sure each job only uses a defined
    # number of cores). If not defined or None, will default to number of cores / cores per job;
    # otherwise specify integer to limit number of workers (1 for serial execution of subjobs)
    # parallel_workers: 1

    # command that will be executed before running actual computation (can be used to set up environment)
  configuration:

# Paths to databases used by evcouplings.
databases:
    # Sequence databases (only download the ones you want to use). You can also specify arbitrary databases in FASTA format
    # using a database name of your choice here)
  uniprot: /Users/sbelanger/Documents/research/data/reference/protein/uniprot/uniprot/uniprot_current.fasta
  uniref100: /Users/sbelanger/Documents/research/data/reference/protein/uniprot/uniref100/uniref100_current.fasta
  uniref90: /Users/sbelanger/Documents/research/data/reference/protein/uniprot/uniref90/uniref90_current.fasta

    # URL do download sequences if sequence_file is not given. {} will be replaced by sequence_id.
  sequence_download_url: http://www.uniprot.org/uniprot/{}.fasta

    # Directory with PDB MMTF structures (leave blank to fetch structures from web)
  pdb_mmtf_dir:

    # SIFTS mapping information. Point to file paths in an existing directory, and if these files do not exist, they will be
    # automatically generated and saved at the given file path (this may take a while).
    # Periodically delete these files to more recent versions of SIFTS are used.
  sifts_mapping_table: /Users/sbelanger/Documents/research/data/reference/protein/sifts/pdb_chain_uniprot_plus_current.csv
  sifts_sequence_db: /Users/sbelanger/Documents/research/data/reference/protein/sifts/pdb_chain_uniprot_plus_current.fasta

# Paths to external tools used by evcouplings. Please refer to README.md for installation instructions and which tools are required.
tools:
  jackhmmer: /Users/sbelanger/opt/miniconda3/bin/jackhmmer
  hmmbuild: /Users/sbelanger/opt/miniconda3/bin/hmmbuild
  hmmsearch: /Users/sbelanger/opt/miniconda3/bin/hmmsearch
  plmc: /usr/local/bin/plmc
  hhfilter: /Users/sbelanger/opt/miniconda3/bin/hhfilter
  psipred: /Users/sbelanger/Documents/software/psipred/runpsipred
  cns: /Users/sbelanger/Documents/software/cns_solve_1.21/intel-x86_64bit-linux/bin/cns
  maxcluster: /Users/sbelanger/Documents/software/maxcluster64bit


",sebel76,https://github.com/debbiemarkslab/EVcouplings/issues/266
I_kwDOA82SmM48V-5D,Possible error in complex mixture model scoring,CLOSED,2021-09-30T16:42:15Z,2021-09-30T17:13:51Z,2021-09-30T17:13:51Z,"In the complex_probability() function in evcouplings/couplings/protocol.py, it looks like there might be a typo if the user chooses to use all ECs (both inter and intra) in mixture model scoring - check before I fix?

if use_all_ecs:
        ecs = pairs.add_mixture_proability(
            ecs, model=scoring_model
        )

should be:

if use_all_ecs:
        ecs = pairs.add_mixture_probability(
            ecs, model=scoring_model
        )",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/267
I_kwDOA82SmM4-iLcR,Non-alphabet characters aren't counted as gaps when computing sequence coverage,OPEN,2021-11-09T21:40:37Z,2023-05-11T11:07:31Z,,"I'm not sure if this is something we want to fix or just something we want to note (can be a real issue for some viral sequences) but sequences with large numbers of Xs or other non-residue characters are not counted as gaps when applying the sequence coverage threshold. 

https://github.com/debbiemarkslab/EVcouplings/blob/594b45a9ecd7d429f27c7d576559134c3e9c3bcc/evcouplings/align/protocol.py#L911",nikkithadani,https://github.com/debbiemarkslab/EVcouplings/issues/268
I_kwDOA82SmM4_s1YH,Low quality mutational landscape,CLOSED,2021-12-01T18:01:29Z,2023-05-11T11:03:30Z,2023-05-11T11:03:29Z,The figure of mutational landscape obtained from downloaded data from https://evcouplings.org/ is poor. How it can be replotted using python?,ShahbazQalandar,https://github.com/debbiemarkslab/EVcouplings/issues/269
I_kwDOA82SmM4_-zKj,"Code for running jackhmmer to produce MSA, and postprocess to get A2M.file",CLOSED,2021-12-07T14:35:54Z,2023-01-22T14:18:21Z,2021-12-07T14:59:17Z,"Hi, 
I am interested in the code of how to use jackhmmer for MSA and the postprocess to produce .A2M.file. I searched in the github but couldn't find it. can you point it to somehow?
Thanks 

ps: I think I found the code for postproccess of jackhmmer outputfiles (such as stockholm, a3m files, evcouplings/align/alignment.py), but still didn't find the code for how you used jackhmmer for MSA. I kinda know how to do it online but would like to see the code of how you use  it. Thanks.

never mind, I think I found it.",lzhangUT,https://github.com/debbiemarkslab/EVcouplings/issues/270
I_kwDOA82SmM5ChiHv,Running EVComplex with own database,CLOSED,2022-01-27T11:18:25Z,2022-01-28T15:32:20Z,2022-01-28T15:32:20Z,"Hi there,

I am trying to use the EVComplex python package with my own sequence database and I'm having trouble getting this to work. I have tried creating my own annotation tables with tax information but this gets stuck at the concatenate stage (see error below).

Traceback (most recent call last):
  File ""/EVCouplings/run_config_eukprot"", line 5, in <module>
    outcfg = execute(**config)
  File ""/opt/miniconda3/envs/evcouplings/lib/python3.9/site-packages/evcouplings/utils/pipeline.py"", line 187, in execute
    outcfg = runner(**incfg)
  File ""/opt/miniconda3/envs/evcouplings/lib/python3.9/site-packages/evcouplings/complex/protocol.py"", line 576, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/opt/miniconda3/envs/evcouplings/lib/python3.9/site-packages/evcouplings/complex/protocol.py"", line 478, in best_hit
    write_concatenated_alignment(
  File ""/opt/miniconda3/envs/evcouplings/lib/python3.9/site-packages/evcouplings/complex/alignment.py"", line 76, in write_concatenated_alignment
    target_index_1 = ali_1.id_to_index[target_sequence_1]

If I use the uniprot database, I can get the pipeline to work. Are uniprot sequences required for EVComplex to run?

Many thanks for your help!

Kind regards,

Katie",katemstevens,https://github.com/debbiemarkslab/EVcouplings/issues/271
I_kwDOA82SmM5C-Ur0,lack of explicit separator in read_csv in /mutate/protocol.py,OPEN,2022-02-03T22:51:27Z,2022-02-06T10:55:57Z,,"Because there is not an explicit separator in the function that imports the mutation data table in /mutate/protocol.py, pandas expects a comma separator, but the /mutate/calculations.py function that deals with that table expects commas to separate the locations of mutations. This leads to an error that stops the pipeline if you use commas for both field separators and mutation separators. It also leads to a key error in pandas if you format the mutation data table as suggested, with semicolons as field separators in the mutation data table.

I fixed this issue on my installation of evcouplings by changing line 126 on mutate/protocol.py from `data = pd.read_csv(dataset_file, comment=""#"")` to `data = pd.read_csv(dataset_file, comment=""#"", sep="";"")`",paulaberry,https://github.com/debbiemarkslab/EVcouplings/issues/272
I_kwDOA82SmM5DIpNr,Incompatible .model file from EVCouplings web server,CLOSED,2022-02-07T18:20:38Z,2023-05-10T16:27:42Z,2023-05-10T16:27:42Z,"I have generated an MSA for a tryptophan synthase B subunit variant using the EVcouplings web server. Unfortunately, after importing with `from evcouplings.couplings import CouplingsModel` and then loading the model with `c = CouplingsModel(""tm9D8_2.model"")`, I get the following error:

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/tmp/ipykernel_20180/1939998030.py in <module>
----> 1 c = CouplingsModel(""tm9D8_2.model"")

~/miniconda3/envs/mlde2/lib/python3.7/site-packages/evcouplings/couplings/model.py in __init__(self, model_file, precision, file_format, **kwargs)
    269             else:
    270                 with open(model_file, ""rb"") as f:
--> 271                     self.__read_plmc_v2(f, precision)
    272         elif file_format == ""plmc_v1"":
    273             if is_file_obj:

~/miniconda3/envs/mlde2/lib/python3.7/site-packages/evcouplings/couplings/model.py in __read_plmc_v2(self, f, precision)
    377                 self.f_ij[i, j], = np.fromfile(
    378                     f, dtype=(precision, (self.num_symbols, self.num_symbols)),
--> 379                     count=1
    380                 )
    381                 self.f_ij[j, i] = self.f_ij[i, j].T

ValueError: not enough values to unpack (expected 1, got 0)
```
I have uploaded the sequences from the alignment (.a2m) and the .model file [here](https://drive.google.com/drive/u/0/folders/1B3Q0qkFIPWO2FHvi6Rbt3uMbu76-aJoY) for your reference.",jsunn-y,https://github.com/debbiemarkslab/EVcouplings/issues/273
I_kwDOA82SmM5FFpU-,Is hhfilter necessary?,CLOSED,2022-03-04T00:30:31Z,2023-05-10T16:25:24Z,2023-05-10T16:25:24Z,"In the docs, it says that hhfilter is not necessary. Then, in the config file (sample_config_monomer.txt), it says that ""If blank, no filtering. If filtering, HHfilter must be installed."" However, when I try to run evcouplings_runcfg <config_file> for one protein, I get this error. I'm not trying to filter. Any help would be appreciated. Thanks!
![image](https://user-images.githubusercontent.com/82113434/156675508-911ddad6-e509-4089-895b-5d04b442bcb5.png)
",qbellamy,https://github.com/debbiemarkslab/EVcouplings/issues/274
I_kwDOA82SmM5F1OvY,EVcouplings not compatible with Python 3.10 version,CLOSED,2022-03-16T21:35:36Z,2022-08-05T09:24:48Z,2022-08-05T09:24:48Z,"After creating a clean environment with develop branch and python 3.10, I got the following error when trying to run evcouplings:

from evcouplings.utils.app import app
from collections import Mapping

ImportError: cannot import name 'Mapping' from 'collections' ImportError: cannot import name 'Mapping' from 'collections' (/n/groups/marks/software/anaconda_o2/envs/evcouplings_22/lib/python3.10/collections/__init__.py)

This error disappears when using python 3.9, and I confirmed it's caused by a change in how Mapping is called (see below). To make evcouplings forward compatible, can we replace the import statement with the below?

try:
    from collections.abc import Mapping
except ImportError:
    from collections import Mapping
",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/275
I_kwDOA82SmM5IgWGv,Incorporate hhpred for pdb search in compare stage,OPEN,2022-04-26T20:24:27Z,2022-04-26T20:24:27Z,,"From Debbie: Can we incorporate hhblits + hhsearch (ie hhpred) functionality in compare stage, in addition to jackhmmer + hmmsearch options?",kpgbrock,https://github.com/debbiemarkslab/EVcouplings/issues/276
I_kwDOA82SmM5NtFbU,Evcouplings_dbupdate ResourceError,CLOSED,2022-07-13T16:19:28Z,2023-05-10T16:26:42Z,2023-05-10T16:26:41Z,"Running evcouplings_dbupdate -v -s ./SIFT/ -d ./Uniprot/  and getting this error: 

`line 105, in fetch_uniprot_mapping

    raise ResourceError( evcouplings.utils.system.ResourceError: Invalid status code (405) for URL: https://www.uniprot.org/mapping/`


Is anyone else getting this error? Is there a workaround? What is the correct URL? ",JodC58972,https://github.com/debbiemarkslab/EVcouplings/issues/278
I_kwDOA82SmM5OZNXR,Troubleshooting Help ,CLOSED,2022-07-22T16:58:56Z,2023-05-10T16:25:52Z,2023-05-10T16:25:52Z,"Im getting this error when I run my config file. I checked and the Uniprot ID's are in the fast file I'm using but I am still getting this error. 

`evcouplings.utils.BailoutException: align: No sequences found`

I have downloaded the recommended python packages as well as jackhmmer and plmc. I am using the complex pipeline. I have a region of [50,100] for one of my proteins. I am running this locally and changed all required sections as outlined in the run file. 

Has anyone else experienced this problem? If so what can be done to fix it. 

Thanks ",JodC58972,https://github.com/debbiemarkslab/EVcouplings/issues/279
I_kwDOA82SmM5ZRtlc,EVmutation vs DeepSequence,CLOSED,2022-12-15T05:30:23Z,2023-01-09T10:44:16Z,2023-01-09T10:44:16Z,"Hello!
DeepSequence was released later than EVmutation, however EVmutation was added to EVcouplings.
Why?",Trepetsky,https://github.com/debbiemarkslab/EVcouplings/issues/282
I_kwDOA82SmM5bQaeZ,Feat request: Alphafold within EVCouplings,CLOSED,2023-01-12T16:34:01Z,2024-11-13T16:48:01Z,2024-11-13T16:48:01Z,"Hi Team EVCouplings, 

Is it possible to run EVCouplings to automatically search against UNIPROT's Alphafold dataset, e.g. instead of the PDB?

zach cp",zachcp,https://github.com/debbiemarkslab/EVcouplings/issues/284
I_kwDOA82SmM5d5R09,KeyError: 'samples' using complex pipeline,OPEN,2023-02-08T01:20:14Z,2023-07-17T14:28:26Z,,"I hope you are doing well. I am trying to run the evcouplings complex pipeline using the sample_config_file by providing 2 UniProt protein ids. I also followed the instructions for the necessary installations and requirements based on the ReadMe file, and I have provided the paths to these installations in the config file. The align_1, align_2, and concatenate steps run through successfully with the appropriate output files. However, I am receiving a KeyError: 'samples' error during the couplings step. Below is the stack trace of the error. Prior to the error, _couplings.incfg and _ECs.txt were generated. I would really appreciate your help in resolving this error. Thank you!

Traceback (most recent call last):
  File ""/ihome/djishnu/krn34/.local/bin/evcouplings_runcfg"", line 8, in <module>
    sys.exit(app())
  File ""/ihome/crc/install/python/ondemand-jupyter-python3.8/lib/python3.8/site-packages/click/core.py"", line 829, in __call__
    return self.main(*args, **kwargs)
  File ""/ihome/crc/install/python/ondemand-jupyter-python3.8/lib/python3.8/site-packages/click/core.py"", line 782, in main
    rv = self.invoke(ctx)
  File ""/ihome/crc/install/python/ondemand-jupyter-python3.8/lib/python3.8/site-packages/click/core.py"", line 1066, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/ihome/crc/install/python/ondemand-jupyter-python3.8/lib/python3.8/site-packages/click/core.py"", line 610, in invoke
    return callback(*args, **kwargs)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/utils/pipeline.py"", line 583, in app
    outcfg = run(**kwargs)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/utils/pipeline.py"", line 570, in run
    return execute_wrapped(**config)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/utils/pipeline.py"", line 508, in execute_wrapped
    outcfg = execute(**config)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/utils/pipeline.py"", line 187, in execute
    outcfg = runner(**incfg)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/couplings/protocol.py"", line 974, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/couplings/protocol.py"", line 521, in complex
    outcfg, ecs, segments = infer_plmc(**kwargs)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/couplings/protocol.py"", line 203, in infer_plmc
    plmc_result = ct.run_plmc(
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/couplings/tools.py"", line 285, in run_plmc
    iter_df, out_fields = parse_plmc_log(stderr)
  File ""/ihome/djishnu/krn34/.local/lib/python3.8/site-packages/evcouplings/couplings/tools.py"", line 98, in parse_plmc_log
    eff_samples = float(matches[""samples""][0])
KeyError: 'samples'",kirannazarali,https://github.com/debbiemarkslab/EVcouplings/issues/285
I_kwDOA82SmM5h88pG,parameters for supplying external alignment file in evcouplings,CLOSED,2023-03-28T07:29:15Z,2023-05-11T11:10:17Z,2023-05-11T11:10:16Z,"hi, 
I have been trying to supply a .aln file to evcouplings installed locally in conda environment. But i am running into parameter file errors. quick suggestions will be  really helpful

$ evcouplings config.txt
Traceback (most recent call last):
  File ""/home/administrator/anaconda3/envs/evcoupling/bin/evcouplings"", line 8, in <module>
    sys.exit(app())
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/click/core.py"", line 1130, in __call__
    return self.main(*args, **kwargs)
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/click/core.py"", line 1055, in main
    rv = self.invoke(ctx)
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/click/core.py"", line 1404, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/click/core.py"", line 760, in invoke
    return __callback(*args, **kwargs)
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/evcouplings/utils/app.py"", line 559, in app
    run(**kwargs)
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/evcouplings/utils/app.py"", line 483, in run
    run_jobs(
  File ""/home/administrator/anaconda3/envs/evcoupling/lib/python3.9/site-packages/evcouplings/utils/app.py"", line 311, in run_jobs
    raise InvalidParameterError(
evcouplings.utils.config.InvalidParameterError: Existing configuration file lsi1_out_config.txt indicates current prefix lsi1_out would overwrite existing results. Use --yolo flag to deactivate overwrite protection (e.g. for restarting a job or running a different stage).
 
my config file is.

pipeline: protein_monomer
stages:
- align
- couplings
global:
  cpu: 1
  theta: 0.8
  prefix: out
  sequence_id: aaaaa
  sequence_file: bbb.fasta
align:
  protocol: existing
  input_alignment: ccc.aln
  first_index: 1
  minimum_sequence_coverage: 50
  minimum_column_coverage: 70
couplings:
  focus_mode: true
  ignore_gaps: true
  iterations: 100
  lambda_J: 0.01
  lambda_J_times_Lq: true
  lambda_h: 0.01
  min_sequence_distance: 6
  protocol: standard
  reuse_ecs: true
  scoring_model: skewnormal 
environment:
  engine: local
  queue:
  cores: 1
  memory:
  time:
  configuration:
tools:
  jackhmmer: /home/administrator/anaconda3/envs/evcoupling/bin/jackhmmer
  plmc: /home/administrator/aaa/plmc-master/bin/plmc ",Yogesh1-11,https://github.com/debbiemarkslab/EVcouplings/issues/287
I_kwDOA82SmM5iIGDM,ResourceError: issue while running EVcouplings,CLOSED,2023-03-29T18:10:38Z,2023-05-11T11:05:43Z,2023-05-11T11:05:43Z,"Hi, 

I am trying to run EVcouplings using a custom sequence file as a database and getting this error:  ""ResourceError: Invalid status code (405) for URL: https://www.uniprot.org/mapping/"". I think the error might be at the SIFTS mapping step. I don't have the sifts_mapping_table and sifts_sequence_db, so I created a directory without any files in it.  The run completed the align and couplings steps but failed at the compare step. I also tried with downloading uniprot sequences and using the fasta file as a database but I am still getting the same error. I installed latest version of EVcouplings using pip and  the other dependencies either with using conda or manually as suggested in the README.md file. I have included the commands used to run the job, error message, the config file and the input sequence.

Thank you!
 
**Commands to run job**

`from evcouplings.utils import read_config_file
from evcouplings.utils.pipeline import execute

config = read_config_file(""test_config_monomer.txt"")
outcfg = execute(**config)`

**Config file:**
[test_config_monomer.txt](https://github.com/debbiemarkslab/EVcouplings/files/11104039/test_config_monomer.txt)

**Input sequence**
[SMOELLENDORFFII_test.txt](https://github.com/debbiemarkslab/EVcouplings/files/11104050/SMOELLENDORFFII_test.txt)


**Error:**
 /Users/bikash/miniforge3/envs/EV/lib/python3.8/site-packages/sklearn/base.py:432: UserWarning: X has feature names, but LogisticRegression was fitted without feature names
      warnings.warn(
    /Users/bikash/miniforge3/envs/EV/lib/python3.8/site-packages/sklearn/base.py:432: UserWarning: X has feature names, but LogisticRegression was fitted without feature names
      warnings.warn(
    /Users/bikash/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/couplings/pairs.py:125: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
      stacked_ecs = top_ecs.append(flipped)
    /Users/bikash/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/couplings/pairs.py:129: FutureWarning: The default value of numeric_only in DataFrameGroupBy.sum is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
      stacked_ecs.groupby([""i"", ""A_i""]).sum()
    /Users/bikash/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/visualize/parameters.py:137: RuntimeWarning: divide by zero encountered in log2
      B = -fi * np.log2(fi)
    /Users/bikash/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/visualize/parameters.py:137: RuntimeWarning: invalid value encountered in multiply
      B = -fi * np.log2(fi)



    ---------------------------------------------------------------------------

    ResourceError                             Traceback (most recent call last)

    Cell In[15], line 8
          5 from evcouplings.utils.pipeline import execute
          7 config = read_config_file(""test_config_monomer.txt"")
    ----> 8 outcfg = execute(**config)


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/utils/pipeline.py:187, in execute(**config)
        184 write_config_file(stage_incfg, incfg)
        186 # run stage
    --> 187 outcfg = runner(**incfg)
        189 # prefix output keys if this parameter is
        190 # given in stage configuration, to avoid
        191 # name clashes if same protocol run multiple times
        192 if key_prefix is not None:


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/compare/protocol.py:1250, in run(**kwargs)
       1242 if kwargs[""protocol""] not in PROTOCOLS:
       1243     raise InvalidParameterError(
       1244         ""Invalid protocol selection: "" +
       1245         ""{}. Valid protocols are: {}"".format(
       1246             kwargs[""protocol""], "", "".join(PROTOCOLS.keys())
       1247         )
       1248     )
    -> 1250 return PROTOCOLS[kwargs[""protocol""]](**kwargs)


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/compare/protocol.py:653, in standard(**kwargs)
        650 create_prefix_folders(aux_prefix)
        652 # Step 1: Identify 3D structures for comparison
    --> 653 sifts_map, sifts_map_full = _identify_structures(**{
        654     **kwargs,
        655     ""prefix"": aux_prefix,
        656 })
        658 # save selected PDB hits
        659 sifts_map.hits.to_csv(
        660     outcfg[""pdb_structure_hits_file""], index=True
        661 )


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/compare/protocol.py:152, in _identify_structures(**kwargs)
        137 check_required(
        138     kwargs,
        139     [
       (...)
        149     ]
        150 )
        151 # get SIFTS mapping object/sequence DB
    --> 152 s = SIFTS(
        153     kwargs[""sifts_mapping_table""],
        154     kwargs[""sifts_sequence_db""]
        155 )
        157 reduce_chains = not kwargs[""compare_multimer""]
        159 # determine if we need to find structures
        160 # by sequence search or just fetching
        161 # based on Uniprot/PDB identifier


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/compare/sifts.py:284, in SIFTS.__init__(self, sifts_table_file, sequence_file)
        282 # if path for sequence file given, but not there, create
        283 if sequence_file is not None and not valid_file(sequence_file):
    --> 284     self.create_sequence_file(sequence_file)
        286 # add Uniprot ID column if we have sequence mapping
        287 # from FASTA file
        288 if self.sequence_file is not None:


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/compare/sifts.py:448, in SIFTS.create_sequence_file(self, output_file, chunk_size, max_retries)
        446 while True:
        447     try:
    --> 448         seqs = fetch_uniprot_mapping(ch)
        449         break
        450     except requests.ConnectionError as e:
        451         # count as failed try


    File ~/miniforge3/envs/EV/lib/python3.8/site-packages/evcouplings/compare/sifts.py:105, in fetch_uniprot_mapping(ids, from_, to, format)
        102 r = requests.post(url, data=params)
        104 if r.status_code != requests.codes.ok:
    --> 105     raise ResourceError(
        106         ""Invalid status code ({}) for URL:{}"".format(
        107             r.status_code, url
        108         )
        109     )
        111 return r.text


    ResourceError: Invalid status code (405) for URL:https://www.uniprot.org/mapping/

",bshrestha0,https://github.com/debbiemarkslab/EVcouplings/issues/288
I_kwDOA82SmM5iOJ2j,Fix identifier storage in Alignment class,CLOSED,2023-03-30T15:43:55Z,2024-07-08T11:35:57Z,2024-07-08T11:35:57Z,"Currently memory usage is defined by longest identifier due to use of numpy for identifier storage, which can create a large overhead if one header is longer than others - but numpy functionality not that relevant on identifiers

Ideally, replace with pd.Series to keep slicing functionality while making use of better string memory management of pandas

@aaronkollasch ",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/289
I_kwDOA82SmM5jlH4h,Error at compare stage of EV couplings complex:  Unable to download and acess files from SIFT database,CLOSED,2023-04-17T08:29:02Z,2023-05-13T16:56:21Z,2023-05-10T16:33:24Z,"The configuration file runs till the coupling stage of the workflow. I guess there is a problem in downloading the SIFTS files. 
Pls find below the error message:
/home/sudha/anaconda3/lib/python3.7/site-packages/sklearn/utils/validation.py:37: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.
  LARGE_SPARSE_SUPPORTED = LooseVersion(scipy_version) >= '0.14.0'
/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/visualize/parameters.py:137: RuntimeWarning: divide by zero encountered in log2
  B = -fi * np.log2(fi)
/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/visualize/parameters.py:137: RuntimeWarning: invalid value encountered in multiply
  B = -fi * np.log2(fi)
Traceback (most recent call last):
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 1566, in ftp_open
    fw = self.connect_ftp(user, passwd, host, port, dirs, req.timeout)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 1588, in connect_ftp
    persistent=False)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 2408, in __init__
    self.init()
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 2417, in init
    self.ftp.connect(self.host, self.port, self.timeout)
  File ""/home/sudha/anaconda3/lib/python3.7/ftplib.py"", line 154, in connect
    source_address=self.source_address)
  File ""/home/sudha/anaconda3/lib/python3.7/socket.py"", line 728, in create_connection
    raise err
  File ""/home/sudha/anaconda3/lib/python3.7/socket.py"", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/sudha/anaconda3/bin/evcouplings_runcfg"", line 10, in <module>
    sys.exit(app())
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/click/core.py"", line 1128, in __call__
    return self.main(*args, **kwargs)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/click/core.py"", line 1053, in main
    rv = self.invoke(ctx)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/click/core.py"", line 1395, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/click/core.py"", line 754, in invoke
    return __callback(*args, **kwargs)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 583, in app
    outcfg = run(**kwargs)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 570, in run
    return execute_wrapped(**config)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 508, in execute_wrapped
    outcfg = execute(**config)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/utils/pipeline.py"", line 187, in execute
    outcfg = runner(**incfg)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/compare/protocol.py"", line 1250, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/compare/protocol.py"", line 961, in complex
    outcfg, first_sifts_map = _identify_monomer_structures(""first"", outcfg, first_aux_prefix)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/compare/protocol.py"", line 947, in _identify_monomer_structures
    prefix=aux_prefix
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/compare/protocol.py"", line 154, in _identify_structures
    kwargs[""sifts_sequence_db""]
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/compare/sifts.py"", line 268, in __init__
    self._create_mapping_table(sifts_table_file)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/compare/sifts.py"", line 334, in _create_mapping_table
    get_urllib(SIFTS_URL, temp_download_file)
  File ""/home/sudha/anaconda3/lib/python3.7/site-packages/evcouplings/utils/system.py"", line 300, in get_urllib
    with urllib.request.urlopen(url) as r, open(output_path, 'wb') as f:
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 222, in urlopen
    return opener.open(url, data, timeout)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 525, in open
    response = self._open(req, data)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 543, in _open
    '_open', req)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 503, in _call_chain
    result = func(*args)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 1584, in ftp_open
    raise exc.with_traceback(sys.exc_info()[2])
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 1566, in ftp_open
    fw = self.connect_ftp(user, passwd, host, port, dirs, req.timeout)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 1588, in connect_ftp
    persistent=False)
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 2408, in __init__
    self.init()
  File ""/home/sudha/anaconda3/lib/python3.7/urllib/request.py"", line 2417, in init
    self.ftp.connect(self.host, self.port, self.timeout)
  File ""/home/sudha/anaconda3/lib/python3.7/ftplib.py"", line 154, in connect
    source_address=self.source_address)
  File ""/home/sudha/anaconda3/lib/python3.7/socket.py"", line 728, in create_connection
    raise err
  File ""/home/sudha/anaconda3/lib/python3.7/socket.py"", line 716, in create_connection
    sock.connect(sa)
urllib.error.URLError: <urlopen error ftp error: ConnectionRefusedError(111, 'Connection refused')>
Segmentation fault (core dumped)

Pls find attached the config file. Only the path to SIFTS file has been provided. The file map and db are empty filenames. I was hoping that Evcouplings will automatically download the required SIFTS files and paste in the file path I had provided in the config file as follows:
    sifts_mapping_table: /home/sudha/WORK/programs/evcouplings_support_programs/sifts_map/map
    sifts_sequence_db: /home/sudha/WORK/programs/evcouplings_support_programs/sifts_seqdb/db
 
It will be great, if you could please fix this problem. 
[sample_config_complex.txt](https://github.com/debbiemarkslab/EVcouplings/files/11247957/sample_config_complex.txt)
",sudhabioinfo87,https://github.com/debbiemarkslab/EVcouplings/issues/290
I_kwDOA82SmM5k4HQe,Fix numpy str deprecations,CLOSED,2023-05-02T13:30:08Z,2024-07-08T11:35:57Z,2024-07-08T11:35:57Z,"in sequences_to_matrix
    matrix = np.empty((N, L), dtype=np.str)
AttributeError: module 'numpy' has no attribute 'str'.
`np.str` was a deprecated alias for the builtin `str`. To avoid this error in existing code, use `str` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.str_` here.
The aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:
    https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/291
I_kwDOA82SmM5lds-v,Fix plmc segfault handling,CLOSED,2023-05-09T15:35:59Z,2024-07-08T11:35:58Z,2024-07-08T11:35:58Z,"https://github.com/debbiemarkslab/EVcouplings/blob/af27842c5fc72c291831261c9a19849a3e313efd/evcouplings/couplings/tools.py#L268

if output not present, raises KeyError for ""optimization"" key - either remove segfault special handling altogether, or check for valid output first and raise otherwise",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/292
I_kwDOA82SmM5lkMNp,Update YAML loading code,CLOSED,2023-05-10T13:52:18Z,2024-07-08T11:42:23Z,2024-07-08T11:42:23Z,"See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  singles[""segment""] = np.nan
.E./home/runner/work/EVcouplings/EVcouplings/evcouplings/utils/config.py:47: PendingDeprecationWarning: 
load will be removed, use

  yaml=YAML(typ='unsafe', pure=True)
  yaml.load(...)

instead
  return yaml.load(config_str, Loader=yaml.RoundTripLoader)",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/294
I_kwDOA82SmM5ojOxN,Error in  evcouplings_dbupdate,OPEN,2023-06-13T05:25:53Z,2023-06-13T05:33:51Z,,"I am trying to use  ""evcouplings_dbupdate"" command, but when I am using ""evcouplings_dbupdate -s sifts_op"" it is showing error ""Aborted""? 



",Agarwalvidhu,https://github.com/debbiemarkslab/EVcouplings/issues/295
I_kwDOA82SmM5o0ivb,"The 'sklearn' PyPI package is deprecated, use 'scikit-learn' error",CLOSED,2023-06-15T11:17:07Z,2024-07-08T11:42:06Z,2024-07-08T11:42:06Z,I sometimes get this error when installing evcouplings via pip.,fbalo-medium,https://github.com/debbiemarkslab/EVcouplings/issues/296
I_kwDOA82SmM5powcu,"Complex Pipeline still Coupling Successful, but after ended with an runtime error",OPEN,2023-06-23T23:24:12Z,2023-06-23T23:24:12Z,,"/home/administrator/.local/lib/python3.10/site-packages/evcouplings/visualize/parameters.py:137: RuntimeWarning: divide by zero encountered in log2
  B = -fi * np.log2(fi)
/home/administrator/.local/lib/python3.10/site-packages/evcouplings/visualize/parameters.py:137: RuntimeWarning: invalid value encountered in multiply
  B = -fi * np.log2(fi)
Traceback (most recent call last):
  File ""/home/administrator/.local/bin/evcouplings_runcfg"", line 8, in <module>
    sys.exit(app())
  File ""/usr/lib/python3/dist-packages/click/core.py"", line 1128, in __call__
    return self.main(*args, **kwargs)
  File ""/usr/lib/python3/dist-packages/click/core.py"", line 1053, in main
    rv = self.invoke(ctx)
  File ""/usr/lib/python3/dist-packages/click/core.py"", line 1395, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/usr/lib/python3/dist-packages/click/core.py"", line 754, in invoke
    return __callback(*args, **kwargs)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/utils/pipeline.py"", line 583, in app
    outcfg = run(**kwargs)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/utils/pipeline.py"", line 570, in run
    return execute_wrapped(**config)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/utils/pipeline.py"", line 508, in execute_wrapped
    outcfg = execute(**config)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/utils/pipeline.py"", line 187, in execute
    outcfg = runner(**incfg)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/compare/protocol.py"", line 1250, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/compare/protocol.py"", line 961, in complex
    outcfg, first_sifts_map = _identify_monomer_structures(""first"", outcfg, first_aux_prefix)
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/compare/protocol.py"", line 945, in _identify_monomer_structures
    sifts_map, sifts_map_full = _identify_structures(
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/compare/protocol.py"", line 152, in _identify_structures
    s = SIFTS(
  File ""/home/administrator/.local/lib/python3.10/site-packages/evcouplings/compare/sifts.py"", line 341, in __init__
    self.table = pd.read_csv(
  File ""/usr/local/lib/python3.10/dist-packages/pandas/util/_decorators.py"", line 311, in wrapper
    return func(*args, **kwargs)
  File ""/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py"", line 680, in read_csv
    return _read(filepath_or_buffer, kwds)
  File ""/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py"", line 575, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
  File ""/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py"", line 934, in __init__
    self._engine = self._make_engine(f, self.engine)
  File ""/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py"", line 1218, in _make_engine
    self.handles = get_handle(  # type: ignore[call-overload]
  File ""/usr/local/lib/python3.10/dist-packages/pandas/io/common.py"", line 667, in get_handle
    ioargs = _get_filepath_or_buffer(
  File ""/usr/local/lib/python3.10/dist-packages/pandas/io/common.py"", line 424, in _get_filepath_or_buffer
    raise ValueError(msg)
ValueError: Invalid file path or buffer object type: <class 'NoneType'>
",Prasanth-Kumar87,https://github.com/debbiemarkslab/EVcouplings/issues/297
I_kwDOA82SmM5sMB9V,SIFTS,OPEN,2023-07-21T03:23:44Z,2023-07-30T13:48:08Z,,I have been downloading the SIFTS dataset for two days now in order to calculate the contact matrix through multiple sequence alignment. How long does it usually take to download this dataset?,t9lex,https://github.com/debbiemarkslab/EVcouplings/issues/298
I_kwDOA82SmM5tE2q4,PermissionError when rerunning a job,CLOSED,2023-07-31T20:35:48Z,2024-01-25T13:41:42Z,2024-01-25T13:41:41Z,"Hi there,
I'm getting the following error when rerunning a job:

```python
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_dev_test/lib/python3.8/site-packages/evcouplings/align/protocol.py"", line 1063, in jackhmmer_search
    full_seq_file, (full_seq_id, full_seq) = fetch_sequence(
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_dev_test/lib/python3.8/site-packages/evcouplings/align/protocol.py"", line 218, in fetch_sequence
    copy(sequence_file, out_file)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_dev_test/lib/python3.8/shutil.py"", line 416, in copy
    copymode(src, dst, follow_symlinks=follow_symlinks)
  File ""/n/groups/marks/software/anaconda_o2/envs/evcouplings_dev_test/lib/python3.8/shutil.py"", line 305, in copymode
    chmod_func(dst, stat.S_IMODE(st.st_mode))
PermissionError: [Errno 13] Permission denied: 'PHOT_CHLRE/PHOT_CHLRE_b01/align/PHOT_CHLRE_b01_full.fa'
```

This might just be an error on O2 though.
Either way:
It seems like the error is avoided when using shutil.copyfile() (which doesn't copy file metadata) - would it be possible to switch to this if possible?
https://github.com/debbiemarkslab/EVcouplings/blob/af27842c5fc72c291831261c9a19849a3e313efd/evcouplings/align/protocol.py#L219 ",loodvn,https://github.com/debbiemarkslab/EVcouplings/issues/299
I_kwDOA82SmM51z4vl,"""load()"" has been removed, use yaml",CLOSED,2023-11-03T16:21:16Z,2024-07-08T11:40:28Z,2024-07-08T11:40:28Z,"Getting this error on any new run now on python 3.8 >
I think this majorly has to do with latest update from ruamel.yaml to version 0.18.5.",fbalo-medium,https://github.com/debbiemarkslab/EVcouplings/issues/303
I_kwDOA82SmM56NhZl,ResourceError when running evcouplings_dbupdate,OPEN,2023-12-20T11:27:25Z,2023-12-21T08:45:25Z,,"Hi. I am getting a ResourceError with uniprot when trying to run evcouplings_dbupdate:

/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/click/core.py:754: DtypeWarning: Columns (6) have mixed types.Specify dtype option on import or set low_memory=False.
  return __callback(*args, **kwargs)
Traceback (most recent call last):
  File ""/home/mario/miniconda3/envs/pydca/bin/evcouplings_dbupdate"", line 8, in <module>
    sys.exit(app())
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/click/core.py"", line 1128, in __call__
    return self.main(*args, **kwargs)
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/click/core.py"", line 1053, in main
    rv = self.invoke(ctx)
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/click/core.py"", line 1395, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/click/core.py"", line 754, in invoke
    return __callback(*args, **kwargs)
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/evcouplings/utils/update_database.py"", line 189, in app
    run(**kwargs)
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/evcouplings/utils/update_database.py"", line 132, in run
    s_new.create_sequence_file(sifts.format(year=year, month=month, day=day, extension=""fasta""))
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/evcouplings/compare/sifts.py"", line 448, in create_sequence_file
    seqs = fetch_uniprot_mapping(ch)
  File ""/home/mario/miniconda3/envs/pydca/lib/python3.6/site-packages/evcouplings/compare/sifts.py"", line 107, in fetch_uniprot_mapping
    r.status_code, url
evcouplings.utils.system.ResourceError: Invalid status code (405) for URL:https://www.uniprot.org/mapping/

It seems that https://www.uniprot.org/mapping/ does not exist. What would be the current web source? Thanks!",MarioAsti8,https://github.com/debbiemarkslab/EVcouplings/issues/304
I_kwDOA82SmM58lVlR,raise ExternalToolError(evcouplings.utils.system.ExternalToolError: Call failed),CLOSED,2024-01-19T10:10:18Z,2024-01-25T13:36:19Z,2024-01-25T13:36:19Z,"Hi, I have been running EVcouplings (just the align stage) for a larger set of short protein domains (50-80aa) and a small subset of those end with an error as follows:

```
Traceback (most recent call last):
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/utils/pipeline.py"", line 508, in execute_wrapped
    outcfg = execute(**config)
             ^^^^^^^^^^^^^^^^^
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/utils/pipeline.py"", line 187, in execute
    outcfg = runner(**incfg)
             ^^^^^^^^^^^^^^^
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/align/protocol.py"", line 1708, in run
    return PROTOCOLS[kwargs[""protocol""]](**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/align/protocol.py"", line 1489, in standard
    jackhmmer_outcfg = jackhmmer_search(**kwargs)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/align/protocol.py"", line 1116, in jackhmmer_search
    ali = at.run_jackhmmer(
          ^^^^^^^^^^^^^^^^^
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/align/tools.py"", line 356, in run_jackhmmer
    return_code, stdout, stderr = run(cmd)
                                  ^^^^^^^^
  File ""/users/blehner/mtopolska/miniconda3/envs/EVcouplings/lib/python3.11/site-packages/evcouplings/utils/system.py"", line 74, in run
    raise ExternalToolError(
evcouplings.utils.system.ExternalToolError: Call failed:
cmd=['/users/project/prj004631/mtopolska/predictors/hmmer/hmmer-3.4/src/jackhmmer', '-N', '5', '-o', '/users/project/prj004631/mtopolska/predictors/EVcouplings/output/final_job_array/resubmitted_failed/2LYR/align/2LYR.output', '-A', '/users/project/prj004631/mtopolska/predictors/EVcouplings/output/final_job_array/resubmitted_failed/2LYR/align/2LYR.sto', '--tblout', '/users/project/prj004631/mtopolska/predictors/EVcouplings/output/final_job_array/resubmitted_failed/2LYR/align/2LYR.tblout', '--domtblout', '/users/project/prj004631/mtopolska/predictors/EVcouplings/output/final_job_array/resubmitted_failed/2LYR/align/2LYR.domtblout', '--noali', '--notextw', '-T', '31.0', '--domT', '31.0', '--incT', '31.0', '--incdomT', '31.0', '--cpu', '10', '/users/project/prj004631/mtopolska/predictors/EVcouplings/output/final_job_array/resubmitted_failed/2LYR/align/2LYR.fa', '/nfs/db/uniprot/2023_03/uniref/uniref100/blast/db/uniref100.fasta']
returncode=-9
stdout=
stderr=
2LYR.failed (END)
```

I cant really figure out what the issue might be, I would appreciate your insight. 
Best, 
Magda",mtopolska,https://github.com/debbiemarkslab/EVcouplings/issues/305
I_kwDOA82SmM6OY0UF,UserWarning and RuntimeWarning when running align and couplings,CLOSED,2024-07-03T15:04:24Z,2024-11-05T11:38:20Z,2024-11-05T11:38:20Z,"I'm running `align` and `couplings` and the job seems to complete successfully but gives multiple warnings. Can you suggest how to avoid these warnings?

```
/home/joel/micromamba/envs/evc/lib/python3.7/site-packages/sklearn/base.py:444: UserWarning: X has feature names, but LogisticRegression was fitted without feature names
  f""X has feature names, but {self.__class__.__name__} was fitted without""
/home/joel/micromamba/envs/evc/lib/python3.7/site-packages/sklearn/base.py:444: UserWarning: X has feature names, but LogisticRegression was fitted without feature names
  f""X has feature names, but {self.__class__.__name__} was fitted without""
/home/joel/git/EVcouplings/evcouplings/visualize/parameters.py:137: RuntimeWarning: divide by zero encountered in log2
  B = -fi * np.log2(fi)
/home/joel/git/EVcouplings/evcouplings/visualize/parameters.py:137: RuntimeWarning: invalid value encountered in multiply
  B = -fi * np.log2(fi)
```",joelmeyerson,https://github.com/debbiemarkslab/EVcouplings/issues/306
I_kwDOA82SmM6OfbSZ,PDB no longer provides MMTF files,CLOSED,2024-07-04T11:10:28Z,2024-11-05T11:38:01Z,2024-11-05T11:38:01Z,"In trying to run the EVcouplings pipeline, I couldn't download the MMTF files needed. Then I found the following message from RCSB:

""As of July 2, 2024, RCSB PDB will no longer serve PDB data in the MMTF compression format. Users are strongly encouraged to switch to accessing the data files offered in the [compressed BinaryCIF (BCIF) format.](https://www.rcsb.org/docs/programmatic-access/file-download-services#pdb-entry-files)""

I don't have the expertise to suggest changes, but wanted to keep this record in case anyone finds the same issue.",pedrobfer,https://github.com/debbiemarkslab/EVcouplings/issues/307
I_kwDOA82SmM6Spvax,install problem,CLOSED,2024-08-12T08:58:25Z,2024-11-05T11:37:30Z,2024-11-05T11:37:30Z,"Hello, I'm just getting started with evcouplings. When Itry to install the package I get the following error.

Collecting sklearn (from evcouplings)
  Using cached sklearn-0.0.post12.tar.gz (2.6 kB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... error
  error: subprocess-exited-with-error
  
   Getting requirements to build wheel did not run successfully.
   exit code: 1
  > [15 lines of output]
      The 'sklearn' PyPI package is deprecated, use 'scikit-learn'
      rather than 'sklearn' for pip commands.
      
      Here is how to fix this error in the main use cases:
      - use 'pip install scikit-learn' rather than 'pip install sklearn'
      - replace 'sklearn' by 'scikit-learn' in your pip requirements files
        (requirements.txt, setup.py, setup.cfg, Pipfile, etc ...)
      - if the 'sklearn' package is used by one of your dependencies,
        it would be great if you take some time to track which package uses
        'sklearn' instead of 'scikit-learn' and report it to their issue tracker
      - as a last resort, set the environment variable
        SKLEARN_ALLOW_DEPRECATED_SKLEARN_PACKAGE_INSTALL=True to avoid this error
      
      More information is available at
      https://github.com/scikit-learn/sklearn-pypi-package
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
error: subprocess-exited-with-error

 Getting requirements to build wheel did not run successfully.
 exit code: 1
> See above for output.

note: This error originates from a subprocess, and is likely not a problem with pip

The package sklearn is deprecated for a while now. I'm trying this on python 3.12.

Regards  ",ChristophKnapp,https://github.com/debbiemarkslab/EVcouplings/issues/309
I_kwDOA82SmM6SsWTz,Release v0.2 version of EVCouplings,CLOSED,2024-08-12T14:02:56Z,2024-11-05T11:36:56Z,2024-11-05T11:36:56Z,"Hi

Appreciate the great work!

Recently, we noticed the v0.2 tag from your Github repository has been removed, which we were using in a venv for some of the latest fixes. We would prefer not to specify the develop branch as a dependency due to the possibility of breaking changes being introduced in the future.

I think the solution to remedy this would be to release the version you currently have defined as 0.2 in your setup.py to PyPI, which is currently still just version 0.1.1. Would you be able to release a version 0.2.0 to make using this tool more reproducible?

Thank you",rmaguire31,https://github.com/debbiemarkslab/EVcouplings/issues/310
I_kwDOA82SmM6YKxtY,"build_test_and_push github action fails, preventing new release",CLOSED,2024-09-27T13:32:33Z,2024-11-05T11:30:07Z,2024-11-05T11:30:06Z,"Run fails here: https://github.com/debbiemarkslab/EVcouplings/blob/88978eeefd9520c7c48fecb15d5a5879704d1d58/.github/workflows/build_test_and_push.yml#L34

with the following error message:

> usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
>    or: setup.py --help [cmd1 cmd2 ...]
>    or: setup.py --help-commands
>    or: setup.py cmd --help
> 
> error: invalid command 'bdist_wheel'

Problematic line was added in this commit: https://github.com/debbiemarkslab/EVcouplings/commit/55ccdf5af7eadd0d085f17d3c5e20a0bb00900a8

Strangely enough, according to the install log, the environment has `wheel-0.44.0 `

@zachcp Could you comment why this was added? Can we simply remove it again?",thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/314
I_kwDOA82SmM6dD2aY,Review a3m parsing code,CLOSED,2024-11-05T10:21:05Z,2024-11-27T13:09:28Z,2024-11-27T13:09:28Z,,thomashopf,https://github.com/debbiemarkslab/EVcouplings/issues/316
I_kwDOA82SmM6i0tE0,Running evcouplings on a cluster without network access,OPEN,2024-12-11T03:25:58Z,2024-12-14T00:02:24Z,,"Hi,

I am planning to run evcouplings on a cluster that does not have network access. Could you please advise on the best approach to prepare the necessary data for running the tool in an offline environment?

Should I download the MMTF files in advance and store them in a folder (e.g., pdb_mmtf_dir in config file )? Alternatively, is it preferable to download the BCIF files or the BCIF.gz compressed files instead?

Any guidance on how to prepare the data files for offline use would be greatly appreciated!

Thanks!",ld139,https://github.com/debbiemarkslab/EVcouplings/issues/322
